<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Impala: impala::Statestore::Topic Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Impala
   </div>
   <div id="projectbrief">Impalaistheopensource,nativeanalyticdatabaseforApacheHadoop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classimpala_1_1Statestore_1_1Topic.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classimpala_1_1Statestore_1_1Topic-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">impala::Statestore::Topic Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for impala::Statestore::Topic:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classimpala_1_1Statestore_1_1Topic__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad96453d1864f0283e17da391a23bbaef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#ad96453d1864f0283e17da391a23bbaef">Topic</a> (const <a class="el" href="classimpala_1_1Statestore.html#aa0a261a02804c62cb4b204a498e2e3ed">TopicId</a> &amp;topic_id, <a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a> *key_size_metric, <a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a> *value_size_metric, <a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a> *topic_size_metric)</td></tr>
<tr class="separator:ad96453d1864f0283e17da391a23bbaef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f8eea8bc411392a68d0ba4cabaa7028"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Statestore_1_1TopicEntry.html#a4bc848a4229fb6a8e906a8788e386d0a">TopicEntry::Version</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#a6f8eea8bc411392a68d0ba4cabaa7028">Put</a> (const <a class="el" href="classimpala_1_1Statestore.html#a148294b3de37014d88d0758da0b39f9e">TopicEntryKey</a> &amp;key, const <a class="el" href="classimpala_1_1Statestore_1_1TopicEntry.html#a43085f84205d13813d549edca5b2b5f1">TopicEntry::Value</a> &amp;bytes)</td></tr>
<tr class="memdesc:a6f8eea8bc411392a68d0ba4cabaa7028"><td class="mdescLeft">&#160;</td><td class="mdescRight">Must be called holding the topic lock.  <a href="#a6f8eea8bc411392a68d0ba4cabaa7028">More...</a><br/></td></tr>
<tr class="separator:a6f8eea8bc411392a68d0ba4cabaa7028"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a1c4f84f17fa20620e1399328d4ada1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#a6a1c4f84f17fa20620e1399328d4ada1">DeleteIfVersionsMatch</a> (<a class="el" href="classimpala_1_1Statestore_1_1TopicEntry.html#a4bc848a4229fb6a8e906a8788e386d0a">TopicEntry::Version</a> version, const <a class="el" href="classimpala_1_1Statestore.html#a148294b3de37014d88d0758da0b39f9e">TopicEntryKey</a> &amp;key)</td></tr>
<tr class="memdesc:a6a1c4f84f17fa20620e1399328d4ada1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Must be called holding the topic lock.  <a href="#a6a1c4f84f17fa20620e1399328d4ada1">More...</a><br/></td></tr>
<tr class="separator:a6a1c4f84f17fa20620e1399328d4ada1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91c1d1a7c8154e67e1b00b14688ca253"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classimpala_1_1Statestore.html#aa0a261a02804c62cb4b204a498e2e3ed">TopicId</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#a91c1d1a7c8154e67e1b00b14688ca253">id</a> () const </td></tr>
<tr class="separator:a91c1d1a7c8154e67e1b00b14688ca253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae48814ae131eed38d82dde83ec060618"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classimpala_1_1Statestore.html#a50e27d3eb1638a93dc67f0eb3c469604">TopicEntryMap</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#ae48814ae131eed38d82dde83ec060618">entries</a> () const </td></tr>
<tr class="separator:ae48814ae131eed38d82dde83ec060618"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9fde1ee2cf603d6dcceb823d29d103a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Statestore_1_1TopicEntry.html#a4bc848a4229fb6a8e906a8788e386d0a">TopicEntry::Version</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#ad9fde1ee2cf603d6dcceb823d29d103a">last_version</a> () const </td></tr>
<tr class="separator:ad9fde1ee2cf603d6dcceb823d29d103a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66962e0e81300a89c78016cc063e4b81"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classimpala_1_1Statestore.html#aeca08620cc2431de3037a8d9c56d4491">TopicUpdateLog</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#a66962e0e81300a89c78016cc063e4b81">topic_update_log</a> () const </td></tr>
<tr class="separator:a66962e0e81300a89c78016cc063e4b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a713713b3acd899b651f1decd0979b9df"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#a713713b3acd899b651f1decd0979b9df">total_key_size_bytes</a> () const </td></tr>
<tr class="separator:a713713b3acd899b651f1decd0979b9df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a335b6ddf994cd2400eaf09ea01fa001a"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#a335b6ddf994cd2400eaf09ea01fa001a">total_value_size_bytes</a> () const </td></tr>
<tr class="separator:a335b6ddf994cd2400eaf09ea01fa001a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3ae8cf4fb50ec82d873ee6548e006e7e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Statestore.html#a50e27d3eb1638a93dc67f0eb3c469604">TopicEntryMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#a3ae8cf4fb50ec82d873ee6548e006e7e">entries_</a></td></tr>
<tr class="memdesc:a3ae8cf4fb50ec82d873ee6548e006e7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map from topic entry key to topic entry.  <a href="#a3ae8cf4fb50ec82d873ee6548e006e7e">More...</a><br/></td></tr>
<tr class="separator:a3ae8cf4fb50ec82d873ee6548e006e7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad87af0677174d6c3024523a38a984183"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classimpala_1_1Statestore.html#aa0a261a02804c62cb4b204a498e2e3ed">TopicId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#ad87af0677174d6c3024523a38a984183">topic_id_</a></td></tr>
<tr class="memdesc:ad87af0677174d6c3024523a38a984183"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unique identifier for this topic. Should be human-readable.  <a href="#ad87af0677174d6c3024523a38a984183">More...</a><br/></td></tr>
<tr class="separator:ad87af0677174d6c3024523a38a984183"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cd28d730845be90c56a21fb83de38d2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Statestore_1_1TopicEntry.html#a4bc848a4229fb6a8e906a8788e386d0a">TopicEntry::Version</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#a4cd28d730845be90c56a21fb83de38d2">last_version_</a></td></tr>
<tr class="separator:a4cd28d730845be90c56a21fb83de38d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb848a36c94cba0c2b14809821a53297"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Statestore.html#aeca08620cc2431de3037a8d9c56d4491">TopicUpdateLog</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#abb848a36c94cba0c2b14809821a53297">topic_update_log_</a></td></tr>
<tr class="separator:abb848a36c94cba0c2b14809821a53297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a429edcac0bc1dce23a67583e351f833a"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#a429edcac0bc1dce23a67583e351f833a">total_key_size_bytes_</a></td></tr>
<tr class="memdesc:a429edcac0bc1dce23a67583e351f833a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total memory occupied by the key strings, in bytes.  <a href="#a429edcac0bc1dce23a67583e351f833a">More...</a><br/></td></tr>
<tr class="separator:a429edcac0bc1dce23a67583e351f833a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9afc866cf318bd60256e29c5a77ead6"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#af9afc866cf318bd60256e29c5a77ead6">total_value_size_bytes_</a></td></tr>
<tr class="memdesc:af9afc866cf318bd60256e29c5a77ead6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total memory occupied by the value byte strings, in bytes.  <a href="#af9afc866cf318bd60256e29c5a77ead6">More...</a><br/></td></tr>
<tr class="separator:af9afc866cf318bd60256e29c5a77ead6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb012182c8351ef4b2f07c4b496a1959"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#acb012182c8351ef4b2f07c4b496a1959">key_size_metric_</a></td></tr>
<tr class="memdesc:acb012182c8351ef4b2f07c4b496a1959"><td class="mdescLeft">&#160;</td><td class="mdescRight">Metrics shared across all topics to sum the size in bytes of keys, values and both.  <a href="#acb012182c8351ef4b2f07c4b496a1959">More...</a><br/></td></tr>
<tr class="separator:acb012182c8351ef4b2f07c4b496a1959"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac06d965e74c1ecd095f85e94778d1fdf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#ac06d965e74c1ecd095f85e94778d1fdf">value_size_metric_</a></td></tr>
<tr class="separator:ac06d965e74c1ecd095f85e94778d1fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1167ae369af0adbec05e6f606b3be13b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html#a1167ae369af0adbec05e6f606b3be13b">topic_size_metric_</a></td></tr>
<tr class="separator:a1167ae369af0adbec05e6f606b3be13b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A <a class="el" href="classimpala_1_1Statestore_1_1Topic.html">Topic</a> is logically a map between a string key and a sequence of bytes. A &lt;string, bytes&gt; pair is a <a class="el" href="classimpala_1_1Statestore_1_1TopicEntry.html">TopicEntry</a>. Each topic has a unique version number that tracks the number of updates made to the topic. This is to support sending only the delta of changes on every update. </p>

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00178">178</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad96453d1864f0283e17da391a23bbaef"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">impala::Statestore::Topic::Topic </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classimpala_1_1Statestore.html#aa0a261a02804c62cb4b204a498e2e3ed">TopicId</a> &amp;&#160;</td>
          <td class="paramname"><em>topic_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a> *&#160;</td>
          <td class="paramname"><em>key_size_metric</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a> *&#160;</td>
          <td class="paramname"><em>value_size_metric</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a> *&#160;</td>
          <td class="paramname"><em>topic_size_metric</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00180">180</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a6a1c4f84f17fa20620e1399328d4ada1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Statestore::Topic::DeleteIfVersionsMatch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1Statestore_1_1TopicEntry.html#a4bc848a4229fb6a8e906a8788e386d0a">TopicEntry::Version</a>&#160;</td>
          <td class="paramname"><em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classimpala_1_1Statestore.html#a148294b3de37014d88d0758da0b39f9e">TopicEntryKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Must be called holding the topic lock. </p>
<p>Utility method to support removing transient entries. We track the version numbers of entries added by subscribers, and remove entries with the same version number when that subscriber fails (the same entry may exist, but may have been updated by another subscriber giving it a new version number) Deletion means setting the entry's value to NULL and incrementing its version number. </p>

<p>Definition at line <a class="el" href="statestore_8cc_source.html#l00158">158</a> of file <a class="el" href="statestore_8cc_source.html">statestore.cc</a>.</p>

<p>References <a class="el" href="hash-table_8cc_source.html#l00068">NULL_VALUE</a>.</p>

</div>
</div>
<a class="anchor" id="ae48814ae131eed38d82dde83ec060618"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classimpala_1_1Statestore.html#a50e27d3eb1638a93dc67f0eb3c469604">TopicEntryMap</a>&amp; impala::Statestore::Topic::entries </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00205">205</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

<p>References <a class="el" href="statestore_8h_source.html#l00213">entries_</a>.</p>

<p>Referenced by <a class="el" href="statestore_8cc_source.html#l00484">impala::Statestore::GatherTopicUpdates()</a>.</p>

</div>
</div>
<a class="anchor" id="a91c1d1a7c8154e67e1b00b14688ca253"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classimpala_1_1Statestore.html#aa0a261a02804c62cb4b204a498e2e3ed">TopicId</a>&amp; impala::Statestore::Topic::id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00204">204</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

<p>References <a class="el" href="statestore_8h_source.html#l00216">topic_id_</a>.</p>

</div>
</div>
<a class="anchor" id="ad9fde1ee2cf603d6dcceb823d29d103a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Statestore_1_1TopicEntry.html#a4bc848a4229fb6a8e906a8788e386d0a">TopicEntry::Version</a> impala::Statestore::Topic::last_version </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00206">206</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

<p>References <a class="el" href="statestore_8h_source.html#l00220">last_version_</a>.</p>

<p>Referenced by <a class="el" href="statestore_8cc_source.html#l00484">impala::Statestore::GatherTopicUpdates()</a>.</p>

</div>
</div>
<a class="anchor" id="a6f8eea8bc411392a68d0ba4cabaa7028"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Statestore_1_1TopicEntry.html#a4bc848a4229fb6a8e906a8788e386d0a">Statestore::TopicEntry::Version</a> Statestore::Topic::Put </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classimpala_1_1Statestore.html#a148294b3de37014d88d0758da0b39f9e">TopicEntryKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classimpala_1_1Statestore_1_1TopicEntry.html#a43085f84205d13813d549edca5b2b5f1">TopicEntry::Value</a> &amp;&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Must be called holding the topic lock. </p>
<p>Adds an entry with the given key. If bytes == NULL_VALUE, the entry is considered deleted, and may be garbage collected in the future. The entry is assigned a new version number by the <a class="el" href="classimpala_1_1Statestore_1_1Topic.html">Topic</a>, and that version number is returned. </p>

<p>Definition at line <a class="el" href="statestore_8cc_source.html#l00127">127</a> of file <a class="el" href="statestore_8cc_source.html">statestore.cc</a>.</p>

<p>Referenced by <a class="el" href="statestore_8cc_source.html#l00399">impala::Statestore::SendTopicUpdate()</a>.</p>

</div>
</div>
<a class="anchor" id="a66962e0e81300a89c78016cc063e4b81"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classimpala_1_1Statestore.html#aeca08620cc2431de3037a8d9c56d4491">TopicUpdateLog</a>&amp; impala::Statestore::Topic::topic_update_log </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00207">207</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

<p>References <a class="el" href="statestore_8h_source.html#l00230">topic_update_log_</a>.</p>

<p>Referenced by <a class="el" href="statestore_8cc_source.html#l00484">impala::Statestore::GatherTopicUpdates()</a>.</p>

</div>
</div>
<a class="anchor" id="a713713b3acd899b651f1decd0979b9df"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::Statestore::Topic::total_key_size_bytes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00208">208</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

<p>References <a class="el" href="statestore_8h_source.html#l00233">total_key_size_bytes_</a>.</p>

<p>Referenced by <a class="el" href="statestore_8cc_source.html#l00484">impala::Statestore::GatherTopicUpdates()</a>.</p>

</div>
</div>
<a class="anchor" id="a335b6ddf994cd2400eaf09ea01fa001a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::Statestore::Topic::total_value_size_bytes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00209">209</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

<p>References <a class="el" href="statestore_8h_source.html#l00236">total_value_size_bytes_</a>.</p>

<p>Referenced by <a class="el" href="statestore_8cc_source.html#l00484">impala::Statestore::GatherTopicUpdates()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a3ae8cf4fb50ec82d873ee6548e006e7e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Statestore.html#a50e27d3eb1638a93dc67f0eb3c469604">TopicEntryMap</a> impala::Statestore::Topic::entries_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map from topic entry key to topic entry. </p>

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00213">213</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

<p>Referenced by <a class="el" href="statestore_8h_source.html#l00205">entries()</a>.</p>

</div>
</div>
<a class="anchor" id="acb012182c8351ef4b2f07c4b496a1959"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a>* impala::Statestore::Topic::key_size_metric_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Metrics shared across all topics to sum the size in bytes of keys, values and both. </p>

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00239">239</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4cd28d730845be90c56a21fb83de38d2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Statestore_1_1TopicEntry.html#a4bc848a4229fb6a8e906a8788e386d0a">TopicEntry::Version</a> impala::Statestore::Topic::last_version_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tracks the last version that was assigned to an entry in this <a class="el" href="classimpala_1_1Statestore_1_1Topic.html">Topic</a>. Incremented on every <a class="el" href="classimpala_1_1Statestore_1_1Topic.html#a6f8eea8bc411392a68d0ba4cabaa7028" title="Must be called holding the topic lock. ">Put()</a> so each <a class="el" href="classimpala_1_1Statestore_1_1TopicEntry.html">TopicEntry</a> is tagged with a unique version value. </p>

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00220">220</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

<p>Referenced by <a class="el" href="statestore_8h_source.html#l00206">last_version()</a>.</p>

</div>
</div>
<a class="anchor" id="ad87af0677174d6c3024523a38a984183"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classimpala_1_1Statestore.html#aa0a261a02804c62cb4b204a498e2e3ed">TopicId</a> impala::Statestore::Topic::topic_id_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unique identifier for this topic. Should be human-readable. </p>

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00216">216</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

<p>Referenced by <a class="el" href="statestore_8h_source.html#l00204">id()</a>.</p>

</div>
</div>
<a class="anchor" id="a1167ae369af0adbec05e6f606b3be13b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a>* impala::Statestore::Topic::topic_size_metric_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00241">241</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

</div>
</div>
<a class="anchor" id="abb848a36c94cba0c2b14809821a53297"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Statestore.html#aeca08620cc2431de3037a8d9c56d4491">TopicUpdateLog</a> impala::Statestore::Topic::topic_update_log_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Contains a history of updates to this <a class="el" href="classimpala_1_1Statestore_1_1Topic.html">Topic</a>, with each key being a Version and the value being a TopicEntryKey. Used to look up the <a class="el" href="classimpala_1_1Statestore_1_1TopicEntry.html">TopicEntry</a> in the entries_ map corresponding to each version update. TODO: Looking up a <a class="el" href="classimpala_1_1Statestore_1_1TopicEntry.html">TopicEntry</a> from the topic_update_log_ requires two reads - one to get the TopicEntryKey and another to use that key to look up the corresponding <a class="el" href="classimpala_1_1Statestore_1_1TopicEntry.html">TopicEntry</a> in the entries_ map. Based on performance needs, we may need to revisit this to find a way to do the look up using a single read. </p>

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00230">230</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

<p>Referenced by <a class="el" href="statestore_8h_source.html#l00207">topic_update_log()</a>.</p>

</div>
</div>
<a class="anchor" id="a429edcac0bc1dce23a67583e351f833a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::Statestore::Topic::total_key_size_bytes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Total memory occupied by the key strings, in bytes. </p>

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00233">233</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

<p>Referenced by <a class="el" href="statestore_8h_source.html#l00208">total_key_size_bytes()</a>.</p>

</div>
</div>
<a class="anchor" id="af9afc866cf318bd60256e29c5a77ead6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::Statestore::Topic::total_value_size_bytes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Total memory occupied by the value byte strings, in bytes. </p>

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00236">236</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

<p>Referenced by <a class="el" href="statestore_8h_source.html#l00209">total_value_size_bytes()</a>.</p>

</div>
</div>
<a class="anchor" id="ac06d965e74c1ecd095f85e94778d1fdf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a>* impala::Statestore::Topic::value_size_metric_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="statestore_8h_source.html#l00240">240</a> of file <a class="el" href="statestore_8h_source.html">statestore.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>be/src/statestore/<a class="el" href="statestore_8h_source.html">statestore.h</a></li>
<li>be/src/statestore/<a class="el" href="statestore_8cc_source.html">statestore.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceimpala.html">impala</a></li><li class="navelem"><a class="el" href="classimpala_1_1Statestore.html">Statestore</a></li><li class="navelem"><a class="el" href="classimpala_1_1Statestore_1_1Topic.html">Topic</a></li>
    <li class="footer">Generated on Thu May 7 2015 16:10:50 for Impala by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
