<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Impala: impala::RleEncoder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Impala
   </div>
   <div id="projectbrief">Impalaistheopensource,nativeanalyticdatabaseforApacheHadoop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classimpala_1_1RleEncoder.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classimpala_1_1RleEncoder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">impala::RleEncoder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for impala::RleEncoder:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classimpala_1_1RleEncoder__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae8d541a9367301cbaa9c0ef1faa70856"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#ae8d541a9367301cbaa9c0ef1faa70856">RleEncoder</a> (uint8_t *<a class="el" href="classimpala_1_1RleEncoder.html#a69a504bd942d4e3489258fa9dc6f969a">buffer</a>, int buffer_len, int bit_width)</td></tr>
<tr class="separator:ae8d541a9367301cbaa9c0ef1faa70856"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8040c037f3b5abbe1a014c5bf2119dc1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#a8040c037f3b5abbe1a014c5bf2119dc1">Put</a> (<a class="el" href="classuint64__t.html">uint64_t</a> value)</td></tr>
<tr class="separator:a8040c037f3b5abbe1a014c5bf2119dc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42de9e2eaadc17ccc243ca2bb4be4859"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#a42de9e2eaadc17ccc243ca2bb4be4859">Flush</a> ()</td></tr>
<tr class="separator:a42de9e2eaadc17ccc243ca2bb4be4859"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab57915a7b0ca64ee1e640f66fc92afc3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#ab57915a7b0ca64ee1e640f66fc92afc3">Clear</a> ()</td></tr>
<tr class="memdesc:ab57915a7b0ca64ee1e640f66fc92afc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets all the state in the encoder.  <a href="#ab57915a7b0ca64ee1e640f66fc92afc3">More...</a><br/></td></tr>
<tr class="separator:ab57915a7b0ca64ee1e640f66fc92afc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69a504bd942d4e3489258fa9dc6f969a"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#a69a504bd942d4e3489258fa9dc6f969a">buffer</a> ()</td></tr>
<tr class="memdesc:a69a504bd942d4e3489258fa9dc6f969a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns pointer to underlying buffer.  <a href="#a69a504bd942d4e3489258fa9dc6f969a">More...</a><br/></td></tr>
<tr class="separator:a69a504bd942d4e3489258fa9dc6f969a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25b97dd185bb0e633e24a32aec7d5b16"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#a25b97dd185bb0e633e24a32aec7d5b16">len</a> ()</td></tr>
<tr class="separator:a25b97dd185bb0e633e24a32aec7d5b16"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a526b08c19c9e81ce69b4e3fa355e568f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#a526b08c19c9e81ce69b4e3fa355e568f">MinBufferSize</a> (int bit_width)</td></tr>
<tr class="separator:a526b08c19c9e81ce69b4e3fa355e568f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada8347d90efafb040133874037f3af87"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#ada8347d90efafb040133874037f3af87">MaxBufferSize</a> (int bit_width, int num_values)</td></tr>
<tr class="memdesc:ada8347d90efafb040133874037f3af87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the maximum byte size it could take to encode 'num_values'.  <a href="#ada8347d90efafb040133874037f3af87">More...</a><br/></td></tr>
<tr class="separator:ada8347d90efafb040133874037f3af87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a968549e6e82ae6b8487213d0c965dfee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#a968549e6e82ae6b8487213d0c965dfee">FlushBufferedValues</a> (<a class="el" href="classbool.html">bool</a> done)</td></tr>
<tr class="separator:a968549e6e82ae6b8487213d0c965dfee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7226051efa7c3459c93eb7a91b3ef86"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#ac7226051efa7c3459c93eb7a91b3ef86">FlushLiteralRun</a> (<a class="el" href="classbool.html">bool</a> update_indicator_byte)</td></tr>
<tr class="separator:ac7226051efa7c3459c93eb7a91b3ef86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd7257d9930bb73cbbaac0398a32b7e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#acd7257d9930bb73cbbaac0398a32b7e3">FlushRepeatedRun</a> ()</td></tr>
<tr class="memdesc:acd7257d9930bb73cbbaac0398a32b7e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flushes a repeated run to the underlying buffer.  <a href="#acd7257d9930bb73cbbaac0398a32b7e3">More...</a><br/></td></tr>
<tr class="separator:acd7257d9930bb73cbbaac0398a32b7e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e3187630cead6a3f66fdb1913fa3c79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#a8e3187630cead6a3f66fdb1913fa3c79">CheckBufferFull</a> ()</td></tr>
<tr class="separator:a8e3187630cead6a3f66fdb1913fa3c79"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a6a4315a9e5bba6b9487d85611795015f"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#a6a4315a9e5bba6b9487d85611795015f">bit_width_</a></td></tr>
<tr class="memdesc:a6a4315a9e5bba6b9487d85611795015f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of bits needed to encode the value.  <a href="#a6a4315a9e5bba6b9487d85611795015f">More...</a><br/></td></tr>
<tr class="separator:a6a4315a9e5bba6b9487d85611795015f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a494a21aaea3ffe03b22e628052c82586"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1BitWriter.html">BitWriter</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#a494a21aaea3ffe03b22e628052c82586">bit_writer_</a></td></tr>
<tr class="memdesc:a494a21aaea3ffe03b22e628052c82586"><td class="mdescLeft">&#160;</td><td class="mdescRight">Underlying buffer.  <a href="#a494a21aaea3ffe03b22e628052c82586">More...</a><br/></td></tr>
<tr class="separator:a494a21aaea3ffe03b22e628052c82586"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66545ef6a3d5bd006c310cf9ce2ec25a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#a66545ef6a3d5bd006c310cf9ce2ec25a">buffer_full_</a></td></tr>
<tr class="memdesc:a66545ef6a3d5bd006c310cf9ce2ec25a"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, the buffer is full and subsequent <a class="el" href="classimpala_1_1RleEncoder.html#a8040c037f3b5abbe1a014c5bf2119dc1">Put()</a>'s will fail.  <a href="#a66545ef6a3d5bd006c310cf9ce2ec25a">More...</a><br/></td></tr>
<tr class="separator:a66545ef6a3d5bd006c310cf9ce2ec25a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ea4c2080b477c0116f934a652556c70"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#a3ea4c2080b477c0116f934a652556c70">max_run_byte_size_</a></td></tr>
<tr class="memdesc:a3ea4c2080b477c0116f934a652556c70"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum byte size a single run can take.  <a href="#a3ea4c2080b477c0116f934a652556c70">More...</a><br/></td></tr>
<tr class="separator:a3ea4c2080b477c0116f934a652556c70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe013073ded278d0fa5117b1e2813caf"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#abe013073ded278d0fa5117b1e2813caf">buffered_values_</a> [8]</td></tr>
<tr class="separator:abe013073ded278d0fa5117b1e2813caf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94817935d768d6f94d4b06e68902c128"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#a94817935d768d6f94d4b06e68902c128">num_buffered_values_</a></td></tr>
<tr class="memdesc:a94817935d768d6f94d4b06e68902c128"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of values in buffered_values_.  <a href="#a94817935d768d6f94d4b06e68902c128">More...</a><br/></td></tr>
<tr class="separator:a94817935d768d6f94d4b06e68902c128"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf81da88d825c9140c17b49339052611"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#adf81da88d825c9140c17b49339052611">current_value_</a></td></tr>
<tr class="separator:adf81da88d825c9140c17b49339052611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2631cd230fe06f7c78b8b84f3465ba25"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#a2631cd230fe06f7c78b8b84f3465ba25">repeat_count_</a></td></tr>
<tr class="separator:a2631cd230fe06f7c78b8b84f3465ba25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ef584a4a9b5fd6be2019bef3bca6aa8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#a4ef584a4a9b5fd6be2019bef3bca6aa8">literal_count_</a></td></tr>
<tr class="separator:a4ef584a4a9b5fd6be2019bef3bca6aa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a139ef636b4f3d53b3d7b85f61cc55a7c"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#a139ef636b4f3d53b3d7b85f61cc55a7c">literal_indicator_byte_</a></td></tr>
<tr class="separator:a139ef636b4f3d53b3d7b85f61cc55a7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:aa2edeb56adf31302aac09c5a761d8a72"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1RleEncoder.html#aa2edeb56adf31302aac09c5a761d8a72">MAX_VALUES_PER_LITERAL_RUN</a> = (1 &lt;&lt; 6) * 8</td></tr>
<tr class="separator:aa2edeb56adf31302aac09c5a761d8a72"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to incrementally build the rle data. This class does not allocate any memory. The encoding has two modes: encoding repeated runs and literal runs. If the run is sufficiently short, it is more efficient to encode as a literal run. This class does so by buffering 8 values at a time. If they are not all the same they are added to the literal run. If they are the same, they are added to the repeated run. When we switch modes, the previous run is flushed out. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00111">111</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae8d541a9367301cbaa9c0ef1faa70856"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">impala::RleEncoder::RleEncoder </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buffer_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bit_width</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>buffer/buffer_len: preallocated output buffer. bit_width: max number of bits for value. TODO: consider adding a min_repeated_run_length so the caller can control when values should be encoded as repeated runs. Currently this is derived based on the bit_width, which can determine a storage optimal choice. TODO: allow 0 bit_width (and have dict encoder use it) </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00119">119</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>References <a class="el" href="rle-encoding_8h_source.html#l00191">bit_width_</a>, <a class="el" href="rle-encoding_8h_source.html#l00404">Clear()</a>, <a class="el" href="rle-encoding_8h_source.html#l00200">max_run_byte_size_</a>, and <a class="el" href="rle-encoding_8h_source.html#l00132">MinBufferSize()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a69a504bd942d4e3489258fa9dc6f969a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* impala::RleEncoder::buffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns pointer to underlying buffer. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00161">161</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>References <a class="el" href="rle-encoding_8h_source.html#l00194">bit_writer_</a>, and <a class="el" href="bit-stream-utils_8h_source.html#l00049">impala::BitWriter::buffer()</a>.</p>

</div>
</div>
<a class="anchor" id="a8e3187630cead6a3f66fdb1913fa3c79"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::RleEncoder::CheckBufferFull </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks and sets buffer_full_. This must be called after flushing a run to make sure there are enough bytes remaining to encode the next run. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00397">397</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>References <a class="el" href="rle-encoding_8h_source.html#l00194">bit_writer_</a>, <a class="el" href="rle-encoding_8h_source.html#l00197">buffer_full_</a>, <a class="el" href="bit-stream-utils_8h_source.html#l00050">impala::BitWriter::buffer_len()</a>, <a class="el" href="bit-stream-utils_8h_source.html#l00048">impala::BitWriter::bytes_written()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00200">max_run_byte_size_</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00295">FlushLiteralRun()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00325">FlushRepeatedRun()</a>.</p>

</div>
</div>
<a class="anchor" id="ab57915a7b0ca64ee1e640f66fc92afc3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::RleEncoder::Clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resets all the state in the encoder. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00404">404</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>References <a class="el" href="rle-encoding_8h_source.html#l00194">bit_writer_</a>, <a class="el" href="rle-encoding_8h_source.html#l00197">buffer_full_</a>, <a class="el" href="bit-stream-utils_8h_source.html#l00040">impala::BitWriter::Clear()</a>, <a class="el" href="rle-encoding_8h_source.html#l00214">current_value_</a>, <a class="el" href="rle-encoding_8h_source.html#l00220">literal_count_</a>, <a class="el" href="rle-encoding_8h_source.html#l00225">literal_indicator_byte_</a>, <a class="el" href="rle-encoding_8h_source.html#l00208">num_buffered_values_</a>, and <a class="el" href="rle-encoding_8h_source.html#l00215">repeat_count_</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00119">RleEncoder()</a>.</p>

</div>
</div>
<a class="anchor" id="a42de9e2eaadc17ccc243ca2bb4be4859"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int impala::RleEncoder::Flush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flushes any pending values to the underlying buffer. Returns the total number of bytes written </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00370">370</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>References <a class="el" href="rle-encoding_8h_source.html#l00194">bit_writer_</a>, <a class="el" href="rle-encoding_8h_source.html#l00205">buffered_values_</a>, <a class="el" href="bit-stream-utils_8h_source.html#l00048">impala::BitWriter::bytes_written()</a>, <a class="el" href="bit-stream-utils_8inline_8h_source.html#l00045">impala::BitWriter::Flush()</a>, <a class="el" href="rle-encoding_8h_source.html#l00295">FlushLiteralRun()</a>, <a class="el" href="rle-encoding_8h_source.html#l00325">FlushRepeatedRun()</a>, <a class="el" href="rle-encoding_8h_source.html#l00220">literal_count_</a>, <a class="el" href="rle-encoding_8h_source.html#l00208">num_buffered_values_</a>, and <a class="el" href="rle-encoding_8h_source.html#l00215">repeat_count_</a>.</p>

<p>Referenced by <a class="el" href="rle-test_8cc_source.html#l00359">impala::TEST()</a>, <a class="el" href="rle-test_8cc_source.html#l00171">impala::ValidateRle()</a>, and <a class="el" href="dict-encoding_8h_source.html#l00296">impala::DictEncoderBase::WriteData()</a>.</p>

</div>
</div>
<a class="anchor" id="a968549e6e82ae6b8487213d0c965dfee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::RleEncoder::FlushBufferedValues </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>done</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flushes any buffered values. If this is part of a repeated run, this is largely a no-op. If it is part of a literal run, this will call FlushLiteralRun, which writes out the buffered literal values. If 'done' is true, the current run would be written even if it would normally have been buffered more. This should only be called at the end, when the encoder has received all values even if it would normally continue to be buffered.</p>
<p>Flush the values that have been buffered. At this point we decide whether we need to switch between the run types or continue the current one. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00340">340</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>References <a class="el" href="rle-encoding_8h_source.html#l00295">FlushLiteralRun()</a>, <a class="el" href="rle-encoding_8h_source.html#l00220">literal_count_</a>, <a class="el" href="rle-encoding_8h_source.html#l00225">literal_indicator_byte_</a>, <a class="el" href="rle-encoding_8h_source.html#l00208">num_buffered_values_</a>, and <a class="el" href="rle-encoding_8h_source.html#l00215">repeat_count_</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00264">Put()</a>.</p>

</div>
</div>
<a class="anchor" id="ac7226051efa7c3459c93eb7a91b3ef86"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::RleEncoder::FlushLiteralRun </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>update_indicator_byte</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flushes literal values to the underlying buffer. If update_indicator_byte, then the current literal run is complete and the indicator byte is updated. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00295">295</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>References <a class="el" href="rle-encoding_8h_source.html#l00191">bit_width_</a>, <a class="el" href="rle-encoding_8h_source.html#l00194">bit_writer_</a>, <a class="el" href="rle-encoding_8h_source.html#l00205">buffered_values_</a>, <a class="el" href="rle-encoding_8h_source.html#l00397">CheckBufferFull()</a>, <a class="el" href="bit-stream-utils_8inline_8h_source.html#l00057">impala::BitWriter::GetNextBytePtr()</a>, <a class="el" href="rle-encoding_8h_source.html#l00220">literal_count_</a>, <a class="el" href="rle-encoding_8h_source.html#l00225">literal_indicator_byte_</a>, <a class="el" href="rle-encoding_8h_source.html#l00208">num_buffered_values_</a>, and <a class="el" href="bit-stream-utils_8inline_8h_source.html#l00023">impala::BitWriter::PutValue()</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00370">Flush()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00340">FlushBufferedValues()</a>.</p>

</div>
</div>
<a class="anchor" id="acd7257d9930bb73cbbaac0398a32b7e3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::RleEncoder::FlushRepeatedRun </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flushes a repeated run to the underlying buffer. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00325">325</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>References <a class="el" href="rle-encoding_8h_source.html#l00191">bit_width_</a>, <a class="el" href="rle-encoding_8h_source.html#l00194">bit_writer_</a>, <a class="el" href="bit-util_8h_source.html#l00032">impala::BitUtil::Ceil()</a>, <a class="el" href="rle-encoding_8h_source.html#l00397">CheckBufferFull()</a>, <a class="el" href="rle-encoding_8h_source.html#l00214">current_value_</a>, <a class="el" href="rle-encoding_8h_source.html#l00208">num_buffered_values_</a>, <a class="el" href="bit-stream-utils_8inline_8h_source.html#l00067">impala::BitWriter::PutAligned()</a>, <a class="el" href="bit-stream-utils_8inline_8h_source.html#l00074">impala::BitWriter::PutVlqInt()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00215">repeat_count_</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00370">Flush()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00264">Put()</a>.</p>

</div>
</div>
<a class="anchor" id="a25b97dd185bb0e633e24a32aec7d5b16"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t impala::RleEncoder::len </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00162">162</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>References <a class="el" href="rle-encoding_8h_source.html#l00194">bit_writer_</a>, and <a class="el" href="bit-stream-utils_8h_source.html#l00048">impala::BitWriter::bytes_written()</a>.</p>

<p>Referenced by <a class="el" href="dict-encoding_8h_source.html#l00296">impala::DictEncoderBase::WriteData()</a>.</p>

</div>
</div>
<a class="anchor" id="ada8347d90efafb040133874037f3af87"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int impala::RleEncoder::MaxBufferSize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bit_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the maximum byte size it could take to encode 'num_values'. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00142">142</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>References <a class="el" href="bit-util_8h_source.html#l00032">impala::BitUtil::Ceil()</a>, <a class="el" href="rle-encoding_8h_source.html#l00188">MAX_VALUES_PER_LITERAL_RUN</a>, and <a class="el" href="rle-encoding_8h_source.html#l00132">MinBufferSize()</a>.</p>

<p>Referenced by <a class="el" href="dict-encoding_8h_source.html#l00066">impala::DictEncoderBase::EstimatedDataEncodedSize()</a>.</p>

</div>
</div>
<a class="anchor" id="a526b08c19c9e81ce69b4e3fa355e568f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int impala::RleEncoder::MinBufferSize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bit_width</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the minimum buffer size needed to use the encoder for 'bit_width' This is the maximum length of a single run for 'bit_width'. It is not valid to pass a buffer less than this length. </p>
<p>1 indicator byte and MAX_VALUES_PER_LITERAL_RUN 'bit_width' values.</p>
<p>Up to MAX_VLQ_BYTE_LEN indicator and a single 'bit_width' value. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00132">132</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>References <a class="el" href="bit-util_8h_source.html#l00032">impala::BitUtil::Ceil()</a>, <a class="el" href="rle-encoding_8h_source.html#l00188">MAX_VALUES_PER_LITERAL_RUN</a>, and <a class="el" href="bit-stream-utils_8h_source.html#l00127">impala::BitReader::MAX_VLQ_BYTE_LEN</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00142">MaxBufferSize()</a>, <a class="el" href="rle-encoding_8h_source.html#l00119">RleEncoder()</a>, and <a class="el" href="rle-test_8cc_source.html#l00359">impala::TEST()</a>.</p>

</div>
</div>
<a class="anchor" id="a8040c037f3b5abbe1a014c5bf2119dc1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::RleEncoder::Put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classuint64__t.html">uint64_t</a>&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Encode value. Returns true if the value fits in buffer, false otherwise. This value must be representable with bit_width_ bits.</p>
<p>This function buffers input values 8 at a time. After seeing all 8 values, it decides whether they should be encoded as a literal or repeated run. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00264">264</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>References <a class="el" href="rle-encoding_8h_source.html#l00191">bit_width_</a>, <a class="el" href="rle-encoding_8h_source.html#l00197">buffer_full_</a>, <a class="el" href="rle-encoding_8h_source.html#l00205">buffered_values_</a>, <a class="el" href="rle-encoding_8h_source.html#l00214">current_value_</a>, <a class="el" href="rle-encoding_8h_source.html#l00340">FlushBufferedValues()</a>, <a class="el" href="rle-encoding_8h_source.html#l00325">FlushRepeatedRun()</a>, <a class="el" href="compiler-util_8h_source.html#l00032">LIKELY</a>, <a class="el" href="rle-encoding_8h_source.html#l00220">literal_count_</a>, <a class="el" href="rle-encoding_8h_source.html#l00208">num_buffered_values_</a>, <a class="el" href="rle-encoding_8h_source.html#l00215">repeat_count_</a>, and <a class="el" href="compiler-util_8h_source.html#l00033">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="rle-test_8cc_source.html#l00359">impala::TEST()</a>, <a class="el" href="rle-test_8cc_source.html#l00171">impala::ValidateRle()</a>, and <a class="el" href="dict-encoding_8h_source.html#l00296">impala::DictEncoderBase::WriteData()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a6a4315a9e5bba6b9487d85611795015f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int impala::RleEncoder::bit_width_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of bits needed to encode the value. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00191">191</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00295">FlushLiteralRun()</a>, <a class="el" href="rle-encoding_8h_source.html#l00325">FlushRepeatedRun()</a>, <a class="el" href="rle-encoding_8h_source.html#l00264">Put()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00119">RleEncoder()</a>.</p>

</div>
</div>
<a class="anchor" id="a494a21aaea3ffe03b22e628052c82586"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1BitWriter.html">BitWriter</a> impala::RleEncoder::bit_writer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Underlying buffer. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00194">194</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00161">buffer()</a>, <a class="el" href="rle-encoding_8h_source.html#l00397">CheckBufferFull()</a>, <a class="el" href="rle-encoding_8h_source.html#l00404">Clear()</a>, <a class="el" href="rle-encoding_8h_source.html#l00370">Flush()</a>, <a class="el" href="rle-encoding_8h_source.html#l00295">FlushLiteralRun()</a>, <a class="el" href="rle-encoding_8h_source.html#l00325">FlushRepeatedRun()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00162">len()</a>.</p>

</div>
</div>
<a class="anchor" id="a66545ef6a3d5bd006c310cf9ce2ec25a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::RleEncoder::buffer_full_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If true, the buffer is full and subsequent <a class="el" href="classimpala_1_1RleEncoder.html#a8040c037f3b5abbe1a014c5bf2119dc1">Put()</a>'s will fail. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00197">197</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00397">CheckBufferFull()</a>, <a class="el" href="rle-encoding_8h_source.html#l00404">Clear()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00264">Put()</a>.</p>

</div>
</div>
<a class="anchor" id="abe013073ded278d0fa5117b1e2813caf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::RleEncoder::buffered_values_[8]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>We need to buffer at most 8 values for literals. This happens when the bit_width is 1 (so 8 values fit in one byte). TODO: generalize this to other bit widths </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00205">205</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00370">Flush()</a>, <a class="el" href="rle-encoding_8h_source.html#l00295">FlushLiteralRun()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00264">Put()</a>.</p>

</div>
</div>
<a class="anchor" id="adf81da88d825c9140c17b49339052611"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::RleEncoder::current_value_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The current (also last) value that was written and the count of how many times in a row that value has been seen. This is maintained even if we are in a literal run. If the repeat_count_ get high enough, we switch to encoding repeated runs. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00214">214</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00404">Clear()</a>, <a class="el" href="rle-encoding_8h_source.html#l00325">FlushRepeatedRun()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00264">Put()</a>.</p>

</div>
</div>
<a class="anchor" id="a4ef584a4a9b5fd6be2019bef3bca6aa8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int impala::RleEncoder::literal_count_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of literals in the current run. This does not include the literals that might be in buffered_values_. Only after we've got a group big enough can we decide if they should part of the literal_count_ or repeat_count_ </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00220">220</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00404">Clear()</a>, <a class="el" href="rle-encoding_8h_source.html#l00370">Flush()</a>, <a class="el" href="rle-encoding_8h_source.html#l00340">FlushBufferedValues()</a>, <a class="el" href="rle-encoding_8h_source.html#l00295">FlushLiteralRun()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00264">Put()</a>.</p>

</div>
</div>
<a class="anchor" id="a139ef636b4f3d53b3d7b85f61cc55a7c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* impala::RleEncoder::literal_indicator_byte_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pointer to a byte in the underlying buffer that stores the indicator byte. This is reserved as soon as we need a literal run but the value is written when the literal run is complete. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00225">225</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00404">Clear()</a>, <a class="el" href="rle-encoding_8h_source.html#l00340">FlushBufferedValues()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00295">FlushLiteralRun()</a>.</p>

</div>
</div>
<a class="anchor" id="a3ea4c2080b477c0116f934a652556c70"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int impala::RleEncoder::max_run_byte_size_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The maximum byte size a single run can take. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00200">200</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00397">CheckBufferFull()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00119">RleEncoder()</a>.</p>

</div>
</div>
<a class="anchor" id="aa2edeb56adf31302aac09c5a761d8a72"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int impala::RleEncoder::MAX_VALUES_PER_LITERAL_RUN = (1 &lt;&lt; 6) * 8</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The maximum number of values in a single literal run (number of groups encodable by a 1-byte indicator * 8) </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00188">188</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00142">MaxBufferSize()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00132">MinBufferSize()</a>.</p>

</div>
</div>
<a class="anchor" id="a94817935d768d6f94d4b06e68902c128"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int impala::RleEncoder::num_buffered_values_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of values in buffered_values_. </p>

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00208">208</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00404">Clear()</a>, <a class="el" href="rle-encoding_8h_source.html#l00370">Flush()</a>, <a class="el" href="rle-encoding_8h_source.html#l00340">FlushBufferedValues()</a>, <a class="el" href="rle-encoding_8h_source.html#l00295">FlushLiteralRun()</a>, <a class="el" href="rle-encoding_8h_source.html#l00325">FlushRepeatedRun()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00264">Put()</a>.</p>

</div>
</div>
<a class="anchor" id="a2631cd230fe06f7c78b8b84f3465ba25"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int impala::RleEncoder::repeat_count_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rle-encoding_8h_source.html#l00215">215</a> of file <a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a>.</p>

<p>Referenced by <a class="el" href="rle-encoding_8h_source.html#l00404">Clear()</a>, <a class="el" href="rle-encoding_8h_source.html#l00370">Flush()</a>, <a class="el" href="rle-encoding_8h_source.html#l00340">FlushBufferedValues()</a>, <a class="el" href="rle-encoding_8h_source.html#l00325">FlushRepeatedRun()</a>, and <a class="el" href="rle-encoding_8h_source.html#l00264">Put()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>be/src/util/<a class="el" href="rle-encoding_8h_source.html">rle-encoding.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceimpala.html">impala</a></li><li class="navelem"><a class="el" href="classimpala_1_1RleEncoder.html">RleEncoder</a></li>
    <li class="footer">Generated on Thu May 7 2015 16:10:50 for Impala by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
