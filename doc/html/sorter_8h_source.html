<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Impala: be/src/runtime/sorter.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Impala
   </div>
   <div id="projectbrief">Impalaistheopensource,nativeanalyticdatabaseforApacheHadoop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sorter_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">sorter.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="sorter_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2013 Cloudera Inc.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// you may not use this file except in compliance with the License.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// See the License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// limitations under the License.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#ifndef IMPALA_RUNTIME_SORTER_H_</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define IMPALA_RUNTIME_SORTER_H_</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="buffered-block-mgr_8h.html">runtime/buffered-block-mgr.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="tuple-row-compare_8h.html">util/tuple-row-compare.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">namespace </span>impala {</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">class </span>SortedRunMerger;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">class </span>RuntimeProfile;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">class </span>RowBatch;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html">   84</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classimpala_1_1Sorter.html">Sorter</a> {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="classimpala_1_1Sorter.html#aff8768ae068c4aca8f282268a81c4ed5">Sorter</a>(<span class="keyword">const</span> <a class="code" href="classimpala_1_1TupleRowComparator.html">TupleRowComparator</a>&amp; compare_less_than,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <span class="keyword">const</span> std::vector&lt;ExprContext*&gt;&amp; sort_tuple_slot_expr_ctxs,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <a class="code" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a>* output_row_desc, <a class="code" href="classimpala_1_1MemTracker.html">MemTracker</a>* mem_tracker,</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <a class="code" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a>* profile, <a class="code" href="classimpala_1_1RuntimeState.html">RuntimeState</a>* state);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="classimpala_1_1Sorter.html#ad745e2bcc3a9237ceeddb535e75484dd">~Sorter</a>();</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="classimpala_1_1Status.html">Status</a> <a class="code" href="classimpala_1_1Sorter.html#a63dd233c91ab829e6fc702ce703f77bc">Init</a>();</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="classimpala_1_1Status.html">Status</a> <a class="code" href="classimpala_1_1Sorter.html#acdc857b66e4ebff74b0a7c0ea008bdb8">AddBatch</a>(<a class="code" href="classimpala_1_1RowBatch.html">RowBatch</a>* batch);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <a class="code" href="classimpala_1_1Status.html">Status</a> <a class="code" href="classimpala_1_1Sorter.html#a2f039c834b68505cde79399c7231b3c7">InputDone</a>();</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="classimpala_1_1Status.html">Status</a> <a class="code" href="classimpala_1_1Sorter.html#a5009c6abc953b2d3c54611687e624b0b">GetNext</a>(<a class="code" href="classimpala_1_1RowBatch.html">RowBatch</a>* batch, <span class="keywordtype">bool</span>* eos);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keyword">static</span> <a class="code" href="classuint64__t.html">uint64_t</a> <a class="code" href="classimpala_1_1Sorter.html#a2125f77fa5dcff0861f7568673d49264">EstimateMergeMem</a>(<a class="code" href="classuint64__t.html">uint64_t</a> available_blocks, <a class="code" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a>* <a class="code" href="namespaceimpala.html#aa98447566dd6700a2faaaaf3059f4d95">row_desc</a>,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="keywordtype">int</span> merge_batch_size);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keyword">class </span><a class="code" href="classimpala_1_1Sorter_1_1Run.html">Run</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keyword">class </span><a class="code" href="classimpala_1_1Sorter_1_1TupleSorter.html">TupleSorter</a>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="classimpala_1_1Status.html">Status</a> <a class="code" href="classimpala_1_1Sorter.html#a1030c51f2ab6f4bf9573afd2e3e27d3b">CreateMerger</a>(<span class="keywordtype">int</span> num_runs);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="classimpala_1_1Status.html">Status</a> <a class="code" href="classimpala_1_1Sorter.html#ad4b86ce60d3cd4b790b37c1eb4aab459">MergeIntermediateRuns</a>();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <a class="code" href="classimpala_1_1Status.html">Status</a> <a class="code" href="classimpala_1_1Sorter.html#a9f7337219adb32331de00cd175519e60">SortRun</a>();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#a7753ec8417ae4ac163c435b00fad9219">  145</a></span>&#160;  <a class="code" href="classimpala_1_1RuntimeState.html">RuntimeState</a>* <span class="keyword">const</span> <a class="code" href="classimpala_1_1Sorter.html#a7753ec8417ae4ac163c435b00fad9219">state_</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#a0923783fedb01f5c6d21551b68f0ad92">  148</a></span>&#160;  <a class="code" href="classimpala_1_1TupleRowComparator.html">TupleRowComparator</a> <a class="code" href="classimpala_1_1Sorter.html#a0923783fedb01f5c6d21551b68f0ad92">compare_less_than_</a>;</div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#a7ff843ba1155cec7f8a65a320ff39a47">  149</a></span>&#160;  boost::scoped_ptr&lt;TupleSorter&gt; <a class="code" href="classimpala_1_1Sorter.html#a7ff843ba1155cec7f8a65a320ff39a47">in_mem_tuple_sorter_</a>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#a0ec40c845d2b854211e31d687edbdbf7">  152</a></span>&#160;  <a class="code" href="classimpala_1_1BufferedBlockMgr.html">BufferedBlockMgr</a>* <a class="code" href="classimpala_1_1Sorter.html#a0ec40c845d2b854211e31d687edbdbf7">block_mgr_</a>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#af872d2d8a0d3d2777b723841105f6662">  155</a></span>&#160;  <a class="code" href="structimpala_1_1BufferedBlockMgr_1_1Client.html">BufferedBlockMgr::Client</a>* <a class="code" href="classimpala_1_1Sorter.html#af872d2d8a0d3d2777b723841105f6662">block_mgr_client_</a>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#a5c234f39858a4d91d8e8f13bff456d01">  158</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classimpala_1_1Sorter.html#a5c234f39858a4d91d8e8f13bff456d01">has_var_len_slots_</a>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#a17d425e1c9f6fa64a2ca1704b10b4852">  164</a></span>&#160;  <a class="code" href="classimpala_1_1Sorter_1_1Run.html">Run</a>* <a class="code" href="classimpala_1_1Sorter.html#a17d425e1c9f6fa64a2ca1704b10b4852">unsorted_run_</a>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#a418d79e93c34f3d4acfefdc4bf12378c">  169</a></span>&#160;  std::list&lt;Run*&gt; <a class="code" href="classimpala_1_1Sorter.html#a418d79e93c34f3d4acfefdc4bf12378c">sorted_runs_</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#a676b4a57c812101dbaff6e71d37e520a">  173</a></span>&#160;  <a class="code" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a>* <a class="code" href="classimpala_1_1Sorter.html#a676b4a57c812101dbaff6e71d37e520a">output_row_desc_</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#ab71e620c579d4b511e6775189672c82f">  177</a></span>&#160;  std::vector&lt;ExprContext*&gt; <a class="code" href="classimpala_1_1Sorter.html#ab71e620c579d4b511e6775189672c82f">sort_tuple_slot_expr_ctxs_</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#a59eeb3403f9889c1c4bd3bc622410206">  180</a></span>&#160;  <a class="code" href="classimpala_1_1MemTracker.html">MemTracker</a>* <a class="code" href="classimpala_1_1Sorter.html#a59eeb3403f9889c1c4bd3bc622410206">mem_tracker_</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#a0f92256ce7e671e7b119fdc00d751944">  185</a></span>&#160;  boost::scoped_ptr&lt;SortedRunMerger&gt; <a class="code" href="classimpala_1_1Sorter.html#a0f92256ce7e671e7b119fdc00d751944">merger_</a>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#a0830f0e52c0161407c9baa5cc763c3df">  189</a></span>&#160;  std::list&lt;Run*&gt; <a class="code" href="classimpala_1_1Sorter.html#a0830f0e52c0161407c9baa5cc763c3df">merging_runs_</a>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#aee7c92c83c5efadd6d67c44d66e818f7">  192</a></span>&#160;  <a class="code" href="classimpala_1_1ObjectPool.html">ObjectPool</a> <a class="code" href="classimpala_1_1Sorter.html#aee7c92c83c5efadd6d67c44d66e818f7">obj_pool_</a>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#a5e3802c81805a01499604bdfdfe7e373">  195</a></span>&#160;  <a class="code" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a>* <a class="code" href="classimpala_1_1Sorter.html#a5e3802c81805a01499604bdfdfe7e373">profile_</a>;</div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#a04aa99293ce8b5d1b83f0ddb01434444">  196</a></span>&#160;  <a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* <a class="code" href="classimpala_1_1Sorter.html#a04aa99293ce8b5d1b83f0ddb01434444">initial_runs_counter_</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#ac54b4755ecada0aaa3c051393a760a17">  197</a></span>&#160;  <a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* <a class="code" href="classimpala_1_1Sorter.html#ac54b4755ecada0aaa3c051393a760a17">num_merges_counter_</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#ac5fff98fd6fe2e7e1f090a87d97026de">  198</a></span>&#160;  <a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* <a class="code" href="classimpala_1_1Sorter.html#ac5fff98fd6fe2e7e1f090a87d97026de">in_mem_sort_timer_</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classimpala_1_1Sorter.html#a5667044809a96f94849fbb1248891ccd">  199</a></span>&#160;  <a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* <a class="code" href="classimpala_1_1Sorter.html#a5667044809a96f94849fbb1248891ccd">sorted_data_size_</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;};</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;} <span class="comment">// namespace impala</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="ttc" id="classimpala_1_1Sorter_html_ab71e620c579d4b511e6775189672c82f"><div class="ttname"><a href="classimpala_1_1Sorter.html#ab71e620c579d4b511e6775189672c82f">impala::Sorter::sort_tuple_slot_expr_ctxs_</a></div><div class="ttdeci">std::vector&lt; ExprContext * &gt; sort_tuple_slot_expr_ctxs_</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00177">sorter.h:177</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_ac54b4755ecada0aaa3c051393a760a17"><div class="ttname"><a href="classimpala_1_1Sorter.html#ac54b4755ecada0aaa3c051393a760a17">impala::Sorter::num_merges_counter_</a></div><div class="ttdeci">RuntimeProfile::Counter * num_merges_counter_</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00197">sorter.h:197</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a9f7337219adb32331de00cd175519e60"><div class="ttname"><a href="classimpala_1_1Sorter.html#a9f7337219adb32331de00cd175519e60">impala::Sorter::SortRun</a></div><div class="ttdeci">Status SortRun()</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8cc_source.html#l01006">sorter.cc:1006</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a2125f77fa5dcff0861f7568673d49264"><div class="ttname"><a href="classimpala_1_1Sorter.html#a2125f77fa5dcff0861f7568673d49264">impala::Sorter::EstimateMergeMem</a></div><div class="ttdeci">static uint64_t EstimateMergeMem(uint64_t available_blocks, RowDescriptor *row_desc, int merge_batch_size)</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8cc_source.html#l01038">sorter.cc:1038</a></div></div>
<div class="ttc" id="classimpala_1_1TupleRowComparator_html"><div class="ttname"><a href="classimpala_1_1TupleRowComparator.html">impala::TupleRowComparator</a></div><div class="ttdef"><b>Definition:</b> <a href="tuple-row-compare_8h_source.html#l00027">tuple-row-compare.h:27</a></div></div>
<div class="ttc" id="classimpala_1_1BufferedBlockMgr_html"><div class="ttname"><a href="classimpala_1_1BufferedBlockMgr.html">impala::BufferedBlockMgr</a></div><div class="ttdef"><b>Definition:</b> <a href="buffered-block-mgr_8h_source.html#l00092">buffered-block-mgr.h:92</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a63dd233c91ab829e6fc702ce703f77bc"><div class="ttname"><a href="classimpala_1_1Sorter.html#a63dd233c91ab829e6fc702ce703f77bc">impala::Sorter::Init</a></div><div class="ttdeci">Status Init()</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8cc_source.html#l00896">sorter.cc:896</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a1030c51f2ab6f4bf9573afd2e3e27d3b"><div class="ttname"><a href="classimpala_1_1Sorter.html#a1030c51f2ab6f4bf9573afd2e3e27d3b">impala::Sorter::CreateMerger</a></div><div class="ttdeci">Status CreateMerger(int num_runs)</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8cc_source.html#l01123">sorter.cc:1123</a></div></div>
<div class="ttc" id="structimpala_1_1BufferedBlockMgr_1_1Client_html"><div class="ttname"><a href="structimpala_1_1BufferedBlockMgr_1_1Client.html">impala::BufferedBlockMgr::Client</a></div><div class="ttdef"><b>Definition:</b> <a href="buffered-block-mgr_8cc_source.html#l00045">buffered-block-mgr.cc:45</a></div></div>
<div class="ttc" id="classimpala_1_1RowDescriptor_html"><div class="ttname"><a href="classimpala_1_1RowDescriptor.html">impala::RowDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8h_source.html#l00373">descriptors.h:373</a></div></div>
<div class="ttc" id="classimpala_1_1ObjectPool_html"><div class="ttname"><a href="classimpala_1_1ObjectPool.html">impala::ObjectPool</a></div><div class="ttdef"><b>Definition:</b> <a href="object-pool_8h_source.html#l00030">object-pool.h:30</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a5e3802c81805a01499604bdfdfe7e373"><div class="ttname"><a href="classimpala_1_1Sorter.html#a5e3802c81805a01499604bdfdfe7e373">impala::Sorter::profile_</a></div><div class="ttdeci">RuntimeProfile * profile_</div><div class="ttdoc">Runtime profile and counters for this sorter instance. </div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00195">sorter.h:195</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a7753ec8417ae4ac163c435b00fad9219"><div class="ttname"><a href="classimpala_1_1Sorter.html#a7753ec8417ae4ac163c435b00fad9219">impala::Sorter::state_</a></div><div class="ttdeci">RuntimeState *const state_</div><div class="ttdoc">Runtime state instance used to check for cancellation. Not owned. </div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00145">sorter.h:145</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeProfile_1_1Counter_html"><div class="ttname"><a href="classimpala_1_1RuntimeProfile_1_1Counter.html">impala::RuntimeProfile::Counter</a></div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00085">runtime-profile.h:85</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a0923783fedb01f5c6d21551b68f0ad92"><div class="ttname"><a href="classimpala_1_1Sorter.html#a0923783fedb01f5c6d21551b68f0ad92">impala::Sorter::compare_less_than_</a></div><div class="ttdeci">TupleRowComparator compare_less_than_</div><div class="ttdoc">In memory sorter and less-than comparator. </div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00148">sorter.h:148</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_ac5fff98fd6fe2e7e1f090a87d97026de"><div class="ttname"><a href="classimpala_1_1Sorter.html#ac5fff98fd6fe2e7e1f090a87d97026de">impala::Sorter::in_mem_sort_timer_</a></div><div class="ttdeci">RuntimeProfile::Counter * in_mem_sort_timer_</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00198">sorter.h:198</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a7ff843ba1155cec7f8a65a320ff39a47"><div class="ttname"><a href="classimpala_1_1Sorter.html#a7ff843ba1155cec7f8a65a320ff39a47">impala::Sorter::in_mem_tuple_sorter_</a></div><div class="ttdeci">boost::scoped_ptr&lt; TupleSorter &gt; in_mem_tuple_sorter_</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00149">sorter.h:149</a></div></div>
<div class="ttc" id="classimpala_1_1Status_html"><div class="ttname"><a href="classimpala_1_1Status.html">impala::Status</a></div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00081">status.h:81</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a5667044809a96f94849fbb1248891ccd"><div class="ttname"><a href="classimpala_1_1Sorter.html#a5667044809a96f94849fbb1248891ccd">impala::Sorter::sorted_data_size_</a></div><div class="ttdeci">RuntimeProfile::Counter * sorted_data_size_</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00199">sorter.h:199</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_1_1TupleSorter_html"><div class="ttname"><a href="classimpala_1_1Sorter_1_1TupleSorter.html">impala::Sorter::TupleSorter</a></div><div class="ttdef"><b>Definition:</b> <a href="sorter_8cc_source.html#l00202">sorter.cc:202</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a2f039c834b68505cde79399c7231b3c7"><div class="ttname"><a href="classimpala_1_1Sorter.html#a2f039c834b68505cde79399c7231b3c7">impala::Sorter::InputDone</a></div><div class="ttdeci">Status InputDone()</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8cc_source.html#l00949">sorter.cc:949</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a0f92256ce7e671e7b119fdc00d751944"><div class="ttname"><a href="classimpala_1_1Sorter.html#a0f92256ce7e671e7b119fdc00d751944">impala::Sorter::merger_</a></div><div class="ttdeci">boost::scoped_ptr&lt; SortedRunMerger &gt; merger_</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00185">sorter.h:185</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a59eeb3403f9889c1c4bd3bc622410206"><div class="ttname"><a href="classimpala_1_1Sorter.html#a59eeb3403f9889c1c4bd3bc622410206">impala::Sorter::mem_tracker_</a></div><div class="ttdeci">MemTracker * mem_tracker_</div><div class="ttdoc">Mem tracker for batches created during merge. Not owned by Sorter. </div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00180">sorter.h:180</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html"><div class="ttname"><a href="classimpala_1_1RuntimeState.html">impala::RuntimeState</a></div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8h_source.html#l00069">runtime-state.h:69</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_acdc857b66e4ebff74b0a7c0ea008bdb8"><div class="ttname"><a href="classimpala_1_1Sorter.html#acdc857b66e4ebff74b0a7c0ea008bdb8">impala::Sorter::AddBatch</a></div><div class="ttdeci">Status AddBatch(RowBatch *batch)</div><div class="ttdoc">Adds a batch of input rows to the current unsorted run. </div><div class="ttdef"><b>Definition:</b> <a href="sorter_8cc_source.html#l00923">sorter.cc:923</a></div></div>
<div class="ttc" id="classuint64__t_html"><div class="ttname"><a href="classuint64__t.html">uint64_t</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a04aa99293ce8b5d1b83f0ddb01434444"><div class="ttname"><a href="classimpala_1_1Sorter.html#a04aa99293ce8b5d1b83f0ddb01434444">impala::Sorter::initial_runs_counter_</a></div><div class="ttdeci">RuntimeProfile::Counter * initial_runs_counter_</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00196">sorter.h:196</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a676b4a57c812101dbaff6e71d37e520a"><div class="ttname"><a href="classimpala_1_1Sorter.html#a676b4a57c812101dbaff6e71d37e520a">impala::Sorter::output_row_desc_</a></div><div class="ttdeci">RowDescriptor * output_row_desc_</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00173">sorter.h:173</a></div></div>
<div class="ttc" id="classimpala_1_1MemTracker_html"><div class="ttname"><a href="classimpala_1_1MemTracker.html">impala::MemTracker</a></div><div class="ttdoc">This class is thread-safe. </div><div class="ttdef"><b>Definition:</b> <a href="mem-tracker_8h_source.html#l00061">mem-tracker.h:61</a></div></div>
<div class="ttc" id="classimpala_1_1RowBatch_html"><div class="ttname"><a href="classimpala_1_1RowBatch.html">impala::RowBatch</a></div><div class="ttdef"><b>Definition:</b> <a href="row-batch_8h_source.html#l00066">row-batch.h:66</a></div></div>
<div class="ttc" id="namespaceimpala_html_aa98447566dd6700a2faaaaf3059f4d95"><div class="ttname"><a href="namespaceimpala.html#aa98447566dd6700a2faaaaf3059f4d95">impala::row_desc</a></div><div class="ttdeci">const RowDescriptor &amp; row_desc() const </div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a5009c6abc953b2d3c54611687e624b0b"><div class="ttname"><a href="classimpala_1_1Sorter.html#a5009c6abc953b2d3c54611687e624b0b">impala::Sorter::GetNext</a></div><div class="ttdeci">Status GetNext(RowBatch *batch, bool *eos)</div><div class="ttdoc">Get the next batch of sorted output rows from the sorter. </div><div class="ttdef"><b>Definition:</b> <a href="sorter_8cc_source.html#l00993">sorter.cc:993</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeProfile_html"><div class="ttname"><a href="classimpala_1_1RuntimeProfile.html">impala::RuntimeProfile</a></div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00083">runtime-profile.h:83</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a418d79e93c34f3d4acfefdc4bf12378c"><div class="ttname"><a href="classimpala_1_1Sorter.html#a418d79e93c34f3d4acfefdc4bf12378c">impala::Sorter::sorted_runs_</a></div><div class="ttdeci">std::list&lt; Run * &gt; sorted_runs_</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00169">sorter.h:169</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_1_1Run_html"><div class="ttname"><a href="classimpala_1_1Sorter_1_1Run.html">impala::Sorter::Run</a></div><div class="ttdef"><b>Definition:</b> <a href="sorter_8cc_source.html#l00045">sorter.cc:45</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html"><div class="ttname"><a href="classimpala_1_1Sorter.html">impala::Sorter</a></div><div class="ttdoc">Note that Init() must be called right after the constructor. </div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00084">sorter.h:84</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_af872d2d8a0d3d2777b723841105f6662"><div class="ttname"><a href="classimpala_1_1Sorter.html#af872d2d8a0d3d2777b723841105f6662">impala::Sorter::block_mgr_client_</a></div><div class="ttdeci">BufferedBlockMgr::Client * block_mgr_client_</div><div class="ttdoc">Handle to block mgr to make allocations from. </div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00155">sorter.h:155</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_aff8768ae068c4aca8f282268a81c4ed5"><div class="ttname"><a href="classimpala_1_1Sorter.html#aff8768ae068c4aca8f282268a81c4ed5">impala::Sorter::Sorter</a></div><div class="ttdeci">Sorter(const TupleRowComparator &amp;compare_less_than, const std::vector&lt; ExprContext * &gt; &amp;sort_tuple_slot_expr_ctxs, RowDescriptor *output_row_desc, MemTracker *mem_tracker, RuntimeProfile *profile, RuntimeState *state)</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8cc_source.html#l00870">sorter.cc:870</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a0830f0e52c0161407c9baa5cc763c3df"><div class="ttname"><a href="classimpala_1_1Sorter.html#a0830f0e52c0161407c9baa5cc763c3df">impala::Sorter::merging_runs_</a></div><div class="ttdeci">std::list&lt; Run * &gt; merging_runs_</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00189">sorter.h:189</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_ad745e2bcc3a9237ceeddb535e75484dd"><div class="ttname"><a href="classimpala_1_1Sorter.html#ad745e2bcc3a9237ceeddb535e75484dd">impala::Sorter::~Sorter</a></div><div class="ttdeci">~Sorter()</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8cc_source.html#l00884">sorter.cc:884</a></div></div>
<div class="ttc" id="buffered-block-mgr_8h_html"><div class="ttname"><a href="buffered-block-mgr_8h.html">buffered-block-mgr.h</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_ad4b86ce60d3cd4b790b37c1eb4aab459"><div class="ttname"><a href="classimpala_1_1Sorter.html#ad4b86ce60d3cd4b790b37c1eb4aab459">impala::Sorter::MergeIntermediateRuns</a></div><div class="ttdeci">Status MergeIntermediateRuns()</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8cc_source.html#l01054">sorter.cc:1054</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_aee7c92c83c5efadd6d67c44d66e818f7"><div class="ttname"><a href="classimpala_1_1Sorter.html#aee7c92c83c5efadd6d67c44d66e818f7">impala::Sorter::obj_pool_</a></div><div class="ttdeci">ObjectPool obj_pool_</div><div class="ttdoc">Pool of owned Run objects. </div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00192">sorter.h:192</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a17d425e1c9f6fa64a2ca1704b10b4852"><div class="ttname"><a href="classimpala_1_1Sorter.html#a17d425e1c9f6fa64a2ca1704b10b4852">impala::Sorter::unsorted_run_</a></div><div class="ttdeci">Run * unsorted_run_</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00164">sorter.h:164</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a5c234f39858a4d91d8e8f13bff456d01"><div class="ttname"><a href="classimpala_1_1Sorter.html#a5c234f39858a4d91d8e8f13bff456d01">impala::Sorter::has_var_len_slots_</a></div><div class="ttdeci">bool has_var_len_slots_</div><div class="ttdoc">True if the tuples to be sorted have var-length slots. </div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00158">sorter.h:158</a></div></div>
<div class="ttc" id="tuple-row-compare_8h_html"><div class="ttname"><a href="tuple-row-compare_8h.html">tuple-row-compare.h</a></div></div>
<div class="ttc" id="classimpala_1_1Sorter_html_a0ec40c845d2b854211e31d687edbdbf7"><div class="ttname"><a href="classimpala_1_1Sorter.html#a0ec40c845d2b854211e31d687edbdbf7">impala::Sorter::block_mgr_</a></div><div class="ttdeci">BufferedBlockMgr * block_mgr_</div><div class="ttdoc">Block manager object used to allocate, pin and release runs. Not owned by Sorter. ...</div><div class="ttdef"><b>Definition:</b> <a href="sorter_8h_source.html#l00152">sorter.h:152</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e5d120be6b5e8a44336cbfd013b25604.html">be</a></li><li class="navelem"><a class="el" href="dir_68cf7cafb51a962d5bc4848b83cab0de.html">src</a></li><li class="navelem"><a class="el" href="dir_1ef28ab5153adb64262182d038c65543.html">runtime</a></li><li class="navelem"><a class="el" href="sorter_8h.html">sorter.h</a></li>
    <li class="footer">Generated on Thu May 7 2015 16:10:37 for Impala by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
