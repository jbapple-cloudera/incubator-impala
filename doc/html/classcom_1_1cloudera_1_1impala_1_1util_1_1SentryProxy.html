<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Impala: com.cloudera.impala.util.SentryProxy Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Impala
   </div>
   <div id="projectbrief">Impalaistheopensource,nativeanalyticdatabaseforApacheHadoop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">com.cloudera.impala.util.SentryProxy Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for com.cloudera.impala.util.SentryProxy:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy_1_1PolicyReader.html">PolicyReader</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8a4af78ab335a1184781c2144fd3b0bc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html#a8a4af78ab335a1184781c2144fd3b0bc">SentryProxy</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1SentryConfig.html">SentryConfig</a> sentryConfig, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1CatalogServiceCatalog.html">CatalogServiceCatalog</a> catalog)</td></tr>
<tr class="separator:a8a4af78ab335a1184781c2144fd3b0bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3033da3193164faeb497d86ccefac03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html#ab3033da3193164faeb497d86ccefac03">checkUserSentryAdmin</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a> requestingUser)  throws AuthorizationException </td></tr>
<tr class="separator:ab3033da3193164faeb497d86ccefac03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af22f5e48aea92bb3b54f370eae8275e1"><td class="memItemLeft" align="right" valign="top">synchronized <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1Role.html">Role</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html#af22f5e48aea92bb3b54f370eae8275e1">createRole</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a> user, String roleName)  throws ImpalaException </td></tr>
<tr class="separator:af22f5e48aea92bb3b54f370eae8275e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5559029b98b1a2ed7570ae57e47c125a"><td class="memItemLeft" align="right" valign="top">synchronized <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1Role.html">Role</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html#a5559029b98b1a2ed7570ae57e47c125a">dropRole</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a> user, String roleName)  throws ImpalaException </td></tr>
<tr class="separator:a5559029b98b1a2ed7570ae57e47c125a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef372453e9eac74c2d19f94c210c2c3e"><td class="memItemLeft" align="right" valign="top">synchronized <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1Role.html">Role</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html#aef372453e9eac74c2d19f94c210c2c3e">grantRoleGroup</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a> user, String roleName, String groupName)  throws ImpalaException </td></tr>
<tr class="separator:aef372453e9eac74c2d19f94c210c2c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae3bc162a3787d6661221bb890d1bf64"><td class="memItemLeft" align="right" valign="top">synchronized <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1Role.html">Role</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html#aae3bc162a3787d6661221bb890d1bf64">revokeRoleGroup</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a> user, String roleName, String groupName)  throws ImpalaException </td></tr>
<tr class="separator:aae3bc162a3787d6661221bb890d1bf64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dde66b618d735736e43f5d089db6d64"><td class="memItemLeft" align="right" valign="top">synchronized <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1RolePrivilege.html">RolePrivilege</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html#a8dde66b618d735736e43f5d089db6d64">grantRolePrivilege</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a> user, String roleName, TPrivilege privilege)  throws ImpalaException </td></tr>
<tr class="separator:a8dde66b618d735736e43f5d089db6d64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0030c74700e0580e01e01aa9adeffe44"><td class="memItemLeft" align="right" valign="top">synchronized <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1RolePrivilege.html">RolePrivilege</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html#a0030c74700e0580e01e01aa9adeffe44">revokeRolePrivilege</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a> user, String roleName, TPrivilege privilege)  throws ImpalaException </td></tr>
<tr class="separator:a0030c74700e0580e01e01aa9adeffe44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd1d2f16c573caedb944e7407b15b83e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html#acd1d2f16c573caedb944e7407b15b83e">refresh</a> ()  throws ImpalaRuntimeException </td></tr>
<tr class="separator:acd1d2f16c573caedb944e7407b15b83e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a1c9d14a7a9369663eeecd6edd273a4ea"><td class="memItemLeft" align="right" valign="top">final ScheduledExecutorService&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html#a1c9d14a7a9369663eeecd6edd273a4ea">policyReader_</a></td></tr>
<tr class="separator:a1c9d14a7a9369663eeecd6edd273a4ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7917e37560bd150b2bb597605e170197"><td class="memItemLeft" align="right" valign="top">final <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1CatalogServiceCatalog.html">CatalogServiceCatalog</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html#a7917e37560bd150b2bb597605e170197">catalog_</a></td></tr>
<tr class="separator:a7917e37560bd150b2bb597605e170197"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf81571eea1731f09950deffae0b9c25"><td class="memItemLeft" align="right" valign="top">final <a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryPolicyService.html">SentryPolicyService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html#adf81571eea1731f09950deffae0b9c25">sentryPolicyService_</a></td></tr>
<tr class="separator:adf81571eea1731f09950deffae0b9c25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeac61757d371d489ab58f2a71eb195e6"><td class="memItemLeft" align="right" valign="top">final <a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html#aeac61757d371d489ab58f2a71eb195e6">processUser_</a> = new <a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a>(System.getProperty(&quot;user.name&quot;))</td></tr>
<tr class="separator:aeac61757d371d489ab58f2a71eb195e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a20d6fd3e598e510f5a0d2164af7e5777"><td class="memItemLeft" align="right" valign="top">static final Logger&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html#a20d6fd3e598e510f5a0d2164af7e5777">LOG</a> = Logger.getLogger(SentryProxy.class)</td></tr>
<tr class="separator:a20d6fd3e598e510f5a0d2164af7e5777"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Thread safe class that acts as a link between the Sentry Service and the Catalog to ensure both places are updated consistently. More specifically, this class synchronizes updates to the Sentry Service and the Impala catalog to ensure they are applied atomically (in Impala's view) and only if reading/writing the policy via the Sentry Service succeeds. Note that there may be external updates to the Sentry Service that cannot be protected against. It also periodically refreshes the authorization policy metadata and updates the catalog with any changes. Because any catalog updates need to be synchronized with updates from GRANT/REVOKE statements, it makes sense for this class to synchronize all modifications. </p>

<p>Definition at line <a class="el" href="SentryProxy_8java_source.html#l00052">52</a> of file <a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8a4af78ab335a1184781c2144fd3b0bc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">com.cloudera.impala.util.SentryProxy.SentryProxy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1SentryConfig.html">SentryConfig</a>&#160;</td>
          <td class="paramname"><em>sentryConfig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1CatalogServiceCatalog.html">CatalogServiceCatalog</a>&#160;</td>
          <td class="paramname"><em>catalog</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="SentryProxy_8java_source.html#l00070">70</a> of file <a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a>.</p>

<p>References <a class="el" href="SentryProxy_8java_source.html#l00061">com.cloudera.impala.util.SentryProxy.catalog_</a>, and <a class="el" href="SentryProxy_8java_source.html#l00064">com.cloudera.impala.util.SentryProxy.sentryPolicyService_</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ab3033da3193164faeb497d86ccefac03"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void com.cloudera.impala.util.SentryProxy.checkUserSentryAdmin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>requestingUser</em></td><td>)</td>
          <td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1AuthorizationException.html">AuthorizationException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks whether this user is an admin on the Sentry Service. Throws an AuthorizationException if the user does not have admin privileges or if there are any issues communicating with the Sentry Service.. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">requestingUser</td><td>- The requesting user. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="SentryProxy_8java_source.html#l00174">174</a> of file <a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a>.</p>

</div>
</div>
<a class="anchor" id="af22f5e48aea92bb3b54f370eae8275e1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">synchronized <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1Role.html">Role</a> com.cloudera.impala.util.SentryProxy.createRole </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>roleName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1ImpalaException.html">ImpalaException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates a new role using the Sentry Service and updates the Impala catalog. If the RPC to the Sentry Service fails the Impala catalog will not be modified. Returns the new Role. Throws exception if there was any error updating the Sentry Service or if a role with the same name already exists in the catalog. This includes the case where a role was added externally (eg. via Hive). If the role was added externally, Impala will load it during the next refresh of the policy. TODO: Consider adding the role to the policy if we find it was created externally. </p>

<p>Definition at line <a class="el" href="SentryProxy_8java_source.html#l00200">200</a> of file <a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a>.</p>

<p>References <a class="el" href="SentryProxy_8java_source.html#l00061">com.cloudera.impala.util.SentryProxy.catalog_</a>, and <a class="el" href="CatalogServiceCatalog_8java_source.html#l00967">com.cloudera.impala.catalog.CatalogServiceCatalog.getAuthPolicy()</a>.</p>

</div>
</div>
<a class="anchor" id="a5559029b98b1a2ed7570ae57e47c125a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">synchronized <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1Role.html">Role</a> com.cloudera.impala.util.SentryProxy.dropRole </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>roleName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1ImpalaException.html">ImpalaException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Drops the given role using the Sentry Service and updates the Impala catalog. If the RPC to the Sentry Service fails the Impala catalog will not be modified. Returns the removed Role or null if the role did not exist in the Catalog. Throws exception if there was any error updating the Sentry Service. </p>

<p>Definition at line <a class="el" href="SentryProxy_8java_source.html#l00219">219</a> of file <a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a>.</p>

</div>
</div>
<a class="anchor" id="aef372453e9eac74c2d19f94c210c2c3e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">synchronized <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1Role.html">Role</a> com.cloudera.impala.util.SentryProxy.grantRoleGroup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>roleName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>groupName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1ImpalaException.html">ImpalaException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Removes the role grant group using the Sentry Service and updates the Impala catalog. If the RPC to the Sentry Service fails the Impala catalog will not be modified. Returns the updated Role. Throws exception if there was any error updating the Sentry Service or if the Impala catalog does not contain the given role name. </p>

<p>Definition at line <a class="el" href="SentryProxy_8java_source.html#l00231">231</a> of file <a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a>.</p>

</div>
</div>
<a class="anchor" id="a8dde66b618d735736e43f5d089db6d64"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">synchronized <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1RolePrivilege.html">RolePrivilege</a> com.cloudera.impala.util.SentryProxy.grantRolePrivilege </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>roleName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TPrivilege&#160;</td>
          <td class="paramname"><em>privilege</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1ImpalaException.html">ImpalaException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Grants the privileges on a role using the Sentry Service and updates the Impala catalog. If the RPC to the Sentry Service fails the Impala catalog will not be modified. Returns the new privilege. Throws exception if there was any error updating the Sentry Service or if the Impala catalog does not contain the given role name. </p>

<p>Definition at line <a class="el" href="SentryProxy_8java_source.html#l00257">257</a> of file <a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a>.</p>

</div>
</div>
<a class="anchor" id="acd1d2f16c573caedb944e7407b15b83e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void com.cloudera.impala.util.SentryProxy.refresh </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1ImpalaRuntimeException.html">ImpalaRuntimeException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Perfoms a synchronous refresh of all authorization policy metadata and updates the Catalog with any changes. Throws an ImpalaRuntimeException if there are any errors executing the refresh job. </p>

<p>Definition at line <a class="el" href="SentryProxy_8java_source.html#l00300">300</a> of file <a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a>.</p>

</div>
</div>
<a class="anchor" id="aae3bc162a3787d6661221bb890d1bf64"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">synchronized <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1Role.html">Role</a> com.cloudera.impala.util.SentryProxy.revokeRoleGroup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>roleName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>groupName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1ImpalaException.html">ImpalaException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Removes the role grant group using the Sentry Service and updates the Impala catalog. If the RPC to the Sentry Service fails the Impala catalog will not be modified. Returns the updated Role. Throws exception if there was any error updating the Sentry Service or if the Impala catalog does not contain the given role name. </p>

<p>Definition at line <a class="el" href="SentryProxy_8java_source.html#l00244">244</a> of file <a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a>.</p>

</div>
</div>
<a class="anchor" id="a0030c74700e0580e01e01aa9adeffe44"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">synchronized <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1RolePrivilege.html">RolePrivilege</a> com.cloudera.impala.util.SentryProxy.revokeRolePrivilege </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>roleName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TPrivilege&#160;</td>
          <td class="paramname"><em>privilege</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1ImpalaException.html">ImpalaException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Revokes a privileges on a role using the Sentry Service and updates the Impala catalog. If the RPC to the Sentry Service fails the Impala catalog will not be modified. Returns the removed privilege, or null if the privilege did not exist. Throws an exception if there was any error updating the Sentry Service or if the Impala catalog does not contain the given role name. </p>

<p>Definition at line <a class="el" href="SentryProxy_8java_source.html#l00271">271</a> of file <a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a>.</p>

<p>References <a class="el" href="RolePrivilege_8java_source.html#l00048">com.cloudera.impala.catalog.RolePrivilege.toThrift()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a7917e37560bd150b2bb597605e170197"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final <a class="el" href="classcom_1_1cloudera_1_1impala_1_1catalog_1_1CatalogServiceCatalog.html">CatalogServiceCatalog</a> com.cloudera.impala.util.SentryProxy.catalog_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="SentryProxy_8java_source.html#l00061">61</a> of file <a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a>.</p>

<p>Referenced by <a class="el" href="SentryProxy_8java_source.html#l00200">com.cloudera.impala.util.SentryProxy.createRole()</a>, and <a class="el" href="SentryProxy_8java_source.html#l00070">com.cloudera.impala.util.SentryProxy.SentryProxy()</a>.</p>

</div>
</div>
<a class="anchor" id="a20d6fd3e598e510f5a0d2164af7e5777"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final Logger com.cloudera.impala.util.SentryProxy.LOG = Logger.getLogger(SentryProxy.class)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="SentryProxy_8java_source.html#l00053">53</a> of file <a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a>.</p>

</div>
</div>
<a class="anchor" id="a1c9d14a7a9369663eeecd6edd273a4ea"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final ScheduledExecutorService com.cloudera.impala.util.SentryProxy.policyReader_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">      Executors.newScheduledThreadPool(1)</div>
</div><!-- fragment -->
<p>Definition at line <a class="el" href="SentryProxy_8java_source.html#l00057">57</a> of file <a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a>.</p>

</div>
</div>
<a class="anchor" id="aeac61757d371d489ab58f2a71eb195e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final <a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a> com.cloudera.impala.util.SentryProxy.processUser_ = new <a class="el" href="classcom_1_1cloudera_1_1impala_1_1authorization_1_1User.html">User</a>(System.getProperty(&quot;user.name&quot;))</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="SentryProxy_8java_source.html#l00068">68</a> of file <a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a>.</p>

<p>Referenced by <a class="el" href="SentryProxy_8java_source.html#l00096">com.cloudera.impala.util.SentryProxy.PolicyReader.run()</a>.</p>

</div>
</div>
<a class="anchor" id="adf81571eea1731f09950deffae0b9c25"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final <a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryPolicyService.html">SentryPolicyService</a> com.cloudera.impala.util.SentryProxy.sentryPolicyService_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="SentryProxy_8java_source.html#l00064">64</a> of file <a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a>.</p>

<p>Referenced by <a class="el" href="SentryProxy_8java_source.html#l00096">com.cloudera.impala.util.SentryProxy.PolicyReader.run()</a>, and <a class="el" href="SentryProxy_8java_source.html#l00070">com.cloudera.impala.util.SentryProxy.SentryProxy()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>fe/src/main/java/com/cloudera/impala/util/<a class="el" href="SentryProxy_8java_source.html">SentryProxy.java</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecom.html">com</a></li><li class="navelem"><a class="el" href="namespacecom_1_1cloudera.html">cloudera</a></li><li class="navelem"><a class="el" href="namespacecom_1_1cloudera_1_1impala.html">impala</a></li><li class="navelem"><a class="el" href="namespacecom_1_1cloudera_1_1impala_1_1util.html">util</a></li><li class="navelem"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1util_1_1SentryProxy.html">SentryProxy</a></li>
    <li class="footer">Generated on Thu May 7 2015 16:10:46 for Impala by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
