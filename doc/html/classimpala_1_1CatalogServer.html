<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Impala: impala::CatalogServer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Impala
   </div>
   <div id="projectbrief">Impalaistheopensource,nativeanalyticdatabaseforApacheHadoop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classimpala_1_1CatalogServer.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classimpala_1_1CatalogServer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">impala::CatalogServer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for impala::CatalogServer:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classimpala_1_1CatalogServer__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4a7f81c58f5166ebcab08a58e5c8697e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#a4a7f81c58f5166ebcab08a58e5c8697e">CatalogServer</a> (<a class="el" href="classimpala_1_1MetricGroup.html">MetricGroup</a> *metrics)</td></tr>
<tr class="separator:a4a7f81c58f5166ebcab08a58e5c8697e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adddb37cb521cefb22dfb63e81f987d2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#adddb37cb521cefb22dfb63e81f987d2d">Start</a> ()</td></tr>
<tr class="separator:adddb37cb521cefb22dfb63e81f987d2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95b5171a2d980508e143a863241d9ae5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#a95b5171a2d980508e143a863241d9ae5">RegisterWebpages</a> (<a class="el" href="classimpala_1_1Webserver.html">Webserver</a> *webserver)</td></tr>
<tr class="separator:a95b5171a2d980508e143a863241d9ae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7ed5ff5fabeb48033027d29ac00a8d3"><td class="memItemLeft" align="right" valign="top">const boost::shared_ptr<br class="typebreak"/>
&lt; <a class="el" href="classCatalogServiceIf.html">CatalogServiceIf</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#af7ed5ff5fabeb48033027d29ac00a8d3">thrift_iface</a> () const </td></tr>
<tr class="memdesc:af7ed5ff5fabeb48033027d29ac00a8d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the Thrift API interface that proxies requests onto the local CatalogService.  <a href="#af7ed5ff5fabeb48033027d29ac00a8d3">More...</a><br/></td></tr>
<tr class="separator:af7ed5ff5fabeb48033027d29ac00a8d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ed82c39cc83d1ca58a97f21694ee39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Catalog.html">Catalog</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#aa2ed82c39cc83d1ca58a97f21694ee39">catalog</a> () const </td></tr>
<tr class="separator:aa2ed82c39cc83d1ca58a97f21694ee39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a2bb2425485437537a7ad6453fce6ca4c"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#a2bb2425485437537a7ad6453fce6ca4c">IMPALA_CATALOG_TOPIC</a> = &quot;catalog-update&quot;</td></tr>
<tr class="separator:a2bb2425485437537a7ad6453fce6ca4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:abfb6b78c0e1c4275c8a8f7ee2a542cb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#abfb6b78c0e1c4275c8a8f7ee2a542cb7">UpdateCatalogTopicCallback</a> (const <a class="el" href="classimpala_1_1StatestoreSubscriber.html#a892cd79b5b97edc1a4d0cb692be151d2">StatestoreSubscriber::TopicDeltaMap</a> &amp;incoming_topic_deltas, std::vector&lt; TTopicDelta &gt; *subscriber_topic_updates)</td></tr>
<tr class="separator:abfb6b78c0e1c4275c8a8f7ee2a542cb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8aee3a50365ea07848af93b3a776026"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#af8aee3a50365ea07848af93b3a776026">GatherCatalogUpdatesThread</a> ()</td></tr>
<tr class="separator:af8aee3a50365ea07848af93b3a776026"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbc6c181460c31f735dd54bf948212ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#acbc6c181460c31f735dd54bf948212ad">BuildTopicUpdates</a> (const std::vector&lt; TCatalogObject &gt; &amp;catalog_objects)</td></tr>
<tr class="separator:acbc6c181460c31f735dd54bf948212ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab71ce9ef463e473a564511e4c7dc9975"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#ab71ce9ef463e473a564511e4c7dc9975">CatalogUrlCallback</a> (const <a class="el" href="classimpala_1_1Webserver.html#ac9f7aacffabb53e5c203ea7a3652802b">Webserver::ArgumentMap</a> &amp;args, rapidjson::Document *document)</td></tr>
<tr class="separator:ab71ce9ef463e473a564511e4c7dc9975"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1db46aaddc020c615dcfe05ef77cb5a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#a1db46aaddc020c615dcfe05ef77cb5a7">CatalogObjectsUrlCallback</a> (const <a class="el" href="classimpala_1_1Webserver.html#ac9f7aacffabb53e5c203ea7a3652802b">Webserver::ArgumentMap</a> &amp;args, rapidjson::Document *document)</td></tr>
<tr class="separator:a1db46aaddc020c615dcfe05ef77cb5a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac9267e94bc4983297cfa2f63b679d855"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr<br class="typebreak"/>
&lt; <a class="el" href="classCatalogServiceIf.html">CatalogServiceIf</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#ac9267e94bc4983297cfa2f63b679d855">thrift_iface_</a></td></tr>
<tr class="memdesc:ac9267e94bc4983297cfa2f63b679d855"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thrift API implementation which proxies requests onto this CatalogService.  <a href="#ac9267e94bc4983297cfa2f63b679d855">More...</a><br/></td></tr>
<tr class="separator:ac9267e94bc4983297cfa2f63b679d855"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96d8dfcfe293789c2477c17196fde0be"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1ThriftSerializer.html">ThriftSerializer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#a96d8dfcfe293789c2477c17196fde0be">thrift_serializer_</a></td></tr>
<tr class="separator:a96d8dfcfe293789c2477c17196fde0be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad952284263f38e7c65a0e965c90df415"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1MetricGroup.html">MetricGroup</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#ad952284263f38e7c65a0e965c90df415">metrics_</a></td></tr>
<tr class="separator:ad952284263f38e7c65a0e965c90df415"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75119a49fcfdb49f612cde54e02d1ab1"><td class="memItemLeft" align="right" valign="top">boost::scoped_ptr&lt; <a class="el" href="classimpala_1_1Catalog.html">Catalog</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#a75119a49fcfdb49f612cde54e02d1ab1">catalog_</a></td></tr>
<tr class="separator:a75119a49fcfdb49f612cde54e02d1ab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e8bfa4cfe455d4d98f1b46c28d181d0"><td class="memItemLeft" align="right" valign="top">boost::scoped_ptr<br class="typebreak"/>
&lt; <a class="el" href="classimpala_1_1StatestoreSubscriber.html">StatestoreSubscriber</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#a6e8bfa4cfe455d4d98f1b46c28d181d0">statestore_subscriber_</a></td></tr>
<tr class="separator:a6e8bfa4cfe455d4d98f1b46c28d181d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d18fd5a8a7d3d282b5da0b00d070a23"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1StatsMetric.html">StatsMetric</a>&lt; double &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#a0d18fd5a8a7d3d282b5da0b00d070a23">topic_processing_time_metric_</a></td></tr>
<tr class="memdesc:a0d18fd5a8a7d3d282b5da0b00d070a23"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classimpala_1_1Metric.html" title="TODO: Add ToThrift() for conversion to an RPC-friendly format. ">Metric</a> that tracks the amount of time taken preparing a catalog update.  <a href="#a0d18fd5a8a7d3d282b5da0b00d070a23">More...</a><br/></td></tr>
<tr class="separator:a0d18fd5a8a7d3d282b5da0b00d070a23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc82939fda87238cab76978a7bb9004f"><td class="memItemLeft" align="right" valign="top">boost::scoped_ptr&lt; <a class="el" href="classimpala_1_1Thread.html">Thread</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#acc82939fda87238cab76978a7bb9004f">catalog_update_gathering_thread_</a></td></tr>
<tr class="memdesc:acc82939fda87238cab76978a7bb9004f"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classimpala_1_1Thread.html" title="TODO: Consider allowing fragment IDs as category parameters. ">Thread</a> that polls the catalog for any updates.  <a href="#acc82939fda87238cab76978a7bb9004f">More...</a><br/></td></tr>
<tr class="separator:acc82939fda87238cab76978a7bb9004f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a861e03814d105d119b65810cedcd2b7e"><td class="memItemLeft" align="right" valign="top">boost::unordered_set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#a861e03814d105d119b65810cedcd2b7e">catalog_topic_entry_keys_</a></td></tr>
<tr class="separator:a861e03814d105d119b65810cedcd2b7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93a9c0b268b962c7b4c9f2d60e7e2612"><td class="memItemLeft" align="right" valign="top">boost::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#a93a9c0b268b962c7b4c9f2d60e7e2612">catalog_lock_</a></td></tr>
<tr class="separator:a93a9c0b268b962c7b4c9f2d60e7e2612"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4f9033d423d7c7fad0b17e1600a9c73"><td class="memItemLeft" align="right" valign="top">boost::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#ae4f9033d423d7c7fad0b17e1600a9c73">catalog_update_cv_</a></td></tr>
<tr class="separator:ae4f9033d423d7c7fad0b17e1600a9c73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5da9fd1ef741d3aa7dcbc382d56336fc"><td class="memItemLeft" align="right" valign="top">std::vector&lt; TTopicItem &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#a5da9fd1ef741d3aa7dcbc382d56336fc">pending_topic_updates_</a></td></tr>
<tr class="separator:a5da9fd1ef741d3aa7dcbc382d56336fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90f1a03035d98c7b6fcea545472a304a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#a90f1a03035d98c7b6fcea545472a304a">topic_updates_ready_</a></td></tr>
<tr class="separator:a90f1a03035d98c7b6fcea545472a304a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a210a90ff6a13254e18bda9ee6cd19e62"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#a210a90ff6a13254e18bda9ee6cd19e62">last_sent_catalog_version_</a></td></tr>
<tr class="separator:a210a90ff6a13254e18bda9ee6cd19e62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f350a0a8cbfe0c578325fe95a76fc6f"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#a9f350a0a8cbfe0c578325fe95a76fc6f">catalog_objects_min_version_</a></td></tr>
<tr class="separator:a9f350a0a8cbfe0c578325fe95a76fc6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f6d822fa8eb22a61dc43369622b1461"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1CatalogServer.html#a5f6d822fa8eb22a61dc43369622b1461">catalog_objects_max_version_</a></td></tr>
<tr class="separator:a5f6d822fa8eb22a61dc43369622b1461"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The Impala <a class="el" href="classimpala_1_1CatalogServer.html">CatalogServer</a> manages the caching and persistence of cluster-wide metadata. The <a class="el" href="classimpala_1_1CatalogServer.html">CatalogServer</a> aggregates the metadata from the Hive Metastore, the NameNode, and potentially additional sources in the future. The <a class="el" href="classimpala_1_1CatalogServer.html">CatalogServer</a> uses the <a class="el" href="classimpala_1_1Statestore.html">Statestore</a> to broadcast metadata updates across the cluster. The CatalogService directly handles executing metadata update requests (DDL requests) from clients via a Thrift interface. The <a class="el" href="classimpala_1_1CatalogServer.html">CatalogServer</a> has two main components - a C++ daemon that has the <a class="el" href="classimpala_1_1Statestore.html">Statestore</a> integration code, Thrift service implementiation, and exporting of the debug webpage/metrics. The other main component is written in Java and manages caching and updating of all metadata. For each <a class="el" href="classimpala_1_1Statestore.html">Statestore</a> heartbeat, the C++ Server queries the Java metadata cache over JNI to get the current state of the catalog. Any updates are broadcast to the rest of the cluster using the <a class="el" href="classimpala_1_1Statestore.html">Statestore</a> over the IMPALA_CATALOG_TOPIC. The <a class="el" href="classimpala_1_1CatalogServer.html">CatalogServer</a> must be the only writer to the IMPALA_CATALOG_TOPIC, meaning there cannot be multiple CatalogServers running at the same time, as the correctness of delta updates relies upon this assumption. TODO: In the future the <a class="el" href="classimpala_1_1CatalogServer.html">CatalogServer</a> could go into a "standby" mode if it detects updates from another writer on the topic. This is a bit tricky because it requires some basic form of leader election. </p>

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00057">57</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a4a7f81c58f5166ebcab08a58e5c8697e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CatalogServer::CatalogServer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1MetricGroup.html">MetricGroup</a> *&#160;</td>
          <td class="paramname"><em>metrics</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="catalog-server_8cc_source.html#l00148">148</a> of file <a class="el" href="catalog-server_8cc_source.html">catalog-server.cc</a>.</p>

<p>References <a class="el" href="catalog-server_8cc_source.html#l00045">CATALOG_SERVER_TOPIC_PROCESSING_TIMES</a>, <a class="el" href="catalog-server_8h_source.html#l00078">metrics_</a>, <a class="el" href="metrics_8h_source.html#l00211">impala::MetricGroup::RegisterMetric()</a>, and <a class="el" href="catalog-server_8h_source.html#l00083">topic_processing_time_metric_</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="acbc6c181460c31f735dd54bf948212ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CatalogServer::BuildTopicUpdates </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; TCatalogObject &gt; &amp;&#160;</td>
          <td class="paramname"><em>catalog_objects</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function determines what items have been added/removed from the catalog since the last heartbeat and builds the next topic update to send. To do this, it enumerates the given catalog objects returned looking for the objects that have a catalog version that is &gt; the catalog version sent with the last heartbeat. To determine items that have been deleted, it saves the set of topic entry keys sent with the last update and looks at the difference between it and the current set of topic entry keys. The key for each entry is a string composed of: "TCatalogObjectType:&lt;unique object name&gt;". So for table foo.bar, the key would be "TABLE:foo.bar". Encoding the object type information in the key ensures the keys are unique, as well as helps to determine what object type was removed in a state store delta update (since the state store only sends key names for deleted items). Must hold catalog_lock_ when calling this function. </p>

<p>Definition at line <a class="el" href="catalog-server_8cc_source.html#l00295">295</a> of file <a class="el" href="catalog-server_8cc_source.html">catalog-server.cc</a>.</p>

<p>References <a class="el" href="catalog-server_8h_source.html#l00092">catalog_topic_entry_keys_</a>, <a class="el" href="status_8cc_source.html#l00184">impala::Status::GetDetail()</a>, <a class="el" href="catalog-server_8h_source.html#l00118">last_sent_catalog_version_</a>, <a class="el" href="status_8h_source.html#l00172">impala::Status::ok()</a>, <a class="el" href="catalog-server_8h_source.html#l00107">pending_topic_updates_</a>, <a class="el" href="thrift-util_8h_source.html#l00048">impala::ThriftSerializer::Serialize()</a>, <a class="el" href="catalog-util_8cc_source.html#l00149">impala::TCatalogObjectToEntryKey()</a>, and <a class="el" href="catalog-server_8h_source.html#l00077">thrift_serializer_</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00252">GatherCatalogUpdatesThread()</a>.</p>

</div>
</div>
<a class="anchor" id="aa2ed82c39cc83d1ca58a97f21694ee39"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Catalog.html">Catalog</a>* impala::CatalogServer::catalog </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00072">72</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>References <a class="el" href="catalog-server_8h_source.html#l00079">catalog_</a>.</p>

</div>
</div>
<a class="anchor" id="a1db46aaddc020c615dcfe05ef77cb5a7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CatalogServer::CatalogObjectsUrlCallback </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classimpala_1_1Webserver.html#ac9f7aacffabb53e5c203ea7a3652802b">Webserver::ArgumentMap</a> &amp;&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rapidjson::Document *&#160;</td>
          <td class="paramname"><em>document</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Debug webpage handler that is used to dump the internal state of catalog objects. The caller specifies a "object_type" and "object_name" parameters and this function will get the matching TCatalogObject struct, if one exists. For example, to dump table "bar" in database "foo": &lt;host&gt;:25020/catalog_objects?object_type=TABLE&amp;object_name=foo.bar </p>

<p>Definition at line <a class="el" href="catalog-server_8cc_source.html#l00380">380</a> of file <a class="el" href="catalog-server_8cc_source.html">catalog-server.cc</a>.</p>

<p>References <a class="el" href="catalog-server_8h_source.html#l00079">catalog_</a>, <a class="el" href="status_8cc_source.html#l00184">impala::Status::GetDetail()</a>, <a class="el" href="status_8h_source.html#l00172">impala::Status::ok()</a>, <a class="el" href="catalog-util_8cc_source.html#l00068">impala::TCatalogObjectFromObjectName()</a>, and <a class="el" href="catalog-util_8cc_source.html#l00029">impala::TCatalogObjectTypeFromName()</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00194">RegisterWebpages()</a>.</p>

</div>
</div>
<a class="anchor" id="ab71ce9ef463e473a564511e4c7dc9975"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CatalogServer::CatalogUrlCallback </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classimpala_1_1Webserver.html#ac9f7aacffabb53e5c203ea7a3652802b">Webserver::ArgumentMap</a> &amp;&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rapidjson::Document *&#160;</td>
          <td class="paramname"><em>document</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Example output: "databases": [ { "name": "_impala_builtins", "num_tables": 0, "tables": [] }, { "name": "default", "num_tables": 1, "tables": [ { "fqtn": "default.test_table", "name": "test_table" } ] } ] </p>

<p>Definition at line <a class="el" href="catalog-server_8cc_source.html#l00340">340</a> of file <a class="el" href="catalog-server_8cc_source.html">catalog-server.cc</a>.</p>

<p>References <a class="el" href="catalog-server_8h_source.html#l00079">catalog_</a>, <a class="el" href="status_8cc_source.html#l00184">impala::Status::GetDetail()</a>, and <a class="el" href="status_8h_source.html#l00172">impala::Status::ok()</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00194">RegisterWebpages()</a>.</p>

</div>
</div>
<a class="anchor" id="af8aee3a50365ea07848af93b3a776026"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CatalogServer::GatherCatalogUpdatesThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Executed by the catalog_update_gathering_thread_. Calls into JniCatalog to get the latest set of catalog objects that exist, along with some metadata on each object. The results are stored in the shared catalog_objects_ data structure. Also, explicitly releases free memory back to the OS after each complete iteration. </p>

<p>Definition at line <a class="el" href="catalog-server_8cc_source.html#l00252">252</a> of file <a class="el" href="catalog-server_8cc_source.html">catalog-server.cc</a>.</p>

<p>References <a class="el" href="catalog-server_8cc_source.html#l00295">BuildTopicUpdates()</a>, <a class="el" href="catalog-server_8h_source.html#l00079">catalog_</a>, <a class="el" href="catalog-server_8h_source.html#l00096">catalog_lock_</a>, <a class="el" href="catalog-server_8h_source.html#l00127">catalog_objects_max_version_</a>, <a class="el" href="catalog-server_8h_source.html#l00123">catalog_objects_min_version_</a>, <a class="el" href="catalog-server_8h_source.html#l00102">catalog_update_cv_</a>, <a class="el" href="stopwatch_8h_source.html#l00105">impala::MonotonicStopWatch::ElapsedTime()</a>, <a class="el" href="status_8cc_source.html#l00184">impala::Status::GetDetail()</a>, <a class="el" href="catalog-server_8h_source.html#l00118">last_sent_catalog_version_</a>, <a class="el" href="status_8h_source.html#l00172">impala::Status::ok()</a>, <a class="el" href="catalog-server_8h_source.html#l00107">pending_topic_updates_</a>, <a class="el" href="stopwatch_8h_source.html#l00081">impala::MonotonicStopWatch::Start()</a>, <a class="el" href="catalog-server_8h_source.html#l00083">topic_processing_time_metric_</a>, <a class="el" href="catalog-server_8h_source.html#l00114">topic_updates_ready_</a>, and <a class="el" href="collection-metrics_8h_source.html#l00112">impala::StatsMetric&lt; T &gt;::Update()</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00159">Start()</a>.</p>

</div>
</div>
<a class="anchor" id="a95b5171a2d980508e143a863241d9ae5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CatalogServer::RegisterWebpages </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1Webserver.html">Webserver</a> *&#160;</td>
          <td class="paramname"><em>webserver</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="catalog-server_8cc_source.html#l00194">194</a> of file <a class="el" href="catalog-server_8cc_source.html">catalog-server.cc</a>.</p>

<p>References <a class="el" href="catalog-server_8cc_source.html#l00051">CATALOG_OBJECT_TEMPLATE</a>, <a class="el" href="catalog-server_8cc_source.html#l00050">CATALOG_OBJECT_WEB_PAGE</a>, <a class="el" href="catalog-server_8cc_source.html#l00049">CATALOG_TEMPLATE</a>, <a class="el" href="catalog-server_8cc_source.html#l00048">CATALOG_WEB_PAGE</a>, <a class="el" href="catalog-server_8cc_source.html#l00380">CatalogObjectsUrlCallback()</a>, <a class="el" href="catalog-server_8cc_source.html#l00340">CatalogUrlCallback()</a>, and <a class="el" href="webserver_8cc_source.html#l00412">impala::Webserver::RegisterUrlCallback()</a>.</p>

</div>
</div>
<a class="anchor" id="adddb37cb521cefb22dfb63e81f987d2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> CatalogServer::Start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Starts this CatalogService instance. Returns OK unless some error occurred in which case the status is returned. </p>

<p>Definition at line <a class="el" href="catalog-server_8cc_source.html#l00159">159</a> of file <a class="el" href="catalog-server_8cc_source.html">catalog-server.cc</a>.</p>

<p>References <a class="el" href="catalog-server_8h_source.html#l00079">catalog_</a>, <a class="el" href="catalog-server_8h_source.html#l00096">catalog_lock_</a>, <a class="el" href="catalog-server_8h_source.html#l00102">catalog_update_cv_</a>, <a class="el" href="catalog-server_8h_source.html#l00086">catalog_update_gathering_thread_</a>, <a class="el" href="catalog-server_8cc_source.html#l00252">GatherCatalogUpdatesThread()</a>, <a class="el" href="catalog-server_8h_source.html#l00059">IMPALA_CATALOG_TOPIC</a>, <a class="el" href="network-util_8cc_source.html#l00096">impala::MakeNetworkAddress()</a>, <a class="el" href="catalog-server_8h_source.html#l00078">metrics_</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="catalog-server_8h_source.html#l00080">statestore_subscriber_</a>, <a class="el" href="network-util_8cc_source.html#l00126">impala::TNetworkAddressToString()</a>, and <a class="el" href="catalog-server_8cc_source.html#l00206">UpdateCatalogTopicCallback()</a>.</p>

</div>
</div>
<a class="anchor" id="af7ed5ff5fabeb48033027d29ac00a8d3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const boost::shared_ptr&lt;<a class="el" href="classCatalogServiceIf.html">CatalogServiceIf</a>&gt;&amp; impala::CatalogServer::thrift_iface </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the Thrift API interface that proxies requests onto the local CatalogService. </p>

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00069">69</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>References <a class="el" href="catalog-server_8h_source.html#l00076">thrift_iface_</a>.</p>

</div>
</div>
<a class="anchor" id="abfb6b78c0e1c4275c8a8f7ee2a542cb7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CatalogServer::UpdateCatalogTopicCallback </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classimpala_1_1StatestoreSubscriber.html#a892cd79b5b97edc1a4d0cb692be151d2">StatestoreSubscriber::TopicDeltaMap</a> &amp;&#160;</td>
          <td class="paramname"><em>incoming_topic_deltas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; TTopicDelta &gt; *&#160;</td>
          <td class="paramname"><em>subscriber_topic_updates</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called during each <a class="el" href="classimpala_1_1Statestore.html">Statestore</a> heartbeat and is responsible for updating the current set of catalog objects in the IMPALA_CATALOG_TOPIC. Responds to each heartbeat with a delta update containing the set of changes since the last heartbeat. This function finds all catalog objects that have a catalog version greater than the last update sent by calling into the JniCatalog. The topic is updated with any catalog objects that are new or have been modified since the last heartbeat (by comparing the catalog version of the object with last_sent_catalog_version_). Also determines any deletions of catalog objects by looking at the difference of the last set of topic entry keys that were sent and the current set of topic entry keys. At the end of execution it notifies the catalog_update_gathering_thread_ to fetch the next set of updates from the JniCatalog. All updates are added to the subscriber_topic_updates list and sent back to the <a class="el" href="classimpala_1_1Statestore.html">Statestore</a>. </p>

<p>Definition at line <a class="el" href="catalog-server_8cc_source.html#l00206">206</a> of file <a class="el" href="catalog-server_8cc_source.html">catalog-server.cc</a>.</p>

<p>References <a class="el" href="catalog-server_8h_source.html#l00096">catalog_lock_</a>, <a class="el" href="catalog-server_8h_source.html#l00127">catalog_objects_max_version_</a>, <a class="el" href="catalog-server_8h_source.html#l00123">catalog_objects_min_version_</a>, <a class="el" href="catalog-server_8h_source.html#l00092">catalog_topic_entry_keys_</a>, <a class="el" href="catalog-server_8h_source.html#l00102">catalog_update_cv_</a>, <a class="el" href="catalog-server_8h_source.html#l00059">IMPALA_CATALOG_TOPIC</a>, <a class="el" href="catalog-server_8h_source.html#l00118">last_sent_catalog_version_</a>, <a class="el" href="catalog-server_8h_source.html#l00107">pending_topic_updates_</a>, and <a class="el" href="catalog-server_8h_source.html#l00114">topic_updates_ready_</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00159">Start()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a75119a49fcfdb49f612cde54e02d1ab1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::scoped_ptr&lt;<a class="el" href="classimpala_1_1Catalog.html">Catalog</a>&gt; impala::CatalogServer::catalog_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00079">79</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8h_source.html#l00072">catalog()</a>, <a class="el" href="catalog-server_8cc_source.html#l00380">CatalogObjectsUrlCallback()</a>, <a class="el" href="catalog-server_8cc_source.html#l00340">CatalogUrlCallback()</a>, <a class="el" href="catalog-server_8cc_source.html#l00252">GatherCatalogUpdatesThread()</a>, and <a class="el" href="catalog-server_8cc_source.html#l00159">Start()</a>.</p>

</div>
</div>
<a class="anchor" id="a93a9c0b268b962c7b4c9f2d60e7e2612"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::mutex impala::CatalogServer::catalog_lock_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Protects catalog_update_cv_, pending_topic_updates_, catalog_objects_to/from_version_, and last_sent_catalog_version. </p>

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00096">96</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00252">GatherCatalogUpdatesThread()</a>, <a class="el" href="catalog-server_8cc_source.html#l00159">Start()</a>, and <a class="el" href="catalog-server_8cc_source.html#l00206">UpdateCatalogTopicCallback()</a>.</p>

</div>
</div>
<a class="anchor" id="a5f6d822fa8eb22a61dc43369622b1461"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::CatalogServer::catalog_objects_max_version_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The max catalog version in pending_topic_updates_. Set by the catalog_update_gathering_thread_ and protected by catalog_lock_. </p>

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00127">127</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00252">GatherCatalogUpdatesThread()</a>, and <a class="el" href="catalog-server_8cc_source.html#l00206">UpdateCatalogTopicCallback()</a>.</p>

</div>
</div>
<a class="anchor" id="a9f350a0a8cbfe0c578325fe95a76fc6f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::CatalogServer::catalog_objects_min_version_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The minimum catalog object version in pending_topic_updates_. All items in pending_topic_updates_ will be greater than this version. Set by the catalog_update_gathering_thread_ and protected by catalog_lock_. </p>

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00123">123</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00252">GatherCatalogUpdatesThread()</a>, and <a class="el" href="catalog-server_8cc_source.html#l00206">UpdateCatalogTopicCallback()</a>.</p>

</div>
</div>
<a class="anchor" id="a861e03814d105d119b65810cedcd2b7e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::unordered_set&lt;std::string&gt; impala::CatalogServer::catalog_topic_entry_keys_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tracks the set of catalog objects that exist via their topic entry key. During each IMPALA_CATALOG_TOPIC heartbeat, stores the set of known catalog objects that exist by their topic entry key. Used to track objects that have been removed since the last heartbeat. </p>

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00092">92</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00295">BuildTopicUpdates()</a>, and <a class="el" href="catalog-server_8cc_source.html#l00206">UpdateCatalogTopicCallback()</a>.</p>

</div>
</div>
<a class="anchor" id="ae4f9033d423d7c7fad0b17e1600a9c73"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::condition_variable impala::CatalogServer::catalog_update_cv_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Condition variable used to signal when the catalog_update_gathering_thread_ should fetch its next set of updates from the JniCatalog. At the end of each statestore heartbeat, this CV is signaled and the catalog_update_gathering_thread_ starts querying the JniCatalog for catalog objects. Protected by the catalog_lock_. </p>

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00102">102</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00252">GatherCatalogUpdatesThread()</a>, <a class="el" href="catalog-server_8cc_source.html#l00159">Start()</a>, and <a class="el" href="catalog-server_8cc_source.html#l00206">UpdateCatalogTopicCallback()</a>.</p>

</div>
</div>
<a class="anchor" id="acc82939fda87238cab76978a7bb9004f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::scoped_ptr&lt;<a class="el" href="classimpala_1_1Thread.html">Thread</a>&gt; impala::CatalogServer::catalog_update_gathering_thread_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classimpala_1_1Thread.html" title="TODO: Consider allowing fragment IDs as category parameters. ">Thread</a> that polls the catalog for any updates. </p>

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00086">86</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00159">Start()</a>.</p>

</div>
</div>
<a class="anchor" id="a2bb2425485437537a7ad6453fce6ca4c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string CatalogServer::IMPALA_CATALOG_TOPIC = &quot;catalog-update&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00059">59</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="impala-server_8cc_source.html#l01137">impala::ImpalaServer::CatalogUpdateCallback()</a>, <a class="el" href="impala-server_8cc_source.html#l00226">impala::ImpalaServer::ImpalaServer()</a>, <a class="el" href="catalog-server_8cc_source.html#l00159">Start()</a>, and <a class="el" href="catalog-server_8cc_source.html#l00206">UpdateCatalogTopicCallback()</a>.</p>

</div>
</div>
<a class="anchor" id="a210a90ff6a13254e18bda9ee6cd19e62"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::CatalogServer::last_sent_catalog_version_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The last version of the catalog that was sent over a statestore heartbeat. Set in <a class="el" href="classimpala_1_1CatalogServer.html#abfb6b78c0e1c4275c8a8f7ee2a542cb7">UpdateCatalogTopicCallback()</a> and protected by the catalog_lock_. </p>

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00118">118</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00295">BuildTopicUpdates()</a>, <a class="el" href="catalog-server_8cc_source.html#l00252">GatherCatalogUpdatesThread()</a>, and <a class="el" href="catalog-server_8cc_source.html#l00206">UpdateCatalogTopicCallback()</a>.</p>

</div>
</div>
<a class="anchor" id="ad952284263f38e7c65a0e965c90df415"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1MetricGroup.html">MetricGroup</a>* impala::CatalogServer::metrics_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00078">78</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00148">CatalogServer()</a>, and <a class="el" href="catalog-server_8cc_source.html#l00159">Start()</a>.</p>

</div>
</div>
<a class="anchor" id="a5da9fd1ef741d3aa7dcbc382d56336fc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;TTopicItem&gt; impala::CatalogServer::pending_topic_updates_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The latest available set of catalog topic updates (additions/modifications, and deletions). Set by the catalog_update_gathering_thread_ and protected by catalog_lock_. </p>

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00107">107</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00295">BuildTopicUpdates()</a>, <a class="el" href="catalog-server_8cc_source.html#l00252">GatherCatalogUpdatesThread()</a>, and <a class="el" href="catalog-server_8cc_source.html#l00206">UpdateCatalogTopicCallback()</a>.</p>

</div>
</div>
<a class="anchor" id="a6e8bfa4cfe455d4d98f1b46c28d181d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::scoped_ptr&lt;<a class="el" href="classimpala_1_1StatestoreSubscriber.html">StatestoreSubscriber</a>&gt; impala::CatalogServer::statestore_subscriber_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00080">80</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00159">Start()</a>.</p>

</div>
</div>
<a class="anchor" id="ac9267e94bc4983297cfa2f63b679d855"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="el" href="classCatalogServiceIf.html">CatalogServiceIf</a>&gt; impala::CatalogServer::thrift_iface_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Thrift API implementation which proxies requests onto this CatalogService. </p>

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00076">76</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8h_source.html#l00069">thrift_iface()</a>.</p>

</div>
</div>
<a class="anchor" id="a96d8dfcfe293789c2477c17196fde0be"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1ThriftSerializer.html">ThriftSerializer</a> impala::CatalogServer::thrift_serializer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00077">77</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00295">BuildTopicUpdates()</a>.</p>

</div>
</div>
<a class="anchor" id="a0d18fd5a8a7d3d282b5da0b00d070a23"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1StatsMetric.html">StatsMetric</a>&lt;double&gt;* impala::CatalogServer::topic_processing_time_metric_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classimpala_1_1Metric.html" title="TODO: Add ToThrift() for conversion to an RPC-friendly format. ">Metric</a> that tracks the amount of time taken preparing a catalog update. </p>

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00083">83</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00148">CatalogServer()</a>, and <a class="el" href="catalog-server_8cc_source.html#l00252">GatherCatalogUpdatesThread()</a>.</p>

</div>
</div>
<a class="anchor" id="a90f1a03035d98c7b6fcea545472a304a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::CatalogServer::topic_updates_ready_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flag used to indicate when new topic updates are ready for processing by the heartbeat thread. Set to false at the end of each heartbeat, before signaling the catalog_update_gathering_thread_. Set to true by the catalog_update_gathering_thread_ when it is done building the latest set of pending_topic_updates_. </p>

<p>Definition at line <a class="el" href="catalog-server_8h_source.html#l00114">114</a> of file <a class="el" href="catalog-server_8h_source.html">catalog-server.h</a>.</p>

<p>Referenced by <a class="el" href="catalog-server_8cc_source.html#l00252">GatherCatalogUpdatesThread()</a>, and <a class="el" href="catalog-server_8cc_source.html#l00206">UpdateCatalogTopicCallback()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>be/src/catalog/<a class="el" href="catalog-server_8h_source.html">catalog-server.h</a></li>
<li>be/src/catalog/<a class="el" href="catalog-server_8cc_source.html">catalog-server.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceimpala.html">impala</a></li><li class="navelem"><a class="el" href="classimpala_1_1CatalogServer.html">CatalogServer</a></li>
    <li class="footer">Generated on Thu May 7 2015 16:10:46 for Impala by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
