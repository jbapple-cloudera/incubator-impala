<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Impala: impala::BufferedTupleStream Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Impala
   </div>
   <div id="projectbrief">Impalaistheopensource,nativeanalyticdatabaseforApacheHadoop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classimpala_1_1BufferedTupleStream.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classimpala_1_1BufferedTupleStream-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">impala::BufferedTupleStream Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The underlying memory management is done by the <a class="el" href="classimpala_1_1BufferedBlockMgr.html">BufferedBlockMgr</a>.  
 <a href="classimpala_1_1BufferedTupleStream.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for impala::BufferedTupleStream:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classimpala_1_1BufferedTupleStream__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimpala_1_1BufferedTupleStream_1_1RowIdx.html">RowIdx</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abe18798dd236710e215baec9902023bb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#abe18798dd236710e215baec9902023bb">BufferedTupleStream</a> (<a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *state, const <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> &amp;<a class="el" href="namespaceimpala.html#aa98447566dd6700a2faaaaf3059f4d95">row_desc</a>, <a class="el" href="classimpala_1_1BufferedBlockMgr.html">BufferedBlockMgr</a> *block_mgr, <a class="el" href="structimpala_1_1BufferedBlockMgr_1_1Client.html">BufferedBlockMgr::Client</a> *client, <a class="el" href="classbool.html">bool</a> use_initial_small_buffers=true, <a class="el" href="classbool.html">bool</a> delete_on_read=false, <a class="el" href="classbool.html">bool</a> read_write=false)</td></tr>
<tr class="separator:abe18798dd236710e215baec9902023bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4e2e76ff44f09a358c6c36827da9f50"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#ae4e2e76ff44f09a358c6c36827da9f50">Init</a> (<a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a> *profile=NULL, <a class="el" href="classbool.html">bool</a> pinned=true)</td></tr>
<tr class="separator:ae4e2e76ff44f09a358c6c36827da9f50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21cc752d4db27e53c163e155f5da61e9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a21cc752d4db27e53c163e155f5da61e9">SwitchToIoBuffers</a> (<a class="el" href="classbool.html">bool</a> *got_buffer)</td></tr>
<tr class="separator:a21cc752d4db27e53c163e155f5da61e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9ec745ca549f76bce14872acfbd58c3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#aa9ec745ca549f76bce14872acfbd58c3">AddRow</a> (<a class="el" href="classimpala_1_1TupleRow.html">TupleRow</a> *row, uint8_t **dst=NULL)</td></tr>
<tr class="separator:aa9ec745ca549f76bce14872acfbd58c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf2195dea963d8d7bea71dda65db61da"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#abf2195dea963d8d7bea71dda65db61da">AllocateRow</a> (int size)</td></tr>
<tr class="separator:abf2195dea963d8d7bea71dda65db61da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87909f60c4efe1aae47471ce668136ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a87909f60c4efe1aae47471ce668136ec">GetTupleRow</a> (const <a class="el" href="structimpala_1_1BufferedTupleStream_1_1RowIdx.html">RowIdx</a> &amp;idx, <a class="el" href="classimpala_1_1TupleRow.html">TupleRow</a> *row) const </td></tr>
<tr class="separator:a87909f60c4efe1aae47471ce668136ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f537ea0c46ce3dfc77a5b3bf58a07af"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a4f537ea0c46ce3dfc77a5b3bf58a07af">PrepareForRead</a> (<a class="el" href="classbool.html">bool</a> *got_buffer=NULL)</td></tr>
<tr class="separator:a4f537ea0c46ce3dfc77a5b3bf58a07af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a066d00bdf6f36be1f08bc8a6d64154ac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a066d00bdf6f36be1f08bc8a6d64154ac">PinStream</a> (<a class="el" href="classbool.html">bool</a> already_reserved, <a class="el" href="classbool.html">bool</a> *pinned)</td></tr>
<tr class="separator:a066d00bdf6f36be1f08bc8a6d64154ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d2f211df83a684b2a644d2b8a179026"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a9d2f211df83a684b2a644d2b8a179026">UnpinStream</a> (<a class="el" href="classbool.html">bool</a> all=false)</td></tr>
<tr class="separator:a9d2f211df83a684b2a644d2b8a179026"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5277d4ff9fdeb7b31bdf4d520739582d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a5277d4ff9fdeb7b31bdf4d520739582d">GetNext</a> (<a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *batch, <a class="el" href="classbool.html">bool</a> *eos, std::vector&lt; <a class="el" href="structimpala_1_1BufferedTupleStream_1_1RowIdx.html">RowIdx</a> &gt; *indices=NULL)</td></tr>
<tr class="separator:a5277d4ff9fdeb7b31bdf4d520739582d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acff79f0ded3d6752e2d28c9399c6d0b1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#acff79f0ded3d6752e2d28c9399c6d0b1">GetRows</a> (boost::scoped_ptr&lt; <a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> &gt; *batch, <a class="el" href="classbool.html">bool</a> *got_rows)</td></tr>
<tr class="separator:acff79f0ded3d6752e2d28c9399c6d0b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cb6b2be78a2bff4d5dafd164c3dc0b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a9cb6b2be78a2bff4d5dafd164c3dc0b7">Close</a> ()</td></tr>
<tr class="memdesc:a9cb6b2be78a2bff4d5dafd164c3dc0b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Must be called once at the end to cleanup all resources. Idempotent.  <a href="#a9cb6b2be78a2bff4d5dafd164c3dc0b7">More...</a><br/></td></tr>
<tr class="separator:a9cb6b2be78a2bff4d5dafd164c3dc0b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1df0eb41c554ed098af8d81637b4f615"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a1df0eb41c554ed098af8d81637b4f615">status</a> () const </td></tr>
<tr class="separator:a1df0eb41c554ed098af8d81637b4f615"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5796ba9a36c8485227b810b343aec47"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#af5796ba9a36c8485227b810b343aec47">num_rows</a> () const </td></tr>
<tr class="memdesc:af5796ba9a36c8485227b810b343aec47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of rows in the stream.  <a href="#af5796ba9a36c8485227b810b343aec47">More...</a><br/></td></tr>
<tr class="separator:af5796ba9a36c8485227b810b343aec47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac290526c52cbd7996e9bd435cfa38cce"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#ac290526c52cbd7996e9bd435cfa38cce">rows_returned</a> () const </td></tr>
<tr class="memdesc:ac290526c52cbd7996e9bd435cfa38cce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of rows returned via <a class="el" href="classimpala_1_1BufferedTupleStream.html#a5277d4ff9fdeb7b31bdf4d520739582d">GetNext()</a>.  <a href="#ac290526c52cbd7996e9bd435cfa38cce">More...</a><br/></td></tr>
<tr class="separator:ac290526c52cbd7996e9bd435cfa38cce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6846f309cc28f0d6b6d6caebd033cdec"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a6846f309cc28f0d6b6d6caebd033cdec">byte_size</a> () const </td></tr>
<tr class="memdesc:a6846f309cc28f0d6b6d6caebd033cdec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the byte size necessary to store the entire stream in memory.  <a href="#a6846f309cc28f0d6b6d6caebd033cdec">More...</a><br/></td></tr>
<tr class="separator:a6846f309cc28f0d6b6d6caebd033cdec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac034f1be3983f354b5b7170e4e5afd62"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#ac034f1be3983f354b5b7170e4e5afd62">bytes_in_mem</a> (<a class="el" href="classbool.html">bool</a> ignore_current) const </td></tr>
<tr class="separator:ac034f1be3983f354b5b7170e4e5afd62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b47a81d368ad14edaf0256f2779189a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a3b47a81d368ad14edaf0256f2779189a">is_pinned</a> () const </td></tr>
<tr class="separator:a3b47a81d368ad14edaf0256f2779189a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afccb3ea6e79e38e8d4c16472248d6d18"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#afccb3ea6e79e38e8d4c16472248d6d18">blocks_pinned</a> () const </td></tr>
<tr class="separator:afccb3ea6e79e38e8d4c16472248d6d18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2aeaf7b3790a34697dd682544ae9af7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#ad2aeaf7b3790a34697dd682544ae9af7">blocks_unpinned</a> () const </td></tr>
<tr class="separator:ad2aeaf7b3790a34697dd682544ae9af7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb1902c704be038600e5c5a4209396e8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#abb1902c704be038600e5c5a4209396e8">has_read_block</a> () const </td></tr>
<tr class="separator:abb1902c704be038600e5c5a4209396e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35a832736a10de3486abe8661bfbe58d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a35a832736a10de3486abe8661bfbe58d">has_write_block</a> () const </td></tr>
<tr class="separator:a35a832736a10de3486abe8661bfbe58d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9fe5f5d1dfbf451a340c46a163dd9df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#ad9fe5f5d1dfbf451a340c46a163dd9df">using_small_buffers</a> () const </td></tr>
<tr class="separator:ad9fe5f5d1dfbf451a340c46a163dd9df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4121e3bb85a9a0c2612930a7aed61807"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a4121e3bb85a9a0c2612930a7aed61807">DebugString</a> () const </td></tr>
<tr class="separator:a4121e3bb85a9a0c2612930a7aed61807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4c3af5c319860bc91e712d387fcbc4a"><td class="memTemplParams" colspan="2">template&lt;bool HasNullableTuple&gt; </td></tr>
<tr class="memitem:af4c3af5c319860bc91e712d387fcbc4a"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#af4c3af5c319860bc91e712d387fcbc4a">GetNextInternal</a> (<a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *batch, <a class="el" href="classbool.html">bool</a> *eos, vector&lt; <a class="el" href="structimpala_1_1BufferedTupleStream_1_1RowIdx.html">RowIdx</a> &gt; *indices)</td></tr>
<tr class="separator:af4c3af5c319860bc91e712d387fcbc4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ae583fd3d7ac52ac0ff15acd10fe1101c"><td class="memTemplParams" colspan="2">template&lt;bool HasNullableTuple&gt; </td></tr>
<tr class="memitem:ae583fd3d7ac52ac0ff15acd10fe1101c"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#ae583fd3d7ac52ac0ff15acd10fe1101c">DeepCopyInternal</a> (<a class="el" href="classimpala_1_1TupleRow.html">TupleRow</a> *row, uint8_t **dst)</td></tr>
<tr class="separator:ae583fd3d7ac52ac0ff15acd10fe1101c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab71350bb64c7d989df93ee539acba3f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#ab71350bb64c7d989df93ee539acba3f2">DeepCopy</a> (<a class="el" href="classimpala_1_1TupleRow.html">TupleRow</a> *row, uint8_t **dst)</td></tr>
<tr class="memdesc:ab71350bb64c7d989df93ee539acba3f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper of the templated <a class="el" href="classimpala_1_1BufferedTupleStream.html#ae583fd3d7ac52ac0ff15acd10fe1101c">DeepCopyInternal()</a> function.  <a href="#ab71350bb64c7d989df93ee539acba3f2">More...</a><br/></td></tr>
<tr class="separator:ab71350bb64c7d989df93ee539acba3f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe2947af8d8829e0aa56df12eb32da87"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#afe2947af8d8829e0aa56df12eb32da87">NewBlockForWrite</a> (int min_size, <a class="el" href="classbool.html">bool</a> *got_block)</td></tr>
<tr class="separator:afe2947af8d8829e0aa56df12eb32da87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f0d29df7e0a357db35ad63230833d5d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a4f0d29df7e0a357db35ad63230833d5d">NextBlockForRead</a> ()</td></tr>
<tr class="separator:a4f0d29df7e0a357db35ad63230833d5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2947eeec41d97443113b05585273683"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#ab2947eeec41d97443113b05585273683">ComputeRowSize</a> (<a class="el" href="classimpala_1_1TupleRow.html">TupleRow</a> *row) const </td></tr>
<tr class="memdesc:ab2947eeec41d97443113b05585273683"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the byte size of this row when encoded in a block.  <a href="#ab2947eeec41d97443113b05585273683">More...</a><br/></td></tr>
<tr class="separator:ab2947eeec41d97443113b05585273683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e3173eca7b0c50e2ef87c02947e69c8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a5e3173eca7b0c50e2ef87c02947e69c8">UnpinBlock</a> (<a class="el" href="classimpala_1_1BufferedBlockMgr_1_1Block.html">BufferedBlockMgr::Block</a> *block)</td></tr>
<tr class="memdesc:a5e3173eca7b0c50e2ef87c02947e69c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unpins block if it is an io sized block and updates tracking stats.  <a href="#a5e3173eca7b0c50e2ef87c02947e69c8">More...</a><br/></td></tr>
<tr class="separator:a5e3173eca7b0c50e2ef87c02947e69c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a266d30769c4ddb37c15112c6f0dc9168"><td class="memTemplParams" colspan="2">template&lt;bool HasNullableTuple&gt; </td></tr>
<tr class="memitem:a266d30769c4ddb37c15112c6f0dc9168"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a266d30769c4ddb37c15112c6f0dc9168">GetNextInternal</a> (<a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *batch, <a class="el" href="classbool.html">bool</a> *eos, std::vector&lt; <a class="el" href="structimpala_1_1BufferedTupleStream_1_1RowIdx.html">RowIdx</a> &gt; *indices)</td></tr>
<tr class="memdesc:a266d30769c4ddb37c15112c6f0dc9168"><td class="mdescLeft">&#160;</td><td class="mdescRight">Templated GetNext implementation.  <a href="#a266d30769c4ddb37c15112c6f0dc9168">More...</a><br/></td></tr>
<tr class="separator:a266d30769c4ddb37c15112c6f0dc9168"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a456ca7b067874e762d10212703de1498"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a456ca7b067874e762d10212703de1498">ComputeNumNullIndicatorBytes</a> (int block_size) const </td></tr>
<tr class="memdesc:a456ca7b067874e762d10212703de1498"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the number of bytes needed for null indicators for a block of 'block_size'.  <a href="#a456ca7b067874e762d10212703de1498">More...</a><br/></td></tr>
<tr class="separator:a456ca7b067874e762d10212703de1498"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a0c6479bc0cba32fa1f053c29200c473b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a0c6479bc0cba32fa1f053c29200c473b">use_small_buffers_</a></td></tr>
<tr class="memdesc:a0c6479bc0cba32fa1f053c29200c473b"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, this stream is still using small buffers.  <a href="#a0c6479bc0cba32fa1f053c29200c473b">More...</a><br/></td></tr>
<tr class="separator:a0c6479bc0cba32fa1f053c29200c473b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2882935e6094afad5fc930f2a757e547"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a2882935e6094afad5fc930f2a757e547">delete_on_read_</a></td></tr>
<tr class="memdesc:a2882935e6094afad5fc930f2a757e547"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, blocks are deleted after they are read.  <a href="#a2882935e6094afad5fc930f2a757e547">More...</a><br/></td></tr>
<tr class="separator:a2882935e6094afad5fc930f2a757e547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbe5ffb56ce04fb412628dfa8fa3ff84"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#adbe5ffb56ce04fb412628dfa8fa3ff84">read_write_</a></td></tr>
<tr class="separator:adbe5ffb56ce04fb412628dfa8fa3ff84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3688c23c42e5d8d9f779a3b1a3e74a94"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a3688c23c42e5d8d9f779a3b1a3e74a94">state_</a></td></tr>
<tr class="memdesc:a3688c23c42e5d8d9f779a3b1a3e74a94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runtime state instance used to check for cancellation. Not owned.  <a href="#a3688c23c42e5d8d9f779a3b1a3e74a94">More...</a><br/></td></tr>
<tr class="separator:a3688c23c42e5d8d9f779a3b1a3e74a94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadb29f0e9d4e4693e1716158eee829ec"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#aadb29f0e9d4e4693e1716158eee829ec">desc_</a></td></tr>
<tr class="memdesc:aadb29f0e9d4e4693e1716158eee829ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Description of rows stored in the stream.  <a href="#aadb29f0e9d4e4693e1716158eee829ec">More...</a><br/></td></tr>
<tr class="separator:aadb29f0e9d4e4693e1716158eee829ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a862e2da773f1d3ba0114df6a6fbc7e0a"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a862e2da773f1d3ba0114df6a6fbc7e0a">nullable_tuple_</a></td></tr>
<tr class="memdesc:a862e2da773f1d3ba0114df6a6fbc7e0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether any tuple in the rows is nullable.  <a href="#a862e2da773f1d3ba0114df6a6fbc7e0a">More...</a><br/></td></tr>
<tr class="separator:a862e2da773f1d3ba0114df6a6fbc7e0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dcdf8dc3f624e131420e4f010d8fb83"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a2dcdf8dc3f624e131420e4f010d8fb83">fixed_tuple_row_size_</a></td></tr>
<tr class="memdesc:a2dcdf8dc3f624e131420e4f010d8fb83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sum of the fixed length portion of all the tuples in desc_.  <a href="#a2dcdf8dc3f624e131420e4f010d8fb83">More...</a><br/></td></tr>
<tr class="separator:a2dcdf8dc3f624e131420e4f010d8fb83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfed70ae36697f861227e5f55c6a7d9a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#acfed70ae36697f861227e5f55c6a7d9a">null_indicators_read_block_</a></td></tr>
<tr class="separator:acfed70ae36697f861227e5f55c6a7d9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0313f195d91db86e2d86eeeda553e7a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#ab0313f195d91db86e2d86eeeda553e7a">null_indicators_write_block_</a></td></tr>
<tr class="separator:ab0313f195d91db86e2d86eeeda553e7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08beb5c3c7bded04f1de51c3da10c89a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair&lt; int, <br class="typebreak"/>
std::vector&lt; <a class="el" href="classimpala_1_1SlotDescriptor.html">SlotDescriptor</a> * &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a08beb5c3c7bded04f1de51c3da10c89a">string_slots_</a></td></tr>
<tr class="memdesc:a08beb5c3c7bded04f1de51c3da10c89a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector of all the strings slots grouped by tuple_idx.  <a href="#a08beb5c3c7bded04f1de51c3da10c89a">More...</a><br/></td></tr>
<tr class="separator:a08beb5c3c7bded04f1de51c3da10c89a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a691dc8b7d5efbb60c41e7301dc5a63b6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1BufferedBlockMgr.html">BufferedBlockMgr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a691dc8b7d5efbb60c41e7301dc5a63b6">block_mgr_</a></td></tr>
<tr class="memdesc:a691dc8b7d5efbb60c41e7301dc5a63b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Block manager and client used to allocate, pin and release blocks. Not owned.  <a href="#a691dc8b7d5efbb60c41e7301dc5a63b6">More...</a><br/></td></tr>
<tr class="separator:a691dc8b7d5efbb60c41e7301dc5a63b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada77a4e348b105775fd52e8e39743998"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structimpala_1_1BufferedBlockMgr_1_1Client.html">BufferedBlockMgr::Client</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#ada77a4e348b105775fd52e8e39743998">block_mgr_client_</a></td></tr>
<tr class="separator:ada77a4e348b105775fd52e8e39743998"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acee73ea9a28e990c2dd08d7720ebb209"><td class="memItemLeft" align="right" valign="top">std::list<br class="typebreak"/>
&lt; <a class="el" href="classimpala_1_1BufferedBlockMgr_1_1Block.html">BufferedBlockMgr::Block</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#acee73ea9a28e990c2dd08d7720ebb209">blocks_</a></td></tr>
<tr class="memdesc:acee73ea9a28e990c2dd08d7720ebb209"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of blocks in the stream.  <a href="#acee73ea9a28e990c2dd08d7720ebb209">More...</a><br/></td></tr>
<tr class="separator:acee73ea9a28e990c2dd08d7720ebb209"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad905a907a64f8cd48cfebac638200c99"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#ad905a907a64f8cd48cfebac638200c99">total_byte_size_</a></td></tr>
<tr class="memdesc:ad905a907a64f8cd48cfebac638200c99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total size of blocks_, including small blocks.  <a href="#ad905a907a64f8cd48cfebac638200c99">More...</a><br/></td></tr>
<tr class="separator:ad905a907a64f8cd48cfebac638200c99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f864ab630476a8d77b5a4b51a81604b"><td class="memItemLeft" align="right" valign="top">std::list<br class="typebreak"/>
&lt; <a class="el" href="classimpala_1_1BufferedBlockMgr_1_1Block.html">BufferedBlockMgr::Block</a> * &gt;<br class="typebreak"/>
::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a7f864ab630476a8d77b5a4b51a81604b">read_block_</a></td></tr>
<tr class="separator:a7f864ab630476a8d77b5a4b51a81604b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b9da094a3d35db33e21cd581e4c762d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; uint8_t * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a1b9da094a3d35db33e21cd581e4c762d">block_start_idx_</a></td></tr>
<tr class="separator:a1b9da094a3d35db33e21cd581e4c762d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb1ca6bf40ac1b240a0c50923e4d7f24"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#adb1ca6bf40ac1b240a0c50923e4d7f24">read_ptr_</a></td></tr>
<tr class="memdesc:adb1ca6bf40ac1b240a0c50923e4d7f24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current ptr offset in read_block_'s buffer.  <a href="#adb1ca6bf40ac1b240a0c50923e4d7f24">More...</a><br/></td></tr>
<tr class="separator:adb1ca6bf40ac1b240a0c50923e4d7f24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68aaaeaae3c217e698ce2ca6097d0e43"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a68aaaeaae3c217e698ce2ca6097d0e43">read_tuple_idx_</a></td></tr>
<tr class="memdesc:a68aaaeaae3c217e698ce2ca6097d0e43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current idx of the tuple read from the read_block_ buffer.  <a href="#a68aaaeaae3c217e698ce2ca6097d0e43">More...</a><br/></td></tr>
<tr class="separator:a68aaaeaae3c217e698ce2ca6097d0e43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85fea074aae6b4f949280df51ccb233c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a85fea074aae6b4f949280df51ccb233c">write_tuple_idx_</a></td></tr>
<tr class="memdesc:a85fea074aae6b4f949280df51ccb233c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current idx of the tuple written at the write_block_ buffer.  <a href="#a85fea074aae6b4f949280df51ccb233c">More...</a><br/></td></tr>
<tr class="separator:a85fea074aae6b4f949280df51ccb233c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2229061216f10cfa13936bb38d88cd0"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#aa2229061216f10cfa13936bb38d88cd0">read_bytes_</a></td></tr>
<tr class="memdesc:aa2229061216f10cfa13936bb38d88cd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bytes read in read_block_.  <a href="#aa2229061216f10cfa13936bb38d88cd0">More...</a><br/></td></tr>
<tr class="separator:aa2229061216f10cfa13936bb38d88cd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6fc6d8b3e3aa42fcaba7f3821ed2c33"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#ab6fc6d8b3e3aa42fcaba7f3821ed2c33">rows_returned_</a></td></tr>
<tr class="memdesc:ab6fc6d8b3e3aa42fcaba7f3821ed2c33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of rows returned to the caller from <a class="el" href="classimpala_1_1BufferedTupleStream.html#a5277d4ff9fdeb7b31bdf4d520739582d">GetNext()</a>.  <a href="#ab6fc6d8b3e3aa42fcaba7f3821ed2c33">More...</a><br/></td></tr>
<tr class="separator:ab6fc6d8b3e3aa42fcaba7f3821ed2c33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79f040358dacbbab993af134f709ca0a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a79f040358dacbbab993af134f709ca0a">read_block_idx_</a></td></tr>
<tr class="memdesc:a79f040358dacbbab993af134f709ca0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The block index of the current read block.  <a href="#a79f040358dacbbab993af134f709ca0a">More...</a><br/></td></tr>
<tr class="separator:a79f040358dacbbab993af134f709ca0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1253dcec8226c94833f74bc80a2b90b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1BufferedBlockMgr_1_1Block.html">BufferedBlockMgr::Block</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a1253dcec8226c94833f74bc80a2b90b3">write_block_</a></td></tr>
<tr class="memdesc:a1253dcec8226c94833f74bc80a2b90b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current block for writing. NULL if there is no available block to write to.  <a href="#a1253dcec8226c94833f74bc80a2b90b3">More...</a><br/></td></tr>
<tr class="separator:a1253dcec8226c94833f74bc80a2b90b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54c7376a284c281622eb888ae277d558"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a54c7376a284c281622eb888ae277d558">num_pinned_</a></td></tr>
<tr class="separator:a54c7376a284c281622eb888ae277d558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a115418648d4c9755e7dbd0cfa2c0b9f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a115418648d4c9755e7dbd0cfa2c0b9f0">num_small_blocks_</a></td></tr>
<tr class="memdesc:a115418648d4c9755e7dbd0cfa2c0b9f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The total number of small blocks in blocks_;.  <a href="#a115418648d4c9755e7dbd0cfa2c0b9f0">More...</a><br/></td></tr>
<tr class="separator:a115418648d4c9755e7dbd0cfa2c0b9f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a42e34f0b5faaa053704b93287f1df7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a2a42e34f0b5faaa053704b93287f1df7">closed_</a></td></tr>
<tr class="separator:a2a42e34f0b5faaa053704b93287f1df7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3225a777414cf8650062a18add9dc204"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a3225a777414cf8650062a18add9dc204">status_</a></td></tr>
<tr class="separator:a3225a777414cf8650062a18add9dc204"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae35acc9106a9bc881e8a1127cc57a198"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#ae35acc9106a9bc881e8a1127cc57a198">num_rows_</a></td></tr>
<tr class="memdesc:ae35acc9106a9bc881e8a1127cc57a198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of rows stored in the stream.  <a href="#ae35acc9106a9bc881e8a1127cc57a198">More...</a><br/></td></tr>
<tr class="separator:ae35acc9106a9bc881e8a1127cc57a198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a707b3fddb8c72b48232682dee77cb06c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a707b3fddb8c72b48232682dee77cb06c">pinned_</a></td></tr>
<tr class="separator:a707b3fddb8c72b48232682dee77cb06c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09839179a512779b0c1a584ba96be59f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a09839179a512779b0c1a584ba96be59f">pin_timer_</a></td></tr>
<tr class="memdesc:a09839179a512779b0c1a584ba96be59f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counters added by this object to the parent runtime profile.  <a href="#a09839179a512779b0c1a584ba96be59f">More...</a><br/></td></tr>
<tr class="separator:a09839179a512779b0c1a584ba96be59f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a758fc2bf68fb5a11145b606a93122820"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a758fc2bf68fb5a11145b606a93122820">unpin_timer_</a></td></tr>
<tr class="separator:a758fc2bf68fb5a11145b606a93122820"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7265887dc92e2d30d36cd92de6dfcfe0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1BufferedTupleStream.html#a7265887dc92e2d30d36cd92de6dfcfe0">get_new_block_timer_</a></td></tr>
<tr class="separator:a7265887dc92e2d30d36cd92de6dfcfe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The underlying memory management is done by the <a class="el" href="classimpala_1_1BufferedBlockMgr.html">BufferedBlockMgr</a>. </p>
<p>Class that provides an abstraction for a stream of tuple rows. Rows can be added to the stream and returned. Rows are returned in the order they are added.The tuple stream consists of a number of small (less than io sized blocks) before an arbitrary number of io sized blocks. The smaller blocks do not spill and are there to lower the minimum buffering requirements. For example, an operator that needs to maintain 64 streams (1 buffer per partition) would need, by default, 64 * 8MB = 512MB of buffering. A query with 5 of these operators would require 2.56 GB just to run any query, regardless of how much of that is used. This is problematic for small queries. Instead we will start with a fixed number of small buffers and only start using IO sized buffers when those fill up. The small buffers never spill. The stream will <em>not</em> automatically switch from using small buffers to io sized buffers. The <a class="el" href="classimpala_1_1BufferedTupleStream.html" title="The underlying memory management is done by the BufferedBlockMgr. ">BufferedTupleStream</a> is <em>not</em> thread safe from the caller's point of view. It is expected that all the APIs are called from a single thread. Internally, the object is thread safe wrt to the underlying block mgr. Buffer management: The stream is either pinned or unpinned, set via <a class="el" href="classimpala_1_1BufferedTupleStream.html#a066d00bdf6f36be1f08bc8a6d64154ac">PinStream()</a> and <a class="el" href="classimpala_1_1BufferedTupleStream.html#a9d2f211df83a684b2a644d2b8a179026">UnpinStream()</a>. Blocks are optionally deleted as they are read, set with the delete_on_read c'tor parameter. Block layout: At the header of each block, starting at position 0, there is a bitstring with null indicators for all the tuples in each row in the block. Then there are the tuple rows. We further optimize the codepaths when we know that no tuple is nullable, indicated by 'nullable_tuple_'. <a class="el" href="classimpala_1_1Tuple.html" title="A tuple with 0 materialised slots is represented as NULL. ">Tuple</a> row layout: Tuples are stored back to back. Each tuple starts with the fixed length portion, directly followed by the var len portion. (Fixed len and var len are interleaved). If any tuple in the row is nullable, then there is a bitstring of null tuple indicators at the header of the block. The order of bits in the null indicators bitstring corresponds to the order of tuples in the block. The NULL tuples are not stored in the body of the block, only as set bits in the null indicators bitsting. The behavior of reads and writes is as follows: Read:</p>
<ol type="1">
<li>Delete on read (delete_on_read_): Blocks are deleted as we go through the stream. The data returned by the tuple stream is valid until the next read call so the caller does not need to copy if it is streaming.</li>
<li>Unpinned: Blocks remain in blocks_ and are unpinned after reading.</li>
<li>Pinned: Blocks remain in blocks_ and are left pinned after reading. If the next block in the stream cannot be pinned, the read call will fail and the caller needs to free memory from the underlying block mgr. Write:</li>
</ol>
<ol type="1">
<li>Unpinned: Unpin blocks as they fill up. This means only a single (i.e. the current) block needs to be in memory regardless of the input size (if read_write is true, then two blocks need to be in memory).</li>
<li>Pinned: Blocks are left pinned. If we run out of blocks, the write will fail and the caller needs to free memory from the underlying block mgr. TODO: we need to be able to do read ahead in the <a class="el" href="classimpala_1_1BufferedBlockMgr.html">BufferedBlockMgr</a>. It currently only has PinAllBlocks() which is blocking. We need a non-blocking version of this or some way to indicate a block will need to be pinned soon. TODO: see if this can be merged with <a class="el" href="classimpala_1_1Sorter_1_1Run.html">Sorter::Run</a>. The key difference is that this does not need to return rows in the order they were added, which allows it to be simpler. TODO: we could compact the small buffers when we need to spill but they use very little memory so ths might not be very useful. TODO: improvements:</li>
</ol>
<ul>
<li>Think about how to layout for the var len data more, possibly filling in them from the end of the same block. Don't interleave fixed and var len data.</li>
<li>It would be good to allocate the null indicators at the end of each block and grow this array as new rows are inserted in the block. If we do so, then there will be fewer gaps in case of many rows with NULL tuples.</li>
<li>We will want to multithread this. Add a AddBlock() call so the synchronization happens at the block level. This is a natural extension.</li>
<li>Instead of allocating all blocks from the block_mgr, allocate some blocks that are much smaller (e.g. 16K and doubling up to the block size). This way, very small streams (a common case) will use very little memory. This small blocks are always in memory since spilling them frees up negligible memory.</li>
<li>Return row batches in <a class="el" href="classimpala_1_1BufferedTupleStream.html#a5277d4ff9fdeb7b31bdf4d520739582d">GetNext()</a> instead of filling one in</li>
<li>Should we 32-bit align the start of the tuple rows? Now it is byte-aligned. </li>
</ul>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00109">109</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="abe18798dd236710e215baec9902023bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BufferedTupleStream::BufferedTupleStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> &amp;&#160;</td>
          <td class="paramname"><em>row_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1BufferedBlockMgr.html">BufferedBlockMgr</a> *&#160;</td>
          <td class="paramname"><em>block_mgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structimpala_1_1BufferedBlockMgr_1_1Client.html">BufferedBlockMgr::Client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>use_initial_small_buffers</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>delete_on_read</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>read_write</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>row_desc: description of rows stored in the stream. This is the desc for rows that are added and the rows being returned. block_mgr: Underlying block mgr that owns the data blocks. delete_on_read: Blocks are deleted after they are read. use_initial_small_buffers: If true, the initial N buffers allocated for the tuple stream use smaller than io sized buffers. read_write: Stream allows interchanging read and write operations. Requires at least two blocks may be pinned. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00043">43</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00292">blocks_</a>, <a class="el" href="descriptors_8h_source.html#l00300">impala::TupleDescriptor::byte_size()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00268">desc_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00274">fixed_tuple_row_size_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00281">null_indicators_read_block_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00282">null_indicators_write_block_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00299">read_block_</a>, <a class="el" href="descriptors_8h_source.html#l00303">impala::TupleDescriptor::string_slots()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00285">string_slots_</a>, and <a class="el" href="descriptors_8h_source.html#l00412">impala::RowDescriptor::tuple_descriptors()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa9ec745ca549f76bce14872acfbd58c3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::BufferedTupleStream::AddRow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1TupleRow.html">TupleRow</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t **&#160;</td>
          <td class="paramname"><em>dst</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Adds a single row to the stream. Returns false if an error occurred. <a class="el" href="classimpala_1_1BufferedTupleStream.html" title="The underlying memory management is done by the BufferedBlockMgr. ">BufferedTupleStream</a> will do a deep copy of the memory in the row. *dst is the ptr to the memory (in the underlying block) that this row was copied to. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00025">25</a> of file <a class="el" href="buffered-tuple-stream_8inline_8h_source.html">buffered-tuple-stream.inline.h</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00335">closed_</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00595">ComputeRowSize()</a>, <a class="el" href="buffered-tuple-stream-ir_8cc_source.html#l00022">DeepCopy()</a>, <a class="el" href="compiler-util_8h_source.html#l00032">LIKELY</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>, <a class="el" href="status_8h_source.html#l00172">impala::Status::ok()</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00336">status_</a>.</p>

<p>Referenced by <a class="el" href="partitioned-hash-join-node_8inline_8h_source.html#l00031">impala::PartitionedHashJoinNode::AppendRow()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00427">impala::PartitionedHashJoinNode::AppendRowStreamFull()</a>, <a class="el" href="partitioned-aggregation-node-ir_8cc_source.html#l00033">impala::PartitionedAggregationNode::ProcessBatch()</a>, <a class="el" href="partitioned-hash-join-node-ir_8cc_source.html#l00254">impala::PartitionedHashJoinNode::ProcessBuildBatch()</a>, <a class="el" href="partitioned-hash-join-node-ir_8cc_source.html#l00040">impala::PartitionedHashJoinNode::ProcessProbeBatch()</a>, and <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00467">impala::PartitionedAggregationNode::Partition::Spill()</a>.</p>

</div>
</div>
<a class="anchor" id="abf2195dea963d8d7bea71dda65db61da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t * impala::BufferedTupleStream::AllocateRow </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Allocates space to store a row of size 'size'. Returns NULL if there is not enough memory. The returned memory is guaranteed to fit on one block. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00034">34</a> of file <a class="el" href="buffered-tuple-stream_8inline_8h_source.html">buffered-tuple-stream.inline.h</a>.</p>

<p>References <a class="el" href="buffered-block-mgr_8h_source.html#l00156">impala::BufferedBlockMgr::Block::AddRow()</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00160">impala::BufferedBlockMgr::Block::Allocate()</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00168">impala::BufferedBlockMgr::Block::BytesRemaining()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00335">closed_</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00203">impala::BufferedBlockMgr::Block::is_pinned()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00339">num_rows_</a>, <a class="el" href="status_8h_source.html#l00172">impala::Status::ok()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00336">status_</a>, <a class="el" href="compiler-util_8h_source.html#l00033">UNLIKELY</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00325">write_block_</a>.</p>

<p>Referenced by <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00591">impala::PartitionedAggregationNode::ConstructIntermediateTuple()</a>.</p>

</div>
</div>
<a class="anchor" id="afccb3ea6e79e38e8d4c16472248d6d18"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int impala::BufferedTupleStream::blocks_pinned </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00244">244</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00330">num_pinned_</a>.</p>

<p>Referenced by <a class="el" href="partitioned-hash-join-node_8cc_source.html#l01310">impala::PartitionedHashJoinNode::NodeDebugString()</a>, and <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00500">impala::PartitionedHashJoinNode::ProcessBuildInput()</a>.</p>

</div>
</div>
<a class="anchor" id="ad2aeaf7b3790a34697dd682544ae9af7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int impala::BufferedTupleStream::blocks_unpinned </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00245">245</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00292">blocks_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00330">num_pinned_</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00333">num_small_blocks_</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00357">PinStream()</a>.</p>

</div>
</div>
<a class="anchor" id="a6846f309cc28f0d6b6d6caebd033cdec"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::BufferedTupleStream::byte_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the byte size necessary to store the entire stream in memory. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00237">237</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00295">total_byte_size_</a>.</p>

<p>Referenced by <a class="el" href="row-batch_8cc_source.html#l00218">impala::RowBatch::AddTupleStream()</a>.</p>

</div>
</div>
<a class="anchor" id="ac034f1be3983f354b5b7170e4e5afd62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t BufferedTupleStream::bytes_in_mem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>ignore_current</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the byte size of the stream that is currently pinned in memory. If ignore_current is true, the write_block_ memory is not included. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00156">156</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00292">blocks_</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00325">write_block_</a>.</p>

</div>
</div>
<a class="anchor" id="a9cb6b2be78a2bff4d5dafd164c3dc0b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BufferedTupleStream::Close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Must be called once at the end to cleanup all resources. Idempotent. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00145">145</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00292">blocks_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00335">closed_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00330">num_pinned_</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00084">NumPinned()</a>.</p>

<p>Referenced by <a class="el" href="partitioned-hash-join-node_8cc_source.html#l01065">impala::PartitionedHashJoinNode::BuildHashTables()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00192">impala::PartitionedHashJoinNode::Close()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00500">impala::PartitionedHashJoinNode::ProcessBuildInput()</a>, and <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00849">impala::PartitionedAggregationNode::ProcessStream()</a>.</p>

</div>
</div>
<a class="anchor" id="a456ca7b067874e762d10212703de1498"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int BufferedTupleStream::ComputeNumNullIndicatorBytes </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>block_size</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Computes the number of bytes needed for null indicators for a block of 'block_size'. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00415">415</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00268">desc_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00274">fixed_tuple_row_size_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00271">nullable_tuple_</a>, <a class="el" href="bit-util_8h_source.html#l00097">impala::BitUtil::RoundUpNumi64()</a>, and <a class="el" href="descriptors_8h_source.html#l00412">impala::RowDescriptor::tuple_descriptors()</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>.</p>

</div>
</div>
<a class="anchor" id="ab2947eeec41d97443113b05585273683"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int BufferedTupleStream::ComputeRowSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1TupleRow.html">TupleRow</a> *&#160;</td>
          <td class="paramname"><em>row</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the byte size of this row when encoded in a block. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00595">595</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00274">fixed_tuple_row_size_</a>, <a class="el" href="tuple_8h_source.html#l00128">impala::Tuple::GetStringSlot()</a>, <a class="el" href="tuple-row_8h_source.html#l00030">impala::TupleRow::GetTuple()</a>, <a class="el" href="tuple_8h_source.html#l00112">impala::Tuple::IsNull()</a>, <a class="el" href="string-value_8h_source.html#l00038">impala::StringValue::len</a>, <a class="el" href="descriptors_8h_source.html#l00089">impala::SlotDescriptor::null_indicator_offset()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00271">nullable_tuple_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00285">string_slots_</a>, and <a class="el" href="descriptors_8h_source.html#l00088">impala::SlotDescriptor::tuple_offset()</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00025">AddRow()</a>.</p>

</div>
</div>
<a class="anchor" id="a4121e3bb85a9a0c2612930a7aed61807"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string BufferedTupleStream::DebugString </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00093">93</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00292">blocks_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00335">closed_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00257">delete_on_read_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00330">num_pinned_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00339">num_rows_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00345">pinned_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00299">read_block_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00319">rows_returned_</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00325">write_block_</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream-ir_8cc_source.html#l00032">DeepCopyInternal()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>.</p>

</div>
</div>
<a class="anchor" id="ab71350bb64c7d989df93ee539acba3f2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> BufferedTupleStream::DeepCopy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1TupleRow.html">TupleRow</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t **&#160;</td>
          <td class="paramname"><em>dst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wrapper of the templated <a class="el" href="classimpala_1_1BufferedTupleStream.html#ae583fd3d7ac52ac0ff15acd10fe1101c">DeepCopyInternal()</a> function. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream-ir_8cc_source.html#l00022">22</a> of file <a class="el" href="buffered-tuple-stream-ir_8cc_source.html">buffered-tuple-stream-ir.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00271">nullable_tuple_</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00025">AddRow()</a>.</p>

</div>
</div>
<a class="anchor" id="ae583fd3d7ac52ac0ff15acd10fe1101c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;bool HasNullableTuple&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> BufferedTupleStream::DeepCopyInternal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1TupleRow.html">TupleRow</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t **&#160;</td>
          <td class="paramname"><em>dst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Copies 'row' into write_block_. Returns false if there is not enough space in 'write_block_'. *dst is the ptr to the memory (in the underlying write block) where this row was copied to. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream-ir_8cc_source.html#l00032">32</a> of file <a class="el" href="buffered-tuple-stream-ir_8cc_source.html">buffered-tuple-stream-ir.cc</a>.</p>

<p>References <a class="el" href="buffered-block-mgr_8h_source.html#l00156">impala::BufferedBlockMgr::Block::AddRow()</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00160">impala::BufferedBlockMgr::Block::Allocate()</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00181">impala::BufferedBlockMgr::Block::buffer()</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00168">impala::BufferedBlockMgr::Block::BytesRemaining()</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l00168">impala::BufferedBlockMgr::Block::DebugString()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00093">DebugString()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00268">desc_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00274">fixed_tuple_row_size_</a>, <a class="el" href="tuple_8h_source.html#l00128">impala::Tuple::GetStringSlot()</a>, <a class="el" href="tuple-row_8h_source.html#l00030">impala::TupleRow::GetTuple()</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00203">impala::BufferedBlockMgr::Block::is_pinned()</a>, <a class="el" href="tuple_8h_source.html#l00112">impala::Tuple::IsNull()</a>, <a class="el" href="string-value_8h_source.html#l00038">impala::StringValue::len</a>, <a class="el" href="compiler-util_8h_source.html#l00032">LIKELY</a>, <a class="el" href="descriptors_8h_source.html#l00089">impala::SlotDescriptor::null_indicator_offset()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00282">null_indicators_write_block_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00339">num_rows_</a>, <a class="el" href="string-value_8h_source.html#l00037">impala::StringValue::ptr</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00174">impala::BufferedBlockMgr::Block::ReturnAllocation()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00285">string_slots_</a>, <a class="el" href="descriptors_8h_source.html#l00412">impala::RowDescriptor::tuple_descriptors()</a>, <a class="el" href="descriptors_8h_source.html#l00088">impala::SlotDescriptor::tuple_offset()</a>, <a class="el" href="compiler-util_8h_source.html#l00033">UNLIKELY</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00325">write_block_</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00313">write_tuple_idx_</a>.</p>

</div>
</div>
<a class="anchor" id="a5277d4ff9fdeb7b31bdf4d520739582d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> BufferedTupleStream::GetNext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>eos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structimpala_1_1BufferedTupleStream_1_1RowIdx.html">RowIdx</a> &gt; *&#160;</td>
          <td class="paramname"><em>indices</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the next batch of output rows. Memory is still owned by the <a class="el" href="classimpala_1_1BufferedTupleStream.html" title="The underlying memory management is done by the BufferedBlockMgr. ">BufferedTupleStream</a> and must be copied out by the caller. If 'indices' is non-NULL, that is also populated for each returned row with the index for that row. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00447">447</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00271">nullable_tuple_</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00431">GetRows()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00622">impala::PartitionedHashJoinNode::NextSpilledProbeRowBatch()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00927">impala::PartitionedHashJoinNode::OutputNullAwareNullProbe()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00500">impala::PartitionedHashJoinNode::ProcessBuildInput()</a>, <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00849">impala::PartitionedAggregationNode::ProcessStream()</a>, and <a class="el" href="buffered-tuple-stream-test_8cc_source.html#l00215">impala::SimpleTupleStreamTest::ReadValues()</a>.</p>

</div>
</div>
<a class="anchor" id="a266d30769c4ddb37c15112c6f0dc9168"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;bool HasNullableTuple&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::BufferedTupleStream::GetNextInternal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>eos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structimpala_1_1BufferedTupleStream_1_1RowIdx.html">RowIdx</a> &gt; *&#160;</td>
          <td class="paramname"><em>indices</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Templated GetNext implementation. </p>

</div>
</div>
<a class="anchor" id="af4c3af5c319860bc91e712d387fcbc4a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;bool HasNullableTuple&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::BufferedTupleStream::GetNextInternal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>eos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; <a class="el" href="structimpala_1_1BufferedTupleStream_1_1RowIdx.html">RowIdx</a> &gt; *&#160;</td>
          <td class="paramname"><em>indices</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">457</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="row-batch_8h_source.html#l00094">impala::RowBatch::AddRows()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00292">blocks_</a>, <a class="el" href="row-batch_8h_source.html#l00216">impala::RowBatch::capacity()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00335">closed_</a>, <a class="el" href="row-batch_8h_source.html#l00102">impala::RowBatch::CommitRows()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00093">DebugString()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00257">delete_on_read_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00268">desc_</a>, <a class="el" href="descriptors_8cc_source.html#l00361">impala::RowDescriptor::Equals()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00274">fixed_tuple_row_size_</a>, <a class="el" href="row-batch_8h_source.html#l00140">impala::RowBatch::GetRow()</a>, <a class="el" href="tuple_8h_source.html#l00128">impala::Tuple::GetStringSlot()</a>, <a class="el" href="tuple-row_8h_source.html#l00030">impala::TupleRow::GetTuple()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00243">is_pinned()</a>, <a class="el" href="tuple_8h_source.html#l00112">impala::Tuple::IsNull()</a>, <a class="el" href="string-value_8h_source.html#l00038">impala::StringValue::len</a>, <a class="el" href="row-batch_8h_source.html#l00167">impala::RowBatch::MarkNeedToReturn()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, <a class="el" href="descriptors_8h_source.html#l00089">impala::SlotDescriptor::null_indicator_offset()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00281">null_indicators_read_block_</a>, <a class="el" href="row-batch_8h_source.html#l00215">impala::RowBatch::num_rows()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00339">num_rows_</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00345">pinned_</a>, <a class="el" href="string-value_8h_source.html#l00037">impala::StringValue::ptr</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00299">read_block_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00322">read_block_idx_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00316">read_bytes_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00307">read_ptr_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00310">read_tuple_idx_</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="row-batch_8h_source.html#l00218">impala::RowBatch::row_desc()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00319">rows_returned_</a>, <a class="el" href="tuple-row_8h_source.html#l00034">impala::TupleRow::SetTuple()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00285">string_slots_</a>, <a class="el" href="descriptors_8h_source.html#l00412">impala::RowDescriptor::tuple_descriptors()</a>, <a class="el" href="descriptors_8h_source.html#l00088">impala::SlotDescriptor::tuple_offset()</a>, and <a class="el" href="compiler-util_8h_source.html#l00033">UNLIKELY</a>.</p>

</div>
</div>
<a class="anchor" id="acff79f0ded3d6752e2d28c9399c6d0b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> BufferedTupleStream::GetRows </td>
          <td>(</td>
          <td class="paramtype">boost::scoped_ptr&lt; <a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> &gt; *&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>got_rows</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns all the rows in the stream in batch. This pins the entire stream in the process. *got_rows is false if the stream could not be pinned. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00431">431</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00288">block_mgr_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00289">block_mgr_client_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00268">desc_</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l00522">impala::BufferedBlockMgr::get_tracker()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00447">GetNext()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00231">num_rows()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00357">PinStream()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>, and <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>.</p>

<p>Referenced by <a class="el" href="partitioned-hash-join-node_8cc_source.html#l01163">impala::PartitionedHashJoinNode::EvaluateNullProbe()</a>.</p>

</div>
</div>
<a class="anchor" id="a87909f60c4efe1aae47471ce668136ec"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::BufferedTupleStream::GetTupleRow </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structimpala_1_1BufferedTupleStream_1_1RowIdx.html">RowIdx</a> &amp;&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1TupleRow.html">TupleRow</a> *&#160;</td>
          <td class="paramname"><em>row</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Populates 'row' with the row at 'idx'. The stream must be pinned. The row must have been allocated with the stream's row desc. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00049">49</a> of file <a class="el" href="buffered-tuple-stream_8inline_8h_source.html">buffered-tuple-stream.inline.h</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00129">impala::BufferedTupleStream::RowIdx::block()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00304">block_start_idx_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00292">blocks_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00335">closed_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00257">delete_on_read_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00268">desc_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00137">impala::BufferedTupleStream::RowIdx::idx()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00243">is_pinned()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00271">nullable_tuple_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00133">impala::BufferedTupleStream::RowIdx::offset()</a>, <a class="el" href="tuple-row_8h_source.html#l00034">impala::TupleRow::SetTuple()</a>, and <a class="el" href="descriptors_8h_source.html#l00412">impala::RowDescriptor::tuple_descriptors()</a>.</p>

<p>Referenced by <a class="el" href="hash-table_8inline_8h_source.html#l00210">impala::HashTable::GetRow()</a>.</p>

</div>
</div>
<a class="anchor" id="abb1902c704be038600e5c5a4209396e8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::BufferedTupleStream::has_read_block </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00246">246</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00292">blocks_</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00299">read_block_</a>.</p>

</div>
</div>
<a class="anchor" id="a35a832736a10de3486abe8661bfbe58d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::BufferedTupleStream::has_write_block </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00247">247</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00325">write_block_</a>.</p>

<p>Referenced by <a class="el" href="partitioned-hash-join-node_8cc_source.html#l01065">impala::PartitionedHashJoinNode::BuildHashTables()</a>, and <a class="el" href="partitioned-aggregation-node-ir_8cc_source.html#l00033">impala::PartitionedAggregationNode::ProcessBatch()</a>.</p>

</div>
</div>
<a class="anchor" id="ae4e2e76ff44f09a358c6c36827da9f50"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> BufferedTupleStream::Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a> *&#160;</td>
          <td class="paramname"><em>profile</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>pinned</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the tuple stream object. Must be called once before any of the other APIs. If pinned, the tuple stream starts of pinned, otherwise it is unpinned. If profile is non-NULL, counters are created. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00116">116</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="runtime-profile_8h_source.html#l00050">ADD_TIMER</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00288">block_mgr_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00289">block_mgr_client_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00274">fixed_tuple_row_size_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00350">get_new_block_timer_</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00033">INITIAL_BLOCK_SIZES</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00386">impala::BufferedBlockMgr::max_block_size()</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l00369">impala::BufferedBlockMgr::MemLimitTooLowError()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00348">pin_timer_</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00262">read_write_</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00349">unpin_timer_</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00396">UnpinStream()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00254">use_small_buffers_</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00325">write_block_</a>.</p>

<p>Referenced by <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00094">impala::PartitionedHashJoinNode::Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a3b47a81d368ad14edaf0256f2779189a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::BufferedTupleStream::is_pinned </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00243">243</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00345">pinned_</a>.</p>

<p>Referenced by <a class="el" href="partitioned-hash-join-node_8cc_source.html#l01065">impala::PartitionedHashJoinNode::BuildHashTables()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00049">GetTupleRow()</a>, and <a class="el" href="partitioned-aggregation-node-ir_8cc_source.html#l00033">impala::PartitionedAggregationNode::ProcessBatch()</a>.</p>

</div>
</div>
<a class="anchor" id="afe2947af8d8829e0aa56df12eb32da87"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> BufferedTupleStream::NewBlockForWrite </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>got_block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets a new block from the block_mgr_, updating write_block_ and write_tuple_idx_, and setting *got_block. If there are no blocks available, *got_block is set to false and write_block_ is unchanged. min_size is the minimum number of bytes required for this block. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">178</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="buffered-block-mgr_8h_source.html#l00160">impala::BufferedBlockMgr::Block::Allocate()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00288">block_mgr_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00289">block_mgr_client_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00304">block_start_idx_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00292">blocks_</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00181">impala::BufferedBlockMgr::Block::buffer()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00335">closed_</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00415">ComputeNumNullIndicatorBytes()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00350">get_new_block_timer_</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l00382">impala::BufferedBlockMgr::GetNewBlock()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00033">INITIAL_BLOCK_SIZES</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00198">impala::BufferedBlockMgr::Block::is_max_size()</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00203">impala::BufferedBlockMgr::Block::is_pinned()</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00386">impala::BufferedBlockMgr::max_block_size()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00282">null_indicators_write_block_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00330">num_pinned_</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00157">impala::BufferedBlockMgr::Block::num_rows()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00035">NUM_SMALL_BLOCKS</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00333">num_small_blocks_</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00084">NumPinned()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00345">pinned_</a>, <a class="el" href="pretty-printer_8h_source.html#l00033">impala::PrettyPrinter::Print()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00299">read_block_</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="runtime-profile_8h_source.html#l00053">SCOPED_TIMER</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00295">total_byte_size_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00254">use_small_buffers_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00325">write_block_</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00313">write_tuple_idx_</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00025">AddRow()</a>, <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00034">AllocateRow()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00116">Init()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00136">SwitchToIoBuffers()</a>.</p>

</div>
</div>
<a class="anchor" id="a4f0d29df7e0a357db35ad63230833d5d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> BufferedTupleStream::NextBlockForRead </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Reads the next block from the block_mgr_. This blocks if necessary. Updates read_block_, read_ptr_, read_tuple_idx_ and read_bytes_. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">248</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00288">block_mgr_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00289">block_mgr_client_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00292">blocks_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00335">closed_</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00415">ComputeNumNullIndicatorBytes()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00093">DebugString()</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l01082">impala::BufferedBlockMgr::DebugString()</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l00130">impala::BufferedBlockMgr::Block::Delete()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00257">delete_on_read_</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00198">impala::BufferedBlockMgr::Block::is_max_size()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00281">null_indicators_read_block_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00330">num_pinned_</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00084">NumPinned()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00348">pin_timer_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00345">pinned_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00299">read_block_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00322">read_block_idx_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00316">read_bytes_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00307">read_ptr_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00310">read_tuple_idx_</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="runtime-profile_8h_source.html#l00053">SCOPED_TIMER</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00349">unpin_timer_</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00168">UnpinBlock()</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00325">write_block_</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>.</p>

</div>
</div>
<a class="anchor" id="af5796ba9a36c8485227b810b343aec47"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::BufferedTupleStream::num_rows </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of rows in the stream. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00231">231</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00339">num_rows_</a>.</p>

<p>Referenced by <a class="el" href="partitioned-hash-join-node_8cc_source.html#l01065">impala::PartitionedHashJoinNode::BuildHashTables()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l01228">impala::PartitionedHashJoinNode::CleanUpHashPartitions()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l01163">impala::PartitionedHashJoinNode::EvaluateNullProbe()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00431">GetRows()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00723">impala::PartitionedHashJoinNode::LargestSpilledPartition()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00622">impala::PartitionedHashJoinNode::NextSpilledProbeRowBatch()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l01310">impala::PartitionedHashJoinNode::NodeDebugString()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00661">impala::PartitionedHashJoinNode::PrepareNextPartition()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00969">impala::PartitionedHashJoinNode::PrepareNullAwarePartition()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00500">impala::PartitionedHashJoinNode::ProcessBuildInput()</a>, <a class="el" href="partitioned-hash-join-node-ir_8cc_source.html#l00040">impala::PartitionedHashJoinNode::ProcessProbeBatch()</a>, and <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00849">impala::PartitionedAggregationNode::ProcessStream()</a>.</p>

</div>
</div>
<a class="anchor" id="a066d00bdf6f36be1f08bc8a6d64154ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> BufferedTupleStream::PinStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>already_reserved</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>pinned</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pins all blocks in this stream and switches to pinned mode. If there is not enough memory, *pinned is set to false and the stream is unmodified. If already_reserved is true, the caller has already made a reservation on block_mgr_client_ to pin the stream. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00357">357</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00288">block_mgr_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00289">block_mgr_client_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00304">block_start_idx_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00292">blocks_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00245">blocks_unpinned()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00335">closed_</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l01082">impala::BufferedBlockMgr::DebugString()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00257">delete_on_read_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00330">num_pinned_</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00084">NumPinned()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00348">pin_timer_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00345">pinned_</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="runtime-profile_8h_source.html#l00053">SCOPED_TIMER</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l00257">impala::BufferedBlockMgr::TryAcquireTmpReservation()</a>, and <a class="el" href="logging_8h_source.html#l00057">VLOG_QUERY</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00431">GetRows()</a>.</p>

</div>
</div>
<a class="anchor" id="a4f537ea0c46ce3dfc77a5b3bf58a07af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> BufferedTupleStream::PrepareForRead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>got_buffer</em> = <code>NULL</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepares the stream for reading. If read_write_, this does not need to be called in order to begin reading, otherwise this must be called after the last <a class="el" href="classimpala_1_1BufferedTupleStream.html#aa9ec745ca549f76bce14872acfbd58c3">AddRow()</a> and before <a class="el" href="classimpala_1_1BufferedTupleStream.html#a5277d4ff9fdeb7b31bdf4d520739582d">GetNext()</a>. If got_buffer is NULL, this function will fail (with a bad status) if no buffer is available. If got_buffer is non-null, this function will not fail on OOM and *got_buffer is true if a buffer was pinned. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">314</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00292">blocks_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00335">closed_</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00415">ComputeNumNullIndicatorBytes()</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00203">impala::BufferedBlockMgr::Block::is_pinned()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00281">null_indicators_read_block_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00330">num_pinned_</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00084">NumPinned()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00348">pin_timer_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00345">pinned_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00299">read_block_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00322">read_block_idx_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00316">read_bytes_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00307">read_ptr_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00310">read_tuple_idx_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00262">read_write_</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00319">rows_returned_</a>, <a class="el" href="runtime-profile_8h_source.html#l00053">SCOPED_TIMER</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00168">UnpinBlock()</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00325">write_block_</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00431">GetRows()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00116">Init()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00661">impala::PartitionedHashJoinNode::PrepareNextPartition()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00918">impala::PartitionedHashJoinNode::PrepareNullAwareNullProbe()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00969">impala::PartitionedHashJoinNode::PrepareNullAwarePartition()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00500">impala::PartitionedHashJoinNode::ProcessBuildInput()</a>, and <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00849">impala::PartitionedAggregationNode::ProcessStream()</a>.</p>

</div>
</div>
<a class="anchor" id="ac290526c52cbd7996e9bd435cfa38cce"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::BufferedTupleStream::rows_returned </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of rows returned via <a class="el" href="classimpala_1_1BufferedTupleStream.html#a5277d4ff9fdeb7b31bdf4d520739582d">GetNext()</a>. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00234">234</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00319">rows_returned_</a>.</p>

<p>Referenced by <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00622">impala::PartitionedHashJoinNode::NextSpilledProbeRowBatch()</a>.</p>

</div>
</div>
<a class="anchor" id="a1df0eb41c554ed098af8d81637b4f615"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::BufferedTupleStream::status </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the status of the stream. We don't want to return a more costly <a class="el" href="classimpala_1_1Status.html">Status</a> object on <a class="el" href="classimpala_1_1BufferedTupleStream.html#aa9ec745ca549f76bce14872acfbd58c3">AddRow()</a> which is way that API returns a bool. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00228">228</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00336">status_</a>.</p>

<p>Referenced by <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00427">impala::PartitionedHashJoinNode::AppendRowStreamFull()</a>, <a class="el" href="partitioned-aggregation-node-ir_8cc_source.html#l00033">impala::PartitionedAggregationNode::ProcessBatch()</a>, <a class="el" href="partitioned-hash-join-node-ir_8cc_source.html#l00254">impala::PartitionedHashJoinNode::ProcessBuildBatch()</a>, <a class="el" href="partitioned-hash-join-node-ir_8cc_source.html#l00040">impala::PartitionedHashJoinNode::ProcessProbeBatch()</a>, and <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00467">impala::PartitionedAggregationNode::Partition::Spill()</a>.</p>

</div>
</div>
<a class="anchor" id="a21cc752d4db27e53c163e155f5da61e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> BufferedTupleStream::SwitchToIoBuffers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>got_buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Must be called for streams using small buffers to switch to IO-sized buffers. TODO: this does not seem like the best mechanism. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00136">136</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00288">block_mgr_</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00386">impala::BufferedBlockMgr::max_block_size()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00254">use_small_buffers_</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00325">write_block_</a>.</p>

<p>Referenced by <a class="el" href="partitioned-hash-join-node_8cc_source.html#l01065">impala::PartitionedHashJoinNode::BuildHashTables()</a>.</p>

</div>
</div>
<a class="anchor" id="a5e3173eca7b0c50e2ef87c02947e69c8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> BufferedTupleStream::UnpinBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1BufferedBlockMgr_1_1Block.html">BufferedBlockMgr::Block</a> *&#160;</td>
          <td class="paramname"><em>block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unpins block if it is an io sized block and updates tracking stats. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00168">168</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00292">blocks_</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00198">impala::BufferedBlockMgr::Block::is_max_size()</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00203">impala::BufferedBlockMgr::Block::is_pinned()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00330">num_pinned_</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00084">NumPinned()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="runtime-profile_8h_source.html#l00053">SCOPED_TIMER</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l00126">impala::BufferedBlockMgr::Block::Unpin()</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00349">unpin_timer_</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00396">UnpinStream()</a>.</p>

</div>
</div>
<a class="anchor" id="a9d2f211df83a684b2a644d2b8a179026"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> BufferedTupleStream::UnpinStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>all</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unpins stream. If all is true, all blocks are unpinned, otherwise all blocks except the write_block_ and read_block_ are unpinned. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8cc_source.html#l00396">396</a> of file <a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00292">blocks_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00335">closed_</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00203">impala::BufferedBlockMgr::Block::is_pinned()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00345">pinned_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00299">read_block_</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00262">read_write_</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="runtime-profile_8h_source.html#l00053">SCOPED_TIMER</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00349">unpin_timer_</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00168">UnpinBlock()</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00325">write_block_</a>.</p>

<p>Referenced by <a class="el" href="partitioned-hash-join-node_8cc_source.html#l01228">impala::PartitionedHashJoinNode::CleanUpHashPartitions()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00116">Init()</a>.</p>

</div>
</div>
<a class="anchor" id="ad9fe5f5d1dfbf451a340c46a163dd9df"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::BufferedTupleStream::using_small_buffers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00248">248</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8h_source.html#l00254">use_small_buffers_</a>.</p>

<p>Referenced by <a class="el" href="partitioned-hash-join-node_8cc_source.html#l01065">impala::PartitionedHashJoinNode::BuildHashTables()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a691dc8b7d5efbb60c41e7301dc5a63b6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1BufferedBlockMgr.html">BufferedBlockMgr</a>* impala::BufferedTupleStream::block_mgr_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Block manager and client used to allocate, pin and release blocks. Not owned. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00288">288</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00431">GetRows()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00116">Init()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00357">PinStream()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00136">SwitchToIoBuffers()</a>.</p>

</div>
</div>
<a class="anchor" id="ada77a4e348b105775fd52e8e39743998"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structimpala_1_1BufferedBlockMgr_1_1Client.html">BufferedBlockMgr::Client</a>* impala::BufferedTupleStream::block_mgr_client_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00289">289</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00431">GetRows()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00116">Init()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00357">PinStream()</a>.</p>

</div>
</div>
<a class="anchor" id="a1b9da094a3d35db33e21cd581e4c762d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;uint8_t*&gt; impala::BufferedTupleStream::block_start_idx_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For each block in the stream, the buffer of the start of the block. This is only valid when the stream is pinned, giving random access to data in the stream. This is not maintained for delete_on_read_. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00304">304</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00049">GetTupleRow()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00357">PinStream()</a>.</p>

</div>
</div>
<a class="anchor" id="acee73ea9a28e990c2dd08d7720ebb209"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="classimpala_1_1BufferedBlockMgr_1_1Block.html">BufferedBlockMgr::Block</a>*&gt; impala::BufferedTupleStream::blocks_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>List of blocks in the stream. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00292">292</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8h_source.html#l00245">blocks_unpinned()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00043">BufferedTupleStream()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00156">bytes_in_mem()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00145">Close()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00093">DebugString()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00049">GetTupleRow()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00246">has_read_block()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00357">PinStream()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00168">UnpinBlock()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00396">UnpinStream()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a42e34f0b5faaa053704b93287f1df7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::BufferedTupleStream::closed_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00335">335</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00025">AddRow()</a>, <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00034">AllocateRow()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00145">Close()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00093">DebugString()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00049">GetTupleRow()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00357">PinStream()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00396">UnpinStream()</a>.</p>

</div>
</div>
<a class="anchor" id="a2882935e6094afad5fc930f2a757e547"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classbool.html">bool</a> impala::BufferedTupleStream::delete_on_read_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If true, blocks are deleted after they are read. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00257">257</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00093">DebugString()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00049">GetTupleRow()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00357">PinStream()</a>.</p>

</div>
</div>
<a class="anchor" id="aadb29f0e9d4e4693e1716158eee829ec"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a>&amp; impala::BufferedTupleStream::desc_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Description of rows stored in the stream. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00268">268</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00043">BufferedTupleStream()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00415">ComputeNumNullIndicatorBytes()</a>, <a class="el" href="buffered-tuple-stream-ir_8cc_source.html#l00032">DeepCopyInternal()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00431">GetRows()</a>, and <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00049">GetTupleRow()</a>.</p>

</div>
</div>
<a class="anchor" id="a2dcdf8dc3f624e131420e4f010d8fb83"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int impala::BufferedTupleStream::fixed_tuple_row_size_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sum of the fixed length portion of all the tuples in desc_. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00274">274</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00043">BufferedTupleStream()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00415">ComputeNumNullIndicatorBytes()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00595">ComputeRowSize()</a>, <a class="el" href="buffered-tuple-stream-ir_8cc_source.html#l00032">DeepCopyInternal()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00116">Init()</a>.</p>

</div>
</div>
<a class="anchor" id="a7265887dc92e2d30d36cd92de6dfcfe0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::BufferedTupleStream::get_new_block_timer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00350">350</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00116">Init()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>.</p>

</div>
</div>
<a class="anchor" id="acfed70ae36697f861227e5f55c6a7d9a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t impala::BufferedTupleStream::null_indicators_read_block_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Max size (in bytes) of null indicators bitstring in the current read and write blocks. If 0, it means that there is no need to store null indicators for this RowDesc. We calculate this value based on the block's size and the fixed_tuple_row_size_. When not 0, this value is also an upper bound for the number of (rows * tuples_per_row) in this block. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00281">281</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00043">BufferedTupleStream()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>.</p>

</div>
</div>
<a class="anchor" id="ab0313f195d91db86e2d86eeeda553e7a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t impala::BufferedTupleStream::null_indicators_write_block_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00282">282</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00043">BufferedTupleStream()</a>, <a class="el" href="buffered-tuple-stream-ir_8cc_source.html#l00032">DeepCopyInternal()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>.</p>

</div>
</div>
<a class="anchor" id="a862e2da773f1d3ba0114df6a6fbc7e0a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classbool.html">bool</a> impala::BufferedTupleStream::nullable_tuple_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether any tuple in the rows is nullable. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00271">271</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00415">ComputeNumNullIndicatorBytes()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00595">ComputeRowSize()</a>, <a class="el" href="buffered-tuple-stream-ir_8cc_source.html#l00022">DeepCopy()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00447">GetNext()</a>, and <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00049">GetTupleRow()</a>.</p>

</div>
</div>
<a class="anchor" id="a54c7376a284c281622eb888ae277d558"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int impala::BufferedTupleStream::num_pinned_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of pinned blocks in blocks_, stored to avoid iterating over the list to compute bytes_in_mem and bytes_unpinned. This does not include small blocks. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00330">330</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8h_source.html#l00244">blocks_pinned()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00245">blocks_unpinned()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00145">Close()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00093">DebugString()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00357">PinStream()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00168">UnpinBlock()</a>.</p>

</div>
</div>
<a class="anchor" id="ae35acc9106a9bc881e8a1127cc57a198"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::BufferedTupleStream::num_rows_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of rows stored in the stream. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00339">339</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00034">AllocateRow()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00093">DebugString()</a>, <a class="el" href="buffered-tuple-stream-ir_8cc_source.html#l00032">DeepCopyInternal()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00231">num_rows()</a>.</p>

</div>
</div>
<a class="anchor" id="a115418648d4c9755e7dbd0cfa2c0b9f0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int impala::BufferedTupleStream::num_small_blocks_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The total number of small blocks in blocks_;. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00333">333</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8h_source.html#l00245">blocks_unpinned()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>.</p>

</div>
</div>
<a class="anchor" id="a09839179a512779b0c1a584ba96be59f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::BufferedTupleStream::pin_timer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Counters added by this object to the parent runtime profile. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00348">348</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00116">Init()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00357">PinStream()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>.</p>

</div>
</div>
<a class="anchor" id="a707b3fddb8c72b48232682dee77cb06c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::BufferedTupleStream::pinned_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If true, this stream has been explicitly pinned by the caller. This changes the memory management of the stream. The blocks are not unpinned until the caller calls UnpinAllBlocks(). If false, only the write_block_ and/or read_block_ are pinned (both are if read_write_ is true). </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00345">345</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00093">DebugString()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00243">is_pinned()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00357">PinStream()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00396">UnpinStream()</a>.</p>

</div>
</div>
<a class="anchor" id="a7f864ab630476a8d77b5a4b51a81604b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="classimpala_1_1BufferedBlockMgr_1_1Block.html">BufferedBlockMgr::Block</a>*&gt;::iterator impala::BufferedTupleStream::read_block_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Iterator pointing to the current block for read. If read_write_, this is always a valid block, otherwise equal to list.end() until <a class="el" href="classimpala_1_1BufferedTupleStream.html#a4f537ea0c46ce3dfc77a5b3bf58a07af">PrepareForRead()</a> is called. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00299">299</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00043">BufferedTupleStream()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00093">DebugString()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00246">has_read_block()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00396">UnpinStream()</a>.</p>

</div>
</div>
<a class="anchor" id="a79f040358dacbbab993af134f709ca0a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int impala::BufferedTupleStream::read_block_idx_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The block index of the current read block. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00322">322</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>.</p>

</div>
</div>
<a class="anchor" id="aa2229061216f10cfa13936bb38d88cd0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::BufferedTupleStream::read_bytes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Bytes read in read_block_. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00316">316</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>.</p>

</div>
</div>
<a class="anchor" id="adb1ca6bf40ac1b240a0c50923e4d7f24"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* impala::BufferedTupleStream::read_ptr_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current ptr offset in read_block_'s buffer. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00307">307</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>.</p>

</div>
</div>
<a class="anchor" id="a68aaaeaae3c217e698ce2ca6097d0e43"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t impala::BufferedTupleStream::read_tuple_idx_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current idx of the tuple read from the read_block_ buffer. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00310">310</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>.</p>

</div>
</div>
<a class="anchor" id="adbe5ffb56ce04fb412628dfa8fa3ff84"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classbool.html">bool</a> impala::BufferedTupleStream::read_write_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If true, read and write operations may be interleaved. Otherwise all calls to <a class="el" href="classimpala_1_1BufferedTupleStream.html#aa9ec745ca549f76bce14872acfbd58c3">AddRow()</a> must occur before calling <a class="el" href="classimpala_1_1BufferedTupleStream.html#a4f537ea0c46ce3dfc77a5b3bf58a07af">PrepareForRead()</a> and subsequent calls to <a class="el" href="classimpala_1_1BufferedTupleStream.html#a5277d4ff9fdeb7b31bdf4d520739582d">GetNext()</a>. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00262">262</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00116">Init()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00396">UnpinStream()</a>.</p>

</div>
</div>
<a class="anchor" id="ab6fc6d8b3e3aa42fcaba7f3821ed2c33"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::BufferedTupleStream::rows_returned_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of rows returned to the caller from <a class="el" href="classimpala_1_1BufferedTupleStream.html#a5277d4ff9fdeb7b31bdf4d520739582d">GetNext()</a>. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00319">319</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00093">DebugString()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00234">rows_returned()</a>.</p>

</div>
</div>
<a class="anchor" id="a3688c23c42e5d8d9f779a3b1a3e74a94"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a>* const impala::BufferedTupleStream::state_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Runtime state instance used to check for cancellation. Not owned. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00265">265</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3225a777414cf8650062a18add9dc204"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::BufferedTupleStream::status_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00336">336</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00025">AddRow()</a>, <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00034">AllocateRow()</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00228">status()</a>.</p>

</div>
</div>
<a class="anchor" id="a08beb5c3c7bded04f1de51c3da10c89a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::pair&lt;int, std::vector&lt;<a class="el" href="classimpala_1_1SlotDescriptor.html">SlotDescriptor</a>*&gt; &gt; &gt; impala::BufferedTupleStream::string_slots_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Vector of all the strings slots grouped by tuple_idx. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00285">285</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00043">BufferedTupleStream()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00595">ComputeRowSize()</a>, <a class="el" href="buffered-tuple-stream-ir_8cc_source.html#l00032">DeepCopyInternal()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00457">GetNextInternal()</a>.</p>

</div>
</div>
<a class="anchor" id="ad905a907a64f8cd48cfebac638200c99"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::BufferedTupleStream::total_byte_size_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Total size of blocks_, including small blocks. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00295">295</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8h_source.html#l00237">byte_size()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>.</p>

</div>
</div>
<a class="anchor" id="a758fc2bf68fb5a11145b606a93122820"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::BufferedTupleStream::unpin_timer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00349">349</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00116">Init()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00168">UnpinBlock()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00396">UnpinStream()</a>.</p>

</div>
</div>
<a class="anchor" id="a0c6479bc0cba32fa1f053c29200c473b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::BufferedTupleStream::use_small_buffers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If true, this stream is still using small buffers. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00254">254</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8cc_source.html#l00116">Init()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00136">SwitchToIoBuffers()</a>, and <a class="el" href="buffered-tuple-stream_8h_source.html#l00248">using_small_buffers()</a>.</p>

</div>
</div>
<a class="anchor" id="a1253dcec8226c94833f74bc80a2b90b3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1BufferedBlockMgr_1_1Block.html">BufferedBlockMgr::Block</a>* impala::BufferedTupleStream::write_block_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current block for writing. NULL if there is no available block to write to. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00325">325</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00034">AllocateRow()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00156">bytes_in_mem()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00093">DebugString()</a>, <a class="el" href="buffered-tuple-stream-ir_8cc_source.html#l00032">DeepCopyInternal()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00247">has_write_block()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00116">Init()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00248">NextBlockForRead()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00314">PrepareForRead()</a>, <a class="el" href="buffered-tuple-stream_8cc_source.html#l00136">SwitchToIoBuffers()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00396">UnpinStream()</a>.</p>

</div>
</div>
<a class="anchor" id="a85fea074aae6b4f949280df51ccb233c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t impala::BufferedTupleStream::write_tuple_idx_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current idx of the tuple written at the write_block_ buffer. </p>

<p>Definition at line <a class="el" href="buffered-tuple-stream_8h_source.html#l00313">313</a> of file <a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a>.</p>

<p>Referenced by <a class="el" href="buffered-tuple-stream-ir_8cc_source.html#l00032">DeepCopyInternal()</a>, and <a class="el" href="buffered-tuple-stream_8cc_source.html#l00178">NewBlockForWrite()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>be/src/runtime/<a class="el" href="buffered-tuple-stream_8h_source.html">buffered-tuple-stream.h</a></li>
<li>be/src/runtime/<a class="el" href="buffered-tuple-stream-ir_8cc_source.html">buffered-tuple-stream-ir.cc</a></li>
<li>be/src/runtime/<a class="el" href="buffered-tuple-stream_8cc_source.html">buffered-tuple-stream.cc</a></li>
<li>be/src/runtime/<a class="el" href="buffered-tuple-stream_8inline_8h_source.html">buffered-tuple-stream.inline.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceimpala.html">impala</a></li><li class="navelem"><a class="el" href="classimpala_1_1BufferedTupleStream.html">BufferedTupleStream</a></li>
    <li class="footer">Generated on Thu May 7 2015 16:10:49 for Impala by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
