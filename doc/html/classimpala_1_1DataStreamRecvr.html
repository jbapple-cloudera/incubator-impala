<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Impala: impala::DataStreamRecvr Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Impala
   </div>
   <div id="projectbrief">Impalaistheopensource,nativeanalyticdatabaseforApacheHadoop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classimpala_1_1DataStreamRecvr.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classimpala_1_1DataStreamRecvr-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">impala::DataStreamRecvr Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for impala::DataStreamRecvr:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classimpala_1_1DataStreamRecvr__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr_1_1SenderQueue.html">SenderQueue</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a74fa21e6b1abc4b4df0d5d72b7c608f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a74fa21e6b1abc4b4df0d5d72b7c608f8">~DataStreamRecvr</a> ()</td></tr>
<tr class="separator:a74fa21e6b1abc4b4df0d5d72b7c608f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a796e62648ecf96ec7d7b885d9189c61f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a796e62648ecf96ec7d7b885d9189c61f">GetBatch</a> (<a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> **next_batch)</td></tr>
<tr class="separator:a796e62648ecf96ec7d7b885d9189c61f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82bf29ddd88693ab08a1a451c8ce4d38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a82bf29ddd88693ab08a1a451c8ce4d38">Close</a> ()</td></tr>
<tr class="memdesc:a82bf29ddd88693ab08a1a451c8ce4d38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deregister from <a class="el" href="classimpala_1_1DataStreamMgr.html">DataStreamMgr</a> instance, which shares ownership of this instance.  <a href="#a82bf29ddd88693ab08a1a451c8ce4d38">More...</a><br/></td></tr>
<tr class="separator:a82bf29ddd88693ab08a1a451c8ce4d38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd06416e606502d099b5b04f5ea4262b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#afd06416e606502d099b5b04f5ea4262b">CreateMerger</a> (const <a class="el" href="classimpala_1_1TupleRowComparator.html">TupleRowComparator</a> &amp;less_than)</td></tr>
<tr class="separator:afd06416e606502d099b5b04f5ea4262b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6feab9301f196a3492d0b4a080ca947"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#ab6feab9301f196a3492d0b4a080ca947">GetNext</a> (<a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *output_batch, <a class="el" href="classbool.html">bool</a> *eos)</td></tr>
<tr class="separator:ab6feab9301f196a3492d0b4a080ca947"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54819976e6e5d7b58969e6abe33a31cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a54819976e6e5d7b58969e6abe33a31cb">TransferAllResources</a> (<a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *transfer_batch)</td></tr>
<tr class="separator:a54819976e6e5d7b58969e6abe33a31cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae27d989f25f6d43443f7c4a5b6e556e7"><td class="memItemLeft" align="right" valign="top">const TUniqueId &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#ae27d989f25f6d43443f7c4a5b6e556e7">fragment_instance_id</a> () const </td></tr>
<tr class="separator:ae27d989f25f6d43443f7c4a5b6e556e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fa40ad9cb9326f2446e0d969f0aab09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceimpala.html#aca80061c98b44477ea84e4332993b7e7">PlanNodeId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a4fa40ad9cb9326f2446e0d969f0aab09">dest_node_id</a> () const </td></tr>
<tr class="separator:a4fa40ad9cb9326f2446e0d969f0aab09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5112498720084a5ffeb0b10e0a8815d8"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a5112498720084a5ffeb0b10e0a8815d8">row_desc</a> () const </td></tr>
<tr class="separator:a5112498720084a5ffeb0b10e0a8815d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14c0ea6b2f687c7d29203e4960544b5b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a14c0ea6b2f687c7d29203e4960544b5b">mem_tracker</a> () const </td></tr>
<tr class="separator:a14c0ea6b2f687c7d29203e4960544b5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a95704160c969578e3e7188336488b046"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a95704160c969578e3e7188336488b046">DataStreamRecvr</a> (<a class="el" href="classimpala_1_1DataStreamMgr.html">DataStreamMgr</a> *stream_mgr, <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *parent_tracker, const <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> &amp;<a class="el" href="classimpala_1_1DataStreamRecvr.html#a5112498720084a5ffeb0b10e0a8815d8">row_desc</a>, const TUniqueId &amp;<a class="el" href="classimpala_1_1DataStreamRecvr.html#ae27d989f25f6d43443f7c4a5b6e556e7">fragment_instance_id</a>, <a class="el" href="namespaceimpala.html#aca80061c98b44477ea84e4332993b7e7">PlanNodeId</a> <a class="el" href="classimpala_1_1DataStreamRecvr.html#a4fa40ad9cb9326f2446e0d969f0aab09">dest_node_id</a>, int num_senders, <a class="el" href="classbool.html">bool</a> is_merging, int total_buffer_limit, <a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a> *profile)</td></tr>
<tr class="separator:a95704160c969578e3e7188336488b046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a371981dffbd2f6ccbaac2f2858055aa5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a371981dffbd2f6ccbaac2f2858055aa5">AddBatch</a> (const TRowBatch &amp;thrift_batch, int sender_id)</td></tr>
<tr class="separator:a371981dffbd2f6ccbaac2f2858055aa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a592b66d17dcff8a1f82783f9645825b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a592b66d17dcff8a1f82783f9645825b0">RemoveSender</a> (int sender_id)</td></tr>
<tr class="separator:a592b66d17dcff8a1f82783f9645825b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8022f909e7bbe1e67bcaf6be671ba70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#ad8022f909e7bbe1e67bcaf6be671ba70">CancelStream</a> ()</td></tr>
<tr class="memdesc:ad8022f909e7bbe1e67bcaf6be671ba70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Empties the sender queues and notifies all waiting consumers of cancellation.  <a href="#ad8022f909e7bbe1e67bcaf6be671ba70">More...</a><br/></td></tr>
<tr class="separator:ad8022f909e7bbe1e67bcaf6be671ba70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1f839c95e2aa1add240a2dcfd038965"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#ac1f839c95e2aa1add240a2dcfd038965">ExceedsLimit</a> (int batch_size)</td></tr>
<tr class="separator:ac1f839c95e2aa1add240a2dcfd038965"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a82c34ede2d691fcea5462819fa2dd66e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1DataStreamMgr.html">DataStreamMgr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a82c34ede2d691fcea5462819fa2dd66e">mgr_</a></td></tr>
<tr class="memdesc:a82c34ede2d691fcea5462819fa2dd66e"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classimpala_1_1DataStreamMgr.html">DataStreamMgr</a> instance used to create this recvr. (Not owned)  <a href="#a82c34ede2d691fcea5462819fa2dd66e">More...</a><br/></td></tr>
<tr class="separator:a82c34ede2d691fcea5462819fa2dd66e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7565442390e6e06b26ee9dcd25920fb1"><td class="memItemLeft" align="right" valign="top">TUniqueId&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a7565442390e6e06b26ee9dcd25920fb1">fragment_instance_id_</a></td></tr>
<tr class="memdesc:a7565442390e6e06b26ee9dcd25920fb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fragment and node id of the destination exchange node this receiver is used by.  <a href="#a7565442390e6e06b26ee9dcd25920fb1">More...</a><br/></td></tr>
<tr class="separator:a7565442390e6e06b26ee9dcd25920fb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28f5d95ec41f8c3dd17d1ac8b03a9031"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceimpala.html#aca80061c98b44477ea84e4332993b7e7">PlanNodeId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a28f5d95ec41f8c3dd17d1ac8b03a9031">dest_node_id_</a></td></tr>
<tr class="separator:a28f5d95ec41f8c3dd17d1ac8b03a9031"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abba4de172e0ed577adb527019ff476b9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#abba4de172e0ed577adb527019ff476b9">total_buffer_limit_</a></td></tr>
<tr class="separator:abba4de172e0ed577adb527019ff476b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24ec86174dabf3eeb134548484563d09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a24ec86174dabf3eeb134548484563d09">row_desc_</a></td></tr>
<tr class="memdesc:a24ec86174dabf3eeb134548484563d09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Row schema, copied from the caller of CreateRecvr().  <a href="#a24ec86174dabf3eeb134548484563d09">More...</a><br/></td></tr>
<tr class="separator:a24ec86174dabf3eeb134548484563d09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa0ce3db5abfdc2999afde729041a0db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#afa0ce3db5abfdc2999afde729041a0db">is_merging_</a></td></tr>
<tr class="separator:afa0ce3db5abfdc2999afde729041a0db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbdce03f3b560052471713de0b73f732"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1AtomicInt.html">AtomicInt</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#afbdce03f3b560052471713de0b73f732">num_buffered_bytes_</a></td></tr>
<tr class="memdesc:afbdce03f3b560052471713de0b73f732"><td class="mdescLeft">&#160;</td><td class="mdescRight">total number of bytes held across all sender queues.  <a href="#afbdce03f3b560052471713de0b73f732">More...</a><br/></td></tr>
<tr class="separator:afbdce03f3b560052471713de0b73f732"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a285d5468eb08ad9cea8b4eed5d6e476b"><td class="memItemLeft" align="right" valign="top">boost::scoped_ptr&lt; <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a285d5468eb08ad9cea8b4eed5d6e476b">mem_tracker_</a></td></tr>
<tr class="memdesc:a285d5468eb08ad9cea8b4eed5d6e476b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memtracker for batches in the sender queue(s).  <a href="#a285d5468eb08ad9cea8b4eed5d6e476b">More...</a><br/></td></tr>
<tr class="separator:a285d5468eb08ad9cea8b4eed5d6e476b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa80cafd0d6a9364212625b3e729f83cf"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classimpala_1_1DataStreamRecvr_1_1SenderQueue.html">SenderQueue</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#aa80cafd0d6a9364212625b3e729f83cf">sender_queues_</a></td></tr>
<tr class="separator:aa80cafd0d6a9364212625b3e729f83cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbad832b612aa1f064a71ac8816c9b78"><td class="memItemLeft" align="right" valign="top">boost::scoped_ptr<br class="typebreak"/>
&lt; <a class="el" href="classimpala_1_1SortedRunMerger.html">SortedRunMerger</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#adbad832b612aa1f064a71ac8816c9b78">merger_</a></td></tr>
<tr class="memdesc:adbad832b612aa1f064a71ac8816c9b78"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classimpala_1_1SortedRunMerger.html">SortedRunMerger</a> used to merge rows from different senders.  <a href="#adbad832b612aa1f064a71ac8816c9b78">More...</a><br/></td></tr>
<tr class="separator:adbad832b612aa1f064a71ac8816c9b78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb29c592d85a58f52a9d0471410bd744"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1ObjectPool.html">ObjectPool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#afb29c592d85a58f52a9d0471410bd744">sender_queue_pool_</a></td></tr>
<tr class="memdesc:afb29c592d85a58f52a9d0471410bd744"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pool of sender queues.  <a href="#afb29c592d85a58f52a9d0471410bd744">More...</a><br/></td></tr>
<tr class="separator:afb29c592d85a58f52a9d0471410bd744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef4acd3a3ded9d08e5b396be89204f02"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#aef4acd3a3ded9d08e5b396be89204f02">profile_</a></td></tr>
<tr class="memdesc:aef4acd3a3ded9d08e5b396be89204f02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runtime profile storing the counters below.  <a href="#aef4acd3a3ded9d08e5b396be89204f02">More...</a><br/></td></tr>
<tr class="separator:aef4acd3a3ded9d08e5b396be89204f02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6e49dee22386cf631ed4bbff6dbe7c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#ac6e49dee22386cf631ed4bbff6dbe7c1">bytes_received_counter_</a></td></tr>
<tr class="memdesc:ac6e49dee22386cf631ed4bbff6dbe7c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of bytes received.  <a href="#ac6e49dee22386cf631ed4bbff6dbe7c1">More...</a><br/></td></tr>
<tr class="separator:ac6e49dee22386cf631ed4bbff6dbe7c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ce3b2927ae39c93004f734c3851a53c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1TimeSeriesCounter.html">RuntimeProfile::TimeSeriesCounter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a5ce3b2927ae39c93004f734c3851a53c">bytes_received_time_series_counter_</a></td></tr>
<tr class="memdesc:a5ce3b2927ae39c93004f734c3851a53c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time series of number of bytes received, samples bytes_received_counter_.  <a href="#a5ce3b2927ae39c93004f734c3851a53c">More...</a><br/></td></tr>
<tr class="separator:a5ce3b2927ae39c93004f734c3851a53c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9b337c30025abab1a453c9fce0d1137"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#ac9b337c30025abab1a453c9fce0d1137">deserialize_row_batch_timer_</a></td></tr>
<tr class="separator:ac9b337c30025abab1a453c9fce0d1137"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6f0020504a6bf987d393d58b1948bf9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#ab6f0020504a6bf987d393d58b1948bf9">first_batch_wait_total_timer_</a></td></tr>
<tr class="separator:ab6f0020504a6bf987d393d58b1948bf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2798029b198f844755c2a921547851d6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a2798029b198f844755c2a921547851d6">buffer_full_total_timer_</a></td></tr>
<tr class="separator:a2798029b198f844755c2a921547851d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd3e4785dc75fe37a18257a97059cad2"><td class="memItemLeft" align="right" valign="top">boost::try_mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#afd3e4785dc75fe37a18257a97059cad2">buffer_wall_timer_lock_</a></td></tr>
<tr class="separator:afd3e4785dc75fe37a18257a97059cad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdcae91b92b77481d1362b6346e0c577"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#afdcae91b92b77481d1362b6346e0c577">buffer_full_wall_timer_</a></td></tr>
<tr class="memdesc:afdcae91b92b77481d1362b6346e0c577"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wall time senders spend waiting for the recv buffer to have capacity.  <a href="#afdcae91b92b77481d1362b6346e0c577">More...</a><br/></td></tr>
<tr class="separator:afdcae91b92b77481d1362b6346e0c577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aa6ea894a5dac83cd1bcf85d7ead521"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#a3aa6ea894a5dac83cd1bcf85d7ead521">data_arrival_timer_</a></td></tr>
<tr class="memdesc:a3aa6ea894a5dac83cd1bcf85d7ead521"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total time spent waiting for data to arrive in the recv buffer.  <a href="#a3aa6ea894a5dac83cd1bcf85d7ead521">More...</a><br/></td></tr>
<tr class="separator:a3aa6ea894a5dac83cd1bcf85d7ead521"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:aafc5cf64ed6db14f2a4fb588fb080c5b"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataStreamRecvr.html#aafc5cf64ed6db14f2a4fb588fb080c5b">DataStreamMgr</a></td></tr>
<tr class="separator:aafc5cf64ed6db14f2a4fb588fb080c5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Single receiver of an m:n data stream. <a class="el" href="classimpala_1_1DataStreamRecvr.html">DataStreamRecvr</a> maintains one or more queues of row batches received by a <a class="el" href="classimpala_1_1DataStreamMgr.html">DataStreamMgr</a> from one or more sender fragment instances. Receivers are created via <a class="el" href="classimpala_1_1DataStreamMgr.html#ae55e553992518c85b403ef61d915278b">DataStreamMgr::CreateRecvr()</a>. Ownership of a stream recvr is shared between the <a class="el" href="classimpala_1_1DataStreamMgr.html">DataStreamMgr</a> that created it and the caller of <a class="el" href="classimpala_1_1DataStreamMgr.html#ae55e553992518c85b403ef61d915278b">DataStreamMgr::CreateRecvr()</a> (i.e. the exchange node) The is_merging_ member determines if the recvr merges input streams from different sender fragment instances according to a specified sort order. If is_merging_ = false : Only one batch queue is maintained for row batches from all sender fragment instances. These row batches are returned one at a time via <a class="el" href="classimpala_1_1DataStreamRecvr.html#a796e62648ecf96ec7d7b885d9189c61f">GetBatch()</a>. If is_merging_ is true : One queue is created for the batches from each distinct sender. A <a class="el" href="classimpala_1_1SortedRunMerger.html">SortedRunMerger</a> instance must be created via <a class="el" href="classimpala_1_1DataStreamRecvr.html#afd06416e606502d099b5b04f5ea4262b">CreateMerger()</a> prior to retrieving any rows from the receiver. Rows are retrieved from the receiver via GetNext(RowBatch* output_batch, int limit, bool eos). After the final call to <a class="el" href="classimpala_1_1DataStreamRecvr.html#ab6feab9301f196a3492d0b4a080ca947">GetNext()</a>, <a class="el" href="classimpala_1_1DataStreamRecvr.html#a54819976e6e5d7b58969e6abe33a31cb">TransferAllResources()</a> must be called to transfer resources from the input batches from each sender to the caller's output batch. The receiver sets deep_copy to false on the merger - resources are transferred from the input batches from each sender queue to the merger to the output batch by the merger itself as it processes each run. <a class="el" href="classimpala_1_1DataStreamRecvr.html#a82bf29ddd88693ab08a1a451c8ce4d38" title="Deregister from DataStreamMgr instance, which shares ownership of this instance. ">DataStreamRecvr::Close()</a> must be called by the caller of CreateRecvr() to remove the recvr instance from the tracking structure of its <a class="el" href="classimpala_1_1DataStreamMgr.html">DataStreamMgr</a> in all cases. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00060">60</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a74fa21e6b1abc4b4df0d5d72b7c608f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">impala::DataStreamRecvr::~DataStreamRecvr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="data-stream-recvr_8cc_source.html#l00346">346</a> of file <a class="el" href="data-stream-recvr_8cc_source.html">data-stream-recvr.cc</a>.</p>

<p>References <a class="el" href="data-stream-recvr_8h_source.html#l00142">mem_tracker_</a>, and <a class="el" href="data-stream-recvr_8h_source.html#l00120">mgr_</a>.</p>

</div>
</div>
<a class="anchor" id="a95704160c969578e3e7188336488b046"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">impala::DataStreamRecvr::DataStreamRecvr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1DataStreamMgr.html">DataStreamMgr</a> *&#160;</td>
          <td class="paramname"><em>stream_mgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *&#160;</td>
          <td class="paramname"><em>parent_tracker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> &amp;&#160;</td>
          <td class="paramname"><em>row_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TUniqueId &amp;&#160;</td>
          <td class="paramname"><em>fragment_instance_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceimpala.html#aca80061c98b44477ea84e4332993b7e7">PlanNodeId</a>&#160;</td>
          <td class="paramname"><em>dest_node_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_senders</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>is_merging</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>total_buffer_limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a> *&#160;</td>
          <td class="paramname"><em>profile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="data-stream-recvr_8cc_source.html#l00277">277</a> of file <a class="el" href="data-stream-recvr_8cc_source.html">data-stream-recvr.cc</a>.</p>

<p>References <a class="el" href="object-pool_8h_source.html#l00042">impala::ObjectPool::Add()</a>, <a class="el" href="runtime-profile_8h_source.html#l00047">ADD_COUNTER</a>, <a class="el" href="runtime-profile_8h_source.html#l00048">ADD_TIME_SERIES_COUNTER</a>, <a class="el" href="runtime-profile_8h_source.html#l00050">ADD_TIMER</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00175">buffer_full_total_timer_</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00185">buffer_full_wall_timer_</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00160">bytes_received_counter_</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00163">bytes_received_time_series_counter_</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00188">data_arrival_timer_</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00165">deserialize_row_batch_timer_</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00169">first_batch_wait_total_timer_</a>, <a class="el" href="runtime-profile_8h_source.html#l00454">impala::RuntimeProfile::inactive_timer()</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00142">mem_tracker_</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00157">profile_</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00154">sender_queue_pool_</a>, and <a class="el" href="data-stream-recvr_8h_source.html#l00148">sender_queues_</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a371981dffbd2f6ccbaac2f2858055aa5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::DataStreamRecvr::AddBatch </td>
          <td>(</td>
          <td class="paramtype">const TRowBatch &amp;&#160;</td>
          <td class="paramname"><em>thrift_batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sender_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Add a new batch of rows to the appropriate sender queue, blocking if the queue is full. Called from <a class="el" href="classimpala_1_1DataStreamMgr.html">DataStreamMgr</a>. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8cc_source.html#l00318">318</a> of file <a class="el" href="data-stream-recvr_8cc_source.html">data-stream-recvr.cc</a>.</p>

<p>References <a class="el" href="data-stream-recvr_8h_source.html#l00136">is_merging_</a>, and <a class="el" href="data-stream-recvr_8h_source.html#l00148">sender_queues_</a>.</p>

</div>
</div>
<a class="anchor" id="ad8022f909e7bbe1e67bcaf6be671ba70"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::DataStreamRecvr::CancelStream </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Empties the sender queues and notifies all waiting consumers of cancellation. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8cc_source.html#l00329">329</a> of file <a class="el" href="data-stream-recvr_8cc_source.html">data-stream-recvr.cc</a>.</p>

<p>References <a class="el" href="data-stream-recvr_8h_source.html#l00148">sender_queues_</a>.</p>

</div>
</div>
<a class="anchor" id="a82bf29ddd88693ab08a1a451c8ce4d38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void impala::DataStreamRecvr::Close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deregister from <a class="el" href="classimpala_1_1DataStreamMgr.html">DataStreamMgr</a> instance, which shares ownership of this instance. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8cc_source.html#l00335">335</a> of file <a class="el" href="data-stream-recvr_8cc_source.html">data-stream-recvr.cc</a>.</p>

<p>References <a class="el" href="data-stream-mgr_8cc_source.html#l00126">impala::DataStreamMgr::DeregisterRecvr()</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00089">dest_node_id()</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00088">fragment_instance_id()</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00151">merger_</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00120">mgr_</a>, and <a class="el" href="data-stream-recvr_8h_source.html#l00148">sender_queues_</a>.</p>

</div>
</div>
<a class="anchor" id="afd06416e606502d099b5b04f5ea4262b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::DataStreamRecvr::CreateMerger </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classimpala_1_1TupleRowComparator.html">TupleRowComparator</a> &amp;&#160;</td>
          <td class="paramname"><em>less_than</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a <a class="el" href="classimpala_1_1SortedRunMerger.html">SortedRunMerger</a> instance to merge rows from multiple sender according to the specified row comparator. Fetches the first batches from the individual sender queues. The exprs used in less_than must have already been prepared and opened. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8cc_source.html#l00253">253</a> of file <a class="el" href="data-stream-recvr_8cc_source.html">data-stream-recvr.cc</a>.</p>

<p>References <a class="el" href="data-stream-recvr_8cc_source.html#l00109">impala::DataStreamRecvr::SenderQueue::GetBatch()</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00136">is_merging_</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00151">merger_</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00157">profile_</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00132">row_desc_</a>, and <a class="el" href="data-stream-recvr_8h_source.html#l00148">sender_queues_</a>.</p>

</div>
</div>
<a class="anchor" id="a4fa40ad9cb9326f2446e0d969f0aab09"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceimpala.html#aca80061c98b44477ea84e4332993b7e7">PlanNodeId</a> impala::DataStreamRecvr::dest_node_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00089">89</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>References <a class="el" href="data-stream-recvr_8h_source.html#l00124">dest_node_id_</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00335">Close()</a>, and <a class="el" href="data-stream-recvr_8cc_source.html#l00215">impala::DataStreamRecvr::SenderQueue::DecrementSenders()</a>.</p>

</div>
</div>
<a class="anchor" id="ac1f839c95e2aa1add240a2dcfd038965"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::DataStreamRecvr::ExceedsLimit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>batch_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return true if the addition of a new batch of size 'batch_size' would exceed the total buffer limit. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00115">115</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>References <a class="el" href="data-stream-recvr_8h_source.html#l00139">num_buffered_bytes_</a>, and <a class="el" href="data-stream-recvr_8h_source.html#l00129">total_buffer_limit_</a>.</p>

</div>
</div>
<a class="anchor" id="ae27d989f25f6d43443f7c4a5b6e556e7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const TUniqueId&amp; impala::DataStreamRecvr::fragment_instance_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00088">88</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>References <a class="el" href="data-stream-recvr_8h_source.html#l00123">fragment_instance_id_</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00335">Close()</a>, and <a class="el" href="data-stream-recvr_8cc_source.html#l00215">impala::DataStreamRecvr::SenderQueue::DecrementSenders()</a>.</p>

</div>
</div>
<a class="anchor" id="a796e62648ecf96ec7d7b885d9189c61f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::DataStreamRecvr::GetBatch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> **&#160;</td>
          <td class="paramname"><em>next_batch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns next row batch in data stream; blocks if there aren't any. Retains ownership of the returned batch. The caller must acquire data from the returned batch before the next call to <a class="el" href="classimpala_1_1DataStreamRecvr.html#a796e62648ecf96ec7d7b885d9189c61f">GetBatch()</a>. A NULL returned batch indicated eos. Must only be called if is_merging_ is false. TODO: This is currently only exposed to the non-merging version of the exchange. Refactor so both merging and non-merging exchange use <a class="el" href="classimpala_1_1DataStreamRecvr.html#ab6feab9301f196a3492d0b4a080ca947">GetNext(RowBatch*, bool* eos)</a>. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8cc_source.html#l00352">352</a> of file <a class="el" href="data-stream-recvr_8cc_source.html">data-stream-recvr.cc</a>.</p>

<p>References <a class="el" href="data-stream-recvr_8h_source.html#l00136">is_merging_</a>, and <a class="el" href="data-stream-recvr_8h_source.html#l00148">sender_queues_</a>.</p>

</div>
</div>
<a class="anchor" id="ab6feab9301f196a3492d0b4a080ca947"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::DataStreamRecvr::GetNext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *&#160;</td>
          <td class="paramname"><em>output_batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>eos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fill output_batch with the next batch of rows obtained by merging the per-sender input streams. Must only be called if is_merging_ is true. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8cc_source.html#l00313">313</a> of file <a class="el" href="data-stream-recvr_8cc_source.html">data-stream-recvr.cc</a>.</p>

<p>References <a class="el" href="data-stream-recvr_8h_source.html#l00151">merger_</a>.</p>

</div>
</div>
<a class="anchor" id="a14c0ea6b2f687c7d29203e4960544b5b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a>* impala::DataStreamRecvr::mem_tracker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00091">91</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>References <a class="el" href="data-stream-recvr_8h_source.html#l00142">mem_tracker_</a>.</p>

</div>
</div>
<a class="anchor" id="a592b66d17dcff8a1f82783f9645825b0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::DataStreamRecvr::RemoveSender </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sender_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Indicate that a particular sender is done. Delegated to the appropriate sender queue. Called from <a class="el" href="classimpala_1_1DataStreamMgr.html">DataStreamMgr</a>. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8cc_source.html#l00324">324</a> of file <a class="el" href="data-stream-recvr_8cc_source.html">data-stream-recvr.cc</a>.</p>

<p>References <a class="el" href="data-stream-recvr_8h_source.html#l00136">is_merging_</a>, and <a class="el" href="data-stream-recvr_8h_source.html#l00148">sender_queues_</a>.</p>

</div>
</div>
<a class="anchor" id="a5112498720084a5ffeb0b10e0a8815d8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a>&amp; impala::DataStreamRecvr::row_desc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00090">90</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>References <a class="el" href="data-stream-recvr_8h_source.html#l00132">row_desc_</a>.</p>

</div>
</div>
<a class="anchor" id="a54819976e6e5d7b58969e6abe33a31cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void impala::DataStreamRecvr::TransferAllResources </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *&#160;</td>
          <td class="paramname"><em>transfer_batch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Transfer all resources from the current batches being processed from each sender queue to the specified batch. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8cc_source.html#l00269">269</a> of file <a class="el" href="data-stream-recvr_8cc_source.html">data-stream-recvr.cc</a>.</p>

<p>References <a class="el" href="data-stream-recvr_8cc_source.html#l00065">impala::DataStreamRecvr::SenderQueue::current_batch()</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00148">sender_queues_</a>, and <a class="el" href="row-batch_8cc_source.html#l00243">impala::RowBatch::TransferResourceOwnership()</a>.</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="aafc5cf64ed6db14f2a4fb588fb080c5b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classimpala_1_1DataStreamMgr.html">DataStreamMgr</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00094">94</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a2798029b198f844755c2a921547851d6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::DataStreamRecvr::buffer_full_total_timer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Total time (summed across all threads) spent waiting for the recv buffer to be drained so that new batches can be added. Remote plan fragments are blocked for the same amount of time. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00175">175</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00277">DataStreamRecvr()</a>.</p>

</div>
</div>
<a class="anchor" id="afdcae91b92b77481d1362b6346e0c577"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::DataStreamRecvr::buffer_full_wall_timer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wall time senders spend waiting for the recv buffer to have capacity. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00185">185</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00277">DataStreamRecvr()</a>.</p>

</div>
</div>
<a class="anchor" id="afd3e4785dc75fe37a18257a97059cad2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::try_mutex impala::DataStreamRecvr::buffer_wall_timer_lock_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Protects access to buffer_full_wall_timer_. We only want one thread to be running the timer at any time, and we use this try_mutex to enforce this condition. If a thread does not get the lock, it continues to execute, but without running the timer. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00182">182</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac6e49dee22386cf631ed4bbff6dbe7c1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::DataStreamRecvr::bytes_received_counter_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of bytes received. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00160">160</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00277">DataStreamRecvr()</a>.</p>

</div>
</div>
<a class="anchor" id="a5ce3b2927ae39c93004f734c3851a53c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1TimeSeriesCounter.html">RuntimeProfile::TimeSeriesCounter</a>* impala::DataStreamRecvr::bytes_received_time_series_counter_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Time series of number of bytes received, samples bytes_received_counter_. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00163">163</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00277">DataStreamRecvr()</a>.</p>

</div>
</div>
<a class="anchor" id="a3aa6ea894a5dac83cd1bcf85d7ead521"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::DataStreamRecvr::data_arrival_timer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Total time spent waiting for data to arrive in the recv buffer. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00188">188</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00277">DataStreamRecvr()</a>.</p>

</div>
</div>
<a class="anchor" id="ac9b337c30025abab1a453c9fce0d1137"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::DataStreamRecvr::deserialize_row_batch_timer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00165">165</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00277">DataStreamRecvr()</a>.</p>

</div>
</div>
<a class="anchor" id="a28f5d95ec41f8c3dd17d1ac8b03a9031"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceimpala.html#aca80061c98b44477ea84e4332993b7e7">PlanNodeId</a> impala::DataStreamRecvr::dest_node_id_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00124">124</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8h_source.html#l00089">dest_node_id()</a>.</p>

</div>
</div>
<a class="anchor" id="ab6f0020504a6bf987d393d58b1948bf9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::DataStreamRecvr::first_batch_wait_total_timer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Time spent waiting until the first batch arrives across all queues. TODO: Turn this into a wall-clock timer. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00169">169</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00277">DataStreamRecvr()</a>.</p>

</div>
</div>
<a class="anchor" id="a7565442390e6e06b26ee9dcd25920fb1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TUniqueId impala::DataStreamRecvr::fragment_instance_id_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fragment and node id of the destination exchange node this receiver is used by. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00123">123</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8h_source.html#l00088">fragment_instance_id()</a>.</p>

</div>
</div>
<a class="anchor" id="afa0ce3db5abfdc2999afde729041a0db"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::DataStreamRecvr::is_merging_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>True if this reciver merges incoming rows from different senders. Per-sender row batch queues are maintained in this case. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00136">136</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00318">AddBatch()</a>, <a class="el" href="data-stream-recvr_8cc_source.html#l00253">CreateMerger()</a>, <a class="el" href="data-stream-recvr_8cc_source.html#l00352">GetBatch()</a>, and <a class="el" href="data-stream-recvr_8cc_source.html#l00324">RemoveSender()</a>.</p>

</div>
</div>
<a class="anchor" id="a285d5468eb08ad9cea8b4eed5d6e476b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::scoped_ptr&lt;<a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a>&gt; impala::DataStreamRecvr::mem_tracker_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Memtracker for batches in the sender queue(s). </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00142">142</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00277">DataStreamRecvr()</a>, <a class="el" href="data-stream-recvr_8h_source.html#l00091">mem_tracker()</a>, and <a class="el" href="data-stream-recvr_8cc_source.html#l00346">~DataStreamRecvr()</a>.</p>

</div>
</div>
<a class="anchor" id="adbad832b612aa1f064a71ac8816c9b78"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::scoped_ptr&lt;<a class="el" href="classimpala_1_1SortedRunMerger.html">SortedRunMerger</a>&gt; impala::DataStreamRecvr::merger_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classimpala_1_1SortedRunMerger.html">SortedRunMerger</a> used to merge rows from different senders. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00151">151</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00335">Close()</a>, <a class="el" href="data-stream-recvr_8cc_source.html#l00253">CreateMerger()</a>, and <a class="el" href="data-stream-recvr_8cc_source.html#l00313">GetNext()</a>.</p>

</div>
</div>
<a class="anchor" id="a82c34ede2d691fcea5462819fa2dd66e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1DataStreamMgr.html">DataStreamMgr</a>* impala::DataStreamRecvr::mgr_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classimpala_1_1DataStreamMgr.html">DataStreamMgr</a> instance used to create this recvr. (Not owned) </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00120">120</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00335">Close()</a>, and <a class="el" href="data-stream-recvr_8cc_source.html#l00346">~DataStreamRecvr()</a>.</p>

</div>
</div>
<a class="anchor" id="afbdce03f3b560052471713de0b73f732"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1AtomicInt.html">AtomicInt</a>&lt;int&gt; impala::DataStreamRecvr::num_buffered_bytes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>total number of bytes held across all sender queues. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00139">139</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8h_source.html#l00115">ExceedsLimit()</a>.</p>

</div>
</div>
<a class="anchor" id="aef4acd3a3ded9d08e5b396be89204f02"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a>* impala::DataStreamRecvr::profile_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Runtime profile storing the counters below. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00157">157</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00253">CreateMerger()</a>, and <a class="el" href="data-stream-recvr_8cc_source.html#l00277">DataStreamRecvr()</a>.</p>

</div>
</div>
<a class="anchor" id="a24ec86174dabf3eeb134548484563d09"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> impala::DataStreamRecvr::row_desc_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Row schema, copied from the caller of CreateRecvr(). </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00132">132</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00253">CreateMerger()</a>, and <a class="el" href="data-stream-recvr_8h_source.html#l00090">row_desc()</a>.</p>

</div>
</div>
<a class="anchor" id="afb29c592d85a58f52a9d0471410bd744"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1ObjectPool.html">ObjectPool</a> impala::DataStreamRecvr::sender_queue_pool_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pool of sender queues. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00154">154</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00277">DataStreamRecvr()</a>.</p>

</div>
</div>
<a class="anchor" id="aa80cafd0d6a9364212625b3e729f83cf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classimpala_1_1DataStreamRecvr_1_1SenderQueue.html">SenderQueue</a>*&gt; impala::DataStreamRecvr::sender_queues_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>One or more queues of row batches received from senders. If is_merging_ is true, there is one <a class="el" href="classimpala_1_1DataStreamRecvr_1_1SenderQueue.html">SenderQueue</a> for each sender. Otherwise, row batches from all senders are placed in the same <a class="el" href="classimpala_1_1DataStreamRecvr_1_1SenderQueue.html">SenderQueue</a>. The <a class="el" href="classimpala_1_1DataStreamRecvr_1_1SenderQueue.html">SenderQueue</a> instances are owned by the receiver and placed in sender_queue_pool_. </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00148">148</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8cc_source.html#l00318">AddBatch()</a>, <a class="el" href="data-stream-recvr_8cc_source.html#l00329">CancelStream()</a>, <a class="el" href="data-stream-recvr_8cc_source.html#l00335">Close()</a>, <a class="el" href="data-stream-recvr_8cc_source.html#l00253">CreateMerger()</a>, <a class="el" href="data-stream-recvr_8cc_source.html#l00277">DataStreamRecvr()</a>, <a class="el" href="data-stream-recvr_8cc_source.html#l00352">GetBatch()</a>, <a class="el" href="data-stream-recvr_8cc_source.html#l00324">RemoveSender()</a>, and <a class="el" href="data-stream-recvr_8cc_source.html#l00269">TransferAllResources()</a>.</p>

</div>
</div>
<a class="anchor" id="abba4de172e0ed577adb527019ff476b9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int impala::DataStreamRecvr::total_buffer_limit_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>soft upper limit on the total amount of buffering allowed for this stream across all sender queues. we stop acking incoming data once the amount of buffered data exceeds this value </p>

<p>Definition at line <a class="el" href="data-stream-recvr_8h_source.html#l00129">129</a> of file <a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a>.</p>

<p>Referenced by <a class="el" href="data-stream-recvr_8h_source.html#l00115">ExceedsLimit()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>be/src/runtime/<a class="el" href="data-stream-recvr_8h_source.html">data-stream-recvr.h</a></li>
<li>be/src/runtime/<a class="el" href="data-stream-recvr_8cc_source.html">data-stream-recvr.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceimpala.html">impala</a></li><li class="navelem"><a class="el" href="classimpala_1_1DataStreamRecvr.html">DataStreamRecvr</a></li>
    <li class="footer">Generated on Thu May 7 2015 16:10:49 for Impala by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
