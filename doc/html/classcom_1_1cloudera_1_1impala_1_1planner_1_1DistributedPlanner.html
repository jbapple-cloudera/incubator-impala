<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Impala: com.cloudera.impala.planner.DistributedPlanner Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Impala
   </div>
   <div id="projectbrief">Impalaistheopensource,nativeanalyticdatabaseforApacheHadoop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">com.cloudera.impala.planner.DistributedPlanner Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for com.cloudera.impala.planner.DistributedPlanner:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af6c34b4d45eb399182575573354eefab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#af6c34b4d45eb399182575573354eefab">DistributedPlanner</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlannerContext.html">PlannerContext</a> ctx)</td></tr>
<tr class="separator:af6c34b4d45eb399182575573354eefab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f76d834f9eccc0d8761f4a7f9b18882"><td class="memItemLeft" align="right" valign="top">ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#a1f76d834f9eccc0d8761f4a7f9b18882">createPlanFragments</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanNode.html">PlanNode</a> singleNodePlan)  throws ImpalaException </td></tr>
<tr class="separator:a1f76d834f9eccc0d8761f4a7f9b18882"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fe63b0d1e74142ca82a7e3a1191fe8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#a1fe63b0d1e74142ca82a7e3a1191fe8b">createInsertFragment</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> inputFragment, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1InsertStmt.html">InsertStmt</a> insertStmt, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Analyzer.html">Analyzer</a> analyzer, ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt; fragments)  throws InternalException </td></tr>
<tr class="separator:a1fe63b0d1e74142ca82a7e3a1191fe8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ac28ca07366b1b4fa6ee4c57c8d278e9e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#ac28ca07366b1b4fa6ee4c57c8d278e9e">createPlanFragments</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanNode.html">PlanNode</a> root, boolean isPartitioned, long perNodeMemLimit, ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt; fragments)  throws InternalException, NotImplementedException </td></tr>
<tr class="separator:ac28ca07366b1b4fa6ee4c57c8d278e9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87d3e1ab5a577b16b0bcb9fe133b6ca5"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#a87d3e1ab5a577b16b0bcb9fe133b6ca5">getNumDistinctValues</a> (List&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Expr.html">Expr</a> &gt; exprs)</td></tr>
<tr class="separator:a87d3e1ab5a577b16b0bcb9fe133b6ca5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84c61c45f82c57056d13d7c4df707a58"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#a84c61c45f82c57056d13d7c4df707a58">createMergeFragment</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> inputFragment)  throws InternalException </td></tr>
<tr class="separator:a84c61c45f82c57056d13d7c4df707a58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa888002fc1dec5831aef03a801e275d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#aa888002fc1dec5831aef03a801e275d4">createScanFragment</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanNode.html">PlanNode</a> node)</td></tr>
<tr class="separator:aa888002fc1dec5831aef03a801e275d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d54589bfe476b908d7e0e21f67bce1a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#a7d54589bfe476b908d7e0e21f67bce1a">createCrossJoinFragment</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1CrossJoinNode.html">CrossJoinNode</a> node, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> rightChildFragment, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> leftChildFragment, long perNodeMemLimit, ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt; fragments)  throws InternalException </td></tr>
<tr class="separator:a7d54589bfe476b908d7e0e21f67bce1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b56ba5fe7af65032f6eaeff57d75803"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#a0b56ba5fe7af65032f6eaeff57d75803">createHashJoinFragment</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1HashJoinNode.html">HashJoinNode</a> node, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> rightChildFragment, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> leftChildFragment, long perNodeMemLimit, ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt; fragments)  throws InternalException </td></tr>
<tr class="separator:a0b56ba5fe7af65032f6eaeff57d75803"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89f4cb7d901d16507367ae3c29b52b45"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#a89f4cb7d901d16507367ae3c29b52b45">isCompatPartition</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DataPartition.html">DataPartition</a> lhsPartition, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DataPartition.html">DataPartition</a> rhsPartition, List&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Expr.html">Expr</a> &gt; lhsJoinExprs, List&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Expr.html">Expr</a> &gt; rhsJoinExprs, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Analyzer.html">Analyzer</a> analyzer)</td></tr>
<tr class="separator:a89f4cb7d901d16507367ae3c29b52b45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b911a64aba180a32b062de9b140633d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DataPartition.html">DataPartition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#a9b911a64aba180a32b062de9b140633d">getCompatPartition</a> (List&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Expr.html">Expr</a> &gt; srcJoinExprs, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DataPartition.html">DataPartition</a> srcPartition, List&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Expr.html">Expr</a> &gt; joinExprs, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Analyzer.html">Analyzer</a> analyzer)</td></tr>
<tr class="separator:a9b911a64aba180a32b062de9b140633d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b5458f6e80bf8f40880960b80ea6906"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#a3b5458f6e80bf8f40880960b80ea6906">createUnionNodeFragment</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1UnionNode.html">UnionNode</a> unionNode, ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt; childFragments, ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt; fragments)  throws InternalException </td></tr>
<tr class="separator:a3b5458f6e80bf8f40880960b80ea6906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fd6f77bd2009c2c0b11f6c0b10d6004"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#a7fd6f77bd2009c2c0b11f6c0b10d6004">createSelectNodeFragment</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1SelectNode.html">SelectNode</a> selectNode, ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt; childFragments)</td></tr>
<tr class="separator:a7fd6f77bd2009c2c0b11f6c0b10d6004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00cf8b02e0e97032b5f97dd220c09b76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#a00cf8b02e0e97032b5f97dd220c09b76">connectChildFragment</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanNode.html">PlanNode</a> node, int childIdx, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> childFragment)  throws InternalException </td></tr>
<tr class="separator:a00cf8b02e0e97032b5f97dd220c09b76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84292737cda92b09dc53e27b49575799"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#a84292737cda92b09dc53e27b49575799">createParentFragment</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> childFragment, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DataPartition.html">DataPartition</a> parentPartition)  throws InternalException </td></tr>
<tr class="separator:a84292737cda92b09dc53e27b49575799"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef27fedb2a56aa22aa622a46b347fd1f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#aef27fedb2a56aa22aa622a46b347fd1f">createAggregationFragment</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1AggregationNode.html">AggregationNode</a> node, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> childFragment, ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt; fragments)  throws InternalException </td></tr>
<tr class="separator:aef27fedb2a56aa22aa622a46b347fd1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d6b0d31877556042459aa46be51be5d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#a9d6b0d31877556042459aa46be51be5d">createAnalyticFragment</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanNode.html">PlanNode</a> node, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> childFragment, ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt; fragments)  throws InternalException </td></tr>
<tr class="separator:a9d6b0d31877556042459aa46be51be5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ed26b541807ed01ed76b587f84218a2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#a5ed26b541807ed01ed76b587f84218a2">createOrderByFragment</a> (<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1SortNode.html">SortNode</a> node, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> childFragment, ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt; fragments)  throws InternalException </td></tr>
<tr class="separator:a5ed26b541807ed01ed76b587f84218a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3b24b86b8603a3679c8babbe7ea24357"><td class="memItemLeft" align="right" valign="top">final <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlannerContext.html">PlannerContext</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#a3b24b86b8603a3679c8babbe7ea24357">ctx_</a></td></tr>
<tr class="separator:a3b24b86b8603a3679c8babbe7ea24357"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:ab8c582413ae6a885e84bfae482ba1a84"><td class="memItemLeft" align="right" valign="top">static final Logger&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#ab8c582413ae6a885e84bfae482ba1a84">LOG</a> = LoggerFactory.getLogger(DistributedPlanner.class)</td></tr>
<tr class="separator:ab8c582413ae6a885e84bfae482ba1a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The distributed planner is responsible for creating an executable, distributed plan from a single-node plan that can be sent to the backend. </p>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00042">42</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af6c34b4d45eb399182575573354eefab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">com.cloudera.impala.planner.DistributedPlanner.DistributedPlanner </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlannerContext.html">PlannerContext</a>&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00047">47</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>References <a class="el" href="DistributedPlanner_8java_source.html#l00045">com.cloudera.impala.planner.DistributedPlanner.ctx_</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a00cf8b02e0e97032b5f97dd220c09b76"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void com.cloudera.impala.planner.DistributedPlanner.connectChildFragment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanNode.html">PlanNode</a>&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>childIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td>
          <td class="paramname"><em>childFragment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1InternalException.html">InternalException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Replace node's child at index childIdx with an <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1ExchangeNode.html">ExchangeNode</a> that receives its input from childFragment. </p>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00640">640</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>References <a class="el" href="DistributedPlanner_8java_source.html#l00045">com.cloudera.impala.planner.DistributedPlanner.ctx_</a>, and <a class="el" href="PlannerContext_8java_source.html#l00063">com.cloudera.impala.planner.PlannerContext.getNextNodeId()</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00273">com.cloudera.impala.planner.DistributedPlanner.createCrossJoinFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00294">com.cloudera.impala.planner.DistributedPlanner.createHashJoinFragment()</a>, and <a class="el" href="DistributedPlanner_8java_source.html#l00566">com.cloudera.impala.planner.DistributedPlanner.createUnionNodeFragment()</a>.</p>

</div>
</div>
<a class="anchor" id="aef27fedb2a56aa22aa622a46b347fd1f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> com.cloudera.impala.planner.DistributedPlanner.createAggregationFragment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1AggregationNode.html">AggregationNode</a>&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td>
          <td class="paramname"><em>childFragment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt;&#160;</td>
          <td class="paramname"><em>fragments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1InternalException.html">InternalException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a fragment that materializes the aggregation result of 'node'. If the child fragment is partitioned, the result fragment will be partitioned on the grouping exprs of 'node'. If 'node' is phase 1 of a 2-phase DISTINCT aggregation, this will simply add 'node' to the child fragment and return the child fragment; the new fragment will be created by the subsequent call of <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html#aef27fedb2a56aa22aa622a46b347fd1f">createAggregationFragment()</a> for the phase 2 <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1AggregationNode.html">AggregationNode</a>. </p>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00681">681</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>References <a class="el" href="DistributedPlanner_8java_source.html#l00659">com.cloudera.impala.planner.DistributedPlanner.createParentFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00045">com.cloudera.impala.planner.DistributedPlanner.ctx_</a>, <a class="el" href="PlannerContext_8java_source.html#l00063">com.cloudera.impala.planner.PlannerContext.getNextNodeId()</a>, <a class="el" href="PlannerContext_8java_source.html#l00061">com.cloudera.impala.planner.PlannerContext.getRootAnalyzer()</a>, and <a class="el" href="DataPartition_8java_source.html#l00063">com.cloudera.impala.planner.DataPartition.UNPARTITIONED</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00093">com.cloudera.impala.planner.DistributedPlanner.createPlanFragments()</a>.</p>

</div>
</div>
<a class="anchor" id="a9d6b0d31877556042459aa46be51be5d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> com.cloudera.impala.planner.DistributedPlanner.createAnalyticFragment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanNode.html">PlanNode</a>&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td>
          <td class="paramname"><em>childFragment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt;&#160;</td>
          <td class="paramname"><em>fragments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1InternalException.html">InternalException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a fragment that produces the output of either an <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1AnalyticEvalNode.html">AnalyticEvalNode</a> or of the <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1SortNode.html">SortNode</a> that provides the input to an <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1AnalyticEvalNode.html">AnalyticEvalNode</a>. ('node' can be either an <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1AnalyticEvalNode.html">AnalyticEvalNode</a> or a <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1SortNode.html">SortNode</a>). The returned fragment is either partitioned on the Partition By exprs or unpartitioned in the absence of such exprs. </p>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00832">832</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>References <a class="el" href="DistributedPlanner_8java_source.html#l00659">com.cloudera.impala.planner.DistributedPlanner.createParentFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00045">com.cloudera.impala.planner.DistributedPlanner.ctx_</a>, <a class="el" href="SortNode_8java_source.html#l00083">com.cloudera.impala.planner.SortNode.getInputPartition()</a>, <a class="el" href="AnalyticEvalNode_8java_source.html#l00108">com.cloudera.impala.planner.AnalyticEvalNode.getOrderByElements()</a>, <a class="el" href="AnalyticEvalNode_8java_source.html#l00107">com.cloudera.impala.planner.AnalyticEvalNode.getPartitionExprs()</a>, <a class="el" href="PlannerContext_8java_source.html#l00061">com.cloudera.impala.planner.PlannerContext.getRootAnalyzer()</a>, and <a class="el" href="DataPartition_8java_source.html#l00063">com.cloudera.impala.planner.DataPartition.UNPARTITIONED</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00093">com.cloudera.impala.planner.DistributedPlanner.createPlanFragments()</a>.</p>

</div>
</div>
<a class="anchor" id="a7d54589bfe476b908d7e0e21f67bce1a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> com.cloudera.impala.planner.DistributedPlanner.createCrossJoinFragment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1CrossJoinNode.html">CrossJoinNode</a>&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td>
          <td class="paramname"><em>rightChildFragment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td>
          <td class="paramname"><em>leftChildFragment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>perNodeMemLimit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt;&#160;</td>
          <td class="paramname"><em>fragments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1InternalException.html">InternalException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Modifies the leftChildFragment to execute a cross join. The right child input is provided by an <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1ExchangeNode.html">ExchangeNode</a>, which is the destination of the rightChildFragment's output. </p>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00273">273</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>References <a class="el" href="DistributedPlanner_8java_source.html#l00640">com.cloudera.impala.planner.DistributedPlanner.connectChildFragment()</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00093">com.cloudera.impala.planner.DistributedPlanner.createPlanFragments()</a>.</p>

</div>
</div>
<a class="anchor" id="a0b56ba5fe7af65032f6eaeff57d75803"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> com.cloudera.impala.planner.DistributedPlanner.createHashJoinFragment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1HashJoinNode.html">HashJoinNode</a>&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td>
          <td class="paramname"><em>rightChildFragment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td>
          <td class="paramname"><em>leftChildFragment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>perNodeMemLimit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt;&#160;</td>
          <td class="paramname"><em>fragments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1InternalException.html">InternalException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates either a broadcast join or a repartitioning join, depending on the expected cost. If any of the inputs to the cost computation is unknown, it assumes the cost will be 0. Costs being equal, it'll favor partitioned over broadcast joins. If perNodeMemLimit &gt; 0 and the size of the hash table for a broadcast join is expected to exceed that mem limit, switches to partitioned join instead. TODO: revisit the choice of broadcast as the default TODO: don't create a broadcast join if we already anticipate that this will exceed the query's memory budget. </p>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00294">294</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>References <a class="el" href="Expr_8java_source.html#l00798">com.cloudera.impala.analysis.Expr.cloneList()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00640">com.cloudera.impala.planner.DistributedPlanner.connectChildFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00045">com.cloudera.impala.planner.DistributedPlanner.ctx_</a>, <a class="el" href="JoinOperator_8java_source.html#l00027">com.cloudera.impala.analysis.JoinOperator.FULL_OUTER_JOIN</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00537">com.cloudera.impala.planner.DistributedPlanner.getCompatPartition()</a>, <a class="el" href="PlannerContext_8java_source.html#l00064">com.cloudera.impala.planner.PlannerContext.getNextFragmentId()</a>, <a class="el" href="PlannerContext_8java_source.html#l00063">com.cloudera.impala.planner.PlannerContext.getNextNodeId()</a>, <a class="el" href="PlannerContext_8java_source.html#l00031">com.cloudera.impala.planner.PlannerContext.HASH_TBL_SPACE_OVERHEAD</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00498">com.cloudera.impala.planner.DistributedPlanner.isCompatPartition()</a>, and <a class="el" href="JoinOperator_8java_source.html#l00026">com.cloudera.impala.analysis.JoinOperator.RIGHT_ANTI_JOIN</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00093">com.cloudera.impala.planner.DistributedPlanner.createPlanFragments()</a>.</p>

</div>
</div>
<a class="anchor" id="a1fe63b0d1e74142ca82a7e3a1191fe8b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> com.cloudera.impala.planner.DistributedPlanner.createInsertFragment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td>
          <td class="paramname"><em>inputFragment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1InsertStmt.html">InsertStmt</a>&#160;</td>
          <td class="paramname"><em>insertStmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Analyzer.html">Analyzer</a>&#160;</td>
          <td class="paramname"><em>analyzer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt;&#160;</td>
          <td class="paramname"><em>fragments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1InternalException.html">InternalException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Makes a cost-based decision on whether to repartition the output of 'inputFragment' before feeding its data into the table sink of the given 'insertStmt'. Considers user-supplied plan hints to determine whether to repartition or not. Returns a plan fragment that partitions the output of 'inputFragment' on the partition exprs of 'insertStmt', unless the expected number of partitions is less than the number of nodes on which inputFragment runs. If it ends up creating a new fragment, appends that to 'fragments'. </p>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00181">181</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>References <a class="el" href="DistributedPlanner_8java_source.html#l00045">com.cloudera.impala.planner.DistributedPlanner.ctx_</a>, <a class="el" href="PlannerContext_8java_source.html#l00064">com.cloudera.impala.planner.PlannerContext.getNextFragmentId()</a>, <a class="el" href="PlannerContext_8java_source.html#l00063">com.cloudera.impala.planner.PlannerContext.getNextNodeId()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00163">com.cloudera.impala.planner.DistributedPlanner.getNumDistinctValues()</a>, and <a class="el" href="Expr_8java_source.html#l00606">com.cloudera.impala.analysis.Expr.isSubset()</a>.</p>

</div>
</div>
<a class="anchor" id="a84c61c45f82c57056d13d7c4df707a58"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> com.cloudera.impala.planner.DistributedPlanner.createMergeFragment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td>
          <td class="paramname"><em>inputFragment</em></td><td>)</td>
          <td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1InternalException.html">InternalException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return unpartitioned fragment that merges the input fragment's output via an <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1ExchangeNode.html">ExchangeNode</a>. Requires that input fragment be partitioned. </p>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00245">245</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>References <a class="el" href="DistributedPlanner_8java_source.html#l00045">com.cloudera.impala.planner.DistributedPlanner.ctx_</a>, <a class="el" href="PlannerContext_8java_source.html#l00064">com.cloudera.impala.planner.PlannerContext.getNextFragmentId()</a>, <a class="el" href="PlannerContext_8java_source.html#l00063">com.cloudera.impala.planner.PlannerContext.getNextNodeId()</a>, and <a class="el" href="DataPartition_8java_source.html#l00063">com.cloudera.impala.planner.DataPartition.UNPARTITIONED</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00093">com.cloudera.impala.planner.DistributedPlanner.createPlanFragments()</a>.</p>

</div>
</div>
<a class="anchor" id="a5ed26b541807ed01ed76b587f84218a2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> com.cloudera.impala.planner.DistributedPlanner.createOrderByFragment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1SortNode.html">SortNode</a>&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td>
          <td class="paramname"><em>childFragment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt;&#160;</td>
          <td class="paramname"><em>fragments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1InternalException.html">InternalException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a new unpartitioned fragment that materializes the result of the given <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1SortNode.html">SortNode</a>. If the child fragment is partitioned, returns a new fragment with a sort-merging exchange that merges the results of the partitioned sorts. The offset and limit are adjusted in the child and parent plan nodes to produce the correct result. </p>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00878">878</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>References <a class="el" href="DistributedPlanner_8java_source.html#l00659">com.cloudera.impala.planner.DistributedPlanner.createParentFragment()</a>, <a class="el" href="partitioning-throughput-test_8cc_source.html#l00037">offset</a>, and <a class="el" href="DataPartition_8java_source.html#l00063">com.cloudera.impala.planner.DataPartition.UNPARTITIONED</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00093">com.cloudera.impala.planner.DistributedPlanner.createPlanFragments()</a>.</p>

</div>
</div>
<a class="anchor" id="a84292737cda92b09dc53e27b49575799"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> com.cloudera.impala.planner.DistributedPlanner.createParentFragment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&#160;</td>
          <td class="paramname"><em>childFragment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DataPartition.html">DataPartition</a>&#160;</td>
          <td class="paramname"><em>parentPartition</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1InternalException.html">InternalException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create a new fragment containing a single <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1ExchangeNode.html">ExchangeNode</a> that consumes the output of childFragment, set the destination of childFragment to the new parent and the output partition of childFragment to that of the new parent. TODO: the output partition of a child isn't necessarily the same as the data partition of the receiving parent (if there is more materialization happening in the parent, such as during distinct aggregation). Do we care about the data partition of the parent being applicable to the <em>output</em> of the parent (it's correct for the input). </p>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00659">659</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>References <a class="el" href="DistributedPlanner_8java_source.html#l00045">com.cloudera.impala.planner.DistributedPlanner.ctx_</a>, <a class="el" href="PlannerContext_8java_source.html#l00064">com.cloudera.impala.planner.PlannerContext.getNextFragmentId()</a>, and <a class="el" href="PlannerContext_8java_source.html#l00063">com.cloudera.impala.planner.PlannerContext.getNextNodeId()</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00681">com.cloudera.impala.planner.DistributedPlanner.createAggregationFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00832">com.cloudera.impala.planner.DistributedPlanner.createAnalyticFragment()</a>, and <a class="el" href="DistributedPlanner_8java_source.html#l00878">com.cloudera.impala.planner.DistributedPlanner.createOrderByFragment()</a>.</p>

</div>
</div>
<a class="anchor" id="a1f76d834f9eccc0d8761f4a7f9b18882"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ArrayList&lt;<a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>&gt; com.cloudera.impala.planner.DistributedPlanner.createPlanFragments </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanNode.html">PlanNode</a>&#160;</td>
          <td class="paramname"><em>singleNodePlan</em></td><td>)</td>
          <td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1ImpalaException.html">ImpalaException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create plan fragments for a single-node plan considering a set of execution options. The fragments are returned in a list such that element i of that list can only consume output of the following fragments j &gt; i.</p>
<p>TODO: take data partition of the plan fragments into account; in particular, coordinate between hash partitioning for aggregation and hash partitioning for analytic computation more generally than what createQueryPlan() does right now (the coordination only happens if the same select block does both the aggregation and analytic computation). </p>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00062">62</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00093">com.cloudera.impala.planner.DistributedPlanner.createPlanFragments()</a>.</p>

</div>
</div>
<a class="anchor" id="ac28ca07366b1b4fa6ee4c57c8d278e9e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> com.cloudera.impala.planner.DistributedPlanner.createPlanFragments </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanNode.html">PlanNode</a>&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>isPartitioned</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>perNodeMemLimit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt;&#160;</td>
          <td class="paramname"><em>fragments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1InternalException.html">InternalException</a>, <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1NotImplementedException.html">NotImplementedException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return plan fragment that produces result of 'root'; recursively creates all input fragments to the returned fragment. If a new fragment is created, it is appended to 'fragments', so that each fragment is preceded by those from which it consumes the output. If 'isPartitioned' is false, the returned fragment is unpartitioned; otherwise it may be partitioned, depending on whether its inputs are partitioned; the partition function is derived from the inputs. </p>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00093">93</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>References <a class="el" href="DistributedPlanner_8java_source.html#l00681">com.cloudera.impala.planner.DistributedPlanner.createAggregationFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00832">com.cloudera.impala.planner.DistributedPlanner.createAnalyticFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00273">com.cloudera.impala.planner.DistributedPlanner.createCrossJoinFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00294">com.cloudera.impala.planner.DistributedPlanner.createHashJoinFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00245">com.cloudera.impala.planner.DistributedPlanner.createMergeFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00878">com.cloudera.impala.planner.DistributedPlanner.createOrderByFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00062">com.cloudera.impala.planner.DistributedPlanner.createPlanFragments()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00264">com.cloudera.impala.planner.DistributedPlanner.createScanFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00625">com.cloudera.impala.planner.DistributedPlanner.createSelectNodeFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00566">com.cloudera.impala.planner.DistributedPlanner.createUnionNodeFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00045">com.cloudera.impala.planner.DistributedPlanner.ctx_</a>, <a class="el" href="PlannerContext_8java_source.html#l00064">com.cloudera.impala.planner.PlannerContext.getNextFragmentId()</a>, <a class="el" href="PlanFragment_8java_source.html#l00317">com.cloudera.impala.planner.PlanFragment.isPartitioned()</a>, and <a class="el" href="DataPartition_8java_source.html#l00063">com.cloudera.impala.planner.DataPartition.UNPARTITIONED</a>.</p>

</div>
</div>
<a class="anchor" id="aa888002fc1dec5831aef03a801e275d4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> com.cloudera.impala.planner.DistributedPlanner.createScanFragment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanNode.html">PlanNode</a>&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create new randomly-partitioned fragment containing a single scan node. TODO: take bucketing into account to produce a naturally hash-partitioned fragment TODO: hbase scans are range-partitioned on the row key </p>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00264">264</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>References <a class="el" href="DistributedPlanner_8java_source.html#l00045">com.cloudera.impala.planner.DistributedPlanner.ctx_</a>, <a class="el" href="PlannerContext_8java_source.html#l00064">com.cloudera.impala.planner.PlannerContext.getNextFragmentId()</a>, and <a class="el" href="DataPartition_8java_source.html#l00066">com.cloudera.impala.planner.DataPartition.RANDOM</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00093">com.cloudera.impala.planner.DistributedPlanner.createPlanFragments()</a>.</p>

</div>
</div>
<a class="anchor" id="a7fd6f77bd2009c2c0b11f6c0b10d6004"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> com.cloudera.impala.planner.DistributedPlanner.createSelectNodeFragment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1SelectNode.html">SelectNode</a>&#160;</td>
          <td class="paramname"><em>selectNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt;&#160;</td>
          <td class="paramname"><em>childFragments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Adds the <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1SelectNode.html">SelectNode</a> as the new plan root to the child fragment and returns the child fragment. </p>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00625">625</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00093">com.cloudera.impala.planner.DistributedPlanner.createPlanFragments()</a>.</p>

</div>
</div>
<a class="anchor" id="a3b5458f6e80bf8f40880960b80ea6906"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> com.cloudera.impala.planner.DistributedPlanner.createUnionNodeFragment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1UnionNode.html">UnionNode</a>&#160;</td>
          <td class="paramname"><em>unionNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt;&#160;</td>
          <td class="paramname"><em>childFragments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArrayList&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a> &gt;&#160;</td>
          <td class="paramname"><em>fragments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classcom_1_1cloudera_1_1impala_1_1common_1_1InternalException.html">InternalException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a new fragment with a <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1UnionNode.html">UnionNode</a> as its root. The data partition of the returned fragment and how the data of the child fragments is consumed depends on the data partitions of the child fragments:</p>
<ul>
<li>All child fragments are unpartitioned or partitioned: The returned fragment has an UNPARTITIONED or RANDOM data partition, respectively. The <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1UnionNode.html">UnionNode</a> absorbs the plan trees of all child fragments.</li>
<li>Mixed partitioned/unpartitioned child fragments: The returned fragment is RANDOM partitioned. The plan trees of all partitioned child fragments are absorbed into the <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1UnionNode.html">UnionNode</a>. All unpartitioned child fragments are connected to the <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1UnionNode.html">UnionNode</a> via a RANDOM exchange, and remain unchanged otherwise. </li>
</ul>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00566">566</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>References <a class="el" href="DistributedPlanner_8java_source.html#l00640">com.cloudera.impala.planner.DistributedPlanner.connectChildFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00045">com.cloudera.impala.planner.DistributedPlanner.ctx_</a>, <a class="el" href="PlannerContext_8java_source.html#l00064">com.cloudera.impala.planner.PlannerContext.getNextFragmentId()</a>, <a class="el" href="PlanFragment_8java_source.html#l00317">com.cloudera.impala.planner.PlanFragment.isPartitioned()</a>, <a class="el" href="DataPartition_8java_source.html#l00066">com.cloudera.impala.planner.DataPartition.RANDOM</a>, and <a class="el" href="DataPartition_8java_source.html#l00063">com.cloudera.impala.planner.DataPartition.UNPARTITIONED</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00093">com.cloudera.impala.planner.DistributedPlanner.createPlanFragments()</a>.</p>

</div>
</div>
<a class="anchor" id="a9b911a64aba180a32b062de9b140633d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DataPartition.html">DataPartition</a> com.cloudera.impala.planner.DistributedPlanner.getCompatPartition </td>
          <td>(</td>
          <td class="paramtype">List&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Expr.html">Expr</a> &gt;&#160;</td>
          <td class="paramname"><em>srcJoinExprs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DataPartition.html">DataPartition</a>&#160;</td>
          <td class="paramname"><em>srcPartition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">List&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Expr.html">Expr</a> &gt;&#160;</td>
          <td class="paramname"><em>joinExprs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Analyzer.html">Analyzer</a>&#160;</td>
          <td class="paramname"><em>analyzer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a new data partition that is suitable for creating an exchange node to feed a partitioned hash join. The hash join is assumed to be placed in a fragment with an existing data partition that is compatible with either the lhs or rhs join exprs (srcPartition belongs to the fragment and srcJoinExprs are the compatible exprs). The returned partition uses the given joinExprs which are assumed to be the lhs or rhs join exprs, whichever srcJoinExprs are not. The returned data partition has two important properties to ensure correctness:</p>
<ol type="1">
<li>It has exactly the same number of hash exprs as the srcPartition (IMPALA-1307), possibly by removing redundant exprs from joinExprs or adding some joinExprs multiple times to match the srcPartition</li>
<li>The hash exprs are ordered based on their corresponding 'matches' in the existing srcPartition (IMPALA-1324). Returns null if no compatible data partition could be constructed. TODO: Move parts of this function into <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DataPartition.html">DataPartition</a> as appropriate. TODO: Make comment less operational and more semantic. </li>
</ol>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00537">537</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>References <a class="el" href="Analyzer_8java_source.html#l01887">com.cloudera.impala.analysis.Analyzer.equivExprs()</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00294">com.cloudera.impala.planner.DistributedPlanner.createHashJoinFragment()</a>.</p>

</div>
</div>
<a class="anchor" id="a87d3e1ab5a577b16b0bcb9fe133b6ca5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long com.cloudera.impala.planner.DistributedPlanner.getNumDistinctValues </td>
          <td>(</td>
          <td class="paramtype">List&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Expr.html">Expr</a> &gt;&#160;</td>
          <td class="paramname"><em>exprs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the product of the distinct value estimates of the individual exprs or -1 if any of them doesn't have a distinct value estimate. </p>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00163">163</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00181">com.cloudera.impala.planner.DistributedPlanner.createInsertFragment()</a>.</p>

</div>
</div>
<a class="anchor" id="a89f4cb7d901d16507367ae3c29b52b45"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boolean com.cloudera.impala.planner.DistributedPlanner.isCompatPartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DataPartition.html">DataPartition</a>&#160;</td>
          <td class="paramname"><em>lhsPartition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DataPartition.html">DataPartition</a>&#160;</td>
          <td class="paramname"><em>rhsPartition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">List&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Expr.html">Expr</a> &gt;&#160;</td>
          <td class="paramname"><em>lhsJoinExprs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">List&lt; <a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Expr.html">Expr</a> &gt;&#160;</td>
          <td class="paramname"><em>rhsJoinExprs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1analysis_1_1Analyzer.html">Analyzer</a>&#160;</td>
          <td class="paramname"><em>analyzer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true if the lhs and rhs partitions are physically compatible for executing a partitioned join with the given lhs/rhs join exprs. Physical compatibility means that lhs/rhs exchange nodes hashing on exactly those partition expressions are guaranteed to send two rows with identical partition-expr values to the same node. The requirements for physical compatibility are:</p>
<ol type="1">
<li>Number of exprs must be the same</li>
<li>The lhs partition exprs are identical to the lhs join exprs and the rhs partition exprs are identical to the rhs join exprs</li>
<li>Or for each expr in the lhs partition, there must be an equivalent expr in the rhs partition at the same ordinal position within the expr list (4. The expr types must be identical, but that is enforced later in <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlanFragment.html">PlanFragment</a>) Conditions 2 and 3 are similar but not the same due to outer joins, e.g., for full outer joins condition 3 can never be met, but condition 2 can. TODO: Move parts of this function into <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DataPartition.html">DataPartition</a> as appropriate. </li>
</ol>

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00498">498</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>References <a class="el" href="Analyzer_8java_source.html#l01887">com.cloudera.impala.analysis.Analyzer.equivExprs()</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00294">com.cloudera.impala.planner.DistributedPlanner.createHashJoinFragment()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a3b24b86b8603a3679c8babbe7ea24357"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final <a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1PlannerContext.html">PlannerContext</a> com.cloudera.impala.planner.DistributedPlanner.ctx_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00045">45</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

<p>Referenced by <a class="el" href="DistributedPlanner_8java_source.html#l00640">com.cloudera.impala.planner.DistributedPlanner.connectChildFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00681">com.cloudera.impala.planner.DistributedPlanner.createAggregationFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00832">com.cloudera.impala.planner.DistributedPlanner.createAnalyticFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00294">com.cloudera.impala.planner.DistributedPlanner.createHashJoinFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00181">com.cloudera.impala.planner.DistributedPlanner.createInsertFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00245">com.cloudera.impala.planner.DistributedPlanner.createMergeFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00659">com.cloudera.impala.planner.DistributedPlanner.createParentFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00093">com.cloudera.impala.planner.DistributedPlanner.createPlanFragments()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00264">com.cloudera.impala.planner.DistributedPlanner.createScanFragment()</a>, <a class="el" href="DistributedPlanner_8java_source.html#l00566">com.cloudera.impala.planner.DistributedPlanner.createUnionNodeFragment()</a>, and <a class="el" href="DistributedPlanner_8java_source.html#l00047">com.cloudera.impala.planner.DistributedPlanner.DistributedPlanner()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8c582413ae6a885e84bfae482ba1a84"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final Logger com.cloudera.impala.planner.DistributedPlanner.LOG = LoggerFactory.getLogger(DistributedPlanner.class)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DistributedPlanner_8java_source.html#l00043">43</a> of file <a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>fe/src/main/java/com/cloudera/impala/planner/<a class="el" href="DistributedPlanner_8java_source.html">DistributedPlanner.java</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecom.html">com</a></li><li class="navelem"><a class="el" href="namespacecom_1_1cloudera.html">cloudera</a></li><li class="navelem"><a class="el" href="namespacecom_1_1cloudera_1_1impala.html">impala</a></li><li class="navelem"><a class="el" href="namespacecom_1_1cloudera_1_1impala_1_1planner.html">planner</a></li><li class="navelem"><a class="el" href="classcom_1_1cloudera_1_1impala_1_1planner_1_1DistributedPlanner.html">DistributedPlanner</a></li>
    <li class="footer">Generated on Thu May 7 2015 16:10:45 for Impala by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
