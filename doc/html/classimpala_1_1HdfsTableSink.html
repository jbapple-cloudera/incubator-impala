<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Impala: impala::HdfsTableSink Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Impala
   </div>
   <div id="projectbrief">Impalaistheopensource,nativeanalyticdatabaseforApacheHadoop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classimpala_1_1HdfsTableSink.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classimpala_1_1HdfsTableSink-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">impala::HdfsTableSink Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for impala::HdfsTableSink:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classimpala_1_1HdfsTableSink__inherit__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Collaboration diagram for impala::HdfsTableSink:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classimpala_1_1HdfsTableSink__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab7e44d72434a1da576de6d09bf78b5b9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#ab7e44d72434a1da576de6d09bf78b5b9">HdfsTableSink</a> (const <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> &amp;<a class="el" href="namespaceimpala.html#aa98447566dd6700a2faaaaf3059f4d95">row_desc</a>, const std::vector&lt; TExpr &gt; &amp;select_list_texprs, const TDataSink &amp;tsink)</td></tr>
<tr class="separator:ab7e44d72434a1da576de6d09bf78b5b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f2e0429bebe4586bc9140eafd8a21f1"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a3f2e0429bebe4586bc9140eafd8a21f1">Prepare</a> (<a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *state)</td></tr>
<tr class="memdesc:a3f2e0429bebe4586bc9140eafd8a21f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares output_exprs and partition_key_exprs, and connects to HDFS.  <a href="#a3f2e0429bebe4586bc9140eafd8a21f1">More...</a><br/></td></tr>
<tr class="separator:a3f2e0429bebe4586bc9140eafd8a21f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97ae2a720cc57b784f2bd23ec4ee9a15"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a97ae2a720cc57b784f2bd23ec4ee9a15">Open</a> (<a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *state)</td></tr>
<tr class="separator:a97ae2a720cc57b784f2bd23ec4ee9a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a280d7bde9f6b5180794281d066c24ba6"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a280d7bde9f6b5180794281d066c24ba6">Send</a> (<a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *state, <a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *batch, <a class="el" href="classbool.html">bool</a> eos)</td></tr>
<tr class="memdesc:a280d7bde9f6b5180794281d066c24ba6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append all rows in batch to the temporary Hdfs files corresponding to partitions.  <a href="#a280d7bde9f6b5180794281d066c24ba6">More...</a><br/></td></tr>
<tr class="separator:a280d7bde9f6b5180794281d066c24ba6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ca4efce0b0f420ca113819620f023c7"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a2ca4efce0b0f420ca113819620f023c7">Close</a> (<a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *state)</td></tr>
<tr class="separator:a2ca4efce0b0f420ca113819620f023c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7710498d89015e8b80b60ef21eeb93f7"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a7710498d89015e8b80b60ef21eeb93f7">profile</a> ()</td></tr>
<tr class="memdesc:a7710498d89015e8b80b60ef21eeb93f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the runtime profile for the sink.  <a href="#a7710498d89015e8b80b60ef21eeb93f7">More...</a><br/></td></tr>
<tr class="separator:a7710498d89015e8b80b60ef21eeb93f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1db7e4f8cd070a5f5633d3d1a25310e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classimpala_1_1HdfsTableDescriptor.html">HdfsTableDescriptor</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#ad1db7e4f8cd070a5f5633d3d1a25310e">TableDesc</a> ()</td></tr>
<tr class="separator:ad1db7e4f8cd070a5f5633d3d1a25310e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a216b72f4f0f996ccf8dd17443eaee6cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a216b72f4f0f996ccf8dd17443eaee6cc">mem_tracker</a> ()</td></tr>
<tr class="separator:a216b72f4f0f996ccf8dd17443eaee6cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2025d785fa7bfb70e8dc84bb91114410"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a2025d785fa7bfb70e8dc84bb91114410">rows_inserted_counter</a> ()</td></tr>
<tr class="separator:a2025d785fa7bfb70e8dc84bb91114410"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeacecfe6593f821952a9f0ee374ebd6d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#aeacecfe6593f821952a9f0ee374ebd6d">bytes_written_counter</a> ()</td></tr>
<tr class="separator:aeacecfe6593f821952a9f0ee374ebd6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaac900efe9fa7b75331cf70d40a92ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#aaaac900efe9fa7b75331cf70d40a92ce">encode_timer</a> ()</td></tr>
<tr class="separator:aaaac900efe9fa7b75331cf70d40a92ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8019ba8c269e32342b407c6e74bc931e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a8019ba8c269e32342b407c6e74bc931e">hdfs_write_timer</a> ()</td></tr>
<tr class="separator:a8019ba8c269e32342b407c6e74bc931e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85abd6444cd3bd5c9cce4e680b7407aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a85abd6444cd3bd5c9cce4e680b7407aa">compress_timer</a> ()</td></tr>
<tr class="separator:a85abd6444cd3bd5c9cce4e680b7407aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a938c70d0fcf84b3c606761be535918ac"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a938c70d0fcf84b3c606761be535918ac">DebugString</a> () const </td></tr>
<tr class="separator:a938c70d0fcf84b3c606761be535918ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:abf1f8a799d6f3fe3c1d8539537791a50"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#abf1f8a799d6f3fe3c1d8539537791a50">GetFileBlockSize</a> (<a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a> *output_partition, int64_t *size)</td></tr>
<tr class="separator:abf1f8a799d6f3fe3c1d8539537791a50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21b9c84435c65a4f0870fb5055c990e6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataSink.html#a21b9c84435c65a4f0870fb5055c990e6">CreateDataSink</a> (<a class="el" href="classimpala_1_1ObjectPool.html">ObjectPool</a> *<a class="el" href="expr-benchmark_8cc.html#a3a5de7bd423fbc0afc4cf935c166ca6b">pool</a>, const TDataSink &amp;thrift_sink, const std::vector&lt; TExpr &gt; &amp;output_exprs, const TPlanFragmentExecParams &amp;params, const <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> &amp;<a class="el" href="namespaceimpala.html#aa98447566dd6700a2faaaaf3059f4d95">row_desc</a>, boost::scoped_ptr&lt; <a class="el" href="classimpala_1_1DataSink.html">DataSink</a> &gt; *sink)</td></tr>
<tr class="separator:a21b9c84435c65a4f0870fb5055c990e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab95c1680a2c851bed71977e502139b32"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataSink.html#ab95c1680a2c851bed71977e502139b32">MergeInsertStats</a> (const TInsertStats &amp;src_stats, TInsertStats *dst_stats)</td></tr>
<tr class="separator:ab95c1680a2c851bed71977e502139b32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb54f550a23683ce30805c392d24ebc7"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataSink.html#acb54f550a23683ce30805c392d24ebc7">OutputInsertStats</a> (const <a class="el" href="namespaceimpala.html#a38c499092e6bf592abe6b171cce4eb15">PartitionStatusMap</a> &amp;stats, const std::string &amp;prefix=&quot;&quot;)</td></tr>
<tr class="memdesc:acb54f550a23683ce30805c392d24ebc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outputs the insert stats contained in the map of insert partition updates to a string.  <a href="#acb54f550a23683ce30805c392d24ebc7">More...</a><br/></td></tr>
<tr class="separator:acb54f550a23683ce30805c392d24ebc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ae28cb708ca3252c487c446c5d6d683d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataSink.html#ae28cb708ca3252c487c446c5d6d683d4">closed_</a></td></tr>
<tr class="separator:ae28cb708ca3252c487c446c5d6d683d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a447d23b1d3b6df7b2720439f3e486d"><td class="memItemLeft" align="right" valign="top">boost::scoped_ptr&lt; <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DataSink.html#a0a447d23b1d3b6df7b2720439f3e486d">expr_mem_tracker_</a></td></tr>
<tr class="separator:a0a447d23b1d3b6df7b2720439f3e486d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a4fab224a06b3d7b7e38fefe6a0089615"><td class="memItemLeft" align="right" valign="top">typedef std::pair<br class="typebreak"/>
&lt; <a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a> <br class="typebreak"/>
*, std::vector&lt; int32_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a4fab224a06b3d7b7e38fefe6a0089615">PartitionPair</a></td></tr>
<tr class="separator:a4fab224a06b3d7b7e38fefe6a0089615"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88fdc8e2982b8eecdbfec507c5467cdb"><td class="memItemLeft" align="right" valign="top">typedef boost::unordered_map<br class="typebreak"/>
&lt; std::string, <a class="el" href="classimpala_1_1HdfsTableSink.html#a4fab224a06b3d7b7e38fefe6a0089615">PartitionPair</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a88fdc8e2982b8eecdbfec507c5467cdb">PartitionMap</a></td></tr>
<tr class="separator:a88fdc8e2982b8eecdbfec507c5467cdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eb47d5c124c7e1b7ca44fa43758ae1c"><td class="memItemLeft" align="right" valign="top">typedef boost::unordered_map<br class="typebreak"/>
&lt; std::string, <br class="typebreak"/>
<a class="el" href="classimpala_1_1HdfsPartitionDescriptor.html">HdfsPartitionDescriptor</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a4eb47d5c124c7e1b7ca44fa43758ae1c">PartitionDescriptorMap</a></td></tr>
<tr class="separator:a4eb47d5c124c7e1b7ca44fa43758ae1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a97f9241ddab33d28853fe12df52c7e3b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a97f9241ddab33d28853fe12df52c7e3b">InitOutputPartition</a> (<a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *state, const <a class="el" href="classimpala_1_1HdfsPartitionDescriptor.html">HdfsPartitionDescriptor</a> &amp;partition_descriptor, <a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a> *output_partition)</td></tr>
<tr class="memdesc:a97f9241ddab33d28853fe12df52c7e3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the filenames of a given output partition, and opens the temporary file.  <a href="#a97f9241ddab33d28853fe12df52c7e3b">More...</a><br/></td></tr>
<tr class="separator:a97f9241ddab33d28853fe12df52c7e3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad05565061b0102660efcd17cfaeb56e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#ad05565061b0102660efcd17cfaeb56e1">CreateNewTmpFile</a> (<a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *state, <a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a> *output_partition)</td></tr>
<tr class="separator:ad05565061b0102660efcd17cfaeb56e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e6d1761306e721e0e8284fe08ec1229"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a5e6d1761306e721e0e8284fe08ec1229">GetHashTblKey</a> (const std::vector&lt; <a class="el" href="classimpala_1_1ExprContext.html">ExprContext</a> * &gt; &amp;ctxs, std::string *key)</td></tr>
<tr class="separator:a5e6d1761306e721e0e8284fe08ec1229"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33eacd5217233d7dc3e54293c989d52e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a33eacd5217233d7dc3e54293c989d52e">GetOutputPartition</a> (<a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *state, const std::string &amp;key, <a class="el" href="classimpala_1_1HdfsTableSink.html#a4fab224a06b3d7b7e38fefe6a0089615">PartitionPair</a> **partition_pair)</td></tr>
<tr class="separator:a33eacd5217233d7dc3e54293c989d52e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad99889b28415d19eae2164112e6f507c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#ad99889b28415d19eae2164112e6f507c">PrepareExprs</a> (<a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *state)</td></tr>
<tr class="memdesc:ad99889b28415d19eae2164112e6f507c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise and prepare select and partition key expressions.  <a href="#ad99889b28415d19eae2164112e6f507c">More...</a><br/></td></tr>
<tr class="separator:ad99889b28415d19eae2164112e6f507c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6da527d105f3b2380948e1b4fbc37ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#ae6da527d105f3b2380948e1b4fbc37ce">BuildHdfsFileNames</a> (const <a class="el" href="classimpala_1_1HdfsPartitionDescriptor.html">HdfsPartitionDescriptor</a> &amp;partition_descriptor, <a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a> *output)</td></tr>
<tr class="separator:ae6da527d105f3b2380948e1b4fbc37ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97034a6afc292d4a26a238d402c32012"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a97034a6afc292d4a26a238d402c32012">FinalizePartitionFile</a> (<a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *state, <a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a> *partition)</td></tr>
<tr class="separator:a97034a6afc292d4a26a238d402c32012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad50de8f7c4cfc89e7dc141b8dabbcc44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#ad50de8f7c4cfc89e7dc141b8dabbcc44">ClosePartitionFile</a> (<a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *state, <a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a> *partition)</td></tr>
<tr class="memdesc:ad50de8f7c4cfc89e7dc141b8dabbcc44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the hdfs file for this partition as well as the writer.  <a href="#ad50de8f7c4cfc89e7dc141b8dabbcc44">More...</a><br/></td></tr>
<tr class="separator:ad50de8f7c4cfc89e7dc141b8dabbcc44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:afded447223c40f6ad8cb5b501875d568"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classimpala_1_1HdfsTableDescriptor.html">HdfsTableDescriptor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#afded447223c40f6ad8cb5b501875d568">table_desc_</a></td></tr>
<tr class="memdesc:afded447223c40f6ad8cb5b501875d568"><td class="mdescLeft">&#160;</td><td class="mdescRight">Descriptor of target table. Set in <a class="el" href="classimpala_1_1HdfsTableSink.html#a3f2e0429bebe4586bc9140eafd8a21f1" title="Prepares output_exprs and partition_key_exprs, and connects to HDFS. ">Prepare()</a>.  <a href="#afded447223c40f6ad8cb5b501875d568">More...</a><br/></td></tr>
<tr class="separator:afded447223c40f6ad8cb5b501875d568"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf0abb7b8d271e272e23399bb1e110ad"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classimpala_1_1HdfsPartitionDescriptor.html">HdfsPartitionDescriptor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#aaf0abb7b8d271e272e23399bb1e110ad">default_partition_</a></td></tr>
<tr class="memdesc:aaf0abb7b8d271e272e23399bb1e110ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently this is the default partition since we don't support multi-format sinks.  <a href="#aaf0abb7b8d271e272e23399bb1e110ad">More...</a><br/></td></tr>
<tr class="separator:aaf0abb7b8d271e272e23399bb1e110ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a267db75ab7c5c0a26296071c31b5369d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classimpala_1_1ExprContext.html">ExprContext</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a267db75ab7c5c0a26296071c31b5369d">output_expr_ctxs_</a></td></tr>
<tr class="memdesc:a267db75ab7c5c0a26296071c31b5369d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exprs that materialize output values.  <a href="#a267db75ab7c5c0a26296071c31b5369d">More...</a><br/></td></tr>
<tr class="separator:a267db75ab7c5c0a26296071c31b5369d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa301171de526d983f26ad15b6254c4ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1TupleRow.html">TupleRow</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#aa301171de526d983f26ad15b6254c4ad">current_row_</a></td></tr>
<tr class="memdesc:aa301171de526d983f26ad15b6254c4ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current row from the current <a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> to output.  <a href="#aa301171de526d983f26ad15b6254c4ad">More...</a><br/></td></tr>
<tr class="separator:aa301171de526d983f26ad15b6254c4ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ea610c1ebbb6e0aa9667e3f0ef983aa"><td class="memItemLeft" align="right" valign="top">hdfsFS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a4ea610c1ebbb6e0aa9667e3f0ef983aa">hdfs_connection_</a></td></tr>
<tr class="memdesc:a4ea610c1ebbb6e0aa9667e3f0ef983aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connection to hdfs, established in <a class="el" href="classimpala_1_1HdfsTableSink.html#a97ae2a720cc57b784f2bd23ec4ee9a15">Open()</a> and closed in <a class="el" href="classimpala_1_1HdfsTableSink.html#a2ca4efce0b0f420ca113819620f023c7">Close()</a>.  <a href="#a4ea610c1ebbb6e0aa9667e3f0ef983aa">More...</a><br/></td></tr>
<tr class="separator:a4ea610c1ebbb6e0aa9667e3f0ef983aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09ff5ccfa2aed127b0e8a267fa085c94"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a09ff5ccfa2aed127b0e8a267fa085c94">row_desc_</a></td></tr>
<tr class="memdesc:a09ff5ccfa2aed127b0e8a267fa085c94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Row descriptor of row batches passed in <a class="el" href="classimpala_1_1HdfsTableSink.html#a280d7bde9f6b5180794281d066c24ba6" title="Append all rows in batch to the temporary Hdfs files corresponding to partitions. ...">Send()</a>. Set in c'tor.  <a href="#a09ff5ccfa2aed127b0e8a267fa085c94">More...</a><br/></td></tr>
<tr class="separator:a09ff5ccfa2aed127b0e8a267fa085c94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ca2934de11e4bde6e068d576e295f43"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceimpala.html#a7372f255f35f4571795f8b07efdbae09">TableId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a4ca2934de11e4bde6e068d576e295f43">table_id_</a></td></tr>
<tr class="memdesc:a4ca2934de11e4bde6e068d576e295f43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Table id resolved in <a class="el" href="classimpala_1_1HdfsTableSink.html#a3f2e0429bebe4586bc9140eafd8a21f1" title="Prepares output_exprs and partition_key_exprs, and connects to HDFS. ">Prepare()</a> to set tuple_desc_;.  <a href="#a4ca2934de11e4bde6e068d576e295f43">More...</a><br/></td></tr>
<tr class="separator:a4ca2934de11e4bde6e068d576e295f43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a171a32851f95cfd9f4f4283b7859fec9"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; TExpr &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a171a32851f95cfd9f4f4283b7859fec9">select_list_texprs_</a></td></tr>
<tr class="separator:a171a32851f95cfd9f4f4283b7859fec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00633ae3b4ac61a6419d543852e67dff"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; TExpr &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a00633ae3b4ac61a6419d543852e67dff">partition_key_texprs_</a></td></tr>
<tr class="separator:a00633ae3b4ac61a6419d543852e67dff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75e3842c1ebc3a199e3b16618808d459"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classimpala_1_1ExprContext.html">ExprContext</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a75e3842c1ebc3a199e3b16618808d459">partition_key_expr_ctxs_</a></td></tr>
<tr class="memdesc:a75e3842c1ebc3a199e3b16618808d459"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exprs of partition keys.  <a href="#a75e3842c1ebc3a199e3b16618808d459">More...</a><br/></td></tr>
<tr class="separator:a75e3842c1ebc3a199e3b16618808d459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af355351518defbe5eac0ef7e4641d654"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#af355351518defbe5eac0ef7e4641d654">overwrite_</a></td></tr>
<tr class="memdesc:af355351518defbe5eac0ef7e4641d654"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether the existing partitions should be overwritten.  <a href="#af355351518defbe5eac0ef7e4641d654">More...</a><br/></td></tr>
<tr class="separator:af355351518defbe5eac0ef7e4641d654"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add5f44b15e0231c50eba4437a85bc627"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#add5f44b15e0231c50eba4437a85bc627">staging_dir_</a></td></tr>
<tr class="separator:add5f44b15e0231c50eba4437a85bc627"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a117bc8c377e5da4b5424a8a1615d7b82"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a117bc8c377e5da4b5424a8a1615d7b82">unique_id_str_</a></td></tr>
<tr class="separator:a117bc8c377e5da4b5424a8a1615d7b82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a743942ea55982b76101671cd20d00807"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1HdfsTableSink.html#a88fdc8e2982b8eecdbfec507c5467cdb">PartitionMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a743942ea55982b76101671cd20d00807">partition_keys_to_output_partitions_</a></td></tr>
<tr class="separator:a743942ea55982b76101671cd20d00807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e7f566d373b853ce6b7d7b382f05df8"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classimpala_1_1ExprContext.html">ExprContext</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a0e7f566d373b853ce6b7d7b382f05df8">dynamic_partition_key_expr_ctxs_</a></td></tr>
<tr class="separator:a0e7f566d373b853ce6b7d7b382f05df8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc5427a2a031ccd7e40250a6e3aa59c7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1HdfsTableSink.html#a4eb47d5c124c7e1b7ca44fa43758ae1c">PartitionDescriptorMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#acc5427a2a031ccd7e40250a6e3aa59c7">partition_descriptor_map_</a></td></tr>
<tr class="separator:acc5427a2a031ccd7e40250a6e3aa59c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4065ec85d296b6aa9a4f1106ce4ef7a"><td class="memItemLeft" align="right" valign="top">boost::scoped_ptr&lt; <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#ab4065ec85d296b6aa9a4f1106ce4ef7a">mem_tracker_</a></td></tr>
<tr class="separator:ab4065ec85d296b6aa9a4f1106ce4ef7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32d00c3c1b4eb90fcae15c9ffbb5a3bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a32d00c3c1b4eb90fcae15c9ffbb5a3bb">runtime_profile_</a></td></tr>
<tr class="memdesc:a32d00c3c1b4eb90fcae15c9ffbb5a3bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocated from runtime state's pool.  <a href="#a32d00c3c1b4eb90fcae15c9ffbb5a3bb">More...</a><br/></td></tr>
<tr class="separator:a32d00c3c1b4eb90fcae15c9ffbb5a3bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06230db843c80fc6f4ca6fe2fd756a75"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a06230db843c80fc6f4ca6fe2fd756a75">partitions_created_counter_</a></td></tr>
<tr class="separator:a06230db843c80fc6f4ca6fe2fd756a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab39cf9643eeb89dc752711b5e9437035"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#ab39cf9643eeb89dc752711b5e9437035">files_created_counter_</a></td></tr>
<tr class="separator:ab39cf9643eeb89dc752711b5e9437035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54bdc0c70b33283ca488c5d5c8619361"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a54bdc0c70b33283ca488c5d5c8619361">rows_inserted_counter_</a></td></tr>
<tr class="separator:a54bdc0c70b33283ca488c5d5c8619361"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e5f342bd92c77e85c90ede98dda8923"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a4e5f342bd92c77e85c90ede98dda8923">bytes_written_counter_</a></td></tr>
<tr class="separator:a4e5f342bd92c77e85c90ede98dda8923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2170cd3291d4d58c5cc93431d5d3e1d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a2170cd3291d4d58c5cc93431d5d3e1d4">encode_timer_</a></td></tr>
<tr class="memdesc:a2170cd3291d4d58c5cc93431d5d3e1d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time spent converting tuple to on disk format.  <a href="#a2170cd3291d4d58c5cc93431d5d3e1d4">More...</a><br/></td></tr>
<tr class="separator:a2170cd3291d4d58c5cc93431d5d3e1d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99f2add9dbe23c8fceaabcccfb2ee0fc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a99f2add9dbe23c8fceaabcccfb2ee0fc">hdfs_write_timer_</a></td></tr>
<tr class="memdesc:a99f2add9dbe23c8fceaabcccfb2ee0fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time spent writing to hdfs.  <a href="#a99f2add9dbe23c8fceaabcccfb2ee0fc">More...</a><br/></td></tr>
<tr class="separator:a99f2add9dbe23c8fceaabcccfb2ee0fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae21c4cf3b20e10ae6b0a6c8cdac92298"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#ae21c4cf3b20e10ae6b0a6c8cdac92298">compress_timer_</a></td></tr>
<tr class="memdesc:ae21c4cf3b20e10ae6b0a6c8cdac92298"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time spent compressing data.  <a href="#ae21c4cf3b20e10ae6b0a6c8cdac92298">More...</a><br/></td></tr>
<tr class="separator:ae21c4cf3b20e10ae6b0a6c8cdac92298"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cf72bcb73a038dbe3365c229a4fffac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1HdfsTableSink.html#a7cf72bcb73a038dbe3365c229a4fffac">has_empty_input_batch_</a></td></tr>
<tr class="separator:a7cf72bcb73a038dbe3365c229a4fffac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The sink consumes all row batches of its child execution tree, and writes the evaluated output_exprs into temporary Hdfs files. The query coordinator moves the temporary files into their final locations after the sinks have finished executing. This sink supports static and dynamic partition inserts (Hive terminology), as well as inserting into unpartitioned tables, and optional overwriting of partitions/tables. Files and partitions: This sink writes one or more Hdfs files per output partition, corresponding to an Hdfs directory. The Hdfs file names depend on unique_id, and therefore, we rely on the <em>global</em> uniqueness of unique_id, ie, no two HdfsTableSinks must be constructed with the same unique_id. For each row, its target partition is computed based on the partition_key_exprs from tsink. A map of opened Hdfs files (corresponding to partitions) is maintained. Each row may belong to different partition than the one before it. Failure behavior: In <a class="el" href="namespaceimpala.html#a8173907db7b6f1785b33db9d4e253be7">Exec()</a> all data is written to Hdfs files in a temporary directory. In <a class="el" href="classimpala_1_1HdfsTableSink.html#a2ca4efce0b0f420ca113819620f023c7">Close()</a> all temporary Hdfs files are moved to their final locations, while also removing the original files if overwrite was specified, as follows:</p>
<ol type="1">
<li>We move all temporary files to their final destinations.</li>
<li>After all tmp files have been moved, we delete the original files if overwrite was specified. There is a possibility of data inconsistency, e.g., if a failure occurs while moving the Hdfs files. The temporary directory is <table class="doxtable">
</table>
&lt;unique_id.hi&gt;-&lt;unique_id.lo&gt;_data such that an external tool can easily clean up incomplete inserts. This is consistent with Hive's behavior. </li>
</ol>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00122">122</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a4eb47d5c124c7e1b7ca44fa43758ae1c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::unordered_map&lt;std::string, <a class="el" href="classimpala_1_1HdfsPartitionDescriptor.html">HdfsPartitionDescriptor</a>*&gt; <a class="el" href="classimpala_1_1HdfsTableSink.html#a4eb47d5c124c7e1b7ca44fa43758ae1c">impala::HdfsTableSink::PartitionDescriptorMap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Map from row key (i.e. concatenated non-constant partition keys) to partition descriptor. We don't own the HdfsPartitionDescriptors, they belong to the table descriptor. The key is generated by <a class="el" href="classimpala_1_1HdfsTableSink.html#a5e6d1761306e721e0e8284fe08ec1229">GetHashTblKey()</a> from the keys in a row. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00266">266</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

</div>
</div>
<a class="anchor" id="a88fdc8e2982b8eecdbfec507c5467cdb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::unordered_map&lt;std::string, <a class="el" href="classimpala_1_1HdfsTableSink.html#a4fab224a06b3d7b7e38fefe6a0089615">PartitionPair</a>&gt; <a class="el" href="classimpala_1_1HdfsTableSink.html#a88fdc8e2982b8eecdbfec507c5467cdb">impala::HdfsTableSink::PartitionMap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00177">177</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4fab224a06b3d7b7e38fefe6a0089615"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::pair&lt;<a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a>*, std::vector&lt;int32_t&gt; &gt; <a class="el" href="classimpala_1_1HdfsTableSink.html#a4fab224a06b3d7b7e38fefe6a0089615">impala::HdfsTableSink::PartitionPair</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Key is the concatenation of the evaluated dynamic_partition_key_exprs_ generated by <a class="el" href="classimpala_1_1HdfsTableSink.html#a5e6d1761306e721e0e8284fe08ec1229">GetHashTblKey()</a>. Maps to an <a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a>, which are owned by the object pool and a vector of rows to insert into this partition from the current row batch. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00176">176</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab7e44d72434a1da576de6d09bf78b5b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">impala::HdfsTableSink::HdfsTableSink </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> &amp;&#160;</td>
          <td class="paramname"><em>row_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; TExpr &gt; &amp;&#160;</td>
          <td class="paramname"><em>select_list_texprs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TDataSink &amp;&#160;</td>
          <td class="paramname"><em>tsink</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae6da527d105f3b2380948e1b4fbc37ce"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::HdfsTableSink::BuildHdfsFileNames </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classimpala_1_1HdfsPartitionDescriptor.html">HdfsPartitionDescriptor</a> &amp;&#160;</td>
          <td class="paramname"><em>partition_descriptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a> *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets hdfs_file_name and tmp_hdfs_file_name of given output partition. The Hdfs directory is created from the target table's base Hdfs dir, the partition_key_names_ and the evaluated partition_key_exprs_. The Hdfs file name is the unique_id_str_. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8cc_source.html#l00240">240</a> of file <a class="el" href="hdfs-table-sink_8cc_source.html">hdfs-table-sink.cc</a>.</p>

<p>References <a class="el" href="hdfs-table-sink_8h_source.html#l00049">impala::OutputPartition::final_hdfs_file_name_prefix</a>, <a class="el" href="descriptors_8h_source.html#l00229">impala::HdfsTableDescriptor::hdfs_base_dir()</a>, <a class="el" href="descriptors_8h_source.html#l00189">impala::HdfsPartitionDescriptor::location()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00080">impala::OutputPartition::num_files</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00068">impala::OutputPartition::partition_name</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00244">staging_dir_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00208">table_desc_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00060">impala::OutputPartition::tmp_hdfs_dir_name</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00065">impala::OutputPartition::tmp_hdfs_file_name_prefix</a>, and <a class="el" href="hdfs-table-sink_8h_source.html#l00248">unique_id_str_</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00325">InitOutputPartition()</a>.</p>

</div>
</div>
<a class="anchor" id="aeacecfe6593f821952a9f0ee374ebd6d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::HdfsTableSink::bytes_written_counter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00152">152</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>References <a class="el" href="hdfs-table-sink_8h_source.html#l00276">bytes_written_counter_</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-writer_8cc_source.html#l00036">impala::HdfsTableWriter::Write()</a>.</p>

</div>
</div>
<a class="anchor" id="a2ca4efce0b0f420ca113819620f023c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::HdfsTableSink::Close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Move temporary Hdfs files to final locations. Remove original Hdfs files if overwrite was specified. Closes output_exprs and partition_key_exprs. </p>

<p>Implements <a class="el" href="classimpala_1_1DataSink.html#a969d37af186687d51ef7c3a369882e3b">impala::DataSink</a>.</p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8cc_source.html#l00602">602</a> of file <a class="el" href="hdfs-table-sink_8cc_source.html">hdfs-table-sink.cc</a>.</p>

<p>References <a class="el" href="classimpala_1_1Expr.html#a70300b0ba7c91fddb9adfaeb0dfc09a5">impala::Expr::Close()</a>, <a class="el" href="data-sink_8h_source.html#l00083">impala::DataSink::closed_</a>, <a class="el" href="descriptors_8cc_source.html#l00151">impala::HdfsPartitionDescriptor::CloseExprs()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00589">ClosePartitionFile()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00214">output_expr_ctxs_</a>, <a class="el" href="descriptors_8h_source.html#l00245">impala::HdfsTableDescriptor::partition_descriptors()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00237">partition_key_expr_ctxs_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00255">partition_keys_to_output_partitions_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00272">runtime_profile_</a>, <a class="el" href="runtime-profile_8h_source.html#l00053">SCOPED_TIMER</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00208">table_desc_</a>, and <a class="el" href="runtime-profile_8h_source.html#l00453">impala::RuntimeProfile::total_time_counter()</a>.</p>

</div>
</div>
<a class="anchor" id="ad50de8f7c4cfc89e7dc141b8dabbcc44"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::HdfsTableSink::ClosePartitionFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a> *&#160;</td>
          <td class="paramname"><em>partition</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Closes the hdfs file for this partition as well as the writer. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8cc_source.html#l00589">589</a> of file <a class="el" href="hdfs-table-sink_8cc_source.html">hdfs-table-sink.cc</a>.</p>

<p>References <a class="el" href="hdfs-table-sink_8h_source.html#l00055">impala::OutputPartition::current_file_name</a>, <a class="el" href="hdfs-util_8cc_source.html#l00026">impala::GetHdfsErrorMsg()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00220">hdfs_connection_</a>, <a class="el" href="runtime-state_8cc_source.html#l00224">impala::RuntimeState::LogError()</a>, <a class="el" href="impalad-metrics_8h_source.html#l00149">impala::ImpaladMetrics::NUM_FILES_OPEN_FOR_INSERT</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00074">impala::OutputPartition::tmp_hdfs_file</a>, and <a class="el" href="logging_8h_source.html#l00058">VLOG_FILE</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00602">Close()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00279">CreateNewTmpFile()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00565">FinalizePartitionFile()</a>.</p>

</div>
</div>
<a class="anchor" id="a85abd6444cd3bd5c9cce4e680b7407aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::HdfsTableSink::compress_timer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00155">155</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>References <a class="el" href="hdfs-table-sink_8h_source.html#l00283">compress_timer_</a>.</p>

<p>Referenced by <a class="el" href="hdfs-sequence-table-writer_8cc_source.html#l00233">impala::HdfsSequenceTableWriter::ConsumeRow()</a>, <a class="el" href="hdfs-text-table-writer_8cc_source.html#l00166">impala::HdfsTextTableWriter::Flush()</a>, <a class="el" href="hdfs-avro-table-writer_8cc_source.html#l00226">impala::HdfsAvroTableWriter::Flush()</a>, and <a class="el" href="hdfs-sequence-table-writer_8cc_source.html#l00163">impala::HdfsSequenceTableWriter::WriteCompressedBlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a21b9c84435c65a4f0870fb5055c990e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::DataSink::CreateDataSink </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1ObjectPool.html">ObjectPool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TDataSink &amp;&#160;</td>
          <td class="paramname"><em>thrift_sink</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; TExpr &gt; &amp;&#160;</td>
          <td class="paramname"><em>output_exprs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TPlanFragmentExecParams &amp;&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> &amp;&#160;</td>
          <td class="paramname"><em>row_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::scoped_ptr&lt; <a class="el" href="classimpala_1_1DataSink.html">DataSink</a> &gt; *&#160;</td>
          <td class="paramname"><em>sink</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates a new data sink from thrift_sink. A pointer to the new sink is written to *sink, and is owned by the caller. </p>

<p>Definition at line <a class="el" href="data-sink_8cc_source.html#l00034">34</a> of file <a class="el" href="data-sink_8cc_source.html">data-sink.cc</a>.</p>

<p>References <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>.</p>

<p>Referenced by <a class="el" href="plan-fragment-executor_8cc_source.html#l00080">impala::PlanFragmentExecutor::Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="ad05565061b0102660efcd17cfaeb56e1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::HdfsTableSink::CreateNewTmpFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a> *&#160;</td>
          <td class="paramname"><em>output_partition</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Add a temporary file to an output partition. Files are created in a temporary directory and then moved to the real partition directory by the coordinator in a finalization step. The temporary file's current location and final destination are recorded in the state parameter. If this function fails, the tmp file is cleaned up. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8cc_source.html#l00279">279</a> of file <a class="el" href="hdfs-table-sink_8cc_source.html">hdfs-table-sink.cc</a>.</p>

<p>References <a class="el" href="runtime-profile_8h_source.html#l00050">ADD_TIMER</a>, <a class="el" href="descriptors_8h_source.html#l00188">impala::HdfsPartitionDescriptor::block_size()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00589">ClosePartitionFile()</a>, <a class="el" href="runtime-profile_8h_source.html#l00055">COUNTER_ADD</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00055">impala::OutputPartition::current_file_name</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00274">files_created_counter_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00049">impala::OutputPartition::final_hdfs_file_name_prefix</a>, <a class="el" href="hdfs-util_8cc_source.html#l00026">impala::GetHdfsErrorMsg()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00220">hdfs_connection_</a>, <a class="el" href="runtime-state_8h_source.html#l00144">impala::RuntimeState::hdfs_files_to_move()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00080">impala::OutputPartition::num_files</a>, <a class="el" href="impalad-metrics_8h_source.html#l00149">impala::ImpaladMetrics::NUM_FILES_OPEN_FOR_INSERT</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00077">impala::OutputPartition::num_rows</a>, <a class="el" href="status_8h_source.html#l00172">impala::Status::ok()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00086">impala::OutputPartition::partition_descriptor</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00147">profile()</a>, <a class="el" href="runtime-profile_8h_source.html#l00053">SCOPED_TIMER</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00074">impala::OutputPartition::tmp_hdfs_file</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00065">impala::OutputPartition::tmp_hdfs_file_name_prefix</a>, <a class="el" href="logging_8h_source.html#l00058">VLOG_FILE</a>, and <a class="el" href="hdfs-table-sink_8h_source.html#l00083">impala::OutputPartition::writer</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00325">InitOutputPartition()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00495">Send()</a>.</p>

</div>
</div>
<a class="anchor" id="a938c70d0fcf84b3c606761be535918ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string impala::HdfsTableSink::DebugString </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hdfs-table-sink_8cc_source.html#l00643">643</a> of file <a class="el" href="hdfs-table-sink_8cc_source.html">hdfs-table-sink.cc</a>.</p>

<p>References <a class="el" href="expr_8cc_source.html#l00385">impala::Expr::DebugString()</a>, <a class="el" href="descriptors_8cc_source.html#l00190">impala::HdfsTableDescriptor::DebugString()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00214">output_expr_ctxs_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00240">overwrite_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00237">partition_key_expr_ctxs_</a>, and <a class="el" href="hdfs-table-sink_8h_source.html#l00208">table_desc_</a>.</p>

<p>Referenced by <a class="el" href="hdfs-sequence-table-writer_8cc_source.html#l00090">impala::HdfsSequenceTableWriter::AppendRowBatch()</a>, <a class="el" href="hdfs-text-table-writer_8cc_source.html#l00096">impala::HdfsTextTableWriter::AppendRowBatch()</a>, <a class="el" href="hdfs-sequence-table-writer_8cc_source.html#l00206">impala::HdfsSequenceTableWriter::EncodeRow()</a>, <a class="el" href="hdfs-table-writer_8cc_source.html#l00021">impala::HdfsTableWriter::HdfsTableWriter()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00072">PrepareExprs()</a>.</p>

</div>
</div>
<a class="anchor" id="aaaac900efe9fa7b75331cf70d40a92ce"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::HdfsTableSink::encode_timer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00153">153</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>References <a class="el" href="hdfs-table-sink_8h_source.html#l00279">encode_timer_</a>.</p>

<p>Referenced by <a class="el" href="hdfs-sequence-table-writer_8cc_source.html#l00090">impala::HdfsSequenceTableWriter::AppendRowBatch()</a>, <a class="el" href="hdfs-text-table-writer_8cc_source.html#l00096">impala::HdfsTextTableWriter::AppendRowBatch()</a>, <a class="el" href="hdfs-parquet-table-writer_8cc_source.html#l00862">impala::HdfsParquetTableWriter::AppendRowBatch()</a>, and <a class="el" href="hdfs-avro-table-writer_8cc_source.html#l00168">impala::HdfsAvroTableWriter::AppendRowBatch()</a>.</p>

</div>
</div>
<a class="anchor" id="a97034a6afc292d4a26a238d402c32012"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::HdfsTableSink::FinalizePartitionFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a> *&#160;</td>
          <td class="paramname"><em>partition</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Updates runtime stats of HDFS with rows written, then closes the file associated with the partition by calling <a class="el" href="classimpala_1_1HdfsTableSink.html#ad50de8f7c4cfc89e7dc141b8dabbcc44" title="Closes the hdfs file for this partition as well as the writer. ">ClosePartitionFile()</a> </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8cc_source.html#l00565">565</a> of file <a class="el" href="hdfs-table-sink_8cc_source.html">hdfs-table-sink.cc</a>.</p>

<p>References <a class="el" href="runtime-profile_8h_source.html#l00050">ADD_TIMER</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00589">ClosePartitionFile()</a>, <a class="el" href="data-sink_8cc_source.html#l00090">impala::DataSink::MergeInsertStats()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00077">impala::OutputPartition::num_rows</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00240">overwrite_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00068">impala::OutputPartition::partition_name</a>, <a class="el" href="runtime-state_8h_source.html#l00177">impala::RuntimeState::per_partition_status()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00147">profile()</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="runtime-profile_8h_source.html#l00053">SCOPED_TIMER</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00074">impala::OutputPartition::tmp_hdfs_file</a>, and <a class="el" href="hdfs-table-sink_8h_source.html#l00083">impala::OutputPartition::writer</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00495">Send()</a>.</p>

</div>
</div>
<a class="anchor" id="abf1f8a799d6f3fe3c1d8539537791a50"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::HdfsTableSink::GetFileBlockSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a> *&#160;</td>
          <td class="paramname"><em>output_partition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the block size of the current file opened for this partition. This is a utility routine that can be called by specific table writers. Currently used by the parquet writer. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8cc_source.html#l00628">628</a> of file <a class="el" href="hdfs-table-sink_8cc_source.html">hdfs-table-sink.cc</a>.</p>

<p>References <a class="el" href="hdfs-table-sink_8h_source.html#l00055">impala::OutputPartition::current_file_name</a>, <a class="el" href="hdfs-util_8cc_source.html#l00026">impala::GetHdfsErrorMsg()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00071">impala::OutputPartition::hdfs_connection</a>, and <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>.</p>

<p>Referenced by <a class="el" href="hdfs-parquet-table-writer_8cc_source.html#l00814">impala::HdfsParquetTableWriter::InitNewFile()</a>.</p>

</div>
</div>
<a class="anchor" id="a5e6d1761306e721e0e8284fe08ec1229"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::HdfsTableSink::GetHashTblKey </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classimpala_1_1ExprContext.html">ExprContext</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>ctxs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Generates string key for hash_tbl_ as a concatenation of all evaluated exprs, evaluated against current_row_. The generated string is much shorter than the full Hdfs file name. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8cc_source.html#l00436">436</a> of file <a class="el" href="hdfs-table-sink_8cc_source.html">hdfs-table-sink.cc</a>.</p>

<p>References <a class="el" href="hdfs-table-sink_8h_source.html#l00217">current_row_</a>, and <a class="el" href="raw-value_8cc_source.html#l00028">impala::RawValue::PrintValueAsBytes()</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00160">Open()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00495">Send()</a>.</p>

</div>
</div>
<a class="anchor" id="a33eacd5217233d7dc3e54293c989d52e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::HdfsTableSink::GetOutputPartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1HdfsTableSink.html#a4fab224a06b3d7b7e38fefe6a0089615">PartitionPair</a> **&#160;</td>
          <td class="paramname"><em>partition_pair</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Given a hashed partition key, get the output partition structure from the partition_keys_to_output_partitions_. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8cc_source.html#l00447">447</a> of file <a class="el" href="hdfs-table-sink_8cc_source.html">hdfs-table-sink.cc</a>.</p>

<p>References <a class="el" href="object-pool_8h_source.html#l00042">impala::ObjectPool::Add()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00211">default_partition_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00287">has_empty_input_batch_</a>, <a class="el" href="runtime-state_8h_source.html#l00144">impala::RuntimeState::hdfs_files_to_move()</a>, <a class="el" href="descriptors_8h_source.html#l00190">impala::HdfsPartitionDescriptor::id()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00325">InitOutputPartition()</a>, <a class="el" href="runtime-state_8h_source.html#l00092">impala::RuntimeState::obj_pool()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="status_8h_source.html#l00172">impala::Status::ok()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00267">partition_descriptor_map_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00255">partition_keys_to_output_partitions_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00068">impala::OutputPartition::partition_name</a>, <a class="el" href="runtime-state_8h_source.html#l00177">impala::RuntimeState::per_partition_status()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00060">impala::OutputPartition::tmp_hdfs_dir_name</a>, and <a class="el" href="hdfs-table-sink_8h_source.html#l00083">impala::OutputPartition::writer</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00495">Send()</a>.</p>

</div>
</div>
<a class="anchor" id="a8019ba8c269e32342b407c6e74bc931e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::HdfsTableSink::hdfs_write_timer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00154">154</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>References <a class="el" href="hdfs-table-sink_8h_source.html#l00281">hdfs_write_timer_</a>.</p>

<p>Referenced by <a class="el" href="hdfs-parquet-table-writer_8cc_source.html#l00897">impala::HdfsParquetTableWriter::Finalize()</a>, <a class="el" href="hdfs-text-table-writer_8cc_source.html#l00166">impala::HdfsTextTableWriter::Flush()</a>, <a class="el" href="hdfs-sequence-table-writer_8cc_source.html#l00291">impala::HdfsSequenceTableWriter::Flush()</a>, and <a class="el" href="hdfs-avro-table-writer_8cc_source.html#l00226">impala::HdfsAvroTableWriter::Flush()</a>.</p>

</div>
</div>
<a class="anchor" id="a97f9241ddab33d28853fe12df52c7e3b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::HdfsTableSink::InitOutputPartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classimpala_1_1HdfsPartitionDescriptor.html">HdfsPartitionDescriptor</a> &amp;&#160;</td>
          <td class="paramname"><em>partition_descriptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a> *&#160;</td>
          <td class="paramname"><em>output_partition</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialises the filenames of a given output partition, and opens the temporary file. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8cc_source.html#l00325">325</a> of file <a class="el" href="hdfs-table-sink_8cc_source.html">hdfs-table-sink.cc</a>.</p>

<p>References <a class="el" href="hdfs-table-sink_8cc_source.html#l00240">BuildHdfsFileNames()</a>, <a class="el" href="descriptors_8h_source.html#l00165">impala::TableDescriptor::col_names()</a>, <a class="el" href="runtime-profile_8h_source.html#l00055">COUNTER_ADD</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00279">CreateNewTmpFile()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00217">current_row_</a>, <a class="el" href="descriptors_8h_source.html#l00184">impala::HdfsPartitionDescriptor::file_format()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00287">has_empty_input_batch_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00071">impala::OutputPartition::hdfs_connection</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00220">hdfs_connection_</a>, <a class="el" href="descriptors_8h_source.html#l00230">impala::HdfsTableDescriptor::null_partition_key_value()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00214">output_expr_ctxs_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00086">impala::OutputPartition::partition_descriptor</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00237">partition_key_expr_ctxs_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00068">impala::OutputPartition::partition_name</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00273">partitions_created_counter_</a>, <a class="el" href="runtime-state_8h_source.html#l00095">impala::RuntimeState::query_options()</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00208">table_desc_</a>, <a class="el" href="url-coding_8cc_source.html#l00048">impala::UrlEncode()</a>, and <a class="el" href="hdfs-table-sink_8h_source.html#l00083">impala::OutputPartition::writer</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00447">GetOutputPartition()</a>.</p>

</div>
</div>
<a class="anchor" id="a216b72f4f0f996ccf8dd17443eaee6cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a>* impala::HdfsTableSink::mem_tracker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00149">149</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>References <a class="el" href="hdfs-table-sink_8h_source.html#l00269">mem_tracker_</a>.</p>

<p>Referenced by <a class="el" href="hdfs-text-table-writer_8cc_source.html#l00082">impala::HdfsTextTableWriter::Close()</a>, <a class="el" href="hdfs-avro-table-writer_8cc_source.html#l00049">impala::HdfsAvroTableWriter::HdfsAvroTableWriter()</a>, <a class="el" href="hdfs-sequence-table-writer_8cc_source.html#l00040">impala::HdfsSequenceTableWriter::HdfsSequenceTableWriter()</a>, and <a class="el" href="hdfs-text-table-writer_8cc_source.html#l00059">impala::HdfsTextTableWriter::Init()</a>.</p>

</div>
</div>
<a class="anchor" id="ab95c1680a2c851bed71977e502139b32"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::DataSink::MergeInsertStats </td>
          <td>(</td>
          <td class="paramtype">const TInsertStats &amp;&#160;</td>
          <td class="paramname"><em>src_stats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TInsertStats *&#160;</td>
          <td class="paramname"><em>dst_stats</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Merges one update to the insert stats for a partition. dst_stats will have the combined stats of src_stats and dst_stats after this method returns. </p>

<p>Definition at line <a class="el" href="data-sink_8cc_source.html#l00090">90</a> of file <a class="el" href="data-sink_8cc_source.html">data-sink.cc</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00565">FinalizePartitionFile()</a>.</p>

</div>
</div>
<a class="anchor" id="a97ae2a720cc57b784f2bd23ec4ee9a15"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::HdfsTableSink::Open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Opens output_exprs and partition_key_exprs, prepares the single output partition for static inserts, and populates partition_descriptor_map_. </p>

<p>Implements <a class="el" href="classimpala_1_1DataSink.html#a945b469ea9707748efd39273535952c0">impala::DataSink</a>.</p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8cc_source.html#l00160">160</a> of file <a class="el" href="hdfs-table-sink_8cc_source.html">hdfs-table-sink.cc</a>.</p>

<p>References <a class="el" href="hdfs-table-sink_8h_source.html#l00211">default_partition_</a>, <a class="el" href="raw-value_8h_source.html#l00106">impala::RawValue::Eq()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00436">GetHashTblKey()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="classimpala_1_1Expr.html#aad1111f87951868de4d8f8b2dfe87c5f">impala::Expr::Open()</a>, <a class="el" href="descriptors_8cc_source.html#l00145">impala::HdfsPartitionDescriptor::OpenExprs()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00214">output_expr_ctxs_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00267">partition_descriptor_map_</a>, <a class="el" href="descriptors_8h_source.html#l00245">impala::HdfsTableDescriptor::partition_descriptors()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00237">partition_key_expr_ctxs_</a>, <a class="el" href="descriptors_8h_source.html#l00185">impala::HdfsPartitionDescriptor::partition_key_value_ctxs()</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, and <a class="el" href="hdfs-table-sink_8h_source.html#l00208">table_desc_</a>.</p>

</div>
</div>
<a class="anchor" id="acb54f550a23683ce30805c392d24ebc7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string impala::DataSink::OutputInsertStats </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceimpala.html#a38c499092e6bf592abe6b171cce4eb15">PartitionStatusMap</a> &amp;&#160;</td>
          <td class="paramname"><em>stats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>prefix</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Outputs the insert stats contained in the map of insert partition updates to a string. </p>

<p>Definition at line <a class="el" href="data-sink_8cc_source.html#l00103">103</a> of file <a class="el" href="data-sink_8cc_source.html">data-sink.cc</a>.</p>

<p>References <a class="el" href="pretty-printer_8h_source.html#l00033">impala::PrettyPrinter::Print()</a>.</p>

</div>
</div>
<a class="anchor" id="a3f2e0429bebe4586bc9140eafd8a21f1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::HdfsTableSink::Prepare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepares output_exprs and partition_key_exprs, and connects to HDFS. </p>

<p>Reimplemented from <a class="el" href="classimpala_1_1DataSink.html#ad1d8007e6e079be3695d5db545ecc446">impala::DataSink</a>.</p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">107</a> of file <a class="el" href="hdfs-table-sink_8cc_source.html">hdfs-table-sink.cc</a>.</p>

<p>References <a class="el" href="object-pool_8h_source.html#l00042">impala::ObjectPool::Add()</a>, <a class="el" href="runtime-profile_8h_source.html#l00047">ADD_COUNTER</a>, <a class="el" href="runtime-profile_8h_source.html#l00050">ADD_TIMER</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00276">bytes_written_counter_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00283">compress_timer_</a>, <a class="el" href="expr_8cc_source.html#l00149">impala::Expr::CreateExprTrees()</a>, <a class="el" href="runtime-state_8h_source.html#l00093">impala::RuntimeState::desc_tbl()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00279">encode_timer_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00274">files_created_counter_</a>, <a class="el" href="runtime-state_8h_source.html#l00126">impala::RuntimeState::fragment_instance_id()</a>, <a class="el" href="descriptors_8cc_source.html#l00427">impala::DescriptorTbl::GetTableDescriptor()</a>, <a class="el" href="descriptors_8h_source.html#l00229">impala::HdfsTableDescriptor::hdfs_base_dir()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00220">hdfs_connection_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00281">hdfs_write_timer_</a>, <a class="el" href="hdfs-fs-cache_8h_source.html#l00043">impala::HdfsFsCache::instance()</a>, <a class="el" href="runtime-state_8h_source.html#l00140">impala::RuntimeState::instance_mem_tracker()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00269">mem_tracker_</a>, <a class="el" href="cpu-info_8cc_source.html#l00050">impala::name</a>, <a class="el" href="runtime-state_8h_source.html#l00092">impala::RuntimeState::obj_pool()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00214">output_expr_ctxs_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00237">partition_key_expr_ctxs_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00234">partition_key_texprs_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00273">partitions_created_counter_</a>, <a class="el" href="data-sink_8cc_source.html#l00136">impala::DataSink::Prepare()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00072">PrepareExprs()</a>, <a class="el" href="debug-util_8cc_source.html#l00097">impala::PrintId()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00147">profile()</a>, <a class="el" href="runtime-state_8h_source.html#l00125">impala::RuntimeState::query_id()</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00275">rows_inserted_counter_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00272">runtime_profile_</a>, <a class="el" href="runtime-profile_8h_source.html#l00053">SCOPED_TIMER</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00230">select_list_texprs_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00244">staging_dir_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00208">table_desc_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00226">table_id_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00248">unique_id_str_</a>, and <a class="el" href="logging_8h_source.html#l00057">VLOG_QUERY</a>.</p>

</div>
</div>
<a class="anchor" id="ad99889b28415d19eae2164112e6f507c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::HdfsTableSink::PrepareExprs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialise and prepare select and partition key expressions. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8cc_source.html#l00072">72</a> of file <a class="el" href="hdfs-table-sink_8cc_source.html">hdfs-table-sink.cc</a>.</p>

<p>References <a class="el" href="descriptors_8h_source.html#l00165">impala::TableDescriptor::col_names()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00643">DebugString()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00259">dynamic_partition_key_expr_ctxs_</a>, <a class="el" href="data-sink_8h_source.html#l00085">impala::DataSink::expr_mem_tracker_</a>, <a class="el" href="descriptors_8h_source.html#l00153">impala::TableDescriptor::num_clustering_cols()</a>, <a class="el" href="descriptors_8h_source.html#l00152">impala::TableDescriptor::num_cols()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00214">output_expr_ctxs_</a>, <a class="el" href="descriptors_8h_source.html#l00245">impala::HdfsTableDescriptor::partition_descriptors()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00237">partition_key_expr_ctxs_</a>, <a class="el" href="classimpala_1_1Expr.html#a3ae02e50debba50ac5c7b6dd9f8016e7">impala::Expr::Prepare()</a>, <a class="el" href="descriptors_8cc_source.html#l00134">impala::HdfsPartitionDescriptor::PrepareExprs()</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00223">row_desc_</a>, and <a class="el" href="hdfs-table-sink_8h_source.html#l00208">table_desc_</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a7710498d89015e8b80b60ef21eeb93f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a>* impala::HdfsTableSink::profile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the runtime profile for the sink. </p>

<p>Implements <a class="el" href="classimpala_1_1DataSink.html#af916d5b1c2071e0b1a1101e36e912ddb">impala::DataSink</a>.</p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00147">147</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>References <a class="el" href="hdfs-table-sink_8h_source.html#l00272">runtime_profile_</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00279">CreateNewTmpFile()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00565">FinalizePartitionFile()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a2025d785fa7bfb70e8dc84bb91114410"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::HdfsTableSink::rows_inserted_counter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00151">151</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>References <a class="el" href="hdfs-table-sink_8h_source.html#l00275">rows_inserted_counter_</a>.</p>

<p>Referenced by <a class="el" href="hdfs-sequence-table-writer_8cc_source.html#l00090">impala::HdfsSequenceTableWriter::AppendRowBatch()</a>, <a class="el" href="hdfs-text-table-writer_8cc_source.html#l00096">impala::HdfsTextTableWriter::AppendRowBatch()</a>, <a class="el" href="hdfs-avro-table-writer_8cc_source.html#l00168">impala::HdfsAvroTableWriter::AppendRowBatch()</a>, and <a class="el" href="hdfs-parquet-table-writer_8cc_source.html#l00897">impala::HdfsParquetTableWriter::Finalize()</a>.</p>

</div>
</div>
<a class="anchor" id="a280d7bde9f6b5180794281d066c24ba6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::HdfsTableSink::Send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>eos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Append all rows in batch to the temporary Hdfs files corresponding to partitions. </p>

<p>Implements <a class="el" href="classimpala_1_1DataSink.html#ab73b647642f7623ceb2ba4457292d276">impala::DataSink</a>.</p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8cc_source.html#l00495">495</a> of file <a class="el" href="hdfs-table-sink_8cc_source.html">hdfs-table-sink.cc</a>.</p>

<p>References <a class="el" href="runtime-state_8cc_source.html#l00286">impala::RuntimeState::CheckQueryState()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00279">CreateNewTmpFile()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00217">current_row_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00259">dynamic_partition_key_expr_ctxs_</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00565">FinalizePartitionFile()</a>, <a class="el" href="expr-context_8cc_source.html#l00109">impala::ExprContext::FreeLocalAllocations()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00436">GetHashTblKey()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00447">GetOutputPartition()</a>, <a class="el" href="row-batch_8h_source.html#l00140">impala::RowBatch::GetRow()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00287">has_empty_input_batch_</a>, <a class="el" href="row-batch_8h_source.html#l00215">impala::RowBatch::num_rows()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00214">output_expr_ctxs_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00237">partition_key_expr_ctxs_</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00255">partition_keys_to_output_partitions_</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="hbase-table-sink_8cc_source.html#l00028">impala::ROOT_PARTITION_KEY</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00272">runtime_profile_</a>, <a class="el" href="runtime-profile_8h_source.html#l00053">SCOPED_TIMER</a>, <a class="el" href="runtime-profile_8h_source.html#l00453">impala::RuntimeProfile::total_time_counter()</a>, and <a class="el" href="hdfs-table-sink_8h_source.html#l00083">impala::OutputPartition::writer</a>.</p>

</div>
</div>
<a class="anchor" id="ad1db7e4f8cd070a5f5633d3d1a25310e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classimpala_1_1HdfsTableDescriptor.html">HdfsTableDescriptor</a>&amp; impala::HdfsTableSink::TableDesc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00148">148</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>References <a class="el" href="hdfs-table-sink_8h_source.html#l00208">table_desc_</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a4e5f342bd92c77e85c90ede98dda8923"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::HdfsTableSink::bytes_written_counter_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00276">276</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8h_source.html#l00152">bytes_written_counter()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="ae28cb708ca3252c487c446c5d6d683d4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::DataSink::closed_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set to true after <a class="el" href="classimpala_1_1DataSink.html#a969d37af186687d51ef7c3a369882e3b">Close()</a> has been called. Subclasses should check and set this in <a class="el" href="classimpala_1_1DataSink.html#a969d37af186687d51ef7c3a369882e3b">Close()</a>. </p>

<p>Definition at line <a class="el" href="data-sink_8h_source.html#l00083">83</a> of file <a class="el" href="data-sink_8h_source.html">data-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00602">Close()</a>.</p>

</div>
</div>
<a class="anchor" id="ae21c4cf3b20e10ae6b0a6c8cdac92298"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::HdfsTableSink::compress_timer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Time spent compressing data. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00283">283</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8h_source.html#l00155">compress_timer()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="aa301171de526d983f26ad15b6254c4ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1TupleRow.html">TupleRow</a>* impala::HdfsTableSink::current_row_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current row from the current <a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> to output. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00217">217</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00436">GetHashTblKey()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00325">InitOutputPartition()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00495">Send()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf0abb7b8d271e272e23399bb1e110ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classimpala_1_1HdfsPartitionDescriptor.html">HdfsPartitionDescriptor</a>* impala::HdfsTableSink::default_partition_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Currently this is the default partition since we don't support multi-format sinks. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00211">211</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00447">GetOutputPartition()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00160">Open()</a>.</p>

</div>
</div>
<a class="anchor" id="a0e7f566d373b853ce6b7d7b382f05df8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classimpala_1_1ExprContext.html">ExprContext</a>*&gt; impala::HdfsTableSink::dynamic_partition_key_expr_ctxs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Subset of partition_key_expr_ctxs_ which are not constant. Set in <a class="el" href="classimpala_1_1HdfsTableSink.html#a3f2e0429bebe4586bc9140eafd8a21f1" title="Prepares output_exprs and partition_key_exprs, and connects to HDFS. ">Prepare()</a>. Used for generating the string key of hash_tbl_. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00259">259</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00072">PrepareExprs()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00495">Send()</a>.</p>

</div>
</div>
<a class="anchor" id="a2170cd3291d4d58c5cc93431d5d3e1d4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::HdfsTableSink::encode_timer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Time spent converting tuple to on disk format. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00279">279</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8h_source.html#l00153">encode_timer()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a0a447d23b1d3b6df7b2720439f3e486d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::scoped_ptr&lt;<a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a>&gt; impala::DataSink::expr_mem_tracker_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="data-sink_8h_source.html#l00085">85</a> of file <a class="el" href="data-sink_8h_source.html">data-sink.h</a>.</p>

<p>Referenced by <a class="el" href="data-sink_8cc_source.html#l00136">impala::DataSink::Prepare()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00072">PrepareExprs()</a>.</p>

</div>
</div>
<a class="anchor" id="ab39cf9643eeb89dc752711b5e9437035"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::HdfsTableSink::files_created_counter_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00274">274</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00279">CreateNewTmpFile()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a7cf72bcb73a038dbe3365c229a4fffac"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::HdfsTableSink::has_empty_input_batch_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flag to indicate the current input batch passed in <a class="el" href="classimpala_1_1HdfsTableSink.html#a280d7bde9f6b5180794281d066c24ba6" title="Append all rows in batch to the temporary Hdfs files corresponding to partitions. ...">Send()</a> is empty. It implies that we must not initialize the <a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a> writer of a static partition insert. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00287">287</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00447">GetOutputPartition()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00325">InitOutputPartition()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00495">Send()</a>.</p>

</div>
</div>
<a class="anchor" id="a4ea610c1ebbb6e0aa9667e3f0ef983aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">hdfsFS impala::HdfsTableSink::hdfs_connection_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Connection to hdfs, established in <a class="el" href="classimpala_1_1HdfsTableSink.html#a97ae2a720cc57b784f2bd23ec4ee9a15">Open()</a> and closed in <a class="el" href="classimpala_1_1HdfsTableSink.html#a2ca4efce0b0f420ca113819620f023c7">Close()</a>. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00220">220</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00589">ClosePartitionFile()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00279">CreateNewTmpFile()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00325">InitOutputPartition()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a99f2add9dbe23c8fceaabcccfb2ee0fc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::HdfsTableSink::hdfs_write_timer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Time spent writing to hdfs. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00281">281</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8h_source.html#l00154">hdfs_write_timer()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="ab4065ec85d296b6aa9a4f1106ce4ef7a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::scoped_ptr&lt;<a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a>&gt; impala::HdfsTableSink::mem_tracker_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00269">269</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8h_source.html#l00149">mem_tracker()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a267db75ab7c5c0a26296071c31b5369d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classimpala_1_1ExprContext.html">ExprContext</a>*&gt; impala::HdfsTableSink::output_expr_ctxs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Exprs that materialize output values. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00214">214</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00602">Close()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00643">DebugString()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00325">InitOutputPartition()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00160">Open()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00072">PrepareExprs()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00495">Send()</a>.</p>

</div>
</div>
<a class="anchor" id="af355351518defbe5eac0ef7e4641d654"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::HdfsTableSink::overwrite_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Indicates whether the existing partitions should be overwritten. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00240">240</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00643">DebugString()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00565">FinalizePartitionFile()</a>.</p>

</div>
</div>
<a class="anchor" id="acc5427a2a031ccd7e40250a6e3aa59c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1HdfsTableSink.html#a4eb47d5c124c7e1b7ca44fa43758ae1c">PartitionDescriptorMap</a> impala::HdfsTableSink::partition_descriptor_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00267">267</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00447">GetOutputPartition()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00160">Open()</a>.</p>

</div>
</div>
<a class="anchor" id="a75e3842c1ebc3a199e3b16618808d459"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classimpala_1_1ExprContext.html">ExprContext</a>*&gt; impala::HdfsTableSink::partition_key_expr_ctxs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Exprs of partition keys. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00237">237</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00602">Close()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00643">DebugString()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00325">InitOutputPartition()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00160">Open()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00072">PrepareExprs()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00495">Send()</a>.</p>

</div>
</div>
<a class="anchor" id="a00633ae3b4ac61a6419d543852e67dff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt;TExpr&gt;&amp; impala::HdfsTableSink::partition_key_texprs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Thrift representation of partition keys, saved in the constructor to be used to initialise partition_key_exprs_ in Init </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00234">234</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a743942ea55982b76101671cd20d00807"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1HdfsTableSink.html#a88fdc8e2982b8eecdbfec507c5467cdb">PartitionMap</a> impala::HdfsTableSink::partition_keys_to_output_partitions_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Hash table of generated output partitions. Maps from a string representation of the dynamic_partition_key_exprs_ generated by <a class="el" href="classimpala_1_1HdfsTableSink.html#a5e6d1761306e721e0e8284fe08ec1229">GetHashTblKey()</a> to its corresponding <a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a>. If there are no partitions (and no partition keys) we store a single <a class="el" href="structimpala_1_1OutputPartition.html">OutputPartition</a> in the map to simplify the code. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00255">255</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00602">Close()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00447">GetOutputPartition()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00495">Send()</a>.</p>

</div>
</div>
<a class="anchor" id="a06230db843c80fc6f4ca6fe2fd756a75"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::HdfsTableSink::partitions_created_counter_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00273">273</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00325">InitOutputPartition()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a09ff5ccfa2aed127b0e8a267fa085c94"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a>&amp; impala::HdfsTableSink::row_desc_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Row descriptor of row batches passed in <a class="el" href="classimpala_1_1HdfsTableSink.html#a280d7bde9f6b5180794281d066c24ba6" title="Append all rows in batch to the temporary Hdfs files corresponding to partitions. ...">Send()</a>. Set in c'tor. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00223">223</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00072">PrepareExprs()</a>.</p>

</div>
</div>
<a class="anchor" id="a54bdc0c70b33283ca488c5d5c8619361"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::HdfsTableSink::rows_inserted_counter_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00275">275</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>, and <a class="el" href="hdfs-table-sink_8h_source.html#l00151">rows_inserted_counter()</a>.</p>

</div>
</div>
<a class="anchor" id="a32d00c3c1b4eb90fcae15c9ffbb5a3bb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a>* impala::HdfsTableSink::runtime_profile_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocated from runtime state's pool. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00272">272</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00602">Close()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>, <a class="el" href="hdfs-table-sink_8h_source.html#l00147">profile()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00495">Send()</a>.</p>

</div>
</div>
<a class="anchor" id="a171a32851f95cfd9f4f4283b7859fec9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt;TExpr&gt;&amp; impala::HdfsTableSink::select_list_texprs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Thrift representation of select list exprs, saved in the constructor to be used to initialise output_exprs_ in Init </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00230">230</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="add5f44b15e0231c50eba4437a85bc627"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string impala::HdfsTableSink::staging_dir_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The directory in which to write intermediate results. Set to &lt;hdfs_table_base_dir&gt;/_impala_insert_staging/ during <a class="el" href="classimpala_1_1HdfsTableSink.html#a3f2e0429bebe4586bc9140eafd8a21f1" title="Prepares output_exprs and partition_key_exprs, and connects to HDFS. ">Prepare()</a> </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00244">244</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00240">BuildHdfsFileNames()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="afded447223c40f6ad8cb5b501875d568"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classimpala_1_1HdfsTableDescriptor.html">HdfsTableDescriptor</a>* impala::HdfsTableSink::table_desc_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Descriptor of target table. Set in <a class="el" href="classimpala_1_1HdfsTableSink.html#a3f2e0429bebe4586bc9140eafd8a21f1" title="Prepares output_exprs and partition_key_exprs, and connects to HDFS. ">Prepare()</a>. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00208">208</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00240">BuildHdfsFileNames()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00602">Close()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00643">DebugString()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00325">InitOutputPartition()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00160">Open()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>, <a class="el" href="hdfs-table-sink_8cc_source.html#l00072">PrepareExprs()</a>, and <a class="el" href="hdfs-table-sink_8h_source.html#l00148">TableDesc()</a>.</p>

</div>
</div>
<a class="anchor" id="a4ca2934de11e4bde6e068d576e295f43"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceimpala.html#a7372f255f35f4571795f8b07efdbae09">TableId</a> impala::HdfsTableSink::table_id_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Table id resolved in <a class="el" href="classimpala_1_1HdfsTableSink.html#a3f2e0429bebe4586bc9140eafd8a21f1" title="Prepares output_exprs and partition_key_exprs, and connects to HDFS. ">Prepare()</a> to set tuple_desc_;. </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00226">226</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a117bc8c377e5da4b5424a8a1615d7b82"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string impala::HdfsTableSink::unique_id_str_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>string representation of the unique fragment instance id. Used for per-partition Hdfs file names, and for tmp Hdfs directories. Set in <a class="el" href="classimpala_1_1HdfsTableSink.html#a3f2e0429bebe4586bc9140eafd8a21f1" title="Prepares output_exprs and partition_key_exprs, and connects to HDFS. ">Prepare()</a>; </p>

<p>Definition at line <a class="el" href="hdfs-table-sink_8h_source.html#l00248">248</a> of file <a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a>.</p>

<p>Referenced by <a class="el" href="hdfs-table-sink_8cc_source.html#l00240">BuildHdfsFileNames()</a>, and <a class="el" href="hdfs-table-sink_8cc_source.html#l00107">Prepare()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>be/src/exec/<a class="el" href="hdfs-table-sink_8h_source.html">hdfs-table-sink.h</a></li>
<li>be/src/exec/<a class="el" href="hdfs-table-sink_8cc_source.html">hdfs-table-sink.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceimpala.html">impala</a></li><li class="navelem"><a class="el" href="classimpala_1_1HdfsTableSink.html">HdfsTableSink</a></li>
    <li class="footer">Generated on Thu May 7 2015 16:10:47 for Impala by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
