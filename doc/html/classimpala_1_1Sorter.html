<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Impala: impala::Sorter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Impala
   </div>
   <div id="projectbrief">Impalaistheopensource,nativeanalyticdatabaseforApacheHadoop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classimpala_1_1Sorter.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classimpala_1_1Sorter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">impala::Sorter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Note that <a class="el" href="classimpala_1_1Sorter.html#a63dd233c91ab829e6fc702ce703f77bc">Init()</a> must be called right after the constructor.  
 <a href="classimpala_1_1Sorter.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="sorter_8h_source.html">sorter.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for impala::Sorter:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classimpala_1_1Sorter__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter_1_1Run.html">Run</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter_1_1TupleSorter.html">TupleSorter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aff8768ae068c4aca8f282268a81c4ed5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#aff8768ae068c4aca8f282268a81c4ed5">Sorter</a> (const <a class="el" href="classimpala_1_1TupleRowComparator.html">TupleRowComparator</a> &amp;compare_less_than, const std::vector&lt; <a class="el" href="classimpala_1_1ExprContext.html">ExprContext</a> * &gt; &amp;sort_tuple_slot_expr_ctxs, <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> *output_row_desc, <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *mem_tracker, <a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a> *profile, <a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *state)</td></tr>
<tr class="separator:aff8768ae068c4aca8f282268a81c4ed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad745e2bcc3a9237ceeddb535e75484dd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#ad745e2bcc3a9237ceeddb535e75484dd">~Sorter</a> ()</td></tr>
<tr class="separator:ad745e2bcc3a9237ceeddb535e75484dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63dd233c91ab829e6fc702ce703f77bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a63dd233c91ab829e6fc702ce703f77bc">Init</a> ()</td></tr>
<tr class="separator:a63dd233c91ab829e6fc702ce703f77bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdc857b66e4ebff74b0a7c0ea008bdb8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#acdc857b66e4ebff74b0a7c0ea008bdb8">AddBatch</a> (<a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *batch)</td></tr>
<tr class="memdesc:acdc857b66e4ebff74b0a7c0ea008bdb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a batch of input rows to the current unsorted run.  <a href="#acdc857b66e4ebff74b0a7c0ea008bdb8">More...</a><br/></td></tr>
<tr class="separator:acdc857b66e4ebff74b0a7c0ea008bdb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f039c834b68505cde79399c7231b3c7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a2f039c834b68505cde79399c7231b3c7">InputDone</a> ()</td></tr>
<tr class="separator:a2f039c834b68505cde79399c7231b3c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5009c6abc953b2d3c54611687e624b0b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a5009c6abc953b2d3c54611687e624b0b">GetNext</a> (<a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *batch, <a class="el" href="classbool.html">bool</a> *eos)</td></tr>
<tr class="memdesc:a5009c6abc953b2d3c54611687e624b0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next batch of sorted output rows from the sorter.  <a href="#a5009c6abc953b2d3c54611687e624b0b">More...</a><br/></td></tr>
<tr class="separator:a5009c6abc953b2d3c54611687e624b0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a2125f77fa5dcff0861f7568673d49264"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classuint64__t.html">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a2125f77fa5dcff0861f7568673d49264">EstimateMergeMem</a> (<a class="el" href="classuint64__t.html">uint64_t</a> available_blocks, <a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> *<a class="el" href="namespaceimpala.html#aa98447566dd6700a2faaaaf3059f4d95">row_desc</a>, int merge_batch_size)</td></tr>
<tr class="separator:a2125f77fa5dcff0861f7568673d49264"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a1030c51f2ab6f4bf9573afd2e3e27d3b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a1030c51f2ab6f4bf9573afd2e3e27d3b">CreateMerger</a> (int num_runs)</td></tr>
<tr class="separator:a1030c51f2ab6f4bf9573afd2e3e27d3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4b86ce60d3cd4b790b37c1eb4aab459"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#ad4b86ce60d3cd4b790b37c1eb4aab459">MergeIntermediateRuns</a> ()</td></tr>
<tr class="separator:ad4b86ce60d3cd4b790b37c1eb4aab459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f7337219adb32331de00cd175519e60"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a9f7337219adb32331de00cd175519e60">SortRun</a> ()</td></tr>
<tr class="separator:a9f7337219adb32331de00cd175519e60"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a7753ec8417ae4ac163c435b00fad9219"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a7753ec8417ae4ac163c435b00fad9219">state_</a></td></tr>
<tr class="memdesc:a7753ec8417ae4ac163c435b00fad9219"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runtime state instance used to check for cancellation. Not owned.  <a href="#a7753ec8417ae4ac163c435b00fad9219">More...</a><br/></td></tr>
<tr class="separator:a7753ec8417ae4ac163c435b00fad9219"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0923783fedb01f5c6d21551b68f0ad92"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1TupleRowComparator.html">TupleRowComparator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a0923783fedb01f5c6d21551b68f0ad92">compare_less_than_</a></td></tr>
<tr class="memdesc:a0923783fedb01f5c6d21551b68f0ad92"><td class="mdescLeft">&#160;</td><td class="mdescRight">In memory sorter and less-than comparator.  <a href="#a0923783fedb01f5c6d21551b68f0ad92">More...</a><br/></td></tr>
<tr class="separator:a0923783fedb01f5c6d21551b68f0ad92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ff843ba1155cec7f8a65a320ff39a47"><td class="memItemLeft" align="right" valign="top">boost::scoped_ptr&lt; <a class="el" href="classimpala_1_1Sorter_1_1TupleSorter.html">TupleSorter</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a7ff843ba1155cec7f8a65a320ff39a47">in_mem_tuple_sorter_</a></td></tr>
<tr class="separator:a7ff843ba1155cec7f8a65a320ff39a47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ec40c845d2b854211e31d687edbdbf7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1BufferedBlockMgr.html">BufferedBlockMgr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a0ec40c845d2b854211e31d687edbdbf7">block_mgr_</a></td></tr>
<tr class="memdesc:a0ec40c845d2b854211e31d687edbdbf7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Block manager object used to allocate, pin and release runs. Not owned by <a class="el" href="classimpala_1_1Sorter.html" title="Note that Init() must be called right after the constructor. ">Sorter</a>.  <a href="#a0ec40c845d2b854211e31d687edbdbf7">More...</a><br/></td></tr>
<tr class="separator:a0ec40c845d2b854211e31d687edbdbf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af872d2d8a0d3d2777b723841105f6662"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structimpala_1_1BufferedBlockMgr_1_1Client.html">BufferedBlockMgr::Client</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#af872d2d8a0d3d2777b723841105f6662">block_mgr_client_</a></td></tr>
<tr class="memdesc:af872d2d8a0d3d2777b723841105f6662"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle to block mgr to make allocations from.  <a href="#af872d2d8a0d3d2777b723841105f6662">More...</a><br/></td></tr>
<tr class="separator:af872d2d8a0d3d2777b723841105f6662"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c234f39858a4d91d8e8f13bff456d01"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a5c234f39858a4d91d8e8f13bff456d01">has_var_len_slots_</a></td></tr>
<tr class="memdesc:a5c234f39858a4d91d8e8f13bff456d01"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if the tuples to be sorted have var-length slots.  <a href="#a5c234f39858a4d91d8e8f13bff456d01">More...</a><br/></td></tr>
<tr class="separator:a5c234f39858a4d91d8e8f13bff456d01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17d425e1c9f6fa64a2ca1704b10b4852"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Sorter_1_1Run.html">Run</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a17d425e1c9f6fa64a2ca1704b10b4852">unsorted_run_</a></td></tr>
<tr class="separator:a17d425e1c9f6fa64a2ca1704b10b4852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a418d79e93c34f3d4acfefdc4bf12378c"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="classimpala_1_1Sorter_1_1Run.html">Run</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a418d79e93c34f3d4acfefdc4bf12378c">sorted_runs_</a></td></tr>
<tr class="separator:a418d79e93c34f3d4acfefdc4bf12378c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a676b4a57c812101dbaff6e71d37e520a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a676b4a57c812101dbaff6e71d37e520a">output_row_desc_</a></td></tr>
<tr class="separator:a676b4a57c812101dbaff6e71d37e520a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab71e620c579d4b511e6775189672c82f"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classimpala_1_1ExprContext.html">ExprContext</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#ab71e620c579d4b511e6775189672c82f">sort_tuple_slot_expr_ctxs_</a></td></tr>
<tr class="separator:ab71e620c579d4b511e6775189672c82f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59eeb3403f9889c1c4bd3bc622410206"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a59eeb3403f9889c1c4bd3bc622410206">mem_tracker_</a></td></tr>
<tr class="memdesc:a59eeb3403f9889c1c4bd3bc622410206"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mem tracker for batches created during merge. Not owned by <a class="el" href="classimpala_1_1Sorter.html" title="Note that Init() must be called right after the constructor. ">Sorter</a>.  <a href="#a59eeb3403f9889c1c4bd3bc622410206">More...</a><br/></td></tr>
<tr class="separator:a59eeb3403f9889c1c4bd3bc622410206"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f92256ce7e671e7b119fdc00d751944"><td class="memItemLeft" align="right" valign="top">boost::scoped_ptr<br class="typebreak"/>
&lt; <a class="el" href="classimpala_1_1SortedRunMerger.html">SortedRunMerger</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a0f92256ce7e671e7b119fdc00d751944">merger_</a></td></tr>
<tr class="separator:a0f92256ce7e671e7b119fdc00d751944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0830f0e52c0161407c9baa5cc763c3df"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="classimpala_1_1Sorter_1_1Run.html">Run</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a0830f0e52c0161407c9baa5cc763c3df">merging_runs_</a></td></tr>
<tr class="separator:a0830f0e52c0161407c9baa5cc763c3df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee7c92c83c5efadd6d67c44d66e818f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1ObjectPool.html">ObjectPool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#aee7c92c83c5efadd6d67c44d66e818f7">obj_pool_</a></td></tr>
<tr class="memdesc:aee7c92c83c5efadd6d67c44d66e818f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pool of owned <a class="el" href="classimpala_1_1Sorter_1_1Run.html">Run</a> objects.  <a href="#aee7c92c83c5efadd6d67c44d66e818f7">More...</a><br/></td></tr>
<tr class="separator:aee7c92c83c5efadd6d67c44d66e818f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e3802c81805a01499604bdfdfe7e373"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a5e3802c81805a01499604bdfdfe7e373">profile_</a></td></tr>
<tr class="memdesc:a5e3802c81805a01499604bdfdfe7e373"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runtime profile and counters for this sorter instance.  <a href="#a5e3802c81805a01499604bdfdfe7e373">More...</a><br/></td></tr>
<tr class="separator:a5e3802c81805a01499604bdfdfe7e373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04aa99293ce8b5d1b83f0ddb01434444"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a04aa99293ce8b5d1b83f0ddb01434444">initial_runs_counter_</a></td></tr>
<tr class="separator:a04aa99293ce8b5d1b83f0ddb01434444"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac54b4755ecada0aaa3c051393a760a17"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#ac54b4755ecada0aaa3c051393a760a17">num_merges_counter_</a></td></tr>
<tr class="separator:ac54b4755ecada0aaa3c051393a760a17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5fff98fd6fe2e7e1f090a87d97026de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#ac5fff98fd6fe2e7e1f090a87d97026de">in_mem_sort_timer_</a></td></tr>
<tr class="separator:ac5fff98fd6fe2e7e1f090a87d97026de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5667044809a96f94849fbb1248891ccd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1Sorter.html#a5667044809a96f94849fbb1248891ccd">sorted_data_size_</a></td></tr>
<tr class="separator:a5667044809a96f94849fbb1248891ccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Note that <a class="el" href="classimpala_1_1Sorter.html#a63dd233c91ab829e6fc702ce703f77bc">Init()</a> must be called right after the constructor. </p>
<p><a class="el" href="classimpala_1_1Sorter.html" title="Note that Init() must be called right after the constructor. ">Sorter</a> contains the external sort implementation. Its purpose is to sort arbitrarily large input data sets with a fixed memory budget by spilling data to disk if necessary. <a class="el" href="classimpala_1_1BufferedBlockMgr.html">BufferedBlockMgr</a> is used to allocate and manage blocks of data to be sorted. The client API for <a class="el" href="classimpala_1_1Sorter.html" title="Note that Init() must be called right after the constructor. ">Sorter</a> is as follows: <a class="el" href="classimpala_1_1Sorter.html#acdc857b66e4ebff74b0a7c0ea008bdb8" title="Adds a batch of input rows to the current unsorted run. ">AddBatch()</a> is used to add input rows to be sorted. Multiple tuples in an input row are materialized into a row with a single tuple (the sort tuple) using the materialization exprs in sort_tuple_slot_expr_ctxs_. The sort tuples are sorted according to the sort parameters and output by the sorter. <a class="el" href="classimpala_1_1Sorter.html#acdc857b66e4ebff74b0a7c0ea008bdb8" title="Adds a batch of input rows to the current unsorted run. ">AddBatch()</a> can be called multiple times. <a class="el" href="classimpala_1_1Sorter.html#a2f039c834b68505cde79399c7231b3c7">InputDone()</a> is called to indicate the end of input. If multiple sorted runs were created, it triggers intermediate merge steps (if necessary) and creates the final merger that returns results via <a class="el" href="classimpala_1_1Sorter.html#a5009c6abc953b2d3c54611687e624b0b" title="Get the next batch of sorted output rows from the sorter. ">GetNext()</a>. <a class="el" href="classimpala_1_1Sorter.html#a5009c6abc953b2d3c54611687e624b0b" title="Get the next batch of sorted output rows from the sorter. ">GetNext()</a> is used to retrieve sorted rows. It can be called multiple times. <a class="el" href="classimpala_1_1Sorter.html#acdc857b66e4ebff74b0a7c0ea008bdb8" title="Adds a batch of input rows to the current unsorted run. ">AddBatch()</a>, <a class="el" href="classimpala_1_1Sorter.html#a2f039c834b68505cde79399c7231b3c7">InputDone()</a> and <a class="el" href="classimpala_1_1Sorter.html#a5009c6abc953b2d3c54611687e624b0b" title="Get the next batch of sorted output rows from the sorter. ">GetNext()</a> must be called in that order. Batches of input rows are collected into a sequence of pinned <a class="el" href="classimpala_1_1BufferedBlockMgr.html">BufferedBlockMgr</a> blocks called a run. The maximum size of a run is determined by the maximum available buffers in the block manager. After the run is full, it is sorted in memory, unpinned and the next run is collected. The variable-length column data (e.g. string slots) in the materialized sort tuples are stored in separate sequence of blocks from the tuples themselves. When the blocks containing tuples in a run are unpinned, the var-len slot pointers are converted to offsets from the start of the first var-len data block. When a block is read back, these offsets are converted back to pointers. The in-memory sorter sorts the fixed-length tuples in-place. The output rows have the same schema as the materialized sort tuples. After the input is consumed, the sorter is left with one or more sorted runs. The client calls GetNext(output_batch) to retrieve batches of sorted rows. If there are multiple runs, the runs are merged using <a class="el" href="classimpala_1_1SortedRunMerger.html">SortedRunMerger</a> to produce a stream of sorted tuples. At least one block per run (two if there are var-length slots) must be pinned in memory during a merge, so multiple merges may be necessary if the number of runs is too large. During a merge, rows from multiple sorted input runs are compared and copied into a single larger run. One input batch is created to hold tuple rows for each input run, and one batch is created to hold deep copied rows (i.e. ptrs + data) from the output of the merge. If there is a single sorted run (i.e. no merge required), only tuple rows are copied into the output batch supplied by GetNext, and the data itself is left in pinned blocks held by the sorter.During a merge, one row batch is created for each input run, and one batch is created for the output of the merge (if is not the final merge). It is assumed that the memory for these batches have already been accounted for in the memory budget for the sort. That is, the memory for these batches does not come out of the block buffer manager. TODO: Not necessary to actually copy var-len data - instead take ownership of the var-length data in the input batch. Copying can be deferred until a run is unpinned. TODO: When the first run is constructed, create a sequence of pointers to materialized tuples. If the input fits in memory, the pointers can be sorted instead of sorting the tuples in place. </p>

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00084">84</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aff8768ae068c4aca8f282268a81c4ed5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">impala::Sorter::Sorter </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classimpala_1_1TupleRowComparator.html">TupleRowComparator</a> &amp;&#160;</td>
          <td class="paramname"><em>compare_less_than</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classimpala_1_1ExprContext.html">ExprContext</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>sort_tuple_slot_expr_ctxs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> *&#160;</td>
          <td class="paramname"><em>output_row_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *&#160;</td>
          <td class="paramname"><em>mem_tracker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a> *&#160;</td>
          <td class="paramname"><em>profile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a> *&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>sort_tuple_slot_exprs are the slot exprs used to materialize the tuple to be sorted. compare_less_than is a comparator for the sort tuples (returns true if lhs &lt; rhs). merge_batch_size_ is the size of the batches created to provide rows to the merger and retrieve rows from an intermediate merger. </p>

<p>Definition at line <a class="el" href="sorter_8cc_source.html#l00870">870</a> of file <a class="el" href="sorter_8cc_source.html">sorter.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ad745e2bcc3a9237ceeddb535e75484dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">impala::Sorter::~Sorter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sorter_8cc_source.html#l00884">884</a> of file <a class="el" href="sorter_8cc_source.html">sorter.cc</a>.</p>

<p>References <a class="el" href="sorter_8h_source.html#l00152">block_mgr_</a>, <a class="el" href="sorter_8h_source.html#l00155">block_mgr_client_</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l00244">impala::BufferedBlockMgr::ClearReservations()</a>, <a class="el" href="sorter_8cc_source.html#l00468">impala::Sorter::Run::DeleteAllBlocks()</a>, <a class="el" href="sorter_8h_source.html#l00189">merging_runs_</a>, <a class="el" href="sorter_8h_source.html#l00169">sorted_runs_</a>, and <a class="el" href="sorter_8h_source.html#l00164">unsorted_run_</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="acdc857b66e4ebff74b0a7c0ea008bdb8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::Sorter::AddBatch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *&#160;</td>
          <td class="paramname"><em>batch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a batch of input rows to the current unsorted run. </p>

<p>Definition at line <a class="el" href="sorter_8cc_source.html#l00923">923</a> of file <a class="el" href="sorter_8cc_source.html">sorter.cc</a>.</p>

<p>References <a class="el" href="object-pool_8h_source.html#l00042">impala::ObjectPool::Add()</a>, <a class="el" href="sorter_8cc_source.html#l00372">impala::Sorter::Run::AddBatch()</a>, <a class="el" href="sorter_8h_source.html#l00158">has_var_len_slots_</a>, <a class="el" href="sorter_8h_source.html#l00192">obj_pool_</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="sorter_8h_source.html#l00173">output_row_desc_</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="sorter_8h_source.html#l00169">sorted_runs_</a>, <a class="el" href="sorter_8cc_source.html#l01006">SortRun()</a>, <a class="el" href="descriptors_8h_source.html#l00412">impala::RowDescriptor::tuple_descriptors()</a>, and <a class="el" href="sorter_8h_source.html#l00164">unsorted_run_</a>.</p>

</div>
</div>
<a class="anchor" id="a1030c51f2ab6f4bf9573afd2e3e27d3b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::Sorter::CreateMerger </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_runs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create a <a class="el" href="classimpala_1_1SortedRunMerger.html">SortedRunMerger</a> from the first 'num_runs' sorted runs in sorted_runs_ and assign it to merger_. The runs to be merged are removed from sorted_runs_. The <a class="el" href="classimpala_1_1Sorter.html" title="Note that Init() must be called right after the constructor. ">Sorter</a> sets the deep_copy_input flag to true for the merger, since the blocks containing input run data will be unpinned as input runs are read. </p>

<p>Definition at line <a class="el" href="sorter_8cc_source.html#l01123">1123</a> of file <a class="el" href="sorter_8cc_source.html">sorter.cc</a>.</p>

<p>References <a class="el" href="runtime-profile_8h_source.html#l00093">impala::RuntimeProfile::Counter::Add()</a>, <a class="el" href="sorter_8h_source.html#l00148">compare_less_than_</a>, <a class="el" href="sorter_8cc_source.html#l00573">impala::Sorter::Run::GetNextBatch()</a>, <a class="el" href="sorter_8h_source.html#l00185">merger_</a>, <a class="el" href="sorter_8h_source.html#l00189">merging_runs_</a>, <a class="el" href="sorter_8h_source.html#l00197">num_merges_counter_</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="sorter_8h_source.html#l00173">output_row_desc_</a>, <a class="el" href="sorter_8cc_source.html#l00535">impala::Sorter::Run::PrepareRead()</a>, <a class="el" href="sorter_8h_source.html#l00195">profile_</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, and <a class="el" href="sorter_8h_source.html#l00169">sorted_runs_</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00949">InputDone()</a>, and <a class="el" href="sorter_8cc_source.html#l01054">MergeIntermediateRuns()</a>.</p>

</div>
</div>
<a class="anchor" id="a2125f77fa5dcff0861f7568673d49264"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classuint64__t.html">uint64_t</a> impala::Sorter::EstimateMergeMem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classuint64__t.html">uint64_t</a>&#160;</td>
          <td class="paramname"><em>available_blocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a> *&#160;</td>
          <td class="paramname"><em>row_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>merge_batch_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Estimate the memory overhead in bytes for an intermediate merge, based on the maximum number of memory buffers available for the sort, the row descriptor for the sorted tuples and the batch size used (in rows). This is a pessimistic estimate of the memory needed by the sorter in addition to the memory used by the block buffer manager. The memory overhead is 0 if the input fits in memory. Merges incur additional memory overhead because row batches are created to hold tuple rows from the input runs, and the merger itself deep-copies sort-merged rows into its output batch. </p>

<p>Definition at line <a class="el" href="sorter_8cc_source.html#l01038">1038</a> of file <a class="el" href="sorter_8cc_source.html">sorter.cc</a>.</p>

<p>References <a class="el" href="row-batch_8h_source.html#l00222">impala::RowBatch::AT_CAPACITY_MEM_USAGE</a>, and <a class="el" href="descriptors_8h_source.html#l00412">impala::RowDescriptor::tuple_descriptors()</a>.</p>

</div>
</div>
<a class="anchor" id="a5009c6abc953b2d3c54611687e624b0b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::Sorter::GetNext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RowBatch.html">RowBatch</a> *&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>eos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the next batch of sorted output rows from the sorter. </p>

<p>Definition at line <a class="el" href="sorter_8cc_source.html#l00993">993</a> of file <a class="el" href="sorter_8cc_source.html">sorter.cc</a>.</p>

<p>References <a class="el" href="sorter_8h_source.html#l00185">merger_</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, and <a class="el" href="sorter_8h_source.html#l00169">sorted_runs_</a>.</p>

</div>
</div>
<a class="anchor" id="a63dd233c91ab829e6fc702ce703f77bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::Sorter::Init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialization code, including registration to the block_mgr and the initialization of the unsorted_run_, both of these may fail. </p>

<p>Definition at line <a class="el" href="sorter_8cc_source.html#l00896">896</a> of file <a class="el" href="sorter_8cc_source.html">sorter.cc</a>.</p>

<p>References <a class="el" href="object-pool_8h_source.html#l00042">impala::ObjectPool::Add()</a>, <a class="el" href="runtime-profile_8h_source.html#l00047">ADD_COUNTER</a>, <a class="el" href="runtime-profile_8h_source.html#l00050">ADD_TIMER</a>, <a class="el" href="sorter_8h_source.html#l00152">block_mgr_</a>, <a class="el" href="sorter_8h_source.html#l00155">block_mgr_client_</a>, <a class="el" href="sorter_8cc_source.html#l00031">impala::BLOCKS_REQUIRED_FOR_MERGE</a>, <a class="el" href="descriptors_8h_source.html#l00300">impala::TupleDescriptor::byte_size()</a>, <a class="el" href="sorter_8h_source.html#l00148">compare_less_than_</a>, <a class="el" href="sorter_8h_source.html#l00158">has_var_len_slots_</a>, <a class="el" href="sorter_8h_source.html#l00198">in_mem_sort_timer_</a>, <a class="el" href="sorter_8h_source.html#l00149">in_mem_tuple_sorter_</a>, <a class="el" href="sorter_8cc_source.html#l00350">impala::Sorter::Run::Init()</a>, <a class="el" href="sorter_8h_source.html#l00196">initial_runs_counter_</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00386">impala::BufferedBlockMgr::max_block_size()</a>, <a class="el" href="sorter_8h_source.html#l00180">mem_tracker_</a>, <a class="el" href="sorter_8h_source.html#l00197">num_merges_counter_</a>, <a class="el" href="sorter_8h_source.html#l00192">obj_pool_</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="sorter_8h_source.html#l00173">output_row_desc_</a>, <a class="el" href="sorter_8h_source.html#l00195">profile_</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l00235">impala::BufferedBlockMgr::RegisterClient()</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="sorter_8h_source.html#l00199">sorted_data_size_</a>, <a class="el" href="sorter_8h_source.html#l00145">state_</a>, <a class="el" href="descriptors_8h_source.html#l00303">impala::TupleDescriptor::string_slots()</a>, <a class="el" href="descriptors_8h_source.html#l00412">impala::RowDescriptor::tuple_descriptors()</a>, and <a class="el" href="sorter_8h_source.html#l00164">unsorted_run_</a>.</p>

</div>
</div>
<a class="anchor" id="a2f039c834b68505cde79399c7231b3c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::Sorter::InputDone </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called to indicate there is no more input. Triggers the creation of merger(s) if necessary. </p>

<p>Definition at line <a class="el" href="sorter_8cc_source.html#l00949">949</a> of file <a class="el" href="sorter_8cc_source.html">sorter.cc</a>.</p>

<p>References <a class="el" href="buffered-block-mgr_8h_source.html#l00380">impala::BufferedBlockMgr::available_allocated_buffers()</a>, <a class="el" href="sorter_8h_source.html#l00152">block_mgr_</a>, <a class="el" href="sorter_8cc_source.html#l01123">CreateMerger()</a>, <a class="el" href="sorter_8h_source.html#l00158">has_var_len_slots_</a>, <a class="el" href="sorter_8cc_source.html#l01054">MergeIntermediateRuns()</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00381">impala::BufferedBlockMgr::num_free_buffers()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="sorter_8h_source.html#l00169">sorted_runs_</a>, and <a class="el" href="sorter_8cc_source.html#l01006">SortRun()</a>.</p>

</div>
</div>
<a class="anchor" id="ad4b86ce60d3cd4b790b37c1eb4aab459"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::Sorter::MergeIntermediateRuns </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Repeatedly replaces multiple smaller runs in sorted_runs_ with a single larger merged run until the number of remaining runs is small enough for a single merge. At least 1 (2 if var-len slots) block from each sorted run must be pinned for a merge. If the number of sorted runs is too large, merge sets of smaller runs into large runs until a final merge can be performed. An intermediate row batch containing deep copied rows is used for the output of each intermediate merge. </p>

<p>Definition at line <a class="el" href="sorter_8cc_source.html#l01054">1054</a> of file <a class="el" href="sorter_8cc_source.html">sorter.cc</a>.</p>

<p>References <a class="el" href="object-pool_8h_source.html#l00042">impala::ObjectPool::Add()</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00380">impala::BufferedBlockMgr::available_allocated_buffers()</a>, <a class="el" href="runtime-state_8h_source.html#l00098">impala::RuntimeState::batch_size()</a>, <a class="el" href="sorter_8h_source.html#l00152">block_mgr_</a>, <a class="el" href="sorter_8cc_source.html#l01123">CreateMerger()</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l00130">impala::BufferedBlockMgr::Block::Delete()</a>, <a class="el" href="sorter_8h_source.html#l00158">has_var_len_slots_</a>, <a class="el" href="sorter_8h_source.html#l00180">mem_tracker_</a>, <a class="el" href="sorter_8h_source.html#l00185">merger_</a>, <a class="el" href="sorter_8h_source.html#l00192">obj_pool_</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="sorter_8h_source.html#l00173">output_row_desc_</a>, <a class="el" href="runtime-state_8h_source.html#l00384">RETURN_IF_CANCELLED</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="sorter_8h_source.html#l00169">sorted_runs_</a>, <a class="el" href="sorter_8h_source.html#l00145">state_</a>, <a class="el" href="descriptors_8h_source.html#l00412">impala::RowDescriptor::tuple_descriptors()</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l00126">impala::BufferedBlockMgr::Block::Unpin()</a>, and <a class="el" href="buffered-block-mgr_8h_source.html#l00187">impala::BufferedBlockMgr::Block::valid_data_len()</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00949">InputDone()</a>.</p>

</div>
</div>
<a class="anchor" id="a9f7337219adb32331de00cd175519e60"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::Sorter::SortRun </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sorts unsorted_run_ and appends it to the list of sorted runs. Deletes any empty blocks at the end of the run. Updates the sort bytes counter if necessary. </p>

<p>Definition at line <a class="el" href="sorter_8cc_source.html#l01006">1006</a> of file <a class="el" href="sorter_8cc_source.html">sorter.cc</a>.</p>

<p>References <a class="el" href="runtime-profile_8h_source.html#l00093">impala::RuntimeProfile::Counter::Add()</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l00130">impala::BufferedBlockMgr::Block::Delete()</a>, <a class="el" href="sorter_8cc_source.html#l00159">impala::Sorter::Run::fixed_len_blocks_</a>, <a class="el" href="sorter_8h_source.html#l00158">has_var_len_slots_</a>, <a class="el" href="sorter_8h_source.html#l00198">in_mem_sort_timer_</a>, <a class="el" href="sorter_8h_source.html#l00149">in_mem_tuple_sorter_</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="runtime-state_8h_source.html#l00384">RETURN_IF_CANCELLED</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="runtime-profile_8h_source.html#l00053">SCOPED_TIMER</a>, <a class="el" href="sorter_8h_source.html#l00199">sorted_data_size_</a>, <a class="el" href="sorter_8h_source.html#l00169">sorted_runs_</a>, <a class="el" href="sorter_8h_source.html#l00145">state_</a>, <a class="el" href="sorter_8h_source.html#l00164">unsorted_run_</a>, <a class="el" href="buffered-block-mgr_8h_source.html#l00187">impala::BufferedBlockMgr::Block::valid_data_len()</a>, <a class="el" href="sorter_8cc_source.html#l00165">impala::Sorter::Run::var_len_blocks_</a>, and <a class="el" href="sorter_8cc_source.html#l00170">impala::Sorter::Run::var_len_copy_block_</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00923">AddBatch()</a>, and <a class="el" href="sorter_8cc_source.html#l00949">InputDone()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a0ec40c845d2b854211e31d687edbdbf7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1BufferedBlockMgr.html">BufferedBlockMgr</a>* impala::Sorter::block_mgr_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Block manager object used to allocate, pin and release runs. Not owned by <a class="el" href="classimpala_1_1Sorter.html" title="Note that Init() must be called right after the constructor. ">Sorter</a>. </p>

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00152">152</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00896">Init()</a>, <a class="el" href="sorter_8cc_source.html#l00949">InputDone()</a>, <a class="el" href="sorter_8cc_source.html#l01054">MergeIntermediateRuns()</a>, and <a class="el" href="sorter_8cc_source.html#l00884">~Sorter()</a>.</p>

</div>
</div>
<a class="anchor" id="af872d2d8a0d3d2777b723841105f6662"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structimpala_1_1BufferedBlockMgr_1_1Client.html">BufferedBlockMgr::Client</a>* impala::Sorter::block_mgr_client_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle to block mgr to make allocations from. </p>

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00155">155</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00896">Init()</a>, and <a class="el" href="sorter_8cc_source.html#l00884">~Sorter()</a>.</p>

</div>
</div>
<a class="anchor" id="a0923783fedb01f5c6d21551b68f0ad92"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1TupleRowComparator.html">TupleRowComparator</a> impala::Sorter::compare_less_than_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>In memory sorter and less-than comparator. </p>

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00148">148</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l01123">CreateMerger()</a>, and <a class="el" href="sorter_8cc_source.html#l00896">Init()</a>.</p>

</div>
</div>
<a class="anchor" id="a5c234f39858a4d91d8e8f13bff456d01"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::Sorter::has_var_len_slots_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True if the tuples to be sorted have var-length slots. </p>

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00158">158</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00923">AddBatch()</a>, <a class="el" href="sorter_8cc_source.html#l00573">impala::Sorter::Run::GetNextBatch()</a>, <a class="el" href="sorter_8cc_source.html#l00350">impala::Sorter::Run::Init()</a>, <a class="el" href="sorter_8cc_source.html#l00896">Init()</a>, <a class="el" href="sorter_8cc_source.html#l00949">InputDone()</a>, <a class="el" href="sorter_8cc_source.html#l01054">MergeIntermediateRuns()</a>, <a class="el" href="sorter_8cc_source.html#l00535">impala::Sorter::Run::PrepareRead()</a>, <a class="el" href="sorter_8cc_source.html#l01006">SortRun()</a>, and <a class="el" href="sorter_8cc_source.html#l00478">impala::Sorter::Run::UnpinAllBlocks()</a>.</p>

</div>
</div>
<a class="anchor" id="ac5fff98fd6fe2e7e1f090a87d97026de"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::Sorter::in_mem_sort_timer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00198">198</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00896">Init()</a>, and <a class="el" href="sorter_8cc_source.html#l01006">SortRun()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ff843ba1155cec7f8a65a320ff39a47"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::scoped_ptr&lt;<a class="el" href="classimpala_1_1Sorter_1_1TupleSorter.html">TupleSorter</a>&gt; impala::Sorter::in_mem_tuple_sorter_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00149">149</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00896">Init()</a>, and <a class="el" href="sorter_8cc_source.html#l01006">SortRun()</a>.</p>

</div>
</div>
<a class="anchor" id="a04aa99293ce8b5d1b83f0ddb01434444"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::Sorter::initial_runs_counter_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00196">196</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00896">Init()</a>.</p>

</div>
</div>
<a class="anchor" id="a59eeb3403f9889c1c4bd3bc622410206"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a>* impala::Sorter::mem_tracker_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mem tracker for batches created during merge. Not owned by <a class="el" href="classimpala_1_1Sorter.html" title="Note that Init() must be called right after the constructor. ">Sorter</a>. </p>

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00180">180</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00896">Init()</a>, and <a class="el" href="sorter_8cc_source.html#l01054">MergeIntermediateRuns()</a>.</p>

</div>
</div>
<a class="anchor" id="a0f92256ce7e671e7b119fdc00d751944"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::scoped_ptr&lt;<a class="el" href="classimpala_1_1SortedRunMerger.html">SortedRunMerger</a>&gt; impala::Sorter::merger_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Merger object (intermediate or final) currently used to produce sorted runs. Only one merge is performed at a time. Will never be used if the input fits in memory. </p>

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00185">185</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l01123">CreateMerger()</a>, <a class="el" href="sorter_8cc_source.html#l00993">GetNext()</a>, and <a class="el" href="sorter_8cc_source.html#l01054">MergeIntermediateRuns()</a>.</p>

</div>
</div>
<a class="anchor" id="a0830f0e52c0161407c9baa5cc763c3df"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="classimpala_1_1Sorter_1_1Run.html">Run</a>*&gt; impala::Sorter::merging_runs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Runs that are currently processed by the merge_. These runs can be deleted when we are done with the current merge. </p>

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00189">189</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l01123">CreateMerger()</a>, and <a class="el" href="sorter_8cc_source.html#l00884">~Sorter()</a>.</p>

</div>
</div>
<a class="anchor" id="ac54b4755ecada0aaa3c051393a760a17"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::Sorter::num_merges_counter_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00197">197</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l01123">CreateMerger()</a>, and <a class="el" href="sorter_8cc_source.html#l00896">Init()</a>.</p>

</div>
</div>
<a class="anchor" id="aee7c92c83c5efadd6d67c44d66e818f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1ObjectPool.html">ObjectPool</a> impala::Sorter::obj_pool_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pool of owned <a class="el" href="classimpala_1_1Sorter_1_1Run.html">Run</a> objects. </p>

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00192">192</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00923">AddBatch()</a>, <a class="el" href="sorter_8cc_source.html#l00896">Init()</a>, and <a class="el" href="sorter_8cc_source.html#l01054">MergeIntermediateRuns()</a>.</p>

</div>
</div>
<a class="anchor" id="a676b4a57c812101dbaff6e71d37e520a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RowDescriptor.html">RowDescriptor</a>* impala::Sorter::output_row_desc_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Descriptor for the sort tuple. Input rows are materialized into 1 tuple before sorting. Not owned by the <a class="el" href="classimpala_1_1Sorter.html" title="Note that Init() must be called right after the constructor. ">Sorter</a>. </p>

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00173">173</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00923">AddBatch()</a>, <a class="el" href="sorter_8cc_source.html#l01123">CreateMerger()</a>, <a class="el" href="sorter_8cc_source.html#l00896">Init()</a>, and <a class="el" href="sorter_8cc_source.html#l01054">MergeIntermediateRuns()</a>.</p>

</div>
</div>
<a class="anchor" id="a5e3802c81805a01499604bdfdfe7e373"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a>* impala::Sorter::profile_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Runtime profile and counters for this sorter instance. </p>

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00195">195</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l01123">CreateMerger()</a>, and <a class="el" href="sorter_8cc_source.html#l00896">Init()</a>.</p>

</div>
</div>
<a class="anchor" id="ab71e620c579d4b511e6775189672c82f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classimpala_1_1ExprContext.html">ExprContext</a>*&gt; impala::Sorter::sort_tuple_slot_expr_ctxs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Expressions used to materialize the sort tuple. Contains one expr per slot in the tuple. </p>

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00177">177</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5667044809a96f94849fbb1248891ccd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* impala::Sorter::sorted_data_size_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00199">199</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00896">Init()</a>, and <a class="el" href="sorter_8cc_source.html#l01006">SortRun()</a>.</p>

</div>
</div>
<a class="anchor" id="a418d79e93c34f3d4acfefdc4bf12378c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="classimpala_1_1Sorter_1_1Run.html">Run</a>*&gt; impala::Sorter::sorted_runs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>List of sorted runs that have been produced but not merged. unsorted_run_ is added to this list after an in-memory sort. Sorted runs produced by intermediate merges are also added to this list. Runs are added to the object pool. </p>

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00169">169</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00923">AddBatch()</a>, <a class="el" href="sorter_8cc_source.html#l01123">CreateMerger()</a>, <a class="el" href="sorter_8cc_source.html#l00993">GetNext()</a>, <a class="el" href="sorter_8cc_source.html#l00949">InputDone()</a>, <a class="el" href="sorter_8cc_source.html#l01054">MergeIntermediateRuns()</a>, <a class="el" href="sorter_8cc_source.html#l01006">SortRun()</a>, and <a class="el" href="sorter_8cc_source.html#l00884">~Sorter()</a>.</p>

</div>
</div>
<a class="anchor" id="a7753ec8417ae4ac163c435b00fad9219"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeState.html">RuntimeState</a>* const impala::Sorter::state_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Runtime state instance used to check for cancellation. Not owned. </p>

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00145">145</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00896">Init()</a>, <a class="el" href="sorter_8cc_source.html#l01054">MergeIntermediateRuns()</a>, <a class="el" href="sorter_8cc_source.html#l00845">impala::Sorter::TupleSorter::SortHelper()</a>, and <a class="el" href="sorter_8cc_source.html#l01006">SortRun()</a>.</p>

</div>
</div>
<a class="anchor" id="a17d425e1c9f6fa64a2ca1704b10b4852"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Sorter_1_1Run.html">Run</a>* impala::Sorter::unsorted_run_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The current unsorted run that is being collected. Is sorted and added to sorted_runs_ after it is full (i.e. number of blocks allocated == max available buffers) or after the input is complete. Owned and placed in obj_pool_. When it is added to sorted_runs_, it is set to NULL. </p>

<p>Definition at line <a class="el" href="sorter_8h_source.html#l00164">164</a> of file <a class="el" href="sorter_8h_source.html">sorter.h</a>.</p>

<p>Referenced by <a class="el" href="sorter_8cc_source.html#l00923">AddBatch()</a>, <a class="el" href="sorter_8cc_source.html#l00896">Init()</a>, <a class="el" href="sorter_8cc_source.html#l01006">SortRun()</a>, and <a class="el" href="sorter_8cc_source.html#l00884">~Sorter()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>be/src/runtime/<a class="el" href="sorter_8h_source.html">sorter.h</a></li>
<li>be/src/runtime/<a class="el" href="sorter_8cc_source.html">sorter.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceimpala.html">impala</a></li><li class="navelem"><a class="el" href="classimpala_1_1Sorter.html">Sorter</a></li>
    <li class="footer">Generated on Thu May 7 2015 16:10:49 for Impala by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
