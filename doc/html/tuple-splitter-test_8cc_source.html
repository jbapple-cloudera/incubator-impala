<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Impala: be/src/experiments/tuple-splitter-test.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Impala
   </div>
   <div id="projectbrief">Impalaistheopensource,nativeanalyticdatabaseforApacheHadoop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('tuple-splitter-test_8cc_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">tuple-splitter-test.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="tuple-splitter-test_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright (c) 2012 Cloudera, Inc. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// you may not use this file except in compliance with the License.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// See the License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// limitations under the License.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="compiler-util_8h.html">common/compiler-util.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="data-provider_8h.html">experiments/data-provider.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mem-pool_8h.html">runtime/mem-pool.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mem-tracker_8h.html">runtime/mem-tracker.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="string-value_8h.html">runtime/string-value.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cpu-info_8h.html">util/cpu-info.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="runtime-profile_8h.html">util/runtime-profile.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="tuple-splitter-test_8cc.html#acc84ad58c2e577beb804d06bb0e1ea6f">   29</a></span>&#160;<span class="preprocessor">#define PRINT_RESULT 0</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="tuple-splitter-test_8cc.html#aaa2ecf3a06bda015126b4e8f836e7558">   31</a></span>&#160;<span class="preprocessor">#define UNUSED_BITS 16</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="tuple-splitter-test_8cc.html#a9800b136de5c37bf3cc5d0332108a611">   32</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define USED_BITS 48</span></div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="tuple-splitter-test_8cc.html#ab82ae0fd3bf7af73b1f7563cceb9a812">   33</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define UNUSED_UPPER_BITS_MASK  0xFFFF000000000000</span></div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="tuple-splitter-test_8cc.html#ab25c09878038a2fef98bc8e0a21f440c">   34</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define POINTER_LOWER_BITS_MASK 0x0000FFFFFFFFFFFF</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="names_8h.html">common/names.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">using namespace </span>impala;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="tuple-splitter-test_8cc.html#a0f57ed7cd41803aff8318544fa1ff37f">   40</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="tuple-splitter-test_8cc.html#a0f57ed7cd41803aff8318544fa1ff37f">Memcpy16</a>(uint8_t* dst, uint8_t* src) {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classuint64__t.html">uint64_t</a>*<span class="keyword">&gt;</span>(dst)[0] = reinterpret_cast&lt;uint64_t*&gt;(src)[0];</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classuint64__t.html">uint64_t</a>*<span class="keyword">&gt;</span>(dst)[1] = reinterpret_cast&lt;uint64_t*&gt;(src)[1];</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="structPointerValue.html">   45</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structPointerValue.html">PointerValue</a> {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keyword">union </span>{</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="structPointerValue.html#a1392ba8e160c00b8017f90c0431f2f5e">   47</a></span>&#160;    <a class="code" href="classuint64__t.html">uint64_t</a> <a class="code" href="structPointerValue.html#a1392ba8e160c00b8017f90c0431f2f5e">val</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="structPointerValue.html#ac72ecc0a42c0e8ddfd4db13165c941d1">   48</a></span>&#160;    uint8_t* <a class="code" href="structPointerValue.html#ac72ecc0a42c0e8ddfd4db13165c941d1">ptr</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  };</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="structPointerValue.html#ada10160cb0576614075d9383c9e95641">   52</a></span>&#160;  T <a class="code" href="structPointerValue.html#ada10160cb0576614075d9383c9e95641">GetPointer</a>() {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>T<span class="keyword">&gt;</span>(val &amp; <a class="code" href="tuple-splitter-test_8cc.html#ab25c09878038a2fef98bc8e0a21f440c">POINTER_LOWER_BITS_MASK</a>);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  }</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="structPointerValue.html#a781c7116ab533ca898cdaa5284cad47c">   56</a></span>&#160;  uint16_t <a class="code" href="structPointerValue.html#a781c7116ab533ca898cdaa5284cad47c">GetValue</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(val &gt;&gt; <a class="code" href="tuple-splitter-test_8cc.html#a9800b136de5c37bf3cc5d0332108a611">USED_BITS</a>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="structPointerValue.html#afd5af68391123aff694321d7dfbcb51b">   61</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structPointerValue.html#afd5af68391123aff694321d7dfbcb51b">Get</a>(T&amp; t, uint16_t&amp; v) {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    t = <span class="keyword">reinterpret_cast&lt;</span>T<span class="keyword">&gt;</span>(val &amp; <a class="code" href="tuple-splitter-test_8cc.html#ab25c09878038a2fef98bc8e0a21f440c">POINTER_LOWER_BITS_MASK</a>);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    v = <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(val &gt;&gt; <a class="code" href="tuple-splitter-test_8cc.html#a9800b136de5c37bf3cc5d0332108a611">USED_BITS</a>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  }</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="structPointerValue.html#a736aab50c91e2f3cc5ab0a8825351ac5">   66</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structPointerValue.html#a736aab50c91e2f3cc5ab0a8825351ac5">UpdatePointer</a>(<span class="keywordtype">void</span>* p) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    val = val &gt;&gt; <a class="code" href="tuple-splitter-test_8cc.html#a9800b136de5c37bf3cc5d0332108a611">USED_BITS</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    val = val &lt;&lt; <a class="code" href="tuple-splitter-test_8cc.html#a9800b136de5c37bf3cc5d0332108a611">USED_BITS</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    val = val | <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classuint64__t.html">uint64_t</a><span class="keyword">&gt;</span>(p);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="structPointerValue.html#a049bd7f65d9b607481333968aea02e1a">   72</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structPointerValue.html#a049bd7f65d9b607481333968aea02e1a">UpdateValue</a>(uint16_t v) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    val = val &lt;&lt; <a class="code" href="tuple-splitter-test_8cc.html#aaa2ecf3a06bda015126b4e8f836e7558">UNUSED_BITS</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    val = val &gt;&gt; <a class="code" href="tuple-splitter-test_8cc.html#aaa2ecf3a06bda015126b4e8f836e7558">UNUSED_BITS</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    val = val | (<span class="keyword">static_cast&lt;</span><a class="code" href="classuint64__t.html">uint64_t</a><span class="keyword">&gt;</span>(v) &lt;&lt; <a class="code" href="tuple-splitter-test_8cc.html#a9800b136de5c37bf3cc5d0332108a611">USED_BITS</a>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="structPointerValue.html#ab7fb65f76199b05eec6de7804f5b8e62">   78</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structPointerValue.html#ab7fb65f76199b05eec6de7804f5b8e62">Update</a>(<span class="keywordtype">void</span>* p, int16_t v) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    val = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classuint64__t.html">uint64_t</a><span class="keyword">&gt;</span>(p);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    val = val | (<span class="keyword">static_cast&lt;</span><a class="code" href="classuint64__t.html">uint64_t</a><span class="keyword">&gt;</span>(v) &lt;&lt; <a class="code" href="tuple-splitter-test_8cc.html#a9800b136de5c37bf3cc5d0332108a611">USED_BITS</a>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;};</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="tuple-splitter-test_8cc.html#acf16f783436bbd4e4a6ba08807706e2b">   85</a></span>&#160;T <a class="code" href="tuple-splitter-test_8cc.html#acf16f783436bbd4e4a6ba08807706e2b">NextPowerOfTwo</a>(T k) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  k--;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; sizeof(T) * CHAR_BIT; i &lt;&lt;=1) k = k | k &gt;&gt; i;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">return</span> k+1;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;}</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="classDataPartitioner.html">   91</a></span>&#160;<span class="keyword">class </span><a class="code" href="classDataPartitioner.html">DataPartitioner</a> {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a25adcaed76d60cd0ea855baa5a31dfc5">   93</a></span>&#160;  <a class="code" href="classDataPartitioner.html#a25adcaed76d60cd0ea855baa5a31dfc5">DataPartitioner</a>(<a class="code" href="classimpala_1_1MemPool.html">MemPool</a>* <a class="code" href="expr-benchmark_8cc.html#a3a5de7bd423fbc0afc4cf935c166ca6b">pool</a>, <a class="code" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a>* profile, <span class="keywordtype">int</span> size, <span class="keywordtype">int</span> hash_offset) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    pool_ = <a class="code" href="expr-benchmark_8cc.html#a3a5de7bd423fbc0afc4cf935c166ca6b">pool</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    profile_ = profile;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    size_ = size;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    hash_offset_ = hash_offset;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    bytes_allocated_ = <a class="code" href="runtime-profile_8h.html#aac035c52016117af399543521f069c51">ADD_COUNTER</a>(profile, <span class="stringliteral">&quot;BytesAllocated&quot;</span>, TUnit::BYTES);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    bytes_copied_ = <a class="code" href="runtime-profile_8h.html#aac035c52016117af399543521f069c51">ADD_COUNTER</a>(profile, <span class="stringliteral">&quot;BytesCopied&quot;</span>, TUnit::BYTES);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    add_time_ = <a class="code" href="runtime-profile_8h.html#aac035c52016117af399543521f069c51">ADD_COUNTER</a>(profile, <span class="stringliteral">&quot;AddTime&quot;</span>, TUnit::CPU_TICKS);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    split_time_ = <a class="code" href="runtime-profile_8h.html#aac035c52016117af399543521f069c51">ADD_COUNTER</a>(profile, <span class="stringliteral">&quot;SplitTime&quot;</span>, TUnit::CPU_TICKS);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    splits_ = <a class="code" href="runtime-profile_8h.html#aac035c52016117af399543521f069c51">ADD_COUNTER</a>(profile, <span class="stringliteral">&quot;Splits&quot;</span>, TUnit::UNIT);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// Max of tuple size and cache line</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordtype">int</span> min_size_per_partition = max(size, 64);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    partitions_per_level_ = <a class="code" href="tuple-splitter-test_8cc.html#acf16f783436bbd4e4a6ba08807706e2b">NextPowerOfTwo</a>(L1_size / min_size_per_partition) &gt;&gt; 1;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    tuples_per_partition_ = L1_size / size;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    printf(<span class="stringliteral">&quot;Tuple Size: %d\n&quot;</span>, size_);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    printf(<span class="stringliteral">&quot;Partitions: %d  Per Partition: %d\n&quot;</span>, partitions_per_level_, tuples_per_partition_);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    partition_idx_mask_ = partitions_per_level_ - 1;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    build_partitions_.resize(partitions_per_level_);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    child_partitions_.resize(partitions_per_level_);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; partitions_per_level_; ++i) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      build_partitions_[i].level = 0;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    partitions_at_level_.resize(6);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    partitions_at_level_[0] = partitions_per_level_;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    partitions_at_level_[1] = partitions_per_level_;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    partitions_at_level_[2] = partitions_per_level_;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    partitions_at_level_[3] = partitions_per_level_;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    partitions_at_level_[4] = partitions_per_level_;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    partitions_at_level_[5] = partitions_per_level_;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    split_counts_.resize(partitions_per_level_);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    outputs_.resize(partitions_per_level_);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; outputs_.size(); ++i) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      outputs_[i].Update(NULL, tuples_per_partition_);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordtype">void</span> AddData(<span class="keywordtype">int</span> n, uint8_t* data);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a0cb0e9f7fbc91a9f71d34c3cf2376c23">  139</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classDataPartitioner.html#a0cb0e9f7fbc91a9f71d34c3cf2376c23">size_per_block</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">return</span> tuples_per_partition_;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="structDataPartitioner_1_1Partition.html">  143</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structDataPartitioner_1_1Partition.html">Partition</a> {</div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="structDataPartitioner_1_1Partition.html#ac5c4a3033ea4ff8c4f09de9649617fa7">  144</a></span>&#160;    vector&lt;uint8_t*&gt; <a class="code" href="structDataPartitioner_1_1Partition.html#ac5c4a3033ea4ff8c4f09de9649617fa7">blocks</a>;</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="structDataPartitioner_1_1Partition.html#a48929dbb61071c3ee1bfd85613a17b65">  145</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDataPartitioner_1_1Partition.html#a48929dbb61071c3ee1bfd85613a17b65">num_last_block</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="structDataPartitioner_1_1Partition.html#a2c92714fe05b091d67ec5e4e16a00d38">  147</a></span>&#160;    <a class="code" href="structDataPartitioner_1_1Partition.html#a2c92714fe05b091d67ec5e4e16a00d38">Partition</a>() {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      num_last_block = 0;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="structDataPartitioner_1_1Partition.html#a970855d6a621fe0539d71bcc6a8c0431">  151</a></span>&#160;    <a class="code" href="structDataPartitioner_1_1Partition.html#a970855d6a621fe0539d71bcc6a8c0431">Partition</a>(<span class="keyword">const</span> vector&lt;uint8_t*&gt;&amp; blocks, <span class="keywordtype">int</span> num) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      this-&gt;blocks = blocks;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      this-&gt;num_last_block = num;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  };</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a6798fe0ab61d09b43e72338e734b2f34">  157</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classDataPartitioner.html#a6798fe0ab61d09b43e72338e734b2f34">NumTuples</a>(<span class="keyword">const</span> <a class="code" href="structDataPartitioner_1_1Partition.html">Partition</a>&amp; partition)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">return</span> partition.<a class="code" href="structDataPartitioner_1_1Partition.html#a48929dbb61071c3ee1bfd85613a17b65">num_last_block</a> + (partition.<a class="code" href="structDataPartitioner_1_1Partition.html#ac5c4a3033ea4ff8c4f09de9649617fa7">blocks</a>.size() - 1) * tuples_per_partition_;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#af0a04b9e5a82b034f1369b3409dd3990">  161</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classDataPartitioner.html#af0a04b9e5a82b034f1369b3409dd3990">NumTuples</a>(<span class="keyword">const</span> <a class="code" href="structDataPartitioner_1_1Partition.html">Partition</a>&amp; partition, <span class="keywordtype">int</span> block_idx)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (block_idx == partition.<a class="code" href="structDataPartitioner_1_1Partition.html#ac5c4a3033ea4ff8c4f09de9649617fa7">blocks</a>.size() - 1) <span class="keywordflow">return</span> partition.<a class="code" href="structDataPartitioner_1_1Partition.html#a48929dbb61071c3ee1bfd85613a17b65">num_last_block</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">return</span> tuples_per_partition_;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a94764ca10b57ab23cc503f5056287090">  166</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classDataPartitioner.html#a94764ca10b57ab23cc503f5056287090">Finalize</a>(vector&lt;Partition&gt;* results) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="runtime-profile_8h.html#aaa9a2971c6368e3ddd3f5140a0295eb7">SCOPED_TIMER</a>(split_time_);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; build_partitions_.size(); ++i) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordflow">if</span> (build_partitions_[i].blocks.size() &gt; 0) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="structDataPartitioner_1_1BuildPartition.html">BuildPartition</a>&amp; build_partition = build_partitions_[i];</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        build_partition.<a class="code" href="structDataPartitioner_1_1BuildPartition.html#a9868e2e8a9eb776ef8873ba4e0a04863">num_last_block</a> = NumLastBlock(i);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; build_partitions_.size(); ++i) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">if</span> (build_partitions_[i].blocks.size() &gt; 0) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <a class="code" href="structDataPartitioner_1_1BuildPartition.html">BuildPartition</a>&amp; build_partition = build_partitions_[i];</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">if</span> (TotalTuples(build_partition) &gt; tuples_per_partition_) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;          <span class="keywordflow">if</span> (Split(build_partition)) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;          }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        results-&gt;push_back(ToOutputPartition(build_partition));</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#abc481f4b5479e97d69fe15bc3526fbb4">  193</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> L1_size = 24 * 1024;</div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a81993c49ab165fcdd27ac7168c30b7b8">  194</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> MIN_SPLITS = 4;</div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a34d85663b826adff12148ef31aa1c472">  195</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> HASH_BIT_SHIFT = 4;</div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a1dfa154e771e0a12985e3230cd277bab">  196</a></span>&#160;  <a class="code" href="classimpala_1_1MemPool.html">MemPool</a>* <a class="code" href="classDataPartitioner.html#a1dfa154e771e0a12985e3230cd277bab">pool_</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a17c9b0b29425d92e6af42a13d2bad242">  197</a></span>&#160;  <a class="code" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a>* <a class="code" href="classDataPartitioner.html#a17c9b0b29425d92e6af42a13d2bad242">profile_</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#ae681c96ea117688deadf04d5bb59d2e8">  198</a></span>&#160;  <a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* <a class="code" href="classDataPartitioner.html#ae681c96ea117688deadf04d5bb59d2e8">bytes_allocated_</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#ad5618d3fa9881cbefaca3ef2a336c877">  199</a></span>&#160;  <a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* <a class="code" href="classDataPartitioner.html#ad5618d3fa9881cbefaca3ef2a336c877">bytes_copied_</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a6a59ab30aa3d404317ab3b90db68b4df">  200</a></span>&#160;  <a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* <a class="code" href="classDataPartitioner.html#a6a59ab30aa3d404317ab3b90db68b4df">split_time_</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a22005e4281d210fb8b7b7848b85e2d3c">  201</a></span>&#160;  <a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* <a class="code" href="classDataPartitioner.html#a22005e4281d210fb8b7b7848b85e2d3c">add_time_</a>;</div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a91ed06dd42a1ebe29d5d3602250c4200">  202</a></span>&#160;  <a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>* <a class="code" href="classDataPartitioner.html#a91ed06dd42a1ebe29d5d3602250c4200">splits_</a>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#aeabadc17ab471169c17b2e20f8fca0c7">  204</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classDataPartitioner.html#aeabadc17ab471169c17b2e20f8fca0c7">size_</a>;</div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#ac898e570604af4c49dc089ef4b5460d1">  205</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classDataPartitioner.html#ac898e570604af4c49dc089ef4b5460d1">hash_offset_</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#ab1445d50f116cc15e639e3e07d2d7143">  206</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classDataPartitioner.html#ab1445d50f116cc15e639e3e07d2d7143">tuples_per_partition_</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a8af1c88e14b0204faab44f507a1e654b">  207</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classDataPartitioner.html#a8af1c88e14b0204faab44f507a1e654b">partitions_per_level_</a>;</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a9c70cb7248c388d1d4ff187d54c284f1">  208</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classDataPartitioner.html#a9c70cb7248c388d1d4ff187d54c284f1">partition_idx_mask_</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#ad2d43b8963339b2a683c79f46aff3cd1">  209</a></span>&#160;  vector&lt;PointerValue&gt; <a class="code" href="classDataPartitioner.html#ad2d43b8963339b2a683c79f46aff3cd1">outputs_</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a6cdb225fa89efc92f65accc7edce8d18">  210</a></span>&#160;  vector&lt;int32_t&gt; <a class="code" href="classDataPartitioner.html#a6cdb225fa89efc92f65accc7edce8d18">split_counts_</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a4a2caf449ea005a0c5cd9c077e00e94d">  211</a></span>&#160;  vector&lt;int&gt; <a class="code" href="classDataPartitioner.html#a4a2caf449ea005a0c5cd9c077e00e94d">partitions_at_level_</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="structDataPartitioner_1_1BuildPartition.html">  213</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structDataPartitioner_1_1BuildPartition.html">BuildPartition</a> {</div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="structDataPartitioner_1_1BuildPartition.html#acee65d8d35d91b9dfc2c0b5b83214a11">  214</a></span>&#160;    vector&lt;uint8_t*&gt; <a class="code" href="structDataPartitioner_1_1BuildPartition.html#acee65d8d35d91b9dfc2c0b5b83214a11">blocks</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="structDataPartitioner_1_1BuildPartition.html#a9868e2e8a9eb776ef8873ba4e0a04863">  215</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDataPartitioner_1_1BuildPartition.html#a9868e2e8a9eb776ef8873ba4e0a04863">num_last_block</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="structDataPartitioner_1_1BuildPartition.html#ab9e6a273be53cf7d99435c49e8f87268">  216</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDataPartitioner_1_1BuildPartition.html#ab9e6a273be53cf7d99435c49e8f87268">level</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  };</div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a986eb578fc75bb0826a6cc900becb796">  218</a></span>&#160;  vector&lt;BuildPartition&gt; <a class="code" href="classDataPartitioner.html#a986eb578fc75bb0826a6cc900becb796">build_partitions_</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a81c75d473a7920f2ce136373f2e0e099">  219</a></span>&#160;  vector&lt;BuildPartition&gt; <a class="code" href="classDataPartitioner.html#a81c75d473a7920f2ce136373f2e0e099">child_partitions_</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a677aa7966a2dd80de8e349580c30fbf9">  221</a></span>&#160;  uint8_t* <a class="code" href="classDataPartitioner.html#a677aa7966a2dd80de8e349580c30fbf9">Allocate</a>(<a class="code" href="structDataPartitioner_1_1BuildPartition.html">BuildPartition</a>* partition, <span class="keywordtype">int</span> p, <span class="keywordtype">int</span> size = 0) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span> (size == 0) size = tuples_per_partition_ * size_;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">else</span> size = size * size_;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="runtime-profile_8h.html#a0842f330c18b3e4e53e13655add0310a">COUNTER_ADD</a>(bytes_allocated_, size);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    uint8_t* out_mem = pool_-&gt;Allocate(size);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    partition-&gt;<a class="code" href="structDataPartitioner_1_1BuildPartition.html#acee65d8d35d91b9dfc2c0b5b83214a11">blocks</a>.push_back(out_mem);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    outputs_[p].Update(out_mem, 0);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">return</span> out_mem;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#ae8b7644a037b03130960c5d407a3474b">  231</a></span>&#160;  <a class="code" href="structDataPartitioner_1_1Partition.html">Partition</a> <a class="code" href="classDataPartitioner.html#ae8b7644a037b03130960c5d407a3474b">ToOutputPartition</a>(<span class="keyword">const</span> <a class="code" href="structDataPartitioner_1_1BuildPartition.html">BuildPartition</a>&amp; build)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structDataPartitioner_1_1Partition.html">Partition</a>(build.<a class="code" href="structDataPartitioner_1_1BuildPartition.html#acee65d8d35d91b9dfc2c0b5b83214a11">blocks</a>, build.<a class="code" href="structDataPartitioner_1_1BuildPartition.html#a9868e2e8a9eb776ef8873ba4e0a04863">num_last_block</a>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a3101db138dd6b89e6ba23c6ba06ab119">  235</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classDataPartitioner.html#a3101db138dd6b89e6ba23c6ba06ab119">TotalTuples</a>(<span class="keyword">const</span> <a class="code" href="structDataPartitioner_1_1BuildPartition.html">BuildPartition</a>&amp; partition)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> partition.<a class="code" href="structDataPartitioner_1_1BuildPartition.html#a9868e2e8a9eb776ef8873ba4e0a04863">num_last_block</a> + (partition.<a class="code" href="structDataPartitioner_1_1BuildPartition.html#acee65d8d35d91b9dfc2c0b5b83214a11">blocks</a>.size() - 1) * tuples_per_partition_;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#af6756355c7465b4c44801fe0709f8ed0">  239</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classDataPartitioner.html#af6756355c7465b4c44801fe0709f8ed0">NumLastBlock</a>(<span class="keywordtype">int</span> p)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">return</span> outputs_[p].GetValue();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a68a9874200de7c8afaba1c308bb5ad9c">  243</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classDataPartitioner.html#a68a9874200de7c8afaba1c308bb5ad9c">NumTuples</a>(<span class="keyword">const</span> <a class="code" href="structDataPartitioner_1_1BuildPartition.html">BuildPartition</a>&amp; partition, <span class="keywordtype">int</span> block_idx)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">if</span> (block_idx == partition.<a class="code" href="structDataPartitioner_1_1BuildPartition.html#acee65d8d35d91b9dfc2c0b5b83214a11">blocks</a>.size() - 1) <span class="keywordflow">return</span> partition.<a class="code" href="structDataPartitioner_1_1BuildPartition.html#a9868e2e8a9eb776ef8873ba4e0a04863">num_last_block</a>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">return</span> tuples_per_partition_;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordtype">bool</span> Split(<span class="keyword">const</span> BuildPartition&amp; build_partition);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;};</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#a244438c9153947d955938e23dd015765">  251</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDataPartitioner.html#a244438c9153947d955938e23dd015765">DataPartitioner::AddData</a>(<span class="keywordtype">int</span> n, uint8_t* data) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <a class="code" href="runtime-profile_8h.html#aaa9a2971c6368e3ddd3f5140a0295eb7">SCOPED_TIMER</a>(add_time_);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <a class="code" href="runtime-profile_8h.html#a0842f330c18b3e4e53e13655add0310a">COUNTER_ADD</a>(bytes_copied_, n * size_);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; ++i) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    int32_t <a class="code" href="namespaceimpala.html#a50b59c9628eedf49aa82643ce601967d">hash</a> = *<span class="keyword">reinterpret_cast&lt;</span>int32_t*<span class="keyword">&gt;</span>(data + hash_offset_);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    hash &amp;= partition_idx_mask_;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    uint8_t* out_mem = outputs_[<a class="code" href="namespaceimpala.html#a50b59c9628eedf49aa82643ce601967d">hash</a>].GetPointer&lt;uint8_t*&gt;();</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    uint16_t size = outputs_[<a class="code" href="namespaceimpala.html#a50b59c9628eedf49aa82643ce601967d">hash</a>].GetValue();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (size == tuples_per_partition_) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      out_mem = Allocate(&amp;build_partitions_[hash], hash);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      size = 0;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="tuple-splitter-test_8cc.html#a0f57ed7cd41803aff8318544fa1ff37f">Memcpy16</a>(out_mem, data);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    data += size_;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    outputs_[<a class="code" href="namespaceimpala.html#a50b59c9628eedf49aa82643ce601967d">hash</a>].Update(out_mem + size_, size + 1);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classDataPartitioner.html#aa51b3ce98cfbfdc09987070fa7c5feee">  270</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDataPartitioner.html#aa51b3ce98cfbfdc09987070fa7c5feee">DataPartitioner::Split</a>(<span class="keyword">const</span> <a class="code" href="structDataPartitioner_1_1BuildPartition.html">BuildPartition</a>&amp; build_partition) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <a class="code" href="runtime-profile_8h.html#a0842f330c18b3e4e53e13655add0310a">COUNTER_ADD</a>(splits_, 1);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> num_blocks = build_partition.<a class="code" href="structDataPartitioner_1_1BuildPartition.html#acee65d8d35d91b9dfc2c0b5b83214a11">blocks</a>.size();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> next_level = build_partition.<a class="code" href="structDataPartitioner_1_1BuildPartition.html#ab9e6a273be53cf7d99435c49e8f87268">level</a> + 1;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordflow">if</span> (next_level &gt;= 8) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    CHECK(<span class="keyword">false</span>) &lt;&lt; <span class="stringliteral">&quot;TOO MANY LEVELS: &quot;</span> &lt;&lt; next_level;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordtype">int</span> partitions = partitions_at_level_[next_level];</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordtype">int</span> partition_mask = partitions - 1;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordtype">int</span> new_splits = 0;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  memset(&amp;split_counts_[0], 0, <span class="keyword">sizeof</span>(split_counts_[0]) * split_counts_.size());</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_blocks; ++i) {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="partitioning-throughput-test_8cc.html#ae4b10d42a9e46f75d00a40862197374e">tuples</a> = NumTuples(build_partition, i);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    uint8_t* hash_slot = build_partition.<a class="code" href="structDataPartitioner_1_1BuildPartition.html#acee65d8d35d91b9dfc2c0b5b83214a11">blocks</a>[i] + hash_offset_;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="partitioning-throughput-test_8cc.html#ae4b10d42a9e46f75d00a40862197374e">tuples</a>; ++j) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      int32_t <a class="code" href="namespaceimpala.html#a50b59c9628eedf49aa82643ce601967d">hash</a> = *<span class="keyword">reinterpret_cast&lt;</span>int32_t*<span class="keyword">&gt;</span>(hash_slot);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      hash &gt;&gt;= HASH_BIT_SHIFT;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      *<span class="keyword">reinterpret_cast&lt;</span>int32_t*<span class="keyword">&gt;</span>(hash_slot) = hash;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      hash &amp;= partition_mask;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      new_splits += !split_counts_[<a class="code" href="namespaceimpala.html#a50b59c9628eedf49aa82643ce601967d">hash</a>];</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      split_counts_[<a class="code" href="namespaceimpala.html#a50b59c9628eedf49aa82643ce601967d">hash</a>]++;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      hash_slot += size_;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordflow">if</span> (new_splits &lt; MIN_SPLITS) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; partitions; ++i) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span> (split_counts_[i] &gt; 0) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <a class="code" href="runtime-profile_8h.html#a0842f330c18b3e4e53e13655add0310a">COUNTER_ADD</a>(bytes_allocated_, split_counts_[i] * size_);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      uint8_t* mem = pool_-&gt;Allocate(split_counts_[i] * size_);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      child_partitions_[i].blocks.clear();</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      child_partitions_[i].level = next_level;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      child_partitions_[i].blocks.push_back(mem);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      outputs_[i].ptr = mem;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="runtime-profile_8h.html#a0842f330c18b3e4e53e13655add0310a">COUNTER_ADD</a>(bytes_copied_, TotalTuples(build_partition) * size_);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_blocks; ++i) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    uint8_t* data = build_partition.<a class="code" href="structDataPartitioner_1_1BuildPartition.html#acee65d8d35d91b9dfc2c0b5b83214a11">blocks</a>[i];</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="partitioning-throughput-test_8cc.html#ae4b10d42a9e46f75d00a40862197374e">tuples</a> = NumTuples(build_partition, i);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> offset1 = 0;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> offset2 = offset1 + size_;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> offset3 = offset2 + size_;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> offset4 = offset3 + size_;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">while</span> (tuples &gt;= 4) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      int32_t hash1 = *<span class="keyword">reinterpret_cast&lt;</span>int32_t*<span class="keyword">&gt;</span>(data + hash_offset_ + offset1) &amp; partition_mask;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      int32_t hash2 = *<span class="keyword">reinterpret_cast&lt;</span>int32_t*<span class="keyword">&gt;</span>(data + hash_offset_ + offset2) &amp; partition_mask;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      int32_t hash3 = *<span class="keyword">reinterpret_cast&lt;</span>int32_t*<span class="keyword">&gt;</span>(data + hash_offset_ + offset3) &amp; partition_mask;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      int32_t hash4 = *<span class="keyword">reinterpret_cast&lt;</span>int32_t*<span class="keyword">&gt;</span>(data + hash_offset_ + offset4) &amp; partition_mask;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      uint8_t** out_mem1 = &amp;outputs_[hash1].ptr;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      uint8_t** out_mem2 = &amp;outputs_[hash2].ptr;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      uint8_t** out_mem3 = &amp;outputs_[hash3].ptr;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      uint8_t** out_mem4 = &amp;outputs_[hash4].ptr;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <a class="code" href="tuple-splitter-test_8cc.html#a0f57ed7cd41803aff8318544fa1ff37f">Memcpy16</a>(*out_mem1, data + offset1);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      *out_mem1 += size_;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <a class="code" href="tuple-splitter-test_8cc.html#a0f57ed7cd41803aff8318544fa1ff37f">Memcpy16</a>(*out_mem2, data + offset2);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      *out_mem2 += size_;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <a class="code" href="tuple-splitter-test_8cc.html#a0f57ed7cd41803aff8318544fa1ff37f">Memcpy16</a>(*out_mem3, data + offset3);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      *out_mem3 += size_;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <a class="code" href="tuple-splitter-test_8cc.html#a0f57ed7cd41803aff8318544fa1ff37f">Memcpy16</a>(*out_mem4, data + offset4);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      *out_mem4 += size_;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      data += size_ * 4;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      tuples -= 4;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="partitioning-throughput-test_8cc.html#ae4b10d42a9e46f75d00a40862197374e">tuples</a>; ++j) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      int32_t <a class="code" href="namespaceimpala.html#a50b59c9628eedf49aa82643ce601967d">hash</a> = *<span class="keyword">reinterpret_cast&lt;</span>int32_t*<span class="keyword">&gt;</span>(data + hash_offset_) &amp; partition_mask;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      uint8_t* out_mem = outputs_[<a class="code" href="namespaceimpala.html#a50b59c9628eedf49aa82643ce601967d">hash</a>].ptr;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <a class="code" href="tuple-splitter-test_8cc.html#a0f57ed7cd41803aff8318544fa1ff37f">Memcpy16</a>(out_mem, data);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      data += size_;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      outputs_[<a class="code" href="namespaceimpala.html#a50b59c9628eedf49aa82643ce601967d">hash</a>].ptr = out_mem + size_;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; partitions; ++i) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">if</span> (split_counts_[i] &gt; 0) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <a class="code" href="structDataPartitioner_1_1BuildPartition.html">BuildPartition</a>&amp; child = child_partitions_[i];</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      child.<a class="code" href="structDataPartitioner_1_1BuildPartition.html#a9868e2e8a9eb776ef8873ba4e0a04863">num_last_block</a> = split_counts_[i];</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      build_partitions_.push_back(child);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="tuple-splitter-test_8cc.html#a3c04138a5bfe5d72780bb7e82a18e627">  365</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="tuple-splitter-test_8cc.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  google::InitGoogleLogging(argv[0]);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;Starting Test&quot;</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  vector&lt;DataProvider::ColDesc&gt; cols;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// Hash Slot</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  cols.push_back(DataProvider::ColDesc::Create&lt;int32_t&gt;(0, 0));</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// Grouping Column</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  cols.push_back(DataProvider::ColDesc::Create&lt;int64_t&gt;(0, 500000));</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">// Aggregate Column</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  cols.push_back(DataProvider::ColDesc::Create&lt;float&gt;(-1, 1));</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <a class="code" href="classimpala_1_1MemTracker.html">MemTracker</a> <a class="code" href="expr-benchmark_8cc.html#ad327327fa716227ff7993880cbc4698f">tracker</a>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <a class="code" href="classimpala_1_1MemPool.html">MemPool</a> <a class="code" href="expr-benchmark_8cc.html#a3a5de7bd423fbc0afc4cf935c166ca6b">pool</a>(&amp;tracker);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <a class="code" href="classimpala_1_1ObjectPool.html">ObjectPool</a> <a class="code" href="namespaceimpala.html#a6bf80cb1d633d79570ccf617684439b1">obj_pool</a>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <a class="code" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a> profile(&amp;obj_pool, <span class="stringliteral">&quot;PartitioningTest&quot;</span>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <a class="code" href="classDataProvider.html">DataProvider</a> provider(&amp;pool, &amp;profile);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  provider.<a class="code" href="classDataProvider.html#a01b7baf702c72a59e431649538366fc3">Reset</a>(50*1024*1024, 1024, cols);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">//provider.Reset(100*1024, 1024, cols);</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">//provider.Reset(100, 1024, cols);</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <a class="code" href="classDataPartitioner.html">DataPartitioner</a> partitioner(&amp;pool, &amp;profile, provider.<a class="code" href="classDataProvider.html#abdb5392154b16078076a0fb2bc38ab9a">row_size</a>(), 0);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;Begin processing: &quot;</span> &lt;&lt; provider.<a class="code" href="classDataProvider.html#a47c87ab57f4160812f15a7832f0d47d5">total_rows</a>() &lt;&lt; endl;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordtype">int</span> rows;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordtype">void</span>* data;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordflow">while</span> ( (data = provider.<a class="code" href="classDataProvider.html#a2a15188d40432abe70f98229901ebf5c">NextBatch</a>(&amp;rows)) != NULL) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    uint8_t* next_row = <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(data);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="comment">// Compute hash values and store them</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; rows; ++i) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      int32_t* <a class="code" href="namespaceimpala.html#a50b59c9628eedf49aa82643ce601967d">hash</a> = <span class="keyword">reinterpret_cast&lt;</span>int32_t*<span class="keyword">&gt;</span>(next_row);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      int64_t* col = <span class="keyword">reinterpret_cast&lt;</span>int64_t*<span class="keyword">&gt;</span>(next_row + 4);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      *hash = *col;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      next_row += provider.<a class="code" href="classDataProvider.html#abdb5392154b16078076a0fb2bc38ab9a">row_size</a>();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    partitioner.AddData(rows, reinterpret_cast&lt;uint8_t*&gt;(data));</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  cout &lt;&lt; endl;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;Partitioning&quot;</span>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  vector&lt;DataPartitioner::Partition&gt; partitions;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordtype">bool</span> fully_split = partitioner.Finalize(&amp;partitions);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;After Partitioning&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordtype">int</span> result_tuples = 0;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordtype">int</span> blocks = 0;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordtype">int</span> largest_partition = 0;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="comment">// Validate results</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; partitions.size(); ++i) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <a class="code" href="structDataPartitioner_1_1Partition.html">DataPartitioner::Partition</a>&amp; partition = partitions[i];</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="partitioning-throughput-test_8cc.html#ae4b10d42a9e46f75d00a40862197374e">tuples</a> = partitioner.NumTuples(partition);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">if</span> (largest_partition &lt; tuples) largest_partition = <a class="code" href="partitioning-throughput-test_8cc.html#ae4b10d42a9e46f75d00a40862197374e">tuples</a>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    result_tuples += <a class="code" href="partitioning-throughput-test_8cc.html#ae4b10d42a9e46f75d00a40862197374e">tuples</a>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    blocks += partition.<a class="code" href="structDataPartitioner_1_1Partition.html#ac5c4a3033ea4ff8c4f09de9649617fa7">blocks</a>.size();</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="preprocessor">#if PRINT_RESULT</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; partition.<a class="code" href="structDataPartitioner_1_1Partition.html#ac5c4a3033ea4ff8c4f09de9649617fa7">blocks</a>.size(); ++j) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <span class="keywordtype">int</span> rows = partitioner.NumTuples(partition, j);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      provider.<a class="code" href="classDataProvider.html#a707d5e31ec02719396f4b1cb2b9ac9fc">Print</a>(&amp;cout, partition.<a class="code" href="structDataPartitioner_1_1Partition.html#ac5c4a3033ea4ff8c4f09de9649617fa7">blocks</a>[j], rows);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      cout &lt;&lt; <span class="stringliteral">&quot;------------------------------&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="preprocessor"></span>  }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  cout &lt;&lt; endl;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;Fully Split: &quot;</span> &lt;&lt; (fully_split ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>) &lt;&lt; endl;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;Partitioned tuples: &quot;</span> &lt;&lt; result_tuples &lt;&lt; endl;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;Num Blocks: &quot;</span> &lt;&lt; blocks &lt;&lt; endl;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;Num Partitions: &quot;</span> &lt;&lt; partitions.size() &lt;&lt; endl;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;Largest Partition: &quot;</span> &lt;&lt; largest_partition &lt;&lt; endl;;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  cout &lt;&lt; endl;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  profile.<a class="code" href="classimpala_1_1RuntimeProfile.html#a3199b85de1a8278a4a94dc7259aea68d">PrettyPrint</a>(&amp;cout);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;Done.&quot;</span>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div>
<div class="ttc" id="structPointerValue_html_a736aab50c91e2f3cc5ab0a8825351ac5"><div class="ttname"><a href="structPointerValue.html#a736aab50c91e2f3cc5ab0a8825351ac5">PointerValue::UpdatePointer</a></div><div class="ttdeci">void UpdatePointer(void *p)</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00066">tuple-splitter-test.cc:66</a></div></div>
<div class="ttc" id="classDataProvider_html_a47c87ab57f4160812f15a7832f0d47d5"><div class="ttname"><a href="classDataProvider.html#a47c87ab57f4160812f15a7832f0d47d5">DataProvider::total_rows</a></div><div class="ttdeci">int total_rows() const </div><div class="ttdoc">The total number of rows that will be generated. </div><div class="ttdef"><b>Definition:</b> <a href="data-provider_8h_source.html#l00110">data-provider.h:110</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a22005e4281d210fb8b7b7848b85e2d3c"><div class="ttname"><a href="classDataPartitioner.html#a22005e4281d210fb8b7b7848b85e2d3c">DataPartitioner::add_time_</a></div><div class="ttdeci">RuntimeProfile::Counter * add_time_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00201">tuple-splitter-test.cc:201</a></div></div>
<div class="ttc" id="classDataProvider_html_a01b7baf702c72a59e431649538366fc3"><div class="ttname"><a href="classDataProvider.html#a01b7baf702c72a59e431649538366fc3">DataProvider::Reset</a></div><div class="ttdeci">void Reset(int num_rows, int batch_size, const std::vector&lt; ColDesc &gt; &amp;columns)</div><div class="ttdef"><b>Definition:</b> <a href="data-provider_8cc_source.html#l00026">data-provider.cc:26</a></div></div>
<div class="ttc" id="runtime-profile_8h_html"><div class="ttname"><a href="runtime-profile_8h.html">runtime-profile.h</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a68a9874200de7c8afaba1c308bb5ad9c"><div class="ttname"><a href="classDataPartitioner.html#a68a9874200de7c8afaba1c308bb5ad9c">DataPartitioner::NumTuples</a></div><div class="ttdeci">int NumTuples(const BuildPartition &amp;partition, int block_idx) const </div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00243">tuple-splitter-test.cc:243</a></div></div>
<div class="ttc" id="structPointerValue_html_a1392ba8e160c00b8017f90c0431f2f5e"><div class="ttname"><a href="structPointerValue.html#a1392ba8e160c00b8017f90c0431f2f5e">PointerValue::val</a></div><div class="ttdeci">uint64_t val</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00047">tuple-splitter-test.cc:47</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a81c75d473a7920f2ce136373f2e0e099"><div class="ttname"><a href="classDataPartitioner.html#a81c75d473a7920f2ce136373f2e0e099">DataPartitioner::child_partitions_</a></div><div class="ttdeci">vector&lt; BuildPartition &gt; child_partitions_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00219">tuple-splitter-test.cc:219</a></div></div>
<div class="ttc" id="expr-benchmark_8cc_html_ad327327fa716227ff7993880cbc4698f"><div class="ttname"><a href="expr-benchmark_8cc.html#ad327327fa716227ff7993880cbc4698f">tracker</a></div><div class="ttdeci">MemTracker tracker</div><div class="ttdef"><b>Definition:</b> <a href="expr-benchmark_8cc_source.html#l00090">expr-benchmark.cc:90</a></div></div>
<div class="ttc" id="classDataPartitioner_html_ae681c96ea117688deadf04d5bb59d2e8"><div class="ttname"><a href="classDataPartitioner.html#ae681c96ea117688deadf04d5bb59d2e8">DataPartitioner::bytes_allocated_</a></div><div class="ttdeci">RuntimeProfile::Counter * bytes_allocated_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00198">tuple-splitter-test.cc:198</a></div></div>
<div class="ttc" id="classDataPartitioner_html_af6756355c7465b4c44801fe0709f8ed0"><div class="ttname"><a href="classDataPartitioner.html#af6756355c7465b4c44801fe0709f8ed0">DataPartitioner::NumLastBlock</a></div><div class="ttdeci">int NumLastBlock(int p) const </div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00239">tuple-splitter-test.cc:239</a></div></div>
<div class="ttc" id="partitioning-throughput-test_8cc_html_ae4b10d42a9e46f75d00a40862197374e"><div class="ttname"><a href="partitioning-throughput-test_8cc.html#ae4b10d42a9e46f75d00a40862197374e">tuples</a></div><div class="ttdeci">ProbeTuple tuples[BUFFER_TUPLES]</div><div class="ttdef"><b>Definition:</b> <a href="partitioning-throughput-test_8cc_source.html#l00034">partitioning-throughput-test.cc:34</a></div></div>
<div class="ttc" id="data-provider_8h_html"><div class="ttname"><a href="data-provider_8h.html">data-provider.h</a></div></div>
<div class="ttc" id="structDataPartitioner_1_1Partition_html_ac5c4a3033ea4ff8c4f09de9649617fa7"><div class="ttname"><a href="structDataPartitioner_1_1Partition.html#ac5c4a3033ea4ff8c4f09de9649617fa7">DataPartitioner::Partition::blocks</a></div><div class="ttdeci">vector&lt; uint8_t * &gt; blocks</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00144">tuple-splitter-test.cc:144</a></div></div>
<div class="ttc" id="classDataPartitioner_html_aa51b3ce98cfbfdc09987070fa7c5feee"><div class="ttname"><a href="classDataPartitioner.html#aa51b3ce98cfbfdc09987070fa7c5feee">DataPartitioner::Split</a></div><div class="ttdeci">bool Split(const BuildPartition &amp;build_partition)</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00270">tuple-splitter-test.cc:270</a></div></div>
<div class="ttc" id="mem-tracker_8h_html"><div class="ttname"><a href="mem-tracker_8h.html">mem-tracker.h</a></div></div>
<div class="ttc" id="structPointerValue_html_ab7fb65f76199b05eec6de7804f5b8e62"><div class="ttname"><a href="structPointerValue.html#ab7fb65f76199b05eec6de7804f5b8e62">PointerValue::Update</a></div><div class="ttdeci">void Update(void *p, int16_t v)</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00078">tuple-splitter-test.cc:78</a></div></div>
<div class="ttc" id="namespaceimpala_html_a50b59c9628eedf49aa82643ce601967d"><div class="ttname"><a href="namespaceimpala.html#a50b59c9628eedf49aa82643ce601967d">impala::hash</a></div><div class="ttdeci">const StringSearch UrlParser::hash_search &amp; hash</div><div class="ttdef"><b>Definition:</b> <a href="url-parser_8cc_source.html#l00041">url-parser.cc:41</a></div></div>
<div class="ttc" id="structDataPartitioner_1_1BuildPartition_html_acee65d8d35d91b9dfc2c0b5b83214a11"><div class="ttname"><a href="structDataPartitioner_1_1BuildPartition.html#acee65d8d35d91b9dfc2c0b5b83214a11">DataPartitioner::BuildPartition::blocks</a></div><div class="ttdeci">vector&lt; uint8_t * &gt; blocks</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00214">tuple-splitter-test.cc:214</a></div></div>
<div class="ttc" id="structDataPartitioner_1_1Partition_html_a970855d6a621fe0539d71bcc6a8c0431"><div class="ttname"><a href="structDataPartitioner_1_1Partition.html#a970855d6a621fe0539d71bcc6a8c0431">DataPartitioner::Partition::Partition</a></div><div class="ttdeci">Partition(const vector&lt; uint8_t * &gt; &amp;blocks, int num)</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00151">tuple-splitter-test.cc:151</a></div></div>
<div class="ttc" id="classDataProvider_html_a2a15188d40432abe70f98229901ebf5c"><div class="ttname"><a href="classDataProvider.html#a2a15188d40432abe70f98229901ebf5c">DataProvider::NextBatch</a></div><div class="ttdeci">void * NextBatch(int *rows_returned)</div><div class="ttdef"><b>Definition:</b> <a href="data-provider_8cc_source.html#l00060">data-provider.cc:60</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a0cb0e9f7fbc91a9f71d34c3cf2376c23"><div class="ttname"><a href="classDataPartitioner.html#a0cb0e9f7fbc91a9f71d34c3cf2376c23">DataPartitioner::size_per_block</a></div><div class="ttdeci">int size_per_block() const </div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00139">tuple-splitter-test.cc:139</a></div></div>
<div class="ttc" id="classimpala_1_1ObjectPool_html"><div class="ttname"><a href="classimpala_1_1ObjectPool.html">impala::ObjectPool</a></div><div class="ttdef"><b>Definition:</b> <a href="object-pool_8h_source.html#l00030">object-pool.h:30</a></div></div>
<div class="ttc" id="structPointerValue_html_a049bd7f65d9b607481333968aea02e1a"><div class="ttname"><a href="structPointerValue.html#a049bd7f65d9b607481333968aea02e1a">PointerValue::UpdateValue</a></div><div class="ttdeci">void UpdateValue(uint16_t v)</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00072">tuple-splitter-test.cc:72</a></div></div>
<div class="ttc" id="classDataPartitioner_html_ae8b7644a037b03130960c5d407a3474b"><div class="ttname"><a href="classDataPartitioner.html#ae8b7644a037b03130960c5d407a3474b">DataPartitioner::ToOutputPartition</a></div><div class="ttdeci">Partition ToOutputPartition(const BuildPartition &amp;build) const </div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00231">tuple-splitter-test.cc:231</a></div></div>
<div class="ttc" id="tuple-splitter-test_8cc_html_aaa2ecf3a06bda015126b4e8f836e7558"><div class="ttname"><a href="tuple-splitter-test_8cc.html#aaa2ecf3a06bda015126b4e8f836e7558">UNUSED_BITS</a></div><div class="ttdeci">#define UNUSED_BITS</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00031">tuple-splitter-test.cc:31</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a91ed06dd42a1ebe29d5d3602250c4200"><div class="ttname"><a href="classDataPartitioner.html#a91ed06dd42a1ebe29d5d3602250c4200">DataPartitioner::splits_</a></div><div class="ttdeci">RuntimeProfile::Counter * splits_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00202">tuple-splitter-test.cc:202</a></div></div>
<div class="ttc" id="tuple-splitter-test_8cc_html_acf16f783436bbd4e4a6ba08807706e2b"><div class="ttname"><a href="tuple-splitter-test_8cc.html#acf16f783436bbd4e4a6ba08807706e2b">NextPowerOfTwo</a></div><div class="ttdeci">T NextPowerOfTwo(T k)</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00085">tuple-splitter-test.cc:85</a></div></div>
<div class="ttc" id="structPointerValue_html_ada10160cb0576614075d9383c9e95641"><div class="ttname"><a href="structPointerValue.html#ada10160cb0576614075d9383c9e95641">PointerValue::GetPointer</a></div><div class="ttdeci">T GetPointer()</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00052">tuple-splitter-test.cc:52</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a4a2caf449ea005a0c5cd9c077e00e94d"><div class="ttname"><a href="classDataPartitioner.html#a4a2caf449ea005a0c5cd9c077e00e94d">DataPartitioner::partitions_at_level_</a></div><div class="ttdeci">vector&lt; int &gt; partitions_at_level_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00211">tuple-splitter-test.cc:211</a></div></div>
<div class="ttc" id="classDataPartitioner_html_aeabadc17ab471169c17b2e20f8fca0c7"><div class="ttname"><a href="classDataPartitioner.html#aeabadc17ab471169c17b2e20f8fca0c7">DataPartitioner::size_</a></div><div class="ttdeci">int size_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00204">tuple-splitter-test.cc:204</a></div></div>
<div class="ttc" id="runtime-profile_8h_html_a0842f330c18b3e4e53e13655add0310a"><div class="ttname"><a href="runtime-profile_8h.html#a0842f330c18b3e4e53e13655add0310a">COUNTER_ADD</a></div><div class="ttdeci">#define COUNTER_ADD(c, v)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00055">runtime-profile.h:55</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeProfile_1_1Counter_html"><div class="ttname"><a href="classimpala_1_1RuntimeProfile_1_1Counter.html">impala::RuntimeProfile::Counter</a></div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00085">runtime-profile.h:85</a></div></div>
<div class="ttc" id="runtime-profile_8h_html_aaa9a2971c6368e3ddd3f5140a0295eb7"><div class="ttname"><a href="runtime-profile_8h.html#aaa9a2971c6368e3ddd3f5140a0295eb7">SCOPED_TIMER</a></div><div class="ttdeci">#define SCOPED_TIMER(c)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00053">runtime-profile.h:53</a></div></div>
<div class="ttc" id="structDataPartitioner_1_1BuildPartition_html_a9868e2e8a9eb776ef8873ba4e0a04863"><div class="ttname"><a href="structDataPartitioner_1_1BuildPartition.html#a9868e2e8a9eb776ef8873ba4e0a04863">DataPartitioner::BuildPartition::num_last_block</a></div><div class="ttdeci">int num_last_block</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00215">tuple-splitter-test.cc:215</a></div></div>
<div class="ttc" id="classDataPartitioner_html_ad5618d3fa9881cbefaca3ef2a336c877"><div class="ttname"><a href="classDataPartitioner.html#ad5618d3fa9881cbefaca3ef2a336c877">DataPartitioner::bytes_copied_</a></div><div class="ttdeci">RuntimeProfile::Counter * bytes_copied_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00199">tuple-splitter-test.cc:199</a></div></div>
<div class="ttc" id="structDataPartitioner_1_1BuildPartition_html"><div class="ttname"><a href="structDataPartitioner_1_1BuildPartition.html">DataPartitioner::BuildPartition</a></div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00213">tuple-splitter-test.cc:213</a></div></div>
<div class="ttc" id="classDataProvider_html"><div class="ttname"><a href="classDataProvider.html">DataProvider</a></div><div class="ttdoc">See data-provider-test.cc on how to use this. </div><div class="ttdef"><b>Definition:</b> <a href="data-provider_8h_source.html#l00033">data-provider.h:33</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a3101db138dd6b89e6ba23c6ba06ab119"><div class="ttname"><a href="classDataPartitioner.html#a3101db138dd6b89e6ba23c6ba06ab119">DataPartitioner::TotalTuples</a></div><div class="ttdeci">int TotalTuples(const BuildPartition &amp;partition) const </div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00235">tuple-splitter-test.cc:235</a></div></div>
<div class="ttc" id="namespaceimpala_html_a6bf80cb1d633d79570ccf617684439b1"><div class="ttname"><a href="namespaceimpala.html#a6bf80cb1d633d79570ccf617684439b1">impala::obj_pool</a></div><div class="ttdeci">ObjectPool * obj_pool()</div><div class="ttdoc">Returns a local object pool. </div><div class="ttdef"><b>Definition:</b> <a href="coordinator_8h_source.html#l00263">coordinator.h:263</a></div></div>
<div class="ttc" id="classDataPartitioner_html"><div class="ttname"><a href="classDataPartitioner.html">DataPartitioner</a></div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00091">tuple-splitter-test.cc:91</a></div></div>
<div class="ttc" id="structDataPartitioner_1_1Partition_html_a48929dbb61071c3ee1bfd85613a17b65"><div class="ttname"><a href="structDataPartitioner_1_1Partition.html#a48929dbb61071c3ee1bfd85613a17b65">DataPartitioner::Partition::num_last_block</a></div><div class="ttdeci">int num_last_block</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00145">tuple-splitter-test.cc:145</a></div></div>
<div class="ttc" id="classimpala_1_1MemPool_html"><div class="ttname"><a href="classimpala_1_1MemPool.html">impala::MemPool</a></div><div class="ttdef"><b>Definition:</b> <a href="mem-pool_8h_source.html#l00077">mem-pool.h:77</a></div></div>
<div class="ttc" id="structPointerValue_html_a781c7116ab533ca898cdaa5284cad47c"><div class="ttname"><a href="structPointerValue.html#a781c7116ab533ca898cdaa5284cad47c">PointerValue::GetValue</a></div><div class="ttdeci">uint16_t GetValue() const </div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00056">tuple-splitter-test.cc:56</a></div></div>
<div class="ttc" id="classDataPartitioner_html_ab1445d50f116cc15e639e3e07d2d7143"><div class="ttname"><a href="classDataPartitioner.html#ab1445d50f116cc15e639e3e07d2d7143">DataPartitioner::tuples_per_partition_</a></div><div class="ttdeci">int tuples_per_partition_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00206">tuple-splitter-test.cc:206</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a25adcaed76d60cd0ea855baa5a31dfc5"><div class="ttname"><a href="classDataPartitioner.html#a25adcaed76d60cd0ea855baa5a31dfc5">DataPartitioner::DataPartitioner</a></div><div class="ttdeci">DataPartitioner(MemPool *pool, RuntimeProfile *profile, int size, int hash_offset)</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00093">tuple-splitter-test.cc:93</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a6798fe0ab61d09b43e72338e734b2f34"><div class="ttname"><a href="classDataPartitioner.html#a6798fe0ab61d09b43e72338e734b2f34">DataPartitioner::NumTuples</a></div><div class="ttdeci">int NumTuples(const Partition &amp;partition) const </div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00157">tuple-splitter-test.cc:157</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a6cdb225fa89efc92f65accc7edce8d18"><div class="ttname"><a href="classDataPartitioner.html#a6cdb225fa89efc92f65accc7edce8d18">DataPartitioner::split_counts_</a></div><div class="ttdeci">vector&lt; int32_t &gt; split_counts_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00210">tuple-splitter-test.cc:210</a></div></div>
<div class="ttc" id="expr-benchmark_8cc_html_a3a5de7bd423fbc0afc4cf935c166ca6b"><div class="ttname"><a href="expr-benchmark_8cc.html#a3a5de7bd423fbc0afc4cf935c166ca6b">pool</a></div><div class="ttdeci">ObjectPool pool</div><div class="ttdef"><b>Definition:</b> <a href="expr-benchmark_8cc_source.html#l00089">expr-benchmark.cc:89</a></div></div>
<div class="ttc" id="classDataPartitioner_html_ac898e570604af4c49dc089ef4b5460d1"><div class="ttname"><a href="classDataPartitioner.html#ac898e570604af4c49dc089ef4b5460d1">DataPartitioner::hash_offset_</a></div><div class="ttdeci">int hash_offset_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00205">tuple-splitter-test.cc:205</a></div></div>
<div class="ttc" id="runtime-profile_8h_html_aac035c52016117af399543521f069c51"><div class="ttname"><a href="runtime-profile_8h.html#aac035c52016117af399543521f069c51">ADD_COUNTER</a></div><div class="ttdeci">#define ADD_COUNTER(profile, name, unit)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00047">runtime-profile.h:47</a></div></div>
<div class="ttc" id="classuint64__t_html"><div class="ttname"><a href="classuint64__t.html">uint64_t</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a6a59ab30aa3d404317ab3b90db68b4df"><div class="ttname"><a href="classDataPartitioner.html#a6a59ab30aa3d404317ab3b90db68b4df">DataPartitioner::split_time_</a></div><div class="ttdeci">RuntimeProfile::Counter * split_time_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00200">tuple-splitter-test.cc:200</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a1dfa154e771e0a12985e3230cd277bab"><div class="ttname"><a href="classDataPartitioner.html#a1dfa154e771e0a12985e3230cd277bab">DataPartitioner::pool_</a></div><div class="ttdeci">MemPool * pool_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00196">tuple-splitter-test.cc:196</a></div></div>
<div class="ttc" id="structDataPartitioner_1_1BuildPartition_html_ab9e6a273be53cf7d99435c49e8f87268"><div class="ttname"><a href="structDataPartitioner_1_1BuildPartition.html#ab9e6a273be53cf7d99435c49e8f87268">DataPartitioner::BuildPartition::level</a></div><div class="ttdeci">int level</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00216">tuple-splitter-test.cc:216</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a8af1c88e14b0204faab44f507a1e654b"><div class="ttname"><a href="classDataPartitioner.html#a8af1c88e14b0204faab44f507a1e654b">DataPartitioner::partitions_per_level_</a></div><div class="ttdeci">int partitions_per_level_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00207">tuple-splitter-test.cc:207</a></div></div>
<div class="ttc" id="classimpala_1_1MemTracker_html"><div class="ttname"><a href="classimpala_1_1MemTracker.html">impala::MemTracker</a></div><div class="ttdoc">This class is thread-safe. </div><div class="ttdef"><b>Definition:</b> <a href="mem-tracker_8h_source.html#l00061">mem-tracker.h:61</a></div></div>
<div class="ttc" id="tuple-splitter-test_8cc_html_a9800b136de5c37bf3cc5d0332108a611"><div class="ttname"><a href="tuple-splitter-test_8cc.html#a9800b136de5c37bf3cc5d0332108a611">USED_BITS</a></div><div class="ttdeci">#define USED_BITS</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00032">tuple-splitter-test.cc:32</a></div></div>
<div class="ttc" id="tuple-splitter-test_8cc_html_a3c04138a5bfe5d72780bb7e82a18e627"><div class="ttname"><a href="tuple-splitter-test_8cc.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a></div><div class="ttdeci">int main(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00365">tuple-splitter-test.cc:365</a></div></div>
<div class="ttc" id="tuple-splitter-test_8cc_html_ab25c09878038a2fef98bc8e0a21f440c"><div class="ttname"><a href="tuple-splitter-test_8cc.html#ab25c09878038a2fef98bc8e0a21f440c">POINTER_LOWER_BITS_MASK</a></div><div class="ttdeci">#define POINTER_LOWER_BITS_MASK</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00034">tuple-splitter-test.cc:34</a></div></div>
<div class="ttc" id="structDataPartitioner_1_1Partition_html"><div class="ttname"><a href="structDataPartitioner_1_1Partition.html">DataPartitioner::Partition</a></div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00143">tuple-splitter-test.cc:143</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a9c70cb7248c388d1d4ff187d54c284f1"><div class="ttname"><a href="classDataPartitioner.html#a9c70cb7248c388d1d4ff187d54c284f1">DataPartitioner::partition_idx_mask_</a></div><div class="ttdeci">int partition_idx_mask_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00208">tuple-splitter-test.cc:208</a></div></div>
<div class="ttc" id="compiler-util_8h_html"><div class="ttname"><a href="compiler-util_8h.html">compiler-util.h</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeProfile_html"><div class="ttname"><a href="classimpala_1_1RuntimeProfile.html">impala::RuntimeProfile</a></div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00083">runtime-profile.h:83</a></div></div>
<div class="ttc" id="structPointerValue_html_ac72ecc0a42c0e8ddfd4db13165c941d1"><div class="ttname"><a href="structPointerValue.html#ac72ecc0a42c0e8ddfd4db13165c941d1">PointerValue::ptr</a></div><div class="ttdeci">uint8_t * ptr</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00048">tuple-splitter-test.cc:48</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a677aa7966a2dd80de8e349580c30fbf9"><div class="ttname"><a href="classDataPartitioner.html#a677aa7966a2dd80de8e349580c30fbf9">DataPartitioner::Allocate</a></div><div class="ttdeci">uint8_t * Allocate(BuildPartition *partition, int p, int size=0)</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00221">tuple-splitter-test.cc:221</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a94764ca10b57ab23cc503f5056287090"><div class="ttname"><a href="classDataPartitioner.html#a94764ca10b57ab23cc503f5056287090">DataPartitioner::Finalize</a></div><div class="ttdeci">bool Finalize(vector&lt; Partition &gt; *results)</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00166">tuple-splitter-test.cc:166</a></div></div>
<div class="ttc" id="tuple-splitter-test_8cc_html_a0f57ed7cd41803aff8318544fa1ff37f"><div class="ttname"><a href="tuple-splitter-test_8cc.html#a0f57ed7cd41803aff8318544fa1ff37f">Memcpy16</a></div><div class="ttdeci">void Memcpy16(uint8_t *dst, uint8_t *src)</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00040">tuple-splitter-test.cc:40</a></div></div>
<div class="ttc" id="classDataPartitioner_html_ad2d43b8963339b2a683c79f46aff3cd1"><div class="ttname"><a href="classDataPartitioner.html#ad2d43b8963339b2a683c79f46aff3cd1">DataPartitioner::outputs_</a></div><div class="ttdeci">vector&lt; PointerValue &gt; outputs_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00209">tuple-splitter-test.cc:209</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a244438c9153947d955938e23dd015765"><div class="ttname"><a href="classDataPartitioner.html#a244438c9153947d955938e23dd015765">DataPartitioner::AddData</a></div><div class="ttdeci">void AddData(int n, uint8_t *data)</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00251">tuple-splitter-test.cc:251</a></div></div>
<div class="ttc" id="structPointerValue_html_afd5af68391123aff694321d7dfbcb51b"><div class="ttname"><a href="structPointerValue.html#afd5af68391123aff694321d7dfbcb51b">PointerValue::Get</a></div><div class="ttdeci">void Get(T &amp;t, uint16_t &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00061">tuple-splitter-test.cc:61</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeProfile_html_a3199b85de1a8278a4a94dc7259aea68d"><div class="ttname"><a href="classimpala_1_1RuntimeProfile.html#a3199b85de1a8278a4a94dc7259aea68d">impala::RuntimeProfile::PrettyPrint</a></div><div class="ttdeci">void PrettyPrint(std::ostream *s, const std::string &amp;prefix=&quot;&quot;) const </div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8cc_source.html#l00507">runtime-profile.cc:507</a></div></div>
<div class="ttc" id="mem-pool_8h_html"><div class="ttname"><a href="mem-pool_8h.html">mem-pool.h</a></div></div>
<div class="ttc" id="names_8h_html"><div class="ttname"><a href="names_8h.html">names.h</a></div></div>
<div class="ttc" id="classDataProvider_html_abdb5392154b16078076a0fb2bc38ab9a"><div class="ttname"><a href="classDataProvider.html#abdb5392154b16078076a0fb2bc38ab9a">DataProvider::row_size</a></div><div class="ttdeci">int row_size() const </div><div class="ttdoc">The size of a row (tuple size) </div><div class="ttdef"><b>Definition:</b> <a href="data-provider_8h_source.html#l00107">data-provider.h:107</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a17c9b0b29425d92e6af42a13d2bad242"><div class="ttname"><a href="classDataPartitioner.html#a17c9b0b29425d92e6af42a13d2bad242">DataPartitioner::profile_</a></div><div class="ttdeci">RuntimeProfile * profile_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00197">tuple-splitter-test.cc:197</a></div></div>
<div class="ttc" id="structDataPartitioner_1_1Partition_html_a2c92714fe05b091d67ec5e4e16a00d38"><div class="ttname"><a href="structDataPartitioner_1_1Partition.html#a2c92714fe05b091d67ec5e4e16a00d38">DataPartitioner::Partition::Partition</a></div><div class="ttdeci">Partition()</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00147">tuple-splitter-test.cc:147</a></div></div>
<div class="ttc" id="string-value_8h_html"><div class="ttname"><a href="string-value_8h.html">string-value.h</a></div></div>
<div class="ttc" id="classDataProvider_html_a707d5e31ec02719396f4b1cb2b9ac9fc"><div class="ttname"><a href="classDataProvider.html#a707d5e31ec02719396f4b1cb2b9ac9fc">DataProvider::Print</a></div><div class="ttdeci">void Print(std::ostream *, char *data, int num_rows) const </div><div class="ttdoc">Print the row data in csv format. </div><div class="ttdef"><b>Definition:</b> <a href="data-provider_8cc_source.html#l00113">data-provider.cc:113</a></div></div>
<div class="ttc" id="classDataPartitioner_html_a986eb578fc75bb0826a6cc900becb796"><div class="ttname"><a href="classDataPartitioner.html#a986eb578fc75bb0826a6cc900becb796">DataPartitioner::build_partitions_</a></div><div class="ttdeci">vector&lt; BuildPartition &gt; build_partitions_</div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00218">tuple-splitter-test.cc:218</a></div></div>
<div class="ttc" id="classDataPartitioner_html_af0a04b9e5a82b034f1369b3409dd3990"><div class="ttname"><a href="classDataPartitioner.html#af0a04b9e5a82b034f1369b3409dd3990">DataPartitioner::NumTuples</a></div><div class="ttdeci">int NumTuples(const Partition &amp;partition, int block_idx) const </div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00161">tuple-splitter-test.cc:161</a></div></div>
<div class="ttc" id="structPointerValue_html"><div class="ttname"><a href="structPointerValue.html">PointerValue</a></div><div class="ttdef"><b>Definition:</b> <a href="tuple-splitter-test_8cc_source.html#l00045">tuple-splitter-test.cc:45</a></div></div>
<div class="ttc" id="cpu-info_8h_html"><div class="ttname"><a href="cpu-info_8h.html">cpu-info.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e5d120be6b5e8a44336cbfd013b25604.html">be</a></li><li class="navelem"><a class="el" href="dir_68cf7cafb51a962d5bc4848b83cab0de.html">src</a></li><li class="navelem"><a class="el" href="dir_c9df84a671cd91d3c29aa4a38e7587c0.html">experiments</a></li><li class="navelem"><a class="el" href="tuple-splitter-test_8cc.html">tuple-splitter-test.cc</a></li>
    <li class="footer">Generated on Thu May 7 2015 16:10:35 for Impala by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
