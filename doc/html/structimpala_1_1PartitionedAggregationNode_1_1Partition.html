<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Impala: impala::PartitionedAggregationNode::Partition Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Impala
   </div>
   <div id="projectbrief">Impalaistheopensource,nativeanalyticdatabaseforApacheHadoop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structimpala_1_1PartitionedAggregationNode_1_1Partition.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structimpala_1_1PartitionedAggregationNode_1_1Partition-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">impala::PartitionedAggregationNode::Partition Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for impala::PartitionedAggregationNode::Partition:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="structimpala_1_1PartitionedAggregationNode_1_1Partition__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9742250608508bfc690a16e51a38a25a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#a9742250608508bfc690a16e51a38a25a">Partition</a> (<a class="el" href="classimpala_1_1PartitionedAggregationNode.html">PartitionedAggregationNode</a> *<a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#a90aa6fbade92b661eb17a1697f967b30">parent</a>, int <a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#a487eb9ee3b8848ebb6c38374e4fe4c69">level</a>)</td></tr>
<tr class="separator:a9742250608508bfc690a16e51a38a25a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac92f305f5a842e96ad663716c813de3e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#ac92f305f5a842e96ad663716c813de3e">InitStreams</a> ()</td></tr>
<tr class="separator:ac92f305f5a842e96ad663716c813de3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62e42abbc54163ff63ac98d1bf7f0da3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#a62e42abbc54163ff63ac98d1bf7f0da3">InitHashTable</a> ()</td></tr>
<tr class="memdesc:a62e42abbc54163ff63ac98d1bf7f0da3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the hash table. Returns false on OOM.  <a href="#a62e42abbc54163ff63ac98d1bf7f0da3">More...</a><br/></td></tr>
<tr class="separator:a62e42abbc54163ff63ac98d1bf7f0da3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fa2f35fc09bed7ccba0159dd501fef8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#a9fa2f35fc09bed7ccba0159dd501fef8">Close</a> (<a class="el" href="classbool.html">bool</a> finalize_rows)</td></tr>
<tr class="separator:a9fa2f35fc09bed7ccba0159dd501fef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28e2c079a436b335999078640629e3e3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#a28e2c079a436b335999078640629e3e3">Spill</a> (<a class="el" href="classimpala_1_1Tuple.html">Tuple</a> *tuple=NULL)</td></tr>
<tr class="separator:a28e2c079a436b335999078640629e3e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a5ccd17ccd74c816c636881532ea948"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#a9a5ccd17ccd74c816c636881532ea948">is_spilled</a> () const </td></tr>
<tr class="separator:a9a5ccd17ccd74c816c636881532ea948"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a90aa6fbade92b661eb17a1697f967b30"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1PartitionedAggregationNode.html">PartitionedAggregationNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#a90aa6fbade92b661eb17a1697f967b30">parent</a></td></tr>
<tr class="separator:a90aa6fbade92b661eb17a1697f967b30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab006520c8ae493639785dad564879ffd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#ab006520c8ae493639785dad564879ffd">is_closed</a></td></tr>
<tr class="memdesc:ab006520c8ae493639785dad564879ffd"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, this partition is closed and there is nothing left to do.  <a href="#ab006520c8ae493639785dad564879ffd">More...</a><br/></td></tr>
<tr class="separator:ab006520c8ae493639785dad564879ffd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a487eb9ee3b8848ebb6c38374e4fe4c69"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#a487eb9ee3b8848ebb6c38374e4fe4c69">level</a></td></tr>
<tr class="separator:a487eb9ee3b8848ebb6c38374e4fe4c69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f3cd48377bd279a79a719d202857691"><td class="memItemLeft" align="right" valign="top">boost::scoped_ptr&lt; <a class="el" href="classimpala_1_1HashTable.html">HashTable</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#a1f3cd48377bd279a79a719d202857691">hash_tbl</a></td></tr>
<tr class="separator:a1f3cd48377bd279a79a719d202857691"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7030cbd1f2cf22fc5b5de07460d45d2f"><td class="memItemLeft" align="right" valign="top">std::vector<br class="typebreak"/>
&lt; <a class="el" href="classimpala__udf_1_1FunctionContext.html">impala_udf::FunctionContext</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#a7030cbd1f2cf22fc5b5de07460d45d2f">agg_fn_ctxs</a></td></tr>
<tr class="memdesc:a7030cbd1f2cf22fc5b5de07460d45d2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clone of parent's agg_fn_ctxs_ and backing <a class="el" href="classimpala_1_1MemPool.html">MemPool</a>.  <a href="#a7030cbd1f2cf22fc5b5de07460d45d2f">More...</a><br/></td></tr>
<tr class="separator:a7030cbd1f2cf22fc5b5de07460d45d2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a330f5e73090cde312525320111136a92"><td class="memItemLeft" align="right" valign="top">boost::scoped_ptr&lt; <a class="el" href="classimpala_1_1MemPool.html">MemPool</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#a330f5e73090cde312525320111136a92">agg_fn_pool</a></td></tr>
<tr class="separator:a330f5e73090cde312525320111136a92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ea9def2ce9bb40d8a4476d432279258"><td class="memItemLeft" align="right" valign="top">boost::scoped_ptr<br class="typebreak"/>
&lt; <a class="el" href="classimpala_1_1BufferedTupleStream.html">BufferedTupleStream</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#a7ea9def2ce9bb40d8a4476d432279258">aggregated_row_stream</a></td></tr>
<tr class="separator:a7ea9def2ce9bb40d8a4476d432279258"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a076cd4ef28b8a7bcb0a49ceb73944cae"><td class="memItemLeft" align="right" valign="top">boost::scoped_ptr<br class="typebreak"/>
&lt; <a class="el" href="classimpala_1_1BufferedTupleStream.html">BufferedTupleStream</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html#a076cd4ef28b8a7bcb0a49ceb73944cae">unaggregated_row_stream</a></td></tr>
<tr class="memdesc:a076cd4ef28b8a7bcb0a49ceb73944cae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unaggregated rows that are spilled.  <a href="#a076cd4ef28b8a7bcb0a49ceb73944cae">More...</a><br/></td></tr>
<tr class="separator:a076cd4ef28b8a7bcb0a49ceb73944cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="partitioned-aggregation-node_8h_source.html#l00237">237</a> of file <a class="el" href="partitioned-aggregation-node_8h_source.html">partitioned-aggregation-node.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a9742250608508bfc690a16e51a38a25a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">impala::PartitionedAggregationNode::Partition::Partition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1PartitionedAggregationNode.html">PartitionedAggregationNode</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="partitioned-aggregation-node_8h_source.html#l00238">238</a> of file <a class="el" href="partitioned-aggregation-node_8h_source.html">partitioned-aggregation-node.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a9fa2f35fc09bed7ccba0159dd501fef8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void impala::PartitionedAggregationNode::Partition::Close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>finalize_rows</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Closes this partition. If finalize_rows is true, this iterates over all rows in aggregated_row_stream and finalizes them (this is only used in the cancellation path). </p>

<p>Definition at line <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00570">570</a> of file <a class="el" href="partitioned-aggregation-node_8cc_source.html">partitioned-aggregation-node.cc</a>.</p>

<p>References <a class="el" href="exec-node_8h_source.html#l00242">impala::ExecNode::is_closed()</a>.</p>

<p>Referenced by <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00380">impala::PartitionedAggregationNode::Close()</a>, <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00271">impala::PartitionedAggregationNode::GetNext()</a>, and <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00922">impala::PartitionedAggregationNode::MoveHashPartitions()</a>.</p>

</div>
</div>
<a class="anchor" id="a62e42abbc54163ff63ac98d1bf7f0da3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::PartitionedAggregationNode::Partition::InitHashTable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the hash table. Returns false on OOM. </p>

<p>Definition at line <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00454">454</a> of file <a class="el" href="partitioned-aggregation-node_8cc_source.html">partitioned-aggregation-node.cc</a>.</p>

<p>References <a class="el" href="partitioned-aggregation-node_8h_source.html#l00121">impala::PartitionedAggregationNode::NUM_PARTITIONING_BITS</a>.</p>

</div>
</div>
<a class="anchor" id="ac92f305f5a842e96ad663716c813de3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::PartitionedAggregationNode::Partition::InitStreams </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes aggregated_row_stream and unaggregated_row_stream, reserving one buffer for each. The buffers backing these streams are reserved, so this function will not fail with a continuable OOM. If we fail to init these buffers, the mem limit is too low to run this algorithm. </p>

<p>Definition at line <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00429">429</a> of file <a class="el" href="partitioned-aggregation-node_8cc_source.html">partitioned-aggregation-node.cc</a>.</p>

<p>References <a class="el" href="object-pool_8h_source.html#l00042">impala::ObjectPool::Add()</a>, <a class="el" href="partitioned-aggregation-node_8h_source.html#l00279">agg_fn_ctxs</a>, <a class="el" href="partitioned-aggregation-node_8h_source.html#l00161">impala::PartitionedAggregationNode::agg_fn_ctxs_</a>, <a class="el" href="partitioned-aggregation-node_8h_source.html#l00280">agg_fn_pool</a>, <a class="el" href="partitioned-aggregation-node_8h_source.html#l00286">aggregated_row_stream</a>, <a class="el" href="runtime-state_8h_source.html#l00194">impala::RuntimeState::block_mgr()</a>, <a class="el" href="partitioned-aggregation-node_8h_source.html#l00176">impala::PartitionedAggregationNode::block_mgr_client_</a>, <a class="el" href="exec-node_8h_source.html#l00241">impala::ExecNode::child()</a>, <a class="el" href="exec-node_8h_source.html#l00163">impala::ExecNode::expr_mem_tracker()</a>, <a class="el" href="partitioned-aggregation-node_8h_source.html#l00137">impala::PartitionedAggregationNode::intermediate_row_desc_</a>, <a class="el" href="partitioned-aggregation-node_8h_source.html#l00271">level</a>, <a class="el" href="runtime-state_8h_source.html#l00092">impala::RuntimeState::obj_pool()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="partitioned-aggregation-node_8h_source.html#l00263">parent</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="exec-node_8h_source.html#l00156">impala::ExecNode::row_desc()</a>, <a class="el" href="exec-node_8h_source.html#l00161">impala::ExecNode::runtime_profile()</a>, <a class="el" href="partitioned-aggregation-node_8h_source.html#l00175">impala::PartitionedAggregationNode::state_</a>, and <a class="el" href="partitioned-aggregation-node_8h_source.html#l00289">unaggregated_row_stream</a>.</p>

</div>
</div>
<a class="anchor" id="a9a5ccd17ccd74c816c636881532ea948"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::PartitionedAggregationNode::Partition::is_spilled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="partitioned-aggregation-node_8h_source.html#l00261">261</a> of file <a class="el" href="partitioned-aggregation-node_8h_source.html">partitioned-aggregation-node.h</a>.</p>

<p>References <a class="el" href="partitioned-aggregation-node_8h_source.html#l00276">hash_tbl</a>.</p>

<p>Referenced by <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00758">impala::PartitionedAggregationNode::LargestSpilledPartition()</a>, <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00922">impala::PartitionedAggregationNode::MoveHashPartitions()</a>, <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00771">impala::PartitionedAggregationNode::NextPartition()</a>, and <a class="el" href="partitioned-aggregation-node-ir_8cc_source.html#l00033">impala::PartitionedAggregationNode::ProcessBatch()</a>.</p>

</div>
</div>
<a class="anchor" id="a28e2c079a436b335999078640629e3e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1Status.html">Status</a> impala::PartitionedAggregationNode::Partition::Spill </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1Tuple.html">Tuple</a> *&#160;</td>
          <td class="paramname"><em>tuple</em> = <code>NULL</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Spills this partition, unpinning streams and cleaning up hash tables as necessary. If tuple is non-NULL, tuple should also be cleaned up (it was added to this partitions aggregated_row_stream but not in the hash table). </p>

<p>Definition at line <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00467">467</a> of file <a class="el" href="partitioned-aggregation-node_8cc_source.html">partitioned-aggregation-node.cc</a>.</p>

<p>References <a class="el" href="buffered-tuple-stream_8inline_8h_source.html#l00025">impala::BufferedTupleStream::AddRow()</a>, <a class="el" href="hash-table_8h_source.html#l00492">impala::HashTable::Iterator::AtEnd()</a>, <a class="el" href="runtime-profile_8h_source.html#l00055">COUNTER_ADD</a>, <a class="el" href="hash-table_8inline_8h_source.html#l00243">impala::HashTable::Iterator::GetTuple()</a>, <a class="el" href="hash-table_8inline_8h_source.html#l00283">impala::HashTable::Iterator::Next()</a>, <a class="el" href="status_8h_source.html#l00087">impala::Status::OK</a>, <a class="el" href="status_8h_source.html#l00172">impala::Status::ok()</a>, <a class="el" href="status_8h_source.html#l00242">RETURN_IF_ERROR</a>, <a class="el" href="agg-fn-evaluator_8h_source.html#l00248">impala::AggFnEvaluator::Serialize()</a>, <a class="el" href="buffered-tuple-stream_8h_source.html#l00228">impala::BufferedTupleStream::status()</a>, and <a class="el" href="compiler-util_8h_source.html#l00033">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00872">impala::PartitionedAggregationNode::SpillPartition()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a7030cbd1f2cf22fc5b5de07460d45d2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classimpala__udf_1_1FunctionContext.html">impala_udf::FunctionContext</a>*&gt; impala::PartitionedAggregationNode::Partition::agg_fn_ctxs</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clone of parent's agg_fn_ctxs_ and backing <a class="el" href="classimpala_1_1MemPool.html">MemPool</a>. </p>

<p>Definition at line <a class="el" href="partitioned-aggregation-node_8h_source.html#l00279">279</a> of file <a class="el" href="partitioned-aggregation-node_8h_source.html">partitioned-aggregation-node.h</a>.</p>

<p>Referenced by <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00380">impala::PartitionedAggregationNode::Close()</a>, <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00271">impala::PartitionedAggregationNode::GetNext()</a>, <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00429">InitStreams()</a>, and <a class="el" href="partitioned-aggregation-node-ir_8cc_source.html#l00033">impala::PartitionedAggregationNode::ProcessBatch()</a>.</p>

</div>
</div>
<a class="anchor" id="a330f5e73090cde312525320111136a92"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::scoped_ptr&lt;<a class="el" href="classimpala_1_1MemPool.html">MemPool</a>&gt; impala::PartitionedAggregationNode::Partition::agg_fn_pool</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="partitioned-aggregation-node_8h_source.html#l00280">280</a> of file <a class="el" href="partitioned-aggregation-node_8h_source.html">partitioned-aggregation-node.h</a>.</p>

<p>Referenced by <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00429">InitStreams()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ea9def2ce9bb40d8a4476d432279258"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::scoped_ptr&lt;<a class="el" href="classimpala_1_1BufferedTupleStream.html">BufferedTupleStream</a>&gt; impala::PartitionedAggregationNode::Partition::aggregated_row_stream</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classimpala_1_1Tuple.html" title="A tuple with 0 materialised slots is represented as NULL. ">Tuple</a> stream used to store aggregated rows. When the partition is not spilled, (meaning the hash table is maintained), this stream is pinned and contains the memory referenced by the hash table. When it is spilled, aggregate rows are just appended to this stream. </p>

<p>Definition at line <a class="el" href="partitioned-aggregation-node_8h_source.html#l00286">286</a> of file <a class="el" href="partitioned-aggregation-node_8h_source.html">partitioned-aggregation-node.h</a>.</p>

<p>Referenced by <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00429">InitStreams()</a>, <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00758">impala::PartitionedAggregationNode::LargestSpilledPartition()</a>, <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00922">impala::PartitionedAggregationNode::MoveHashPartitions()</a>, <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00771">impala::PartitionedAggregationNode::NextPartition()</a>, and <a class="el" href="partitioned-aggregation-node-ir_8cc_source.html#l00033">impala::PartitionedAggregationNode::ProcessBatch()</a>.</p>

</div>
</div>
<a class="anchor" id="a1f3cd48377bd279a79a719d202857691"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::scoped_ptr&lt;<a class="el" href="classimpala_1_1HashTable.html">HashTable</a>&gt; impala::PartitionedAggregationNode::Partition::hash_tbl</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hash table for this partition. Can be NULL if this partition is no longer maintaining a hash table (i.e. is spilled). </p>

<p>Definition at line <a class="el" href="partitioned-aggregation-node_8h_source.html#l00276">276</a> of file <a class="el" href="partitioned-aggregation-node_8h_source.html">partitioned-aggregation-node.h</a>.</p>

<p>Referenced by <a class="el" href="partitioned-aggregation-node_8h_source.html#l00261">is_spilled()</a>, <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00922">impala::PartitionedAggregationNode::MoveHashPartitions()</a>, <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00771">impala::PartitionedAggregationNode::NextPartition()</a>, and <a class="el" href="partitioned-aggregation-node-ir_8cc_source.html#l00033">impala::PartitionedAggregationNode::ProcessBatch()</a>.</p>

</div>
</div>
<a class="anchor" id="ab006520c8ae493639785dad564879ffd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::PartitionedAggregationNode::Partition::is_closed</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If true, this partition is closed and there is nothing left to do. </p>

<p>Definition at line <a class="el" href="partitioned-aggregation-node_8h_source.html#l00266">266</a> of file <a class="el" href="partitioned-aggregation-node_8h_source.html">partitioned-aggregation-node.h</a>.</p>

</div>
</div>
<a class="anchor" id="a487eb9ee3b8848ebb6c38374e4fe4c69"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int impala::PartitionedAggregationNode::Partition::level</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>How many times rows in this partition have been repartitioned. Partitions created from the node's children's input is level 0, 1 after the first repartitionining, etc. </p>

<p>Definition at line <a class="el" href="partitioned-aggregation-node_8h_source.html#l00271">271</a> of file <a class="el" href="partitioned-aggregation-node_8h_source.html">partitioned-aggregation-node.h</a>.</p>

<p>Referenced by <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00429">InitStreams()</a>.</p>

</div>
</div>
<a class="anchor" id="a90aa6fbade92b661eb17a1697f967b30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1PartitionedAggregationNode.html">PartitionedAggregationNode</a>* impala::PartitionedAggregationNode::Partition::parent</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="partitioned-aggregation-node_8h_source.html#l00263">263</a> of file <a class="el" href="partitioned-aggregation-node_8h_source.html">partitioned-aggregation-node.h</a>.</p>

<p>Referenced by <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00429">InitStreams()</a>.</p>

</div>
</div>
<a class="anchor" id="a076cd4ef28b8a7bcb0a49ceb73944cae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::scoped_ptr&lt;<a class="el" href="classimpala_1_1BufferedTupleStream.html">BufferedTupleStream</a>&gt; impala::PartitionedAggregationNode::Partition::unaggregated_row_stream</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unaggregated rows that are spilled. </p>

<p>Definition at line <a class="el" href="partitioned-aggregation-node_8h_source.html#l00289">289</a> of file <a class="el" href="partitioned-aggregation-node_8h_source.html">partitioned-aggregation-node.h</a>.</p>

<p>Referenced by <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00429">InitStreams()</a>, <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00758">impala::PartitionedAggregationNode::LargestSpilledPartition()</a>, <a class="el" href="partitioned-aggregation-node_8cc_source.html#l00922">impala::PartitionedAggregationNode::MoveHashPartitions()</a>, and <a class="el" href="partitioned-aggregation-node-ir_8cc_source.html#l00033">impala::PartitionedAggregationNode::ProcessBatch()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>be/src/exec/<a class="el" href="partitioned-aggregation-node_8h_source.html">partitioned-aggregation-node.h</a></li>
<li>be/src/exec/<a class="el" href="partitioned-aggregation-node_8cc_source.html">partitioned-aggregation-node.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceimpala.html">impala</a></li><li class="navelem"><a class="el" href="classimpala_1_1PartitionedAggregationNode.html">PartitionedAggregationNode</a></li><li class="navelem"><a class="el" href="structimpala_1_1PartitionedAggregationNode_1_1Partition.html">Partition</a></li>
    <li class="footer">Generated on Thu May 7 2015 16:10:48 for Impala by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
