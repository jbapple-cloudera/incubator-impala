<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Impala: impala::DiskIoMgr::RequestContext::PerDiskState Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Impala
   </div>
   <div id="projectbrief">Impalaistheopensource,nativeanalyticdatabaseforApacheHadoop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">impala::DiskIoMgr::RequestContext::PerDiskState Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for impala::DiskIoMgr::RequestContext::PerDiskState:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1018f815a0524b8a36157e62babf85d2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a1018f815a0524b8a36157e62babf85d2">done</a> () const </td></tr>
<tr class="separator:a1018f815a0524b8a36157e62babf85d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad13cd779c50ef72582de4e024ce2a1a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#ad13cd779c50ef72582de4e024ce2a1a4">set_done</a> (<a class="el" href="classbool.html">bool</a> b)</td></tr>
<tr class="separator:ad13cd779c50ef72582de4e024ce2a1a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61073dd8a4c8cc85e93b39a77e64c954"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a61073dd8a4c8cc85e93b39a77e64c954">num_remaining_ranges</a> () const </td></tr>
<tr class="separator:a61073dd8a4c8cc85e93b39a77e64c954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec745cb2475e5cf63baa9ea873974dec"><td class="memItemLeft" align="right" valign="top">int &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#aec745cb2475e5cf63baa9ea873974dec">num_remaining_ranges</a> ()</td></tr>
<tr class="separator:aec745cb2475e5cf63baa9ea873974dec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53a6e8ae208873c8904f5a21cd223956"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">ScanRange</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a53a6e8ae208873c8904f5a21cd223956">next_scan_range_to_start</a> ()</td></tr>
<tr class="separator:a53a6e8ae208873c8904f5a21cd223956"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabf7cc079f080704a2f0679ef7954ef9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#aabf7cc079f080704a2f0679ef7954ef9">set_next_scan_range_to_start</a> (<a class="el" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">ScanRange</a> *range)</td></tr>
<tr class="separator:aabf7cc079f080704a2f0679ef7954ef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bee4f0bb7fa2a60a55b0ea88cd448bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a4bee4f0bb7fa2a60a55b0ea88cd448bc">is_on_queue</a> () const </td></tr>
<tr class="separator:a4bee4f0bb7fa2a60a55b0ea88cd448bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabba9a91ae6d68a2483715c59d0a8ed4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#aabba9a91ae6d68a2483715c59d0a8ed4">num_threads_in_op</a> () const </td></tr>
<tr class="separator:aabba9a91ae6d68a2483715c59d0a8ed4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91f61b6e43f35e51ea174b011a562dd7"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt; <a class="el" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">ScanRange</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a91f61b6e43f35e51ea174b011a562dd7">unstarted_scan_ranges</a> () const </td></tr>
<tr class="separator:a91f61b6e43f35e51ea174b011a562dd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaae16fab841e8d167dba2237d6633cd6"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt; <a class="el" href="classimpala_1_1DiskIoMgr_1_1WriteRange.html">WriteRange</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#aaae16fab841e8d167dba2237d6633cd6">unstarted_write_ranges</a> () const </td></tr>
<tr class="separator:aaae16fab841e8d167dba2237d6633cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e873c01a8c2a5ccda3e7fbb5cf15cbf"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a><br class="typebreak"/>
&lt; <a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestRange.html">RequestRange</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a5e873c01a8c2a5ccda3e7fbb5cf15cbf">in_flight_ranges</a> () const </td></tr>
<tr class="separator:a5e873c01a8c2a5ccda3e7fbb5cf15cbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa99ff07e3819f83665b59c5817a3973a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt; <a class="el" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">ScanRange</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#aa99ff07e3819f83665b59c5817a3973a">unstarted_scan_ranges</a> ()</td></tr>
<tr class="separator:aa99ff07e3819f83665b59c5817a3973a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac103ccf5586566702f8c1dfd3a7cb992"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt; <a class="el" href="classimpala_1_1DiskIoMgr_1_1WriteRange.html">WriteRange</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#ac103ccf5586566702f8c1dfd3a7cb992">unstarted_write_ranges</a> ()</td></tr>
<tr class="separator:ac103ccf5586566702f8c1dfd3a7cb992"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9649369d27b9b0629f1fd23bc9ec887a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt; <a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestRange.html">RequestRange</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a9649369d27b9b0629f1fd23bc9ec887a">in_flight_ranges</a> ()</td></tr>
<tr class="separator:a9649369d27b9b0629f1fd23bc9ec887a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94b38485e647552c978ebcba75059ed1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a94b38485e647552c978ebcba75059ed1">PerDiskState</a> ()</td></tr>
<tr class="separator:a94b38485e647552c978ebcba75059ed1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0fa0a95c0edf11343176c00a3c27354"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#af0fa0a95c0edf11343176c00a3c27354">ScheduleContext</a> (<a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext.html">RequestContext</a> *context, int disk_id)</td></tr>
<tr class="separator:af0fa0a95c0edf11343176c00a3c27354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7628dfe399cd79fd639c55c6eb992ed6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a7628dfe399cd79fd639c55c6eb992ed6">IncrementRequestThreadAndDequeue</a> ()</td></tr>
<tr class="separator:a7628dfe399cd79fd639c55c6eb992ed6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9ba5ea9038fa8bb3fecc474d8a5064b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#ad9ba5ea9038fa8bb3fecc474d8a5064b">DecrementRequestThread</a> ()</td></tr>
<tr class="separator:ad9ba5ea9038fa8bb3fecc474d8a5064b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a644070c64623040dffbdecfcfd6b7e58"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a644070c64623040dffbdecfcfd6b7e58">DecrementRequestThreadAndCheckDone</a> (<a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext.html">RequestContext</a> *context)</td></tr>
<tr class="separator:a644070c64623040dffbdecfcfd6b7e58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ae9e735f9ecd4412e8ff8b64ac29287"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a5ae9e735f9ecd4412e8ff8b64ac29287">Reset</a> ()</td></tr>
<tr class="separator:a5ae9e735f9ecd4412e8ff8b64ac29287"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a06383a7358c907c6e715cd3480284b2e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a06383a7358c907c6e715cd3480284b2e">done_</a></td></tr>
<tr class="separator:a06383a7358c907c6e715cd3480284b2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a925d53ea8d7e46d7af1574110f654899"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a925d53ea8d7e46d7af1574110f654899">is_on_queue_</a></td></tr>
<tr class="separator:a925d53ea8d7e46d7af1574110f654899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21806a2abbf3b3a8559f1464adce495e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a21806a2abbf3b3a8559f1464adce495e">num_remaining_ranges_</a></td></tr>
<tr class="separator:a21806a2abbf3b3a8559f1464adce495e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a129ae5a528bacfa0651c1c4ec6d757f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt; <a class="el" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">ScanRange</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a129ae5a528bacfa0651c1c4ec6d757f3">unstarted_scan_ranges_</a></td></tr>
<tr class="separator:a129ae5a528bacfa0651c1c4ec6d757f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4ddda10e02b648c3fcc8c2be8b264d9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt; <a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestRange.html">RequestRange</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#aa4ddda10e02b648c3fcc8c2be8b264d9">in_flight_ranges_</a></td></tr>
<tr class="separator:aa4ddda10e02b648c3fcc8c2be8b264d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85d7361b09f4765bc1203f54a2a5cff4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">ScanRange</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a85d7361b09f4765bc1203f54a2a5cff4">next_scan_range_to_start_</a></td></tr>
<tr class="separator:a85d7361b09f4765bc1203f54a2a5cff4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67ada2753bd071f402f7e9b904e87739"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1AtomicInt.html">AtomicInt</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#a67ada2753bd071f402f7e9b904e87739">num_threads_in_op_</a></td></tr>
<tr class="separator:a67ada2753bd071f402f7e9b904e87739"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8d5b959224b1f15a7cbbe614288a0a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt; <a class="el" href="classimpala_1_1DiskIoMgr_1_1WriteRange.html">WriteRange</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#ac8d5b959224b1f15a7cbbe614288a0a4">unstarted_write_ranges_</a></td></tr>
<tr class="separator:ac8d5b959224b1f15a7cbbe614288a0a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Struct containing state per disk. See comments in the disk read loop on how they are used. </p>

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00302">302</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a94b38485e647552c978ebcba75059ed1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">impala::DiskIoMgr::RequestContext::PerDiskState::PerDiskState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00346">346</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00384">Reset()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad9ba5ea9038fa8bb3fecc474d8a5064b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::DiskIoMgr::RequestContext::PerDiskState::DecrementRequestThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00367">367</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00451">num_threads_in_op_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr_8cc_source.html#l00730">impala::DiskIoMgr::GetNextRequestRange()</a>, <a class="el" href="disk-io-mgr_8cc_source.html#l00866">impala::DiskIoMgr::HandleReadFinished()</a>, <a class="el" href="disk-io-mgr_8cc_source.html#l00845">impala::DiskIoMgr::HandleWriteFinished()</a>, and <a class="el" href="disk-io-mgr_8cc_source.html#l00954">impala::DiskIoMgr::ReadRange()</a>.</p>

</div>
</div>
<a class="anchor" id="a644070c64623040dffbdecfcfd6b7e58"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::DiskIoMgr::RequestContext::PerDiskState::DecrementRequestThreadAndCheckDone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext.html">RequestContext</a> *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Decrement request thread count and do final cleanup if this is the last thread. <a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext.html">RequestContext</a> lock must be taken before this. </p>

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00373">373</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00146">impala::DiskIoMgr::RequestContext::DecrementDiskRefCount()</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00401">done_</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00415">is_on_queue_</a>, and <a class="el" href="disk-io-mgr-internal_8h_source.html#l00451">num_threads_in_op_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr_8cc_source.html#l00730">impala::DiskIoMgr::GetNextRequestRange()</a>, <a class="el" href="disk-io-mgr_8cc_source.html#l00866">impala::DiskIoMgr::HandleReadFinished()</a>, <a class="el" href="disk-io-mgr_8cc_source.html#l00845">impala::DiskIoMgr::HandleWriteFinished()</a>, and <a class="el" href="disk-io-mgr_8cc_source.html#l00954">impala::DiskIoMgr::ReadRange()</a>.</p>

</div>
</div>
<a class="anchor" id="a1018f815a0524b8a36157e62babf85d2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::DiskIoMgr::RequestContext::PerDiskState::done </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00304">304</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00401">done_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00091">impala::DiskIoMgr::RequestContext::AddRequestRange()</a>, and <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00206">impala::DiskIoMgr::RequestContext::Validate()</a>.</p>

</div>
</div>
<a class="anchor" id="a5e873c01a8c2a5ccda3e7fbb5cf15cbf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt;<a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestRange.html">RequestRange</a>&gt;* impala::DiskIoMgr::RequestContext::PerDiskState::in_flight_ranges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00336">336</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00433">in_flight_ranges_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00021">impala::DiskIoMgr::RequestContext::Cancel()</a>, <a class="el" href="disk-io-mgr_8cc_source.html#l00730">impala::DiskIoMgr::GetNextRequestRange()</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00165">impala::DiskIoMgr::RequestContext::ScheduleScanRange()</a>, and <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00206">impala::DiskIoMgr::RequestContext::Validate()</a>.</p>

</div>
</div>
<a class="anchor" id="a9649369d27b9b0629f1fd23bc9ec887a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt;<a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestRange.html">RequestRange</a>&gt;* impala::DiskIoMgr::RequestContext::PerDiskState::in_flight_ranges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00344">344</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00433">in_flight_ranges_</a>.</p>

</div>
</div>
<a class="anchor" id="a7628dfe399cd79fd639c55c6eb992ed6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::DiskIoMgr::RequestContext::PerDiskState::IncrementRequestThreadAndDequeue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Increment the ref count on reader. We need to track the number of threads per reader per disk that are in the unlocked hdfs read code section. This is updated by multiple threads without a lock so we need to use an atomic int. </p>

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00362">362</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00415">is_on_queue_</a>, and <a class="el" href="disk-io-mgr-internal_8h_source.html#l00451">num_threads_in_op_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr_8cc_source.html#l00730">impala::DiskIoMgr::GetNextRequestRange()</a>.</p>

</div>
</div>
<a class="anchor" id="a4bee4f0bb7fa2a60a55b0ea88cd448bc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::DiskIoMgr::RequestContext::PerDiskState::is_on_queue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>We need to have a memory barrier to prevent this load from being reordered with <a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html#aabba9a91ae6d68a2483715c59d0a8ed4">num_threads_in_op()</a>, since these variables are set without the reader lock taken </p>

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00318">318</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00415">is_on_queue_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00206">impala::DiskIoMgr::RequestContext::Validate()</a>.</p>

</div>
</div>
<a class="anchor" id="a53a6e8ae208873c8904f5a21cd223956"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">ScanRange</a>* impala::DiskIoMgr::RequestContext::PerDiskState::next_scan_range_to_start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00310">310</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00443">next_scan_range_to_start_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00091">impala::DiskIoMgr::RequestContext::AddRequestRange()</a>, and <a class="el" href="disk-io-mgr_8cc_source.html#l00730">impala::DiskIoMgr::GetNextRequestRange()</a>.</p>

</div>
</div>
<a class="anchor" id="a61073dd8a4c8cc85e93b39a77e64c954"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int impala::DiskIoMgr::RequestContext::PerDiskState::num_remaining_ranges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00307">307</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00421">num_remaining_ranges_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00091">impala::DiskIoMgr::RequestContext::AddRequestRange()</a>, <a class="el" href="disk-io-mgr_8cc_source.html#l00730">impala::DiskIoMgr::GetNextRequestRange()</a>, <a class="el" href="disk-io-mgr_8cc_source.html#l00866">impala::DiskIoMgr::HandleReadFinished()</a>, <a class="el" href="disk-io-mgr_8cc_source.html#l00845">impala::DiskIoMgr::HandleWriteFinished()</a>, and <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00206">impala::DiskIoMgr::RequestContext::Validate()</a>.</p>

</div>
</div>
<a class="anchor" id="aec745cb2475e5cf63baa9ea873974dec"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int&amp; impala::DiskIoMgr::RequestContext::PerDiskState::num_remaining_ranges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00308">308</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00421">num_remaining_ranges_</a>.</p>

</div>
</div>
<a class="anchor" id="aabba9a91ae6d68a2483715c59d0a8ed4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int impala::DiskIoMgr::RequestContext::PerDiskState::num_threads_in_op </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00324">324</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00451">num_threads_in_op_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr_8cc_source.html#l00866">impala::DiskIoMgr::HandleReadFinished()</a>, and <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00206">impala::DiskIoMgr::RequestContext::Validate()</a>.</p>

</div>
</div>
<a class="anchor" id="a5ae9e735f9ecd4412e8ff8b64ac29287"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::DiskIoMgr::RequestContext::PerDiskState::Reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00384">384</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00401">done_</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00433">in_flight_ranges_</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00415">is_on_queue_</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00443">next_scan_range_to_start_</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00421">num_remaining_ranges_</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00451">num_threads_in_op_</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00425">unstarted_scan_ranges_</a>, and <a class="el" href="disk-io-mgr-internal_8h_source.html#l00459">unstarted_write_ranges_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-internal_8h_source.html#l00346">PerDiskState()</a>.</p>

</div>
</div>
<a class="anchor" id="af0fa0a95c0edf11343176c00a3c27354"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::DiskIoMgr::RequestContext::PerDiskState::ScheduleContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext.html">RequestContext</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>disk_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Schedules the request context on this disk if it's not already on the queue. Context lock must be taken before this. </p>

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00352">352</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr_8h_source.html#l00701">impala::DiskIoMgr::disk_queues_</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00401">done_</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00415">is_on_queue_</a>, and <a class="el" href="disk-io-mgr-internal_8h_source.html#l00192">impala::DiskIoMgr::RequestContext::parent_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00091">impala::DiskIoMgr::RequestContext::AddRequestRange()</a>, <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00021">impala::DiskIoMgr::RequestContext::Cancel()</a>, <a class="el" href="disk-io-mgr_8cc_source.html#l00730">impala::DiskIoMgr::GetNextRequestRange()</a>, and <a class="el" href="disk-io-mgr-internal_8h_source.html#l00165">impala::DiskIoMgr::RequestContext::ScheduleScanRange()</a>.</p>

</div>
</div>
<a class="anchor" id="ad13cd779c50ef72582de4e024ce2a1a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::DiskIoMgr::RequestContext::PerDiskState::set_done </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00305">305</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00401">done_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00091">impala::DiskIoMgr::RequestContext::AddRequestRange()</a>.</p>

</div>
</div>
<a class="anchor" id="aabf7cc079f080704a2f0679ef7954ef9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::DiskIoMgr::RequestContext::PerDiskState::set_next_scan_range_to_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">ScanRange</a> *&#160;</td>
          <td class="paramname"><em>range</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00311">311</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00443">next_scan_range_to_start_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr_8cc_source.html#l00730">impala::DiskIoMgr::GetNextRequestRange()</a>.</p>

</div>
</div>
<a class="anchor" id="a91f61b6e43f35e51ea174b011a562dd7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt;<a class="el" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">ScanRange</a>&gt;* impala::DiskIoMgr::RequestContext::PerDiskState::unstarted_scan_ranges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00330">330</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00425">unstarted_scan_ranges_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00091">impala::DiskIoMgr::RequestContext::AddRequestRange()</a>, <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00021">impala::DiskIoMgr::RequestContext::Cancel()</a>, <a class="el" href="disk-io-mgr_8cc_source.html#l00730">impala::DiskIoMgr::GetNextRequestRange()</a>, and <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00206">impala::DiskIoMgr::RequestContext::Validate()</a>.</p>

</div>
</div>
<a class="anchor" id="aa99ff07e3819f83665b59c5817a3973a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt;<a class="el" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">ScanRange</a>&gt;* impala::DiskIoMgr::RequestContext::PerDiskState::unstarted_scan_ranges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00340">340</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00425">unstarted_scan_ranges_</a>.</p>

</div>
</div>
<a class="anchor" id="aaae16fab841e8d167dba2237d6633cd6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt;<a class="el" href="classimpala_1_1DiskIoMgr_1_1WriteRange.html">WriteRange</a>&gt;* impala::DiskIoMgr::RequestContext::PerDiskState::unstarted_write_ranges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00333">333</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00459">unstarted_write_ranges_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00091">impala::DiskIoMgr::RequestContext::AddRequestRange()</a>, <a class="el" href="disk-io-mgr-reader-context_8cc_source.html#l00021">impala::DiskIoMgr::RequestContext::Cancel()</a>, and <a class="el" href="disk-io-mgr_8cc_source.html#l00730">impala::DiskIoMgr::GetNextRequestRange()</a>.</p>

</div>
</div>
<a class="anchor" id="ac103ccf5586566702f8c1dfd3a7cb992"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt;<a class="el" href="classimpala_1_1DiskIoMgr_1_1WriteRange.html">WriteRange</a>&gt;* impala::DiskIoMgr::RequestContext::PerDiskState::unstarted_write_ranges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00341">341</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>References <a class="el" href="disk-io-mgr-internal_8h_source.html#l00459">unstarted_write_ranges_</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a06383a7358c907c6e715cd3480284b2e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::DiskIoMgr::RequestContext::PerDiskState::done_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If true, this disk is all done for this request context, including any cleanup. If done is true, it means that this request must not be on this disk's queue <em>AND</em> there are no threads currently working on this context. To satisfy this, only the last thread (per disk) can set this to true. </p>

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00401">401</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-internal_8h_source.html#l00373">DecrementRequestThreadAndCheckDone()</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00304">done()</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00384">Reset()</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00352">ScheduleContext()</a>, and <a class="el" href="disk-io-mgr-internal_8h_source.html#l00305">set_done()</a>.</p>

</div>
</div>
<a class="anchor" id="aa4ddda10e02b648c3fcc8c2be8b264d9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt;<a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestRange.html">RequestRange</a>&gt; impala::DiskIoMgr::RequestContext::PerDiskState::in_flight_ranges_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Queue of pending IO requests for this disk in the order that they will be processed. A <a class="el" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">ScanRange</a> is added to this queue when it is returned in <a class="el" href="classimpala_1_1DiskIoMgr.html#a3cc61c88ae6cbb96791d71aee1664137">GetNextRange()</a>, or when it is added with schedule_immediately = true. A <a class="el" href="classimpala_1_1DiskIoMgr_1_1WriteRange.html">WriteRange</a> is added to this queue from unstarted_write_ranges_ for each invocation of <a class="el" href="classimpala_1_1DiskIoMgr.html#a8550d90be93435c85ea623ed75c02a6a">GetNextRequestRange()</a> in <a class="el" href="classimpala_1_1DiskIoMgr.html#a83daff34ce9a9d8eadbfff528e28eb56">WorkLoop()</a>. The size of this queue is always less than or equal to num_remaining_ranges. </p>

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00433">433</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-internal_8h_source.html#l00336">in_flight_ranges()</a>, and <a class="el" href="disk-io-mgr-internal_8h_source.html#l00384">Reset()</a>.</p>

</div>
</div>
<a class="anchor" id="a925d53ea8d7e46d7af1574110f654899"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::DiskIoMgr::RequestContext::PerDiskState::is_on_queue_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For each disk, keeps track if the context is on this disk's queue, indicating the disk must do some work for this context. The disk needs to do work in 4 cases: 1) in_flight_ranges is not empty, the disk needs to read for this reader. 2) next_range_to_start is NULL, the disk needs to prepare a scan range to be read next. 3) the reader has been cancelled and this disk needs to participate in the cleanup. 4) A write range is added to queue. In general, we only want to put a context on the disk queue if there is something useful that can be done. If there's nothing useful, the disk queue will wake up and then remove the reader from the queue. Doing this causes thrashing of the threads. </p>

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00415">415</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-internal_8h_source.html#l00373">DecrementRequestThreadAndCheckDone()</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00362">IncrementRequestThreadAndDequeue()</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00318">is_on_queue()</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00384">Reset()</a>, and <a class="el" href="disk-io-mgr-internal_8h_source.html#l00352">ScheduleContext()</a>.</p>

</div>
</div>
<a class="anchor" id="a85d7361b09f4765bc1203f54a2a5cff4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">ScanRange</a>* impala::DiskIoMgr::RequestContext::PerDiskState::next_scan_range_to_start_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The next range to start for this reader on this disk. Each disk (for each reader) picks the next range to start. The range is set here and also added to the ready_to_start_ranges_ queue. The reader pulls from the queue in FIFO order, so the ranges from different disks are round-robined. When the range is pulled off the ready_to_start_ranges_ queue, it sets this variable to NULL, so the disk knows to populate it again and add it to ready_to_start_ranges_ i.e. it is used as a flag by DiskIoMgr::GetNextScanRange to determine if it needs to add another range to ready_to_start_ranges_. </p>

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00443">443</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-internal_8h_source.html#l00310">next_scan_range_to_start()</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00384">Reset()</a>, and <a class="el" href="disk-io-mgr-internal_8h_source.html#l00311">set_next_scan_range_to_start()</a>.</p>

</div>
</div>
<a class="anchor" id="a21806a2abbf3b3a8559f1464adce495e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int impala::DiskIoMgr::RequestContext::PerDiskState::num_remaining_ranges_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For each disks, the number of request ranges that have not been fully read. In the non-cancellation path, this will hit 0, and done will be set to true by the disk thread. This is undefined in the cancellation path (the various threads notice by looking at the <a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext.html">RequestContext</a>'s state_). </p>

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00421">421</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-internal_8h_source.html#l00307">num_remaining_ranges()</a>, and <a class="el" href="disk-io-mgr-internal_8h_source.html#l00384">Reset()</a>.</p>

</div>
</div>
<a class="anchor" id="a67ada2753bd071f402f7e9b904e87739"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1AtomicInt.html">AtomicInt</a>&lt;int&gt; impala::DiskIoMgr::RequestContext::PerDiskState::num_threads_in_op_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For each disk, the number of threads issuing the underlying read/write on behalf of this context. There are a few places where we release the context lock, do some work, and then grab the lock again. Because we don't hold the lock for the entire operation, we need this ref count to keep track of which thread should do final resource cleanup during cancellation. Only the thread that sees the count at 0 should do the final cleanup. </p>

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00451">451</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-internal_8h_source.html#l00367">DecrementRequestThread()</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00373">DecrementRequestThreadAndCheckDone()</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00362">IncrementRequestThreadAndDequeue()</a>, <a class="el" href="disk-io-mgr-internal_8h_source.html#l00324">num_threads_in_op()</a>, and <a class="el" href="disk-io-mgr-internal_8h_source.html#l00384">Reset()</a>.</p>

</div>
</div>
<a class="anchor" id="a129ae5a528bacfa0651c1c4ec6d757f3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt;<a class="el" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">ScanRange</a>&gt; impala::DiskIoMgr::RequestContext::PerDiskState::unstarted_scan_ranges_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Queue of ranges that have not started being read. This list is exclusive with in_flight_ranges. </p>

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00425">425</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-internal_8h_source.html#l00384">Reset()</a>, and <a class="el" href="disk-io-mgr-internal_8h_source.html#l00330">unstarted_scan_ranges()</a>.</p>

</div>
</div>
<a class="anchor" id="ac8d5b959224b1f15a7cbbe614288a0a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1InternalQueue.html">InternalQueue</a>&lt;<a class="el" href="classimpala_1_1DiskIoMgr_1_1WriteRange.html">WriteRange</a>&gt; impala::DiskIoMgr::RequestContext::PerDiskState::unstarted_write_ranges_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Queue of write ranges to process for this disk. A write range is always added to in_flight_ranges_ in <a class="el" href="classimpala_1_1DiskIoMgr.html#a8550d90be93435c85ea623ed75c02a6a">GetNextRequestRange()</a>. There is a separate unstarted_read_ranges_ and unstarted_write_ranges_ to alternate between reads and writes. (Otherwise, since next_scan_range_to_start is set in <a class="el" href="classimpala_1_1DiskIoMgr.html#a8550d90be93435c85ea623ed75c02a6a">GetNextRequestRange()</a> whenever it is null, repeated calls to <a class="el" href="classimpala_1_1DiskIoMgr.html#a8550d90be93435c85ea623ed75c02a6a">GetNextRequestRange()</a> and <a class="el" href="classimpala_1_1DiskIoMgr.html#a3cc61c88ae6cbb96791d71aee1664137">GetNextRange()</a> may result in only reads being processed) </p>

<p>Definition at line <a class="el" href="disk-io-mgr-internal_8h_source.html#l00459">459</a> of file <a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr-internal_8h_source.html#l00384">Reset()</a>, and <a class="el" href="disk-io-mgr-internal_8h_source.html#l00333">unstarted_write_ranges()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>be/src/runtime/<a class="el" href="disk-io-mgr-internal_8h_source.html">disk-io-mgr-internal.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceimpala.html">impala</a></li><li class="navelem"><a class="el" href="classimpala_1_1DiskIoMgr.html">DiskIoMgr</a></li><li class="navelem"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext.html">RequestContext</a></li><li class="navelem"><a class="el" href="classimpala_1_1DiskIoMgr_1_1RequestContext_1_1PerDiskState.html">PerDiskState</a></li>
    <li class="footer">Generated on Thu May 7 2015 16:10:49 for Impala by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
