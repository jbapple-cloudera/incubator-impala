<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Impala: impala::MemTracker Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Impala
   </div>
   <div id="projectbrief">Impalaistheopensource,nativeanalyticdatabaseforApacheHadoop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classimpala_1_1MemTracker.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classimpala_1_1MemTracker-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">impala::MemTracker Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class is thread-safe.  
 <a href="classimpala_1_1MemTracker.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for impala::MemTracker:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classimpala_1_1MemTracker__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a57b22c9a4dd7ce626288105b8405074b"><td class="memItemLeft" align="right" valign="top">typedef boost::function&lt; void()&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a57b22c9a4dd7ce626288105b8405074b">GcFunction</a></td></tr>
<tr class="memdesc:a57b22c9a4dd7ce626288105b8405074b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signature for function that can be called to free some memory after limit is reached.  <a href="#a57b22c9a4dd7ce626288105b8405074b">More...</a><br/></td></tr>
<tr class="separator:a57b22c9a4dd7ce626288105b8405074b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a60e07049d2b5d7daa6364441f5640155"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a60e07049d2b5d7daa6364441f5640155">MemTracker</a> (int64_t byte_limit=-1, int64_t rm_reserved_limit=-1, const std::string &amp;<a class="el" href="classimpala_1_1MemTracker.html#a627acc2ba4e2a268e2245759d9285449">label</a>=std::string(), <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *<a class="el" href="classimpala_1_1MemTracker.html#a06f5ada3a8fbc6a0993c09953fff5046">parent</a>=NULL, <a class="el" href="classbool.html">bool</a> log_usage_if_zero=true)</td></tr>
<tr class="separator:a60e07049d2b5d7daa6364441f5640155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a603245d360e6acb48f6dc9315a812e5b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a603245d360e6acb48f6dc9315a812e5b">MemTracker</a> (<a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a> *profile, int64_t byte_limit, int64_t rm_reserved_limit=-1, const std::string &amp;<a class="el" href="classimpala_1_1MemTracker.html#a627acc2ba4e2a268e2245759d9285449">label</a>=std::string(), <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *<a class="el" href="classimpala_1_1MemTracker.html#a06f5ada3a8fbc6a0993c09953fff5046">parent</a>=NULL)</td></tr>
<tr class="separator:a603245d360e6acb48f6dc9315a812e5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61668ee5600885ae1dfd38c6c25f2040"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a61668ee5600885ae1dfd38c6c25f2040">MemTracker</a> (<a class="el" href="namespaceimpala.html#a0ac05a476d08e3a556ef87c24d693af1">UIntGauge</a> *consumption_metric, int64_t byte_limit=-1, int64_t rm_reserved_limit=-1, const std::string &amp;<a class="el" href="classimpala_1_1MemTracker.html#a627acc2ba4e2a268e2245759d9285449">label</a>=std::string())</td></tr>
<tr class="separator:a61668ee5600885ae1dfd38c6c25f2040"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04eb3a5a61c4da723b72e46b0f480bc1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a04eb3a5a61c4da723b72e46b0f480bc1">~MemTracker</a> ()</td></tr>
<tr class="separator:a04eb3a5a61c4da723b72e46b0f480bc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a331fc7b172feb51cc50a7b4f6818833c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a331fc7b172feb51cc50a7b4f6818833c">UnregisterFromParent</a> ()</td></tr>
<tr class="memdesc:a331fc7b172feb51cc50a7b4f6818833c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes this tracker from parent_-&gt;child_trackers_.  <a href="#a331fc7b172feb51cc50a7b4f6818833c">More...</a><br/></td></tr>
<tr class="separator:a331fc7b172feb51cc50a7b4f6818833c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa68c50c1233478b117789aa4f0362146"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#aa68c50c1233478b117789aa4f0362146">effective_limit</a> () const </td></tr>
<tr class="memdesc:aa68c50c1233478b117789aa4f0362146"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the minimum of limit and rm_reserved_limit.  <a href="#aa68c50c1233478b117789aa4f0362146">More...</a><br/></td></tr>
<tr class="separator:aa68c50c1233478b117789aa4f0362146"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a039829918860a92eb8216d2bed208117"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a039829918860a92eb8216d2bed208117">Consume</a> (int64_t bytes)</td></tr>
<tr class="memdesc:a039829918860a92eb8216d2bed208117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increases consumption of this tracker and its ancestors by 'bytes'.  <a href="#a039829918860a92eb8216d2bed208117">More...</a><br/></td></tr>
<tr class="separator:a039829918860a92eb8216d2bed208117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaaf383ff1d9e5f7b088fc2577b2b867"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#adaaf383ff1d9e5f7b088fc2577b2b867">ConsumeLocal</a> (int64_t bytes, <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *end_tracker)</td></tr>
<tr class="separator:adaaf383ff1d9e5f7b088fc2577b2b867"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc1e8f74fd7f8bcd299c8f1247dbf189"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#adc1e8f74fd7f8bcd299c8f1247dbf189">ReleaseLocal</a> (int64_t bytes, <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *end_tracker)</td></tr>
<tr class="separator:adc1e8f74fd7f8bcd299c8f1247dbf189"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69978295743ae831cc72723436eaa2ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a69978295743ae831cc72723436eaa2ce">TryConsume</a> (int64_t bytes)</td></tr>
<tr class="separator:a69978295743ae831cc72723436eaa2ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06c4e0963fc1b49a5437eccee965476a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a06c4e0963fc1b49a5437eccee965476a">Release</a> (int64_t bytes)</td></tr>
<tr class="memdesc:a06c4e0963fc1b49a5437eccee965476a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decreases consumption of this tracker and its ancestors by 'bytes'.  <a href="#a06c4e0963fc1b49a5437eccee965476a">More...</a><br/></td></tr>
<tr class="separator:a06c4e0963fc1b49a5437eccee965476a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a2a60fab57afe8305091f0297604c8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a2a2a60fab57afe8305091f0297604c8d">AnyLimitExceeded</a> ()</td></tr>
<tr class="separator:a2a2a60fab57afe8305091f0297604c8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3283a34c1947e96818d476cd5c26fc3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#aa3283a34c1947e96818d476cd5c26fc3">LimitExceeded</a> ()</td></tr>
<tr class="separator:aa3283a34c1947e96818d476cd5c26fc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88d461cd1b369ee3f1fe6471954c5dd8"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a88d461cd1b369ee3f1fe6471954c5dd8">SpareCapacity</a> () const </td></tr>
<tr class="separator:a88d461cd1b369ee3f1fe6471954c5dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bfb5db0c244a1de090b876251aa8ab3"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a0bfb5db0c244a1de090b876251aa8ab3">limit</a> () const </td></tr>
<tr class="separator:a0bfb5db0c244a1de090b876251aa8ab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79bf803286ee54063aca8136191c0813"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a79bf803286ee54063aca8136191c0813">has_limit</a> () const </td></tr>
<tr class="separator:a79bf803286ee54063aca8136191c0813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a627acc2ba4e2a268e2245759d9285449"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a627acc2ba4e2a268e2245759d9285449">label</a> () const </td></tr>
<tr class="separator:a627acc2ba4e2a268e2245759d9285449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6269e463e91acc4a79ff19a98d64585"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#ae6269e463e91acc4a79ff19a98d64585">lowest_limit</a> () const </td></tr>
<tr class="separator:ae6269e463e91acc4a79ff19a98d64585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35f7a4c2c6a5d33f808dda73482fc147"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a35f7a4c2c6a5d33f808dda73482fc147">consumption</a> () const </td></tr>
<tr class="memdesc:a35f7a4c2c6a5d33f808dda73482fc147"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the memory consumed in bytes.  <a href="#a35f7a4c2c6a5d33f808dda73482fc147">More...</a><br/></td></tr>
<tr class="separator:a35f7a4c2c6a5d33f808dda73482fc147"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad523e14b31e21b2bfea21b2e4fc8b60c"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#ad523e14b31e21b2bfea21b2e4fc8b60c">peak_consumption</a> () const </td></tr>
<tr class="separator:ad523e14b31e21b2bfea21b2e4fc8b60c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06f5ada3a8fbc6a0993c09953fff5046"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a06f5ada3a8fbc6a0993c09953fff5046">parent</a> () const </td></tr>
<tr class="separator:a06f5ada3a8fbc6a0993c09953fff5046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3d3b2cf86bbbff5c4c7d1e7ff72662e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#ae3d3b2cf86bbbff5c4c7d1e7ff72662e">AddGcFunction</a> (<a class="el" href="classimpala_1_1MemTracker.html#a57b22c9a4dd7ce626288105b8405074b">GcFunction</a> f)</td></tr>
<tr class="separator:ae3d3b2cf86bbbff5c4c7d1e7ff72662e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeebeb1c4c5cb75a41186a82bf95dfe9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#aeebeb1c4c5cb75a41186a82bf95dfe9d">RegisterMetrics</a> (<a class="el" href="classimpala_1_1MetricGroup.html">MetricGroup</a> *metrics, const std::string &amp;prefix)</td></tr>
<tr class="separator:aeebeb1c4c5cb75a41186a82bf95dfe9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace813a6a8aca0ad1acb9bb40b6abd29a"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#ace813a6a8aca0ad1acb9bb40b6abd29a">LogUsage</a> (const std::string &amp;prefix=&quot;&quot;) const </td></tr>
<tr class="memdesc:ace813a6a8aca0ad1acb9bb40b6abd29a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs the usage of this tracker and all of its children (recursively).  <a href="#ace813a6a8aca0ad1acb9bb40b6abd29a">More...</a><br/></td></tr>
<tr class="separator:ace813a6a8aca0ad1acb9bb40b6abd29a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af51853ec6d3cf2f9d09851b903e8cf03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#af51853ec6d3cf2f9d09851b903e8cf03">EnableLogging</a> (<a class="el" href="classbool.html">bool</a> enable, <a class="el" href="classbool.html">bool</a> log_stack)</td></tr>
<tr class="separator:af51853ec6d3cf2f9d09851b903e8cf03"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a5b39ede97dce30ef1c7c00b117887a56"><td class="memItemLeft" align="right" valign="top">static boost::shared_ptr<br class="typebreak"/>
&lt; <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a5b39ede97dce30ef1c7c00b117887a56">GetQueryMemTracker</a> (const TUniqueId &amp;id, int64_t byte_limit, int64_t rm_reserved_limit, <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *<a class="el" href="classimpala_1_1MemTracker.html#a06f5ada3a8fbc6a0993c09953fff5046">parent</a>, <a class="el" href="classimpala_1_1QueryResourceMgr.html">QueryResourceMgr</a> *res_mgr)</td></tr>
<tr class="separator:a5b39ede97dce30ef1c7c00b117887a56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22fbc3febb516f0f5edd1d40699e6991"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a22fbc3febb516f0f5edd1d40699e6991">GetRequestPoolMemTracker</a> (const std::string &amp;pool_name, <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *<a class="el" href="classimpala_1_1MemTracker.html#a06f5ada3a8fbc6a0993c09953fff5046">parent</a>)</td></tr>
<tr class="separator:a22fbc3febb516f0f5edd1d40699e6991"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:acdc9244140d0a13d701a1c7aa32e7dc1"><td class="memItemLeft" align="right" valign="top">static const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#acdc9244140d0a13d701a1c7aa32e7dc1">COUNTER_NAME</a> = &quot;PeakMemoryUsage&quot;</td></tr>
<tr class="separator:acdc9244140d0a13d701a1c7aa32e7dc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:abd28700a51d556043001a21d6139bb54"><td class="memItemLeft" align="right" valign="top">typedef boost::unordered_map<br class="typebreak"/>
&lt; TUniqueId, boost::weak_ptr<br class="typebreak"/>
&lt; <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#abd28700a51d556043001a21d6139bb54">RequestTrackersMap</a></td></tr>
<tr class="separator:abd28700a51d556043001a21d6139bb54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b4850049812826cd1a9a1bb5272c558"><td class="memItemLeft" align="right" valign="top">typedef boost::unordered_map<br class="typebreak"/>
&lt; std::string, <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a0b4850049812826cd1a9a1bb5272c558">PoolTrackersMap</a></td></tr>
<tr class="separator:a0b4850049812826cd1a9a1bb5272c558"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a93778455c0238c4e276704d793bdebaa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a93778455c0238c4e276704d793bdebaa">CheckLimitExceeded</a> () const </td></tr>
<tr class="separator:a93778455c0238c4e276704d793bdebaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3bd3cc91526f9220949942afe10fdb6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#ab3bd3cc91526f9220949942afe10fdb6">GcMemory</a> (int64_t max_consumption)</td></tr>
<tr class="separator:ab3bd3cc91526f9220949942afe10fdb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0698fab63f56a295ffa6253e881eec03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a0698fab63f56a295ffa6253e881eec03">GcTcmalloc</a> ()</td></tr>
<tr class="separator:a0698fab63f56a295ffa6253e881eec03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a4668a4ded272991a9bbcfd7ad0e93a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a0a4668a4ded272991a9bbcfd7ad0e93a">SetQueryResourceMgr</a> (<a class="el" href="classimpala_1_1QueryResourceMgr.html">QueryResourceMgr</a> *context)</td></tr>
<tr class="memdesc:a0a4668a4ded272991a9bbcfd7ad0e93a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the resource mgr to allow expansion of limits (if NULL, no expansion is possible)  <a href="#a0a4668a4ded272991a9bbcfd7ad0e93a">More...</a><br/></td></tr>
<tr class="separator:a0a4668a4ded272991a9bbcfd7ad0e93a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba1e2842697dcde1b958b34e29422ff6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#aba1e2842697dcde1b958b34e29422ff6">Init</a> ()</td></tr>
<tr class="separator:aba1e2842697dcde1b958b34e29422ff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5e6c55596a75b942a9f21587dda82e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#ae5e6c55596a75b942a9f21587dda82e6">AddChildTracker</a> (<a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *<a class="el" href="expr-benchmark_8cc.html#ad327327fa716227ff7993880cbc4698f">tracker</a>)</td></tr>
<tr class="memdesc:ae5e6c55596a75b942a9f21587dda82e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds tracker to child_trackers_.  <a href="#ae5e6c55596a75b942a9f21587dda82e6">More...</a><br/></td></tr>
<tr class="separator:ae5e6c55596a75b942a9f21587dda82e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1db424e7bb82109b774cfd411f6b5989"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a1db424e7bb82109b774cfd411f6b5989">LogUpdate</a> (<a class="el" href="classbool.html">bool</a> is_consume, int64_t bytes) const </td></tr>
<tr class="memdesc:a1db424e7bb82109b774cfd411f6b5989"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs the stack of the current consume/release. Used for debugging only.  <a href="#a1db424e7bb82109b774cfd411f6b5989">More...</a><br/></td></tr>
<tr class="separator:a1db424e7bb82109b774cfd411f6b5989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcd47f778b1d934e5f12d6d326c79f37"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#abcd47f778b1d934e5f12d6d326c79f37">ExpandRmReservation</a> (int64_t bytes)</td></tr>
<tr class="separator:abcd47f778b1d934e5f12d6d326c79f37"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a8c1a8572e0f09c389e85e573bfb43abe"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a8c1a8572e0f09c389e85e573bfb43abe">LogUsage</a> (const std::string &amp;prefix, const std::list&lt; <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> * &gt; &amp;trackers)</td></tr>
<tr class="separator:a8c1a8572e0f09c389e85e573bfb43abe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a90edab9b8d0abd3b5b1ac515976fc443"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1SpinLock.html">SpinLock</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a90edab9b8d0abd3b5b1ac515976fc443">gc_lock_</a></td></tr>
<tr class="memdesc:a90edab9b8d0abd3b5b1ac515976fc443"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock to protect <a class="el" href="classimpala_1_1MemTracker.html#ab3bd3cc91526f9220949942afe10fdb6">GcMemory()</a>. This prevents many GCs from occurring at once.  <a href="#a90edab9b8d0abd3b5b1ac515976fc443">More...</a><br/></td></tr>
<tr class="separator:a90edab9b8d0abd3b5b1ac515976fc443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f1cc08d7c1d5344401788c2697f2ea2"><td class="memItemLeft" align="right" valign="top">TUniqueId&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a6f1cc08d7c1d5344401788c2697f2ea2">query_id_</a></td></tr>
<tr class="memdesc:a6f1cc08d7c1d5344401788c2697f2ea2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Only valid for MemTrackers returned from <a class="el" href="classimpala_1_1MemTracker.html#a5b39ede97dce30ef1c7c00b117887a56">GetQueryMemTracker()</a>  <a href="#a6f1cc08d7c1d5344401788c2697f2ea2">More...</a><br/></td></tr>
<tr class="separator:a6f1cc08d7c1d5344401788c2697f2ea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab46a6c52603286e6847e77584130cea1"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#ab46a6c52603286e6847e77584130cea1">pool_name_</a></td></tr>
<tr class="memdesc:ab46a6c52603286e6847e77584130cea1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Only valid for MemTrackers returned from <a class="el" href="classimpala_1_1MemTracker.html#a22fbc3febb516f0f5edd1d40699e6991">GetRequestPoolMemTracker()</a>  <a href="#ab46a6c52603286e6847e77584130cea1">More...</a><br/></td></tr>
<tr class="separator:ab46a6c52603286e6847e77584130cea1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe35927635a41d8d693cf0a91dda6700"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#afe35927635a41d8d693cf0a91dda6700">limit_</a></td></tr>
<tr class="separator:afe35927635a41d8d693cf0a91dda6700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23ff7675edc491c16d5111a2b9ac92c6"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a23ff7675edc491c16d5111a2b9ac92c6">rm_reserved_limit_</a></td></tr>
<tr class="separator:a23ff7675edc491c16d5111a2b9ac92c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58260c2dc438186498b11a0c8e5ad8c1"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a58260c2dc438186498b11a0c8e5ad8c1">label_</a></td></tr>
<tr class="separator:a58260c2dc438186498b11a0c8e5ad8c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a144a885ac7d29acb44a44ee28dcd30d9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a144a885ac7d29acb44a44ee28dcd30d9">parent_</a></td></tr>
<tr class="separator:a144a885ac7d29acb44a44ee28dcd30d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa61d60cb0f2709d6bb411d30196f3d6c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1HighWaterMarkCounter.html">RuntimeProfile::HighWaterMarkCounter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#aa61d60cb0f2709d6bb411d30196f3d6c">consumption_</a></td></tr>
<tr class="memdesc:aa61d60cb0f2709d6bb411d30196f3d6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">in bytes; not owned  <a href="#aa61d60cb0f2709d6bb411d30196f3d6c">More...</a><br/></td></tr>
<tr class="separator:aa61d60cb0f2709d6bb411d30196f3d6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a114e5fb55e60482fe91d39b1a5b64daa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1RuntimeProfile_1_1HighWaterMarkCounter.html">RuntimeProfile::HighWaterMarkCounter</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a114e5fb55e60482fe91d39b1a5b64daa">local_counter_</a></td></tr>
<tr class="memdesc:a114e5fb55e60482fe91d39b1a5b64daa"><td class="mdescLeft">&#160;</td><td class="mdescRight">holds consumption_ counter if not tied to a profile  <a href="#a114e5fb55e60482fe91d39b1a5b64daa">More...</a><br/></td></tr>
<tr class="separator:a114e5fb55e60482fe91d39b1a5b64daa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5e013961e5aa3254d3176feb3b3e9ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceimpala.html#a0ac05a476d08e3a556ef87c24d693af1">UIntGauge</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#ad5e013961e5aa3254d3176feb3b3e9ca">consumption_metric_</a></td></tr>
<tr class="separator:ad5e013961e5aa3254d3176feb3b3e9ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35d70e52338acfa91f282ed600659c3f"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a35d70e52338acfa91f282ed600659c3f">all_trackers_</a></td></tr>
<tr class="separator:a35d70e52338acfa91f282ed600659c3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c85075e9b63dcdb29022ed7fdc8a126"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a6c85075e9b63dcdb29022ed7fdc8a126">limit_trackers_</a></td></tr>
<tr class="separator:a6c85075e9b63dcdb29022ed7fdc8a126"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acda6d6bbbafc6334b831e865117fd1fc"><td class="memItemLeft" align="right" valign="top">boost::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#acda6d6bbbafc6334b831e865117fd1fc">child_trackers_lock_</a></td></tr>
<tr class="separator:acda6d6bbbafc6334b831e865117fd1fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a305786dde48ac241b78befb80bba27ed"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a305786dde48ac241b78befb80bba27ed">child_trackers_</a></td></tr>
<tr class="separator:a305786dde48ac241b78befb80bba27ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d262f416f9c53fc202017387ee7887d"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> * &gt;::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a4d262f416f9c53fc202017387ee7887d">child_tracker_it_</a></td></tr>
<tr class="separator:a4d262f416f9c53fc202017387ee7887d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad800a82f7f240e31071c42b8b6945c91"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classimpala_1_1MemTracker.html#a57b22c9a4dd7ce626288105b8405074b">GcFunction</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#ad800a82f7f240e31071c42b8b6945c91">gc_functions_</a></td></tr>
<tr class="memdesc:ad800a82f7f240e31071c42b8b6945c91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions to call after the limit is reached to free memory.  <a href="#ad800a82f7f240e31071c42b8b6945c91">More...</a><br/></td></tr>
<tr class="separator:ad800a82f7f240e31071c42b8b6945c91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acec2cd6a25a1b7f091ee5bbefd34e8a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#acec2cd6a25a1b7f091ee5bbefd34e8a4">auto_unregister_</a></td></tr>
<tr class="separator:acec2cd6a25a1b7f091ee5bbefd34e8a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a813f348c477181410d46fb3380e20ab2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a813f348c477181410d46fb3380e20ab2">enable_logging_</a></td></tr>
<tr class="memdesc:a813f348c477181410d46fb3380e20ab2"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, logs to INFO every consume/release called. Used for debugging.  <a href="#a813f348c477181410d46fb3380e20ab2">More...</a><br/></td></tr>
<tr class="separator:a813f348c477181410d46fb3380e20ab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a484397d6a5f4b1ce63b0c765ffca9ab6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a484397d6a5f4b1ce63b0c765ffca9ab6">log_stack_</a></td></tr>
<tr class="memdesc:a484397d6a5f4b1ce63b0c765ffca9ab6"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, log the stack as well.  <a href="#a484397d6a5f4b1ce63b0c765ffca9ab6">More...</a><br/></td></tr>
<tr class="separator:a484397d6a5f4b1ce63b0c765ffca9ab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78cc8a9bc9954882c85d4216123c9789"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a78cc8a9bc9954882c85d4216123c9789">log_usage_if_zero_</a></td></tr>
<tr class="separator:a78cc8a9bc9954882c85d4216123c9789"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a324f34ebcdd8d3fdb6a586c38a05da"><td class="memItemLeft" align="right" valign="top">boost::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a0a324f34ebcdd8d3fdb6a586c38a05da">resource_acquisition_lock_</a></td></tr>
<tr class="separator:a0a324f34ebcdd8d3fdb6a586c38a05da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c25319c5120f73841193edf39018ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classimpala_1_1QueryResourceMgr.html">QueryResourceMgr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#aa3c25319c5120f73841193edf39018ab">query_resource_mgr_</a></td></tr>
<tr class="separator:aa3c25319c5120f73841193edf39018ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07e361c8a1f979c4d3e67ccb34c32e4f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceimpala.html#ae72a16e1b3afb603ff4b5b4d78f0f0d0">IntCounter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a07e361c8a1f979c4d3e67ccb34c32e4f">num_gcs_metric_</a></td></tr>
<tr class="memdesc:a07e361c8a1f979c4d3e67ccb34c32e4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of times the GcFunctions were called.  <a href="#a07e361c8a1f979c4d3e67ccb34c32e4f">More...</a><br/></td></tr>
<tr class="separator:a07e361c8a1f979c4d3e67ccb34c32e4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6409cb0d412805122bd5943caa7ed419"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a6409cb0d412805122bd5943caa7ed419">bytes_freed_by_last_gc_metric_</a></td></tr>
<tr class="separator:a6409cb0d412805122bd5943caa7ed419"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a715accb0b0e51e94213fc14f111857"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a0a715accb0b0e51e94213fc14f111857">bytes_over_limit_metric_</a></td></tr>
<tr class="separator:a0a715accb0b0e51e94213fc14f111857"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a006d75bdf44883ce46ec567310f46315"><td class="memItemLeft" align="right" valign="top">static const int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#a006d75bdf44883ce46ec567310f46315">GC_RELEASE_SIZE</a> = 128 * 1024L * 1024L</td></tr>
<tr class="separator:a006d75bdf44883ce46ec567310f46315"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5b9a4a292a599adb5ce8b2d2554b74f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classimpala_1_1AtomicInt.html">AtomicInt</a>&lt; int64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#ae5b9a4a292a599adb5ce8b2d2554b74f">released_memory_since_gc_</a></td></tr>
<tr class="separator:ae5b9a4a292a599adb5ce8b2d2554b74f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad303f3729171bcf7d76c4d0cd30d3567"><td class="memItemLeft" align="right" valign="top">static boost::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#ad303f3729171bcf7d76c4d0cd30d3567">static_mem_trackers_lock_</a></td></tr>
<tr class="memdesc:ad303f3729171bcf7d76c4d0cd30d3567"><td class="mdescLeft">&#160;</td><td class="mdescRight">Protects request_to_mem_trackers_ and pool_to_mem_trackers_.  <a href="#ad303f3729171bcf7d76c4d0cd30d3567">More...</a><br/></td></tr>
<tr class="separator:ad303f3729171bcf7d76c4d0cd30d3567"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac61d819df6a894d60a7144002a0138e7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classimpala_1_1MemTracker.html#abd28700a51d556043001a21d6139bb54">RequestTrackersMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#ac61d819df6a894d60a7144002a0138e7">request_to_mem_trackers_</a></td></tr>
<tr class="separator:ac61d819df6a894d60a7144002a0138e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2bc92405c24eda51dd0e0e8e7681305"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classimpala_1_1MemTracker.html#a0b4850049812826cd1a9a1bb5272c558">PoolTrackersMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimpala_1_1MemTracker.html#af2bc92405c24eda51dd0e0e8e7681305">pool_to_mem_trackers_</a></td></tr>
<tr class="separator:af2bc92405c24eda51dd0e0e8e7681305"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class is thread-safe. </p>
<p>A <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a> tracks memory consumption; it contains an optional limit and can be arranged into a tree structure such that the consumption tracked by a <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a> is also tracked by its ancestors. By default, memory consumption is tracked via calls to <a class="el" href="classimpala_1_1MemTracker.html#a039829918860a92eb8216d2bed208117" title="Increases consumption of this tracker and its ancestors by &#39;bytes&#39;. ">Consume()</a>/Release(), either to the tracker itself or to one of its descendents. Alternatively, a consumption metric can specified, and then the metric's value is used as the consumption rather than the tally maintained by <a class="el" href="classimpala_1_1MemTracker.html#a039829918860a92eb8216d2bed208117" title="Increases consumption of this tracker and its ancestors by &#39;bytes&#39;. ">Consume()</a> and <a class="el" href="classimpala_1_1MemTracker.html#a06c4e0963fc1b49a5437eccee965476a" title="Decreases consumption of this tracker and its ancestors by &#39;bytes&#39;. ">Release()</a>. A tcmalloc metric is used to track process memory consumption, since the process memory usage may be higher than the computed total memory (tcmalloc does not release deallocated memory immediately). GcFunctions can be attached to a <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a> in order to free up memory if the limit is reached. If <a class="el" href="classimpala_1_1MemTracker.html#aa3283a34c1947e96818d476cd5c26fc3">LimitExceeded()</a> is called and the limit is exceeded, it will first call the GcFunctions to try to free memory and recheck the limit. For example, the process tracker has a GcFunction that releases any unused memory still held by tcmalloc, so this will be called before the process limit is reported as exceeded. GcFunctions are called in the order they are added, so expensive functions should be added last. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00061">61</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a57b22c9a4dd7ce626288105b8405074b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::function&lt;void ()&gt; <a class="el" href="classimpala_1_1MemTracker.html#a57b22c9a4dd7ce626288105b8405074b">impala::MemTracker::GcFunction</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signature for function that can be called to free some memory after limit is reached. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00308">308</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0b4850049812826cd1a9a1bb5272c558"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::unordered_map&lt;std::string, <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a>*&gt; <a class="el" href="classimpala_1_1MemTracker.html#a0b4850049812826cd1a9a1bb5272c558">impala::MemTracker::PoolTrackersMap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>All per-request pool <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a> objects. It is assumed that request pools will live for the entire duration of the process lifetime. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00393">393</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

</div>
</div>
<a class="anchor" id="abd28700a51d556043001a21d6139bb54"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::unordered_map&lt;TUniqueId, boost::weak_ptr&lt;<a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a>&gt; &gt; <a class="el" href="classimpala_1_1MemTracker.html#abd28700a51d556043001a21d6139bb54">impala::MemTracker::RequestTrackersMap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>All per-request <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a> objects that are in use. For memory management, this map contains only weak ptrs. MemTrackers that are handed out via <a class="el" href="classimpala_1_1MemTracker.html#a5b39ede97dce30ef1c7c00b117887a56">GetQueryMemTracker()</a> are shared ptrs. When all the shared ptrs are no longer referenced, the <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a> d'tor will be called at which point the weak ptr will be removed from the map. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00388">388</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a60e07049d2b5d7daa6364441f5640155"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">impala::MemTracker::MemTracker </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>byte_limit</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>rm_reserved_limit</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>label</em> = <code>std::string()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>log_usage_if_zero</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>'byte_limit' &lt; 0 means no limit 'label' is the label used in the usage string (<a class="el" href="classimpala_1_1MemTracker.html#ace813a6a8aca0ad1acb9bb40b6abd29a" title="Logs the usage of this tracker and all of its children (recursively). ">LogUsage()</a>) If 'log_usage_if_zero' is false, this tracker (and its children) will not be included in <a class="el" href="classimpala_1_1MemTracker.html#ace813a6a8aca0ad1acb9bb40b6abd29a" title="Logs the usage of this tracker and all of its children (recursively). ">LogUsage()</a> output if consumption is 0. </p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00156">GetQueryMemTracker()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00134">GetRequestPoolMemTracker()</a>.</p>

</div>
</div>
<a class="anchor" id="a603245d360e6acb48f6dc9315a812e5b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">impala::MemTracker::MemTracker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1RuntimeProfile.html">RuntimeProfile</a> *&#160;</td>
          <td class="paramname"><em>profile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>byte_limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>rm_reserved_limit</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>label</em> = <code>std::string()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>C'tor for tracker for which consumption counter is created as part of a profile. The counter is created with name COUNTER_NAME. </p>

<p>Definition at line <a class="el" href="mem-tracker_8cc_source.html#l00067">67</a> of file <a class="el" href="mem-tracker_8cc_source.html">mem-tracker.cc</a>.</p>

<p>References <a class="el" href="mem-tracker_8cc_source.html#l00122">AddChildTracker()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00109">Init()</a>, and <a class="el" href="mem-tracker_8h_source.html#l00412">parent_</a>.</p>

</div>
</div>
<a class="anchor" id="a61668ee5600885ae1dfd38c6c25f2040"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">impala::MemTracker::MemTracker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceimpala.html#a0ac05a476d08e3a556ef87c24d693af1">UIntGauge</a> *&#160;</td>
          <td class="paramname"><em>consumption_metric</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>byte_limit</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>rm_reserved_limit</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>label</em> = <code>std::string()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>C'tor for tracker that uses consumption_metric as the consumption value. <a class="el" href="classimpala_1_1MemTracker.html#a039829918860a92eb8216d2bed208117" title="Increases consumption of this tracker and its ancestors by &#39;bytes&#39;. ">Consume()</a>/Release() can still be called. This is used for the process tracker. </p>

</div>
</div>
<a class="anchor" id="a04eb3a5a61c4da723b72e46b0f480bc1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">impala::MemTracker::~MemTracker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8cc_source.html#l00193">193</a> of file <a class="el" href="mem-tracker_8cc_source.html">mem-tracker.cc</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00445">auto_unregister_</a>, <a class="el" href="mem-tracker_8h_source.html#l00400">pool_name_</a>, <a class="el" href="mem-tracker_8h_source.html#l00394">pool_to_mem_trackers_</a>, <a class="el" href="mem-tracker_8h_source.html#l00397">query_id_</a>, <a class="el" href="mem-tracker_8h_source.html#l00389">request_to_mem_trackers_</a>, <a class="el" href="mem-tracker_8h_source.html#l00381">static_mem_trackers_lock_</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00127">UnregisterFromParent()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae5e6c55596a75b942a9f21587dda82e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::MemTracker::AddChildTracker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *&#160;</td>
          <td class="paramname"><em>tracker</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds tracker to child_trackers_. </p>

<p>Definition at line <a class="el" href="mem-tracker_8cc_source.html#l00122">122</a> of file <a class="el" href="mem-tracker_8cc_source.html">mem-tracker.cc</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00435">child_tracker_it_</a>, <a class="el" href="mem-tracker_8h_source.html#l00431">child_trackers_</a>, <a class="el" href="mem-tracker_8h_source.html#l00430">child_trackers_lock_</a>, and <a class="el" href="expr-benchmark_8cc_source.html#l00090">tracker</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00067">MemTracker()</a>.</p>

</div>
</div>
<a class="anchor" id="ae3d3b2cf86bbbff5c4c7d1e7ff72662e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::MemTracker::AddGcFunction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1MemTracker.html#a57b22c9a4dd7ce626288105b8405074b">GcFunction</a>&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Add a function 'f' to be called if the limit is reached. 'f' does not need to be thread-safe as long as it is added to only one <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a>. Note that 'f' must be valid for the lifetime of this <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a>. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00313">313</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00438">gc_functions_</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr_8cc_source.html#l00296">impala::DiskIoMgr::Init()</a>, and <a class="el" href="mem-tracker-test_8cc_source.html#l00145">impala::TEST()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a2a60fab57afe8305091f0297604c8d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::MemTracker::AnyLimitExceeded </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true if a valid limit of this tracker or one of its ancestors is exceeded. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00246">246</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00426">limit_trackers_</a>, and <a class="el" href="expr-benchmark_8cc_source.html#l00090">tracker</a>.</p>

<p>Referenced by <a class="el" href="mem-pool-test_8cc_source.html#l00219">impala::TEST()</a>.</p>

</div>
</div>
<a class="anchor" id="a93778455c0238c4e276704d793bdebaa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::MemTracker::CheckLimitExceeded </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00330">330</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00298">consumption()</a>, and <a class="el" href="mem-tracker_8h_source.html#l00404">limit_</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00257">LimitExceeded()</a>.</p>

</div>
</div>
<a class="anchor" id="a039829918860a92eb8216d2bed208117"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::MemTracker::Consume </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Increases consumption of this tracker and its ancestors by 'bytes'. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00118">118</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00425">all_trackers_</a>, <a class="el" href="mem-tracker_8h_source.html#l00415">consumption_</a>, <a class="el" href="mem-tracker_8h_source.html#l00423">consumption_metric_</a>, <a class="el" href="mem-tracker_8h_source.html#l00448">enable_logging_</a>, <a class="el" href="mem-tracker_8cc_source.html#l00255">LogUpdate()</a>, <a class="el" href="mem-tracker_8h_source.html#l00412">parent_</a>, <a class="el" href="mem-tracker_8h_source.html#l00209">Release()</a>, <a class="el" href="runtime-profile_8h_source.html#l00148">impala::RuntimeProfile::HighWaterMarkCounter::Set()</a>, <a class="el" href="expr-benchmark_8cc_source.html#l00090">tracker</a>, and <a class="el" href="compiler-util_8h_source.html#l00033">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="mem-pool_8cc_source.html#l00161">impala::MemPool::AcquireData()</a>, <a class="el" href="mem-pool_8cc_source.html#l00092">impala::MemPool::FindChunk()</a>, <a class="el" href="disk-io-mgr_8cc_source.html#l00627">impala::DiskIoMgr::GetFreeBuffer()</a>, <a class="el" href="hdfs-sequence-table-writer_8cc_source.html#l00040">impala::HdfsSequenceTableWriter::HdfsSequenceTableWriter()</a>, <a class="el" href="hdfs-text-table-writer_8cc_source.html#l00059">impala::HdfsTextTableWriter::Init()</a>, <a class="el" href="old-hash-table_8cc_source.html#l00054">impala::OldHashTable::OldHashTable()</a>, <a class="el" href="mem-tracker_8h_source.html#l00209">Release()</a>, <a class="el" href="disk-io-mgr_8cc_source.html#l00187">impala::DiskIoMgr::BufferDescriptor::SetMemTracker()</a>, and <a class="el" href="mem-tracker-test_8cc_source.html#l00025">impala::TEST()</a>.</p>

</div>
</div>
<a class="anchor" id="adaaf383ff1d9e5f7b088fc2577b2b867"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::MemTracker::ConsumeLocal </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *&#160;</td>
          <td class="paramname"><em>end_tracker</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Increases/Decreases the consumption of this tracker and the ancestors up to (but not including) end_tracker. This is useful if we want to move tracking between trackers that share a common (i.e. end_tracker) ancestor. This happens when we want to update tracking on a particular mem tracker but the consumption against the limit recorded in one of its ancestors already happened. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00145">145</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00425">all_trackers_</a>, <a class="el" href="mem-tracker_8h_source.html#l00423">consumption_metric_</a>, <a class="el" href="mem-tracker_8h_source.html#l00448">enable_logging_</a>, <a class="el" href="mem-tracker_8h_source.html#l00282">has_limit()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00255">LogUpdate()</a>, and <a class="el" href="compiler-util_8h_source.html#l00033">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="buffered-block-mgr_8cc_source.html#l00278">impala::BufferedBlockMgr::ConsumeMemory()</a>, and <a class="el" href="mem-tracker_8h_source.html#l00155">ReleaseLocal()</a>.</p>

</div>
</div>
<a class="anchor" id="a35f7a4c2c6a5d33f808dda73482fc147"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::MemTracker::consumption </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the memory consumed in bytes. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00298">298</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00415">consumption_</a>, and <a class="el" href="runtime-profile_8h_source.html#l00153">impala::RuntimeProfile::HighWaterMarkCounter::current_value()</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00330">CheckLimitExceeded()</a>, <a class="el" href="hdfs-scan-node_8cc_source.html#l00706">impala::HdfsScanNode::EnoughMemoryForScannerThread()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00263">GcMemory()</a>, <a class="el" href="mem-tracker_8h_source.html#l00257">LimitExceeded()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00255">LogUpdate()</a>, <a class="el" href="default-path-handlers_8cc_source.html#l00081">MemUsageHandler()</a>, <a class="el" href="plan-fragment-executor_8cc_source.html#l00080">impala::PlanFragmentExecutor::Prepare()</a>, <a class="el" href="mem-pool-test_8cc_source.html#l00219">impala::TEST()</a>, <a class="el" href="buffered-block-mgr-test_8cc_source.html#l00339">impala::TEST_F()</a>, and <a class="el" href="admission-controller_8cc_source.html#l00554">impala::AdmissionController::UpdateLocalMemUsage()</a>.</p>

</div>
</div>
<a class="anchor" id="aa68c50c1233478b117789aa4f0362146"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::MemTracker::effective_limit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the minimum of limit and rm_reserved_limit. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00110">110</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00404">limit_</a>, and <a class="el" href="mem-tracker_8h_source.html#l00409">rm_reserved_limit_</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00163">TryConsume()</a>.</p>

</div>
</div>
<a class="anchor" id="af51853ec6d3cf2f9d09851b903e8cf03"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::MemTracker::EnableLogging </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>enable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>log_stack</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00322">322</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00448">enable_logging_</a>, and <a class="el" href="mem-tracker_8h_source.html#l00450">log_stack_</a>.</p>

</div>
</div>
<a class="anchor" id="abcd47f778b1d934e5f12d6d326c79f37"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::MemTracker::ExpandRmReservation </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Try to expand the limit (by asking the resource broker for more memory) by at least 'bytes'. Returns false if not possible, true if the request succeeded. May allocate more memory than was requested. </p>

<p>Definition at line <a class="el" href="mem-tracker_8cc_source.html#l00294">294</a> of file <a class="el" href="mem-tracker_8cc_source.html">mem-tracker.cc</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00425">all_trackers_</a>, <a class="el" href="mem-tracker_8h_source.html#l00415">consumption_</a>, <a class="el" href="query-resource-mgr_8cc_source.html#l00107">impala::QueryResourceMgr::CreateExpansionRequest()</a>, <a class="el" href="runtime-profile_8h_source.html#l00153">impala::RuntimeProfile::HighWaterMarkCounter::current_value()</a>, <a class="el" href="resource-broker_8cc_source.html#l00503">impala::ResourceBroker::Expand()</a>, <a class="el" href="status_8cc_source.html#l00184">impala::Status::GetDetail()</a>, <a class="el" href="exec-env_8h_source.html#l00063">impala::ExecEnv::GetInstance()</a>, <a class="el" href="mem-tracker_8h_source.html#l00404">limit_</a>, <a class="el" href="status_8h_source.html#l00172">impala::Status::ok()</a>, <a class="el" href="pretty-printer_8h_source.html#l00033">impala::PrettyPrinter::Print()</a>, <a class="el" href="mem-tracker_8h_source.html#l00462">query_resource_mgr_</a>, <a class="el" href="mem-tracker_8h_source.html#l00458">resource_acquisition_lock_</a>, <a class="el" href="exec-env_8h_source.html#l00095">impala::ExecEnv::resource_broker()</a>, <a class="el" href="mem-tracker_8h_source.html#l00409">rm_reserved_limit_</a>, and <a class="el" href="expr-benchmark_8cc_source.html#l00090">tracker</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00163">TryConsume()</a>.</p>

</div>
</div>
<a class="anchor" id="ab3bd3cc91526f9220949942afe10fdb6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::MemTracker::GcMemory </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>max_consumption</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If consumption is higher than max_consumption, attempts to free memory by calling any added GC functions. Returns true if max_consumption is still exceeded. Takes gc_lock. Updates metrics if initialized. </p>

<p>Definition at line <a class="el" href="mem-tracker_8cc_source.html#l00263">263</a> of file <a class="el" href="mem-tracker_8cc_source.html">mem-tracker.cc</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00469">bytes_freed_by_last_gc_metric_</a>, <a class="el" href="mem-tracker_8h_source.html#l00298">consumption()</a>, <a class="el" href="mem-tracker_8h_source.html#l00415">consumption_</a>, <a class="el" href="mem-tracker_8h_source.html#l00423">consumption_metric_</a>, <a class="el" href="mem-tracker_8h_source.html#l00438">gc_functions_</a>, <a class="el" href="mem-tracker_8h_source.html#l00378">gc_lock_</a>, <a class="el" href="mem-tracker_8h_source.html#l00465">num_gcs_metric_</a>, and <a class="el" href="runtime-profile_8h_source.html#l00148">impala::RuntimeProfile::HighWaterMarkCounter::Set()</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00257">LimitExceeded()</a>, and <a class="el" href="mem-tracker_8h_source.html#l00163">TryConsume()</a>.</p>

</div>
</div>
<a class="anchor" id="a0698fab63f56a295ffa6253e881eec03"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::MemTracker::GcTcmalloc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when the total release memory is larger than GC_RELEASE_SIZE. TcMalloc holds onto released memory and very slowly (if ever) releases it back to the OS. This is problematic since it is memory we are not constantly tracking which can cause us to go way over mem limits. </p>

<p>Definition at line <a class="el" href="mem-tracker_8cc_source.html#l00285">285</a> of file <a class="el" href="mem-tracker_8cc_source.html">mem-tracker.cc</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00375">released_memory_since_gc_</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00209">Release()</a>.</p>

</div>
</div>
<a class="anchor" id="a5b39ede97dce30ef1c7c00b117887a56"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">shared_ptr&lt; <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> &gt; impala::MemTracker::GetQueryMemTracker </td>
          <td>(</td>
          <td class="paramtype">const TUniqueId &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>byte_limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>rm_reserved_limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1QueryResourceMgr.html">QueryResourceMgr</a> *&#160;</td>
          <td class="paramname"><em>res_mgr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a> object for query 'id'. Calling this with the same id will return the same <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a> object. An example of how this is used is to pass it the same query id for all fragments of that query running on this machine. This way, we have per-query limits rather than per-fragment. The first time this is called for an id, a new <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a> object is created with 'parent' as the parent tracker. byte_limit and parent must be the same for all GetMemTracker() calls with the same id. </p>

<p>Definition at line <a class="el" href="mem-tracker_8cc_source.html#l00156">156</a> of file <a class="el" href="mem-tracker_8cc_source.html">mem-tracker.cc</a>.</p>

<p>References <a class="el" href="classimpala_1_1MemTracker.html#a60e07049d2b5d7daa6364441f5640155">MemTracker()</a>, <a class="el" href="mem-tracker_8h_source.html#l00412">parent_</a>, <a class="el" href="mem-info_8h_source.html#l00036">impala::MemInfo::physical_mem()</a>, <a class="el" href="pretty-printer_8h_source.html#l00033">impala::PrettyPrinter::Print()</a>, <a class="el" href="mem-tracker_8h_source.html#l00389">request_to_mem_trackers_</a>, <a class="el" href="mem-tracker_8h_source.html#l00381">static_mem_trackers_lock_</a>, <a class="el" href="expr-benchmark_8cc_source.html#l00090">tracker</a>, and <a class="el" href="logging_8h_source.html#l00057">VLOG_QUERY</a>.</p>

<p>Referenced by <a class="el" href="runtime-state_8cc_source.html#l00152">impala::RuntimeState::InitMemTrackers()</a>.</p>

</div>
</div>
<a class="anchor" id="a22fbc3febb516f0f5edd1d40699e6991"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> * impala::MemTracker::GetRequestPoolMemTracker </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pool_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *&#160;</td>
          <td class="paramname"><em>parent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a> object for request pool 'pool_name'. Calling this with the same 'pool_name' will return the same <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a> object. This is used to track the local memory usage of all requests executing in this pool. The first time this is called for a pool, a new <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a> object is created with the parent tracker if it is not NULL. If the parent is NULL, no new tracker will be created and NULL is returned. There is no explicit per-pool byte_limit set at any particular impalad, so newly created trackers will always have a limit of -1. </p>

<p>Definition at line <a class="el" href="mem-tracker_8cc_source.html#l00134">134</a> of file <a class="el" href="mem-tracker_8cc_source.html">mem-tracker.cc</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00445">auto_unregister_</a>, <a class="el" href="classimpala_1_1MemTracker.html#a60e07049d2b5d7daa6364441f5640155">MemTracker()</a>, <a class="el" href="mem-tracker_8h_source.html#l00400">pool_name_</a>, <a class="el" href="mem-tracker_8h_source.html#l00394">pool_to_mem_trackers_</a>, <a class="el" href="mem-tracker_8cc_source.html#l00044">impala::REQUEST_POOL_MEM_TRACKER_LABEL_FORMAT</a>, <a class="el" href="mem-tracker_8h_source.html#l00381">static_mem_trackers_lock_</a>, and <a class="el" href="expr-benchmark_8cc_source.html#l00090">tracker</a>.</p>

<p>Referenced by <a class="el" href="runtime-state_8cc_source.html#l00152">impala::RuntimeState::InitMemTrackers()</a>, and <a class="el" href="admission-controller_8cc_source.html#l00554">impala::AdmissionController::UpdateLocalMemUsage()</a>.</p>

</div>
</div>
<a class="anchor" id="a79bf803286ee54063aca8136191c0813"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::MemTracker::has_limit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00282">282</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00404">limit_</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00145">ConsumeLocal()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00109">Init()</a>, <a class="el" href="mem-tracker_8h_source.html#l00287">lowest_limit()</a>, and <a class="el" href="mem-tracker-test_8cc_source.html#l00025">impala::TEST()</a>.</p>

</div>
</div>
<a class="anchor" id="aba1e2842697dcde1b958b34e29422ff6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::MemTracker::Init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Walks the <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a> hierarchy and populates all_trackers_ and limit_trackers_ </p>

<p>Definition at line <a class="el" href="mem-tracker_8cc_source.html#l00109">109</a> of file <a class="el" href="mem-tracker_8cc_source.html">mem-tracker.cc</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00425">all_trackers_</a>, <a class="el" href="mem-tracker_8h_source.html#l00282">has_limit()</a>, <a class="el" href="mem-tracker_8h_source.html#l00404">limit_</a>, <a class="el" href="mem-tracker_8h_source.html#l00426">limit_trackers_</a>, <a class="el" href="mem-tracker_8h_source.html#l00412">parent_</a>, <a class="el" href="mem-tracker_8h_source.html#l00409">rm_reserved_limit_</a>, and <a class="el" href="expr-benchmark_8cc_source.html#l00090">tracker</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00067">MemTracker()</a>.</p>

</div>
</div>
<a class="anchor" id="a627acc2ba4e2a268e2245759d9285449"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::string&amp; impala::MemTracker::label </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00283">283</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00411">label_</a>.</p>

<p>Referenced by <a class="el" href="runtime-state_8cc_source.html#l00247">impala::RuntimeState::SetMemLimitExceeded()</a>.</p>

</div>
</div>
<a class="anchor" id="a0bfb5db0c244a1de090b876251aa8ab3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::MemTracker::limit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00281">281</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00404">limit_</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00287">lowest_limit()</a>, <a class="el" href="default-path-handlers_8cc_source.html#l00081">MemUsageHandler()</a>, and <a class="el" href="mem-tracker_8h_source.html#l00163">TryConsume()</a>.</p>

</div>
</div>
<a class="anchor" id="aa3283a34c1947e96818d476cd5c26fc3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::MemTracker::LimitExceeded </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If this tracker has a limit, checks the limit and attempts to free up some memory if the limit is exceeded by calling any added GC functions. Returns true if the limit is exceeded after calling the GC functions. Returns false if there is no limit. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00257">257</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00474">bytes_over_limit_metric_</a>, <a class="el" href="mem-tracker_8h_source.html#l00330">CheckLimitExceeded()</a>, <a class="el" href="mem-tracker_8h_source.html#l00298">consumption()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00263">GcMemory()</a>, <a class="el" href="mem-tracker_8h_source.html#l00404">limit_</a>, and <a class="el" href="compiler-util_8h_source.html#l00033">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="disk-io-mgr_8cc_source.html#l00730">impala::DiskIoMgr::GetNextRequestRange()</a>, <a class="el" href="old-hash-table_8cc_source.html#l00732">impala::OldHashTable::GrowNodeArray()</a>, <a class="el" href="hash-table_8cc_source.html#l00345">impala::HashTable::GrowNodeArray()</a>, <a class="el" href="hash-table-test_8cc_source.html#l00298">impala::HashTableTest::GrowTableTest()</a>, <a class="el" href="runtime-state_8cc_source.html#l00247">impala::RuntimeState::SetMemLimitExceeded()</a>, <a class="el" href="mem-pool-test_8cc_source.html#l00219">impala::TEST()</a>, and <a class="el" href="old-hash-table-test_8cc_source.html#l00285">impala::TEST_F()</a>.</p>

</div>
</div>
<a class="anchor" id="a1db424e7bb82109b774cfd411f6b5989"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::MemTracker::LogUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>is_consume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Logs the stack of the current consume/release. Used for debugging only. </p>

<p>Definition at line <a class="el" href="mem-tracker_8cc_source.html#l00255">255</a> of file <a class="el" href="mem-tracker_8cc_source.html">mem-tracker.cc</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00298">consumption()</a>, <a class="el" href="debug-util_8cc_source.html#l00246">impala::GetStackTrace()</a>, <a class="el" href="mem-tracker_8h_source.html#l00404">limit_</a>, and <a class="el" href="mem-tracker_8h_source.html#l00450">log_stack_</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00118">Consume()</a>, <a class="el" href="mem-tracker_8h_source.html#l00145">ConsumeLocal()</a>, <a class="el" href="mem-tracker_8h_source.html#l00209">Release()</a>, and <a class="el" href="mem-tracker_8h_source.html#l00163">TryConsume()</a>.</p>

</div>
</div>
<a class="anchor" id="ace813a6a8aca0ad1acb9bb40b6abd29a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string impala::MemTracker::LogUsage </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>prefix</em> = <code>&quot;&quot;</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logs the usage of this tracker and all of its children (recursively). </p>

<p>Referenced by <a class="el" href="exec-node_8cc_source.html#l00166">impala::ExecNode::Close()</a>, <a class="el" href="default-path-handlers_8cc_source.html#l00081">MemUsageHandler()</a>, and <a class="el" href="runtime-state_8cc_source.html#l00247">impala::RuntimeState::SetMemLimitExceeded()</a>.</p>

</div>
</div>
<a class="anchor" id="a8c1a8572e0f09c389e85e573bfb43abe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string impala::MemTracker::LogUsage </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::list&lt; <a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>trackers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae6269e463e91acc4a79ff19a98d64585"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::MemTracker::lowest_limit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the lowest limit for this tracker and its ancestors. Returns -1 if there is no limit. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00287">287</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00282">has_limit()</a>, <a class="el" href="mem-tracker_8h_source.html#l00281">limit()</a>, and <a class="el" href="mem-tracker_8h_source.html#l00426">limit_trackers_</a>.</p>

</div>
</div>
<a class="anchor" id="a06f5ada3a8fbc6a0993c09953fff5046"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a>* impala::MemTracker::parent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00305">305</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00412">parent_</a>.</p>

</div>
</div>
<a class="anchor" id="ad523e14b31e21b2bfea21b2e4fc8b60c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::MemTracker::peak_consumption </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Note that if consumption_ is based on consumption_metric_, this will the max value we've recorded in <a class="el" href="classimpala_1_1MemTracker.html#a35f7a4c2c6a5d33f808dda73482fc147" title="Returns the memory consumed in bytes. ">consumption()</a>, not necessarily the highest value consumption_metric_ has ever reached. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00303">303</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00415">consumption_</a>, and <a class="el" href="runtime-profile_8h_source.html#l00108">impala::RuntimeProfile::Counter::value()</a>.</p>

</div>
</div>
<a class="anchor" id="aeebeb1c4c5cb75a41186a82bf95dfe9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void impala::MemTracker::RegisterMetrics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1MetricGroup.html">MetricGroup</a> *&#160;</td>
          <td class="paramname"><em>metrics</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>prefix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register this <a class="el" href="classimpala_1_1MemTracker.html" title="This class is thread-safe. ">MemTracker</a>'s metrics. Each key will be of the form "&lt;prefix&gt;.&lt;metric name&gt;". </p>

<p>Definition at line <a class="el" href="mem-tracker_8cc_source.html#l00203">203</a> of file <a class="el" href="mem-tracker_8cc_source.html">mem-tracker.cc</a>.</p>

<p>References <a class="el" href="metrics_8h_source.html#l00239">impala::MetricGroup::AddCounter()</a>, <a class="el" href="metrics_8h_source.html#l00223">impala::MetricGroup::AddGauge()</a>, <a class="el" href="mem-tracker_8h_source.html#l00469">bytes_freed_by_last_gc_metric_</a>, <a class="el" href="mem-tracker_8h_source.html#l00474">bytes_over_limit_metric_</a>, and <a class="el" href="mem-tracker_8h_source.html#l00465">num_gcs_metric_</a>.</p>

</div>
</div>
<a class="anchor" id="a06c4e0963fc1b49a5437eccee965476a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::MemTracker::Release </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decreases consumption of this tracker and its ancestors by 'bytes'. </p>
<p>If a UDF calls FunctionContext::TrackAllocation() but allocates less than the reported amount, the subsequent call to FunctionContext::Free() may cause the process mem tracker to go negative until it is synced back to the tcmalloc metric. Don't blow up in this case. (Note that this doesn't affect non-process trackers since we can enforce that the reported memory usage is internally consistent.)</p>
<p>TODO: Release brokered memory? </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00209">209</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00425">all_trackers_</a>, <a class="el" href="mem-tracker_8h_source.html#l00118">Consume()</a>, <a class="el" href="mem-tracker_8h_source.html#l00415">consumption_</a>, <a class="el" href="mem-tracker_8h_source.html#l00423">consumption_metric_</a>, <a class="el" href="mem-tracker_8h_source.html#l00448">enable_logging_</a>, <a class="el" href="mem-tracker_8h_source.html#l00371">GC_RELEASE_SIZE</a>, <a class="el" href="mem-tracker_8cc_source.html#l00285">GcTcmalloc()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00255">LogUpdate()</a>, <a class="el" href="mem-tracker_8h_source.html#l00412">parent_</a>, <a class="el" href="mem-tracker_8h_source.html#l00375">released_memory_since_gc_</a>, <a class="el" href="runtime-profile_8h_source.html#l00148">impala::RuntimeProfile::HighWaterMarkCounter::Set()</a>, <a class="el" href="expr-benchmark_8cc_source.html#l00090">tracker</a>, <a class="el" href="compiler-util_8h_source.html#l00033">UNLIKELY</a>, and <a class="el" href="atomic_8h_source.html#l00105">impala::AtomicInt&lt; T &gt;::UpdateAndFetch()</a>.</p>

<p>Referenced by <a class="el" href="mem-pool_8cc_source.html#l00161">impala::MemPool::AcquireData()</a>, <a class="el" href="hdfs-text-table-writer_8cc_source.html#l00082">impala::HdfsTextTableWriter::Close()</a>, <a class="el" href="old-hash-table_8cc_source.html#l00093">impala::OldHashTable::Close()</a>, <a class="el" href="mem-tracker_8h_source.html#l00118">Consume()</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l00783">impala::BufferedBlockMgr::DeleteBlock()</a>, <a class="el" href="query-exec-state_8cc_source.html#l00636">impala::ImpalaServer::QueryExecState::FetchRowsInternal()</a>, <a class="el" href="mem-pool_8cc_source.html#l00073">impala::MemPool::FreeAll()</a>, <a class="el" href="mem-tracker-test_8cc_source.html#l00139">impala::GcFunctionHelper::GcFunc()</a>, <a class="el" href="disk-io-mgr_8cc_source.html#l00661">impala::DiskIoMgr::GcIoBuffers()</a>, <a class="el" href="init_8cc_source.html#l00074">MaintenanceThread()</a>, <a class="el" href="disk-io-mgr_8cc_source.html#l00696">impala::DiskIoMgr::ReturnFreeBuffer()</a>, and <a class="el" href="mem-tracker-test_8cc_source.html#l00025">impala::TEST()</a>.</p>

</div>
</div>
<a class="anchor" id="adc1e8f74fd7f8bcd299c8f1247dbf189"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::MemTracker::ReleaseLocal </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a> *&#160;</td>
          <td class="paramname"><em>end_tracker</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00155">155</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00145">ConsumeLocal()</a>.</p>

<p>Referenced by <a class="el" href="buffered-block-mgr_8cc_source.html#l00354">impala::BufferedBlockMgr::ReleaseMemory()</a>.</p>

</div>
</div>
<a class="anchor" id="a0a4668a4ded272991a9bbcfd7ad0e93a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void impala::MemTracker::SetQueryResourceMgr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classimpala_1_1QueryResourceMgr.html">QueryResourceMgr</a> *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the resource mgr to allow expansion of limits (if NULL, no expansion is possible) </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00344">344</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00462">query_resource_mgr_</a>.</p>

</div>
</div>
<a class="anchor" id="a88d461cd1b369ee3f1fe6471954c5dd8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::MemTracker::SpareCapacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the maximum consumption that can be made without exceeding the limit on this tracker or any of its parents. Returns int64_t::max() if there are no limits and a negative value if any limit is already exceeded. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00270">270</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00426">limit_trackers_</a>, and <a class="el" href="expr-benchmark_8cc_source.html#l00090">tracker</a>.</p>

<p>Referenced by <a class="el" href="hdfs-scan-node_8cc_source.html#l00706">impala::HdfsScanNode::EnoughMemoryForScannerThread()</a>, <a class="el" href="partitioned-hash-join-node_8cc_source.html#l00661">impala::PartitionedHashJoinNode::PrepareNextPartition()</a>, and <a class="el" href="disk-io-mgr_8cc_source.html#l00954">impala::DiskIoMgr::ReadRange()</a>.</p>

</div>
</div>
<a class="anchor" id="a69978295743ae831cc72723436eaa2ce"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::MemTracker::TryConsume </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Increases consumption of this tracker and its ancestors by 'bytes' only if they can all consume 'bytes'. If this brings any of them over, none of them are updated. Returns true if the try succeeded. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00163">163</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>References <a class="el" href="runtime-profile_8h_source.html#l00129">impala::RuntimeProfile::HighWaterMarkCounter::Add()</a>, <a class="el" href="mem-tracker_8h_source.html#l00425">all_trackers_</a>, <a class="el" href="mem-tracker_8h_source.html#l00415">consumption_</a>, <a class="el" href="mem-tracker_8h_source.html#l00423">consumption_metric_</a>, <a class="el" href="mem-tracker_8h_source.html#l00110">effective_limit()</a>, <a class="el" href="mem-tracker_8h_source.html#l00448">enable_logging_</a>, <a class="el" href="mem-tracker_8cc_source.html#l00294">ExpandRmReservation()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00263">GcMemory()</a>, <a class="el" href="mem-tracker_8h_source.html#l00281">limit()</a>, <a class="el" href="mem-tracker_8h_source.html#l00404">limit_</a>, <a class="el" href="mem-tracker_8cc_source.html#l00255">LogUpdate()</a>, <a class="el" href="runtime-profile_8h_source.html#l00148">impala::RuntimeProfile::HighWaterMarkCounter::Set()</a>, <a class="el" href="expr-benchmark_8cc_source.html#l00090">tracker</a>, <a class="el" href="runtime-profile_8h_source.html#l00136">impala::RuntimeProfile::HighWaterMarkCounter::TryAdd()</a>, and <a class="el" href="compiler-util_8h_source.html#l00033">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="query-exec-state_8cc_source.html#l00636">impala::ImpalaServer::QueryExecState::FetchRowsInternal()</a>, <a class="el" href="mem-pool_8cc_source.html#l00092">impala::MemPool::FindChunk()</a>, <a class="el" href="buffered-block-mgr_8cc_source.html#l00382">impala::BufferedBlockMgr::GetNewBlock()</a>, <a class="el" href="old-hash-table_8cc_source.html#l00678">impala::OldHashTable::ResizeBuckets()</a>, and <a class="el" href="mem-tracker-test_8cc_source.html#l00145">impala::TEST()</a>.</p>

</div>
</div>
<a class="anchor" id="a331fc7b172feb51cc50a7b4f6818833c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void impala::MemTracker::UnregisterFromParent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes this tracker from parent_-&gt;child_trackers_. </p>

<p>Definition at line <a class="el" href="mem-tracker_8cc_source.html#l00127">127</a> of file <a class="el" href="mem-tracker_8cc_source.html">mem-tracker.cc</a>.</p>

<p>References <a class="el" href="mem-tracker_8h_source.html#l00435">child_tracker_it_</a>, <a class="el" href="mem-tracker_8h_source.html#l00431">child_trackers_</a>, <a class="el" href="mem-tracker_8h_source.html#l00430">child_trackers_lock_</a>, and <a class="el" href="mem-tracker_8h_source.html#l00412">parent_</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00193">~MemTracker()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a35d70e52338acfa91f282ed600659c3f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a>*&gt; impala::MemTracker::all_trackers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00425">425</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00118">Consume()</a>, <a class="el" href="mem-tracker_8h_source.html#l00145">ConsumeLocal()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00294">ExpandRmReservation()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00109">Init()</a>, <a class="el" href="mem-tracker_8h_source.html#l00209">Release()</a>, and <a class="el" href="mem-tracker_8h_source.html#l00163">TryConsume()</a>.</p>

</div>
</div>
<a class="anchor" id="acec2cd6a25a1b7f091ee5bbefd34e8a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::MemTracker::auto_unregister_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If true, calls <a class="el" href="classimpala_1_1MemTracker.html#a331fc7b172feb51cc50a7b4f6818833c" title="Removes this tracker from parent_-&gt;child_trackers_. ">UnregisterFromParent()</a> in the dtor. This is only used for the query wide trackers to remove it from the process mem tracker. The process tracker never gets deleted so it is safe to reference it in the dtor. The query tracker has lifetime shared by multiple plan fragments so it's hard to do cleanup another way. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00445">445</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00134">GetRequestPoolMemTracker()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00193">~MemTracker()</a>.</p>

</div>
</div>
<a class="anchor" id="a6409cb0d412805122bd5943caa7ed419"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a>* impala::MemTracker::bytes_freed_by_last_gc_metric_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The number of bytes freed by the last round of calling the GcFunctions (-1 before any GCs are performed). </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00469">469</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00263">GcMemory()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00203">RegisterMetrics()</a>.</p>

</div>
</div>
<a class="anchor" id="a0a715accb0b0e51e94213fc14f111857"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceimpala.html#aa5fe574b057692843a420853cf325bbe">IntGauge</a>* impala::MemTracker::bytes_over_limit_metric_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The number of bytes over the limit we were the last time <a class="el" href="classimpala_1_1MemTracker.html#aa3283a34c1947e96818d476cd5c26fc3">LimitExceeded()</a> was called and the limit was exceeded pre-GC. -1 if there is no limit or the limit was never exceeded. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00474">474</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00257">LimitExceeded()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00203">RegisterMetrics()</a>.</p>

</div>
</div>
<a class="anchor" id="a4d262f416f9c53fc202017387ee7887d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a>*&gt;::iterator impala::MemTracker::child_tracker_it_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Iterator into parent_-&gt;child_trackers_ for this object. Stored to have O(1) remove. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00435">435</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00122">AddChildTracker()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00127">UnregisterFromParent()</a>.</p>

</div>
</div>
<a class="anchor" id="a305786dde48ac241b78befb80bba27ed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a>*&gt; impala::MemTracker::child_trackers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00431">431</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00122">AddChildTracker()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00127">UnregisterFromParent()</a>.</p>

</div>
</div>
<a class="anchor" id="acda6d6bbbafc6334b831e865117fd1fc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::mutex impala::MemTracker::child_trackers_lock_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>All the child trackers of this tracker. Used for error reporting only. i.e., Updating a parent tracker does not update the children. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00430">430</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00122">AddChildTracker()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00127">UnregisterFromParent()</a>.</p>

</div>
</div>
<a class="anchor" id="aa61d60cb0f2709d6bb411d30196f3d6c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1HighWaterMarkCounter.html">RuntimeProfile::HighWaterMarkCounter</a>* impala::MemTracker::consumption_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>in bytes; not owned </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00415">415</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00118">Consume()</a>, <a class="el" href="mem-tracker_8h_source.html#l00298">consumption()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00294">ExpandRmReservation()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00263">GcMemory()</a>, <a class="el" href="mem-tracker_8h_source.html#l00303">peak_consumption()</a>, <a class="el" href="mem-tracker_8h_source.html#l00209">Release()</a>, and <a class="el" href="mem-tracker_8h_source.html#l00163">TryConsume()</a>.</p>

</div>
</div>
<a class="anchor" id="ad5e013961e5aa3254d3176feb3b3e9ca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceimpala.html#a0ac05a476d08e3a556ef87c24d693af1">UIntGauge</a>* impala::MemTracker::consumption_metric_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If non-NULL, used to measure consumption (in bytes) rather than the values provided to <a class="el" href="classimpala_1_1MemTracker.html#a039829918860a92eb8216d2bed208117" title="Increases consumption of this tracker and its ancestors by &#39;bytes&#39;. ">Consume()</a>/Release(). Only used for the process tracker, thus parent_ should be NULL if consumption_metric_ is set. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00423">423</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00118">Consume()</a>, <a class="el" href="mem-tracker_8h_source.html#l00145">ConsumeLocal()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00263">GcMemory()</a>, <a class="el" href="mem-tracker_8h_source.html#l00209">Release()</a>, and <a class="el" href="mem-tracker_8h_source.html#l00163">TryConsume()</a>.</p>

</div>
</div>
<a class="anchor" id="acdc9244140d0a13d701a1c7aa32e7dc1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const string impala::MemTracker::COUNTER_NAME = &quot;PeakMemoryUsage&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00327">327</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

</div>
</div>
<a class="anchor" id="a813f348c477181410d46fb3380e20ab2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::MemTracker::enable_logging_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If true, logs to INFO every consume/release called. Used for debugging. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00448">448</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00118">Consume()</a>, <a class="el" href="mem-tracker_8h_source.html#l00145">ConsumeLocal()</a>, <a class="el" href="mem-tracker_8h_source.html#l00322">EnableLogging()</a>, <a class="el" href="mem-tracker_8h_source.html#l00209">Release()</a>, and <a class="el" href="mem-tracker_8h_source.html#l00163">TryConsume()</a>.</p>

</div>
</div>
<a class="anchor" id="ad800a82f7f240e31071c42b8b6945c91"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classimpala_1_1MemTracker.html#a57b22c9a4dd7ce626288105b8405074b">GcFunction</a>&gt; impala::MemTracker::gc_functions_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Functions to call after the limit is reached to free memory. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00438">438</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00313">AddGcFunction()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00263">GcMemory()</a>.</p>

</div>
</div>
<a class="anchor" id="a90edab9b8d0abd3b5b1ac515976fc443"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1SpinLock.html">SpinLock</a> impala::MemTracker::gc_lock_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lock to protect <a class="el" href="classimpala_1_1MemTracker.html#ab3bd3cc91526f9220949942afe10fdb6">GcMemory()</a>. This prevents many GCs from occurring at once. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00378">378</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00263">GcMemory()</a>.</p>

</div>
</div>
<a class="anchor" id="a006d75bdf44883ce46ec567310f46315"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int64_t impala::MemTracker::GC_RELEASE_SIZE = 128 * 1024L * 1024L</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Size, in bytes, that is considered a large value for <a class="el" href="classimpala_1_1MemTracker.html#a06c4e0963fc1b49a5437eccee965476a" title="Decreases consumption of this tracker and its ancestors by &#39;bytes&#39;. ">Release()</a> (or <a class="el" href="classimpala_1_1MemTracker.html#a039829918860a92eb8216d2bed208117" title="Increases consumption of this tracker and its ancestors by &#39;bytes&#39;. ">Consume()</a> with a negative value). If tcmalloc is used, this can trigger it to GC. A higher value will make us call into tcmalloc less often (and therefore more efficient). A lower value will mean our memory overhead is lower. TODO: this is a stopgap. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00371">371</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00209">Release()</a>.</p>

</div>
</div>
<a class="anchor" id="a58260c2dc438186498b11a0c8e5ad8c1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string impala::MemTracker::label_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00411">411</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00283">label()</a>.</p>

</div>
</div>
<a class="anchor" id="afe35927635a41d8d693cf0a91dda6700"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::MemTracker::limit_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Hard limit on memory consumption, in bytes. May not be exceeded. If limit_ == -1, there is no consumption limit. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00404">404</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00330">CheckLimitExceeded()</a>, <a class="el" href="mem-tracker_8h_source.html#l00110">effective_limit()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00294">ExpandRmReservation()</a>, <a class="el" href="mem-tracker_8h_source.html#l00282">has_limit()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00109">Init()</a>, <a class="el" href="mem-tracker_8h_source.html#l00281">limit()</a>, <a class="el" href="mem-tracker_8h_source.html#l00257">LimitExceeded()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00255">LogUpdate()</a>, and <a class="el" href="mem-tracker_8h_source.html#l00163">TryConsume()</a>.</p>

</div>
</div>
<a class="anchor" id="a6c85075e9b63dcdb29022ed7fdc8a126"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a>*&gt; impala::MemTracker::limit_trackers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00426">426</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00246">AnyLimitExceeded()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00109">Init()</a>, <a class="el" href="mem-tracker_8h_source.html#l00287">lowest_limit()</a>, and <a class="el" href="mem-tracker_8h_source.html#l00270">SpareCapacity()</a>.</p>

</div>
</div>
<a class="anchor" id="a114e5fb55e60482fe91d39b1a5b64daa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1RuntimeProfile_1_1HighWaterMarkCounter.html">RuntimeProfile::HighWaterMarkCounter</a> impala::MemTracker::local_counter_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>holds consumption_ counter if not tied to a profile </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00418">418</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

</div>
</div>
<a class="anchor" id="a484397d6a5f4b1ce63b0c765ffca9ab6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::MemTracker::log_stack_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If true, log the stack as well. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00450">450</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00322">EnableLogging()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00255">LogUpdate()</a>.</p>

</div>
</div>
<a class="anchor" id="a78cc8a9bc9954882c85d4216123c9789"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> impala::MemTracker::log_usage_if_zero_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If false, this tracker (and its children) will not be included in <a class="el" href="classimpala_1_1MemTracker.html#ace813a6a8aca0ad1acb9bb40b6abd29a" title="Logs the usage of this tracker and all of its children (recursively). ">LogUsage()</a> output if consumption is 0. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00454">454</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

</div>
</div>
<a class="anchor" id="a07e361c8a1f979c4d3e67ccb34c32e4f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceimpala.html#ae72a16e1b3afb603ff4b5b4d78f0f0d0">IntCounter</a>* impala::MemTracker::num_gcs_metric_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of times the GcFunctions were called. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00465">465</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00263">GcMemory()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00203">RegisterMetrics()</a>.</p>

</div>
</div>
<a class="anchor" id="a144a885ac7d29acb44a44ee28dcd30d9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a>* impala::MemTracker::parent_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00412">412</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00118">Consume()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00156">GetQueryMemTracker()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00109">Init()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00067">MemTracker()</a>, <a class="el" href="mem-tracker_8h_source.html#l00305">parent()</a>, <a class="el" href="mem-tracker_8h_source.html#l00209">Release()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00127">UnregisterFromParent()</a>.</p>

</div>
</div>
<a class="anchor" id="ab46a6c52603286e6847e77584130cea1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string impala::MemTracker::pool_name_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Only valid for MemTrackers returned from <a class="el" href="classimpala_1_1MemTracker.html#a22fbc3febb516f0f5edd1d40699e6991">GetRequestPoolMemTracker()</a> </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00400">400</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00134">GetRequestPoolMemTracker()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00193">~MemTracker()</a>.</p>

</div>
</div>
<a class="anchor" id="af2bc92405c24eda51dd0e0e8e7681305"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1MemTracker.html#a0b4850049812826cd1a9a1bb5272c558">MemTracker::PoolTrackersMap</a> impala::MemTracker::pool_to_mem_trackers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00394">394</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00134">GetRequestPoolMemTracker()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00193">~MemTracker()</a>.</p>

</div>
</div>
<a class="anchor" id="a6f1cc08d7c1d5344401788c2697f2ea2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TUniqueId impala::MemTracker::query_id_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Only valid for MemTrackers returned from <a class="el" href="classimpala_1_1MemTracker.html#a5b39ede97dce30ef1c7c00b117887a56">GetQueryMemTracker()</a> </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00397">397</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00193">~MemTracker()</a>.</p>

</div>
</div>
<a class="anchor" id="aa3c25319c5120f73841193edf39018ab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1QueryResourceMgr.html">QueryResourceMgr</a>* impala::MemTracker::query_resource_mgr_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If non-NULL, contains all the information required to expand resource reservations if required. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00462">462</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00294">ExpandRmReservation()</a>, and <a class="el" href="mem-tracker_8h_source.html#l00344">SetQueryResourceMgr()</a>.</p>

</div>
</div>
<a class="anchor" id="ae5b9a4a292a599adb5ce8b2d2554b74f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1AtomicInt.html">AtomicInt</a>&lt; int64_t &gt; impala::MemTracker::released_memory_since_gc_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Total amount of memory from calls to <a class="el" href="classimpala_1_1MemTracker.html#a06c4e0963fc1b49a5437eccee965476a" title="Decreases consumption of this tracker and its ancestors by &#39;bytes&#39;. ">Release()</a> since the last GC. If this is greater than GC_RELEASE_SIZE, this will trigger a tcmalloc gc. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00375">375</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00285">GcTcmalloc()</a>, and <a class="el" href="mem-tracker_8h_source.html#l00209">Release()</a>.</p>

</div>
</div>
<a class="anchor" id="ac61d819df6a894d60a7144002a0138e7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classimpala_1_1MemTracker.html#abd28700a51d556043001a21d6139bb54">MemTracker::RequestTrackersMap</a> impala::MemTracker::request_to_mem_trackers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00389">389</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00156">GetQueryMemTracker()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00193">~MemTracker()</a>.</p>

</div>
</div>
<a class="anchor" id="a0a324f34ebcdd8d3fdb6a586c38a05da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::mutex impala::MemTracker::resource_acquisition_lock_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Lock is taken during <a class="el" href="classimpala_1_1MemTracker.html#abcd47f778b1d934e5f12d6d326c79f37">ExpandRmReservation()</a> to prevent concurrent acquisition of new resources. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00458">458</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00294">ExpandRmReservation()</a>.</p>

</div>
</div>
<a class="anchor" id="a23ff7675edc491c16d5111a2b9ac92c6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t impala::MemTracker::rm_reserved_limit_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If &gt; -1, when RM is enabled this is the limit after which this memtracker needs to acquire more memory from Llama. This limit is always less than or equal to the hard limit. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00409">409</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8h_source.html#l00110">effective_limit()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00294">ExpandRmReservation()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00109">Init()</a>.</p>

</div>
</div>
<a class="anchor" id="ad303f3729171bcf7d76c4d0cd30d3567"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">mutex impala::MemTracker::static_mem_trackers_lock_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Protects request_to_mem_trackers_ and pool_to_mem_trackers_. </p>

<p>Definition at line <a class="el" href="mem-tracker_8h_source.html#l00381">381</a> of file <a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a>.</p>

<p>Referenced by <a class="el" href="mem-tracker_8cc_source.html#l00156">GetQueryMemTracker()</a>, <a class="el" href="mem-tracker_8cc_source.html#l00134">GetRequestPoolMemTracker()</a>, and <a class="el" href="mem-tracker_8cc_source.html#l00193">~MemTracker()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>be/src/runtime/<a class="el" href="mem-tracker_8h_source.html">mem-tracker.h</a></li>
<li>be/src/runtime/<a class="el" href="mem-tracker_8cc_source.html">mem-tracker.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceimpala.html">impala</a></li><li class="navelem"><a class="el" href="classimpala_1_1MemTracker.html">MemTracker</a></li>
    <li class="footer">Generated on Thu May 7 2015 16:10:49 for Impala by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
