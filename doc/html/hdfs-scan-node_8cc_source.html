<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Impala: be/src/exec/hdfs-scan-node.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Impala
   </div>
   <div id="projectbrief">Impalaistheopensource,nativeanalyticdatabaseforApacheHadoop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('hdfs-scan-node_8cc_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">hdfs-scan-node.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="hdfs-scan-node_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2012 Cloudera Inc.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// you may not use this file except in compliance with the License.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// See the License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// limitations under the License.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hdfs-scan-node_8h.html">exec/hdfs-scan-node.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="base-sequence-scanner_8h.html">exec/base-sequence-scanner.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hdfs-text-scanner_8h.html">exec/hdfs-text-scanner.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hdfs-lzo-text-scanner_8h.html">exec/hdfs-lzo-text-scanner.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hdfs-sequence-scanner_8h.html">exec/hdfs-sequence-scanner.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hdfs-rcfile-scanner_8h.html">exec/hdfs-rcfile-scanner.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hdfs-avro-scanner_8h.html">exec/hdfs-avro-scanner.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hdfs-parquet-scanner_8h.html">exec/hdfs-parquet-scanner.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;boost/algorithm/string.hpp&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;boost/foreach.hpp&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;boost/filesystem.hpp&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;gutil/strings/substitute.h&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="hdfs_8h.html">hdfs.h</a>&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="llvm-codegen_8h.html">codegen/llvm-codegen.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="logging_8h.html">common/logging.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="object-pool_8h.html">common/object-pool.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="expr-context_8h.html">exprs/expr-context.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="descriptors_8h.html">runtime/descriptors.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hdfs-fs-cache_8h.html">runtime/hdfs-fs-cache.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="runtime-state_8h.html">runtime/runtime-state.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mem-pool_8h.html">runtime/mem-pool.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw-value_8h.html">runtime/raw-value.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="row-batch_8h.html">runtime/row-batch.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bit-util_8h.html">util/bit-util.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="container-util_8h.html">util/container-util.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="debug-util_8h.html">util/debug-util.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="disk-info_8h.html">util/disk-info.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="error-util_8h.html">util/error-util.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hdfs-util_8h.html">util/hdfs-util.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="impalad-metrics_8h.html">util/impalad-metrics.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="periodic-counter-updater_8h.html">util/periodic-counter-updater.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="runtime-profile_8h.html">util/runtime-profile.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;gen-cpp/PlanNodes_types.h&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="names_8h.html">common/names.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<a class="code" href="hdfs-scan-node_8cc.html#a517de9796fa99112cd8158a3a494661c">DEFINE_int32</a>(max_row_batches, 0, <span class="stringliteral">&quot;the maximum size of materialized_row_batches_&quot;</span>);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<a class="code" href="hdfs-scan-node_8cc.html#a7082043df41c165c65afa3b8b1cba0d7">DECLARE_string</a>(cgroup_hierarchy_path);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<a class="code" href="hdfs-scan-node_8cc.html#af1412e276f9c5a7f13e41220b6764243">DECLARE_bool</a>(enable_rm);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">namespace </span>filesystem = boost::filesystem;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">using namespace </span>impala;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">using namespace </span>llvm;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">using namespace </span>strings;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#ac76e401eb1573dbcaf0acf7607fa308e">HdfsScanNode::HDFS_SPLIT_STATS_DESC</a> =</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="stringliteral">&quot;Hdfs split stats (&lt;volume id&gt;:&lt;# splits&gt;/&lt;split lengths&gt;)&quot;</span>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">// Amount of memory that we approximate a scanner thread will use not including IoBuffers.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">// The memory used does not vary considerably between file formats (just a couple of MBs).</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">// This value is conservative and taken from running against the tpch lineitem table.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">// TODO: revisit how we do this.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="hdfs-scan-node_8cc.html#a35626c2b2a98e3c681d17336ebec72e5">   72</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="hdfs-scan-node_8cc.html#a35626c2b2a98e3c681d17336ebec72e5">SCANNER_THREAD_MEM_USAGE</a> = 32 * 1024 * 1024;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">// Estimated upper bound on the compression ratio of compressed text files. Used to</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">// estimate scanner thread memory usage.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="hdfs-scan-node_8cc.html#afc0d04de3b6bd6176cbab88eed30d519">   76</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="hdfs-scan-node_8cc.html#afc0d04de3b6bd6176cbab88eed30d519">COMPRESSED_TEXT_COMPRESSION_RATIO</a> = 11;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">// Determines how many unexpected remote bytes trigger an error in the runtime state</span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="hdfs-scan-node_8cc.html#a5d9655bbf01ec819fcad0abc0ff7843d">   79</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="hdfs-scan-node_8cc.html#a5d9655bbf01ec819fcad0abc0ff7843d">UNEXPECTED_REMOTE_BYTES_WARN_THRESHOLD</a> = 64 * 1024 * 1024;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a867dc70e19ceceff248b6848d426e643">   81</a></span>&#160;<a class="code" href="classimpala_1_1HdfsScanNode.html#a867dc70e19ceceff248b6848d426e643">HdfsScanNode::HdfsScanNode</a>(<a class="code" href="classimpala_1_1ObjectPool.html">ObjectPool</a>* <a class="code" href="expr-benchmark_8cc.html#a3a5de7bd423fbc0afc4cf935c166ca6b">pool</a>, <span class="keyword">const</span> TPlanNode&amp; tnode,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                           <span class="keyword">const</span> <a class="code" href="classimpala_1_1DescriptorTbl.html">DescriptorTbl</a>&amp; descs)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    : <a class="code" href="classimpala_1_1ScanNode.html">ScanNode</a>(pool, tnode, descs),</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      thrift_plan_node_(new TPlanNode(tnode)),</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      runtime_state_(NULL),</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      tuple_id_(tnode.hdfs_scan_node.tuple_id),</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      reader_context_(NULL),</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      tuple_desc_(NULL),</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      unknown_disk_id_warned_(false),</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      initial_ranges_issued_(false),</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      scanner_thread_bytes_required_(0),</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      disks_accessed_bitmap_(TUnit::UNIT, 0),</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      done_(false),</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      all_ranges_started_(false),</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      counters_running_(false),</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      rm_callback_id_(-1) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#aab71d9b6396bcb23c19121c55b4d614a">max_materialized_row_batches_</a> = FLAGS_max_row_batches;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#aab71d9b6396bcb23c19121c55b4d614a">max_materialized_row_batches_</a> &lt;= 0) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">// TODO: This parameter has an U-shaped effect on performance: increasing the value</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// would first improves performance, but further increasing would degrade performance.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// Investigate and tune this.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#aab71d9b6396bcb23c19121c55b4d614a">max_materialized_row_batches_</a> =</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        10 * (<a class="code" href="classimpala_1_1DiskInfo.html#a88b7ae9978345b6c0baedb1726a35d72">DiskInfo::num_disks</a>() + <a class="code" href="classimpala_1_1DiskIoMgr.html#aabb61890cd37be80703ae735e2a075adaf2d4abf2fb7cedd9b81575e18d2a361a">DiskIoMgr::REMOTE_NUM_DISKS</a>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a60f0a321960a9a4e7eea0ee391c9c609">materialized_row_batches_</a>.reset(<span class="keyword">new</span> <a class="code" href="classimpala_1_1ExecNode_1_1RowBatchQueue.html">RowBatchQueue</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#aab71d9b6396bcb23c19121c55b4d614a">max_materialized_row_batches_</a>));</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#aa866fb84b4cee4e924854e1eb03bbb63">  108</a></span>&#160;<a class="code" href="classimpala_1_1HdfsScanNode.html#aa866fb84b4cee4e924854e1eb03bbb63">HdfsScanNode::~HdfsScanNode</a>() {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a7d9631e3dbf9ec410699953759694890">  111</a></span>&#160;<a class="code" href="classimpala_1_1Status.html">Status</a> <a class="code" href="classimpala_1_1HdfsScanNode.html#a7d9631e3dbf9ec410699953759694890">HdfsScanNode::GetNext</a>(<a class="code" href="classimpala_1_1RuntimeState.html">RuntimeState</a>* state, <a class="code" href="classimpala_1_1RowBatch.html">RowBatch</a>* row_batch, <span class="keywordtype">bool</span>* eos) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="runtime-profile_8h.html#aaa9a2971c6368e3ddd3f5140a0295eb7">SCOPED_TIMER</a>(<a class="code" href="classimpala_1_1ExecNode.html#a9cab4e45a94527ff97333c0f280036f8">runtime_profile_</a>-&gt;total_time_counter());</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classimpala_1_1HdfsScanNode.html#afc4101dbe061d2baf01e663bf0827666">initial_ranges_issued_</a>) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// We do this in GetNext() to ensure that all execution time predicates have</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// been generated (e.g. probe side bitmap filters).</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// TODO: we could do dynamic partition pruning here as well.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#afc4101dbe061d2baf01e663bf0827666">initial_ranges_issued_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// Issue initial ranges for all file types.</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(<a class="code" href="classimpala_1_1HdfsTextScanner.html#af79bef6374f38e24303a824b0952dfc8">HdfsTextScanner::IssueInitialRanges</a>(<span class="keyword">this</span>,</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#ab93bb6f89c7be5d1734683de7fb4f187">per_type_files_</a>[THdfsFileFormat::TEXT]));</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(<a class="code" href="classimpala_1_1BaseSequenceScanner.html#a6b84385660f88ed592fd61ac62c15793">BaseSequenceScanner::IssueInitialRanges</a>(<span class="keyword">this</span>,</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#ab93bb6f89c7be5d1734683de7fb4f187">per_type_files_</a>[THdfsFileFormat::SEQUENCE_FILE]));</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(<a class="code" href="classimpala_1_1BaseSequenceScanner.html#a6b84385660f88ed592fd61ac62c15793">BaseSequenceScanner::IssueInitialRanges</a>(<span class="keyword">this</span>,</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#ab93bb6f89c7be5d1734683de7fb4f187">per_type_files_</a>[THdfsFileFormat::RC_FILE]));</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(<a class="code" href="classimpala_1_1BaseSequenceScanner.html#a6b84385660f88ed592fd61ac62c15793">BaseSequenceScanner::IssueInitialRanges</a>(<span class="keyword">this</span>,</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#ab93bb6f89c7be5d1734683de7fb4f187">per_type_files_</a>[THdfsFileFormat::AVRO]));</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(<a class="code" href="classimpala_1_1HdfsParquetScanner.html#a991508a8484c9c5a744194c6e6795f41">HdfsParquetScanner::IssueInitialRanges</a>(<span class="keyword">this</span>,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#ab93bb6f89c7be5d1734683de7fb4f187">per_type_files_</a>[THdfsFileFormat::PARQUET]));</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#a0251d57ef9bff48b95436210074207d3">progress_</a>.<a class="code" href="classimpala_1_1ProgressUpdater.html#a36253a94c0cf74bbebf2474048fc4363">done</a>()) <a class="code" href="classimpala_1_1HdfsScanNode.html#a9be5690e584ef1940004da01f85d7b31">SetDone</a>();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="classimpala_1_1Status.html">Status</a> status = <a class="code" href="classimpala_1_1HdfsScanNode.html#a989c93325fcd5478f9c78ac23fc36cee">GetNextInternal</a>(state, row_batch, eos);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">if</span> (status.<a class="code" href="classimpala_1_1Status.html#a39b7bde73a8803e2ceaf3b97d0fe94eb">IsMemLimitExceeded</a>()) state-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#af4a734aea58f4258866ca8414fd3b00b">SetMemLimitExceeded</a>();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordflow">if</span> (!status.<a class="code" href="classimpala_1_1Status.html#a95ba859e42fe93445b340533220836ac">ok</a>() || *eos) <a class="code" href="classimpala_1_1HdfsScanNode.html#a702a5dc48e4ccd0e9ea3199ee5c56e0b">StopAndFinalizeCounters</a>();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a989c93325fcd5478f9c78ac23fc36cee">  139</a></span>&#160;<a class="code" href="classimpala_1_1Status.html">Status</a> <a class="code" href="classimpala_1_1HdfsScanNode.html#a989c93325fcd5478f9c78ac23fc36cee">HdfsScanNode::GetNextInternal</a>(</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="classimpala_1_1RuntimeState.html">RuntimeState</a>* state, <a class="code" href="classimpala_1_1RowBatch.html">RowBatch</a>* row_batch, <span class="keywordtype">bool</span>* eos) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(<a class="code" href="classimpala_1_1ExecNode.html#a310d3a6b28f5bb1046a90ef8995ffb12">ExecDebugAction</a>(TExecNodePhase::GETNEXT, state));</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <a class="code" href="runtime-state_8h.html#a803877a2ce5ce5c0b4f311c9c7137ba1">RETURN_IF_CANCELLED</a>(state);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(<a class="code" href="classimpala_1_1ExecNode.html#ab8f2832c6a5487aa8168b2a7d65773ee">QueryMaintenance</a>(state));</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1ExecNode.html#a3ff26374466bc587eaa4c7d00b3e126a">ReachedLimit</a>()) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// LIMIT 0 case.  Other limit values handled below.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    DCHECK_EQ(<a class="code" href="classimpala_1_1ExecNode.html#ae41f912c39b004f60987b4d480e442b8">limit_</a>, 0);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    *eos = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classimpala_1_1Status.html#a580565665ea944eb64f3f495b1bee1e0">Status::OK</a>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  *eos = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <a class="code" href="classimpala_1_1RowBatch.html">RowBatch</a>* materialized_batch = <a class="code" href="classimpala_1_1HdfsScanNode.html#a60f0a321960a9a4e7eea0ee391c9c609">materialized_row_batches_</a>-&gt;GetBatch();</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">if</span> (materialized_batch != NULL) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a8fc97ba80ecdfc4bf37198de772d3f5c">num_owned_io_buffers_</a> -= materialized_batch-&gt;<a class="code" href="classimpala_1_1RowBatch.html#ab2806ba7b3c888423d1f527ef7ff7421">num_io_buffers</a>();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    row_batch-&gt;<a class="code" href="classimpala_1_1RowBatch.html#a2f777637e6f27003960633011c7d1605">AcquireState</a>(materialized_batch);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// Update the number of materialized rows now instead of when they are materialized.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// This means that scanners might process and queue up more rows than are necessary</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// for the limit case but we want to avoid the synchronized writes to</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// num_rows_returned_.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="classimpala_1_1ExecNode.html#a9789aeca3e98cda63998a8f47d355fd9">num_rows_returned_</a> += row_batch-&gt;<a class="code" href="classimpala_1_1RowBatch.html#ac695df3b85ee416b3d99844813ae813d">num_rows</a>();</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="runtime-profile_8h.html#a9e3d8174f6545ee9c4fd37c624ea58f7">COUNTER_SET</a>(<a class="code" href="classimpala_1_1ExecNode.html#a632a4cdd4c654f362f630936c5ecb29a">rows_returned_counter_</a>, <a class="code" href="classimpala_1_1ExecNode.html#a9789aeca3e98cda63998a8f47d355fd9">num_rows_returned_</a>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1ExecNode.html#a3ff26374466bc587eaa4c7d00b3e126a">ReachedLimit</a>()) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="keywordtype">int</span> num_rows_over = <a class="code" href="classimpala_1_1ExecNode.html#a9789aeca3e98cda63998a8f47d355fd9">num_rows_returned_</a> - <a class="code" href="classimpala_1_1ExecNode.html#ae41f912c39b004f60987b4d480e442b8">limit_</a>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      row_batch-&gt;<a class="code" href="classimpala_1_1RowBatch.html#a56893f5c0ac2f5831c85e8c87e838089">set_num_rows</a>(row_batch-&gt;<a class="code" href="classimpala_1_1RowBatch.html#ac695df3b85ee416b3d99844813ae813d">num_rows</a>() - num_rows_over);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <a class="code" href="classimpala_1_1ExecNode.html#a9789aeca3e98cda63998a8f47d355fd9">num_rows_returned_</a> -= num_rows_over;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <a class="code" href="runtime-profile_8h.html#a9e3d8174f6545ee9c4fd37c624ea58f7">COUNTER_SET</a>(<a class="code" href="classimpala_1_1ExecNode.html#a632a4cdd4c654f362f630936c5ecb29a">rows_returned_counter_</a>, <a class="code" href="classimpala_1_1ExecNode.html#a9789aeca3e98cda63998a8f47d355fd9">num_rows_returned_</a>);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      *eos = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <a class="code" href="classimpala_1_1HdfsScanNode.html#a9be5690e584ef1940004da01f85d7b31">SetDone</a>();</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    DCHECK_EQ(materialized_batch-&gt;<a class="code" href="classimpala_1_1RowBatch.html#ab2806ba7b3c888423d1f527ef7ff7421">num_io_buffers</a>(), 0);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keyword">delete</span> materialized_batch;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classimpala_1_1Status.html#a580565665ea944eb64f3f495b1bee1e0">Status::OK</a>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">// The RowBatchQueue was shutdown either because all scan ranges are complete or a</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// scanner thread encountered an error.  Check status_ to distinguish those cases.</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  *eos = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  unique_lock&lt;mutex&gt; l(<a class="code" href="classimpala_1_1HdfsScanNode.html#abd87b83ac93c6f0c6527834cd6ca20ff">lock_</a>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a79a5cce2cd5ab6e165bed160988ea6e5">status_</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a5314b840efa7625e54ce930ee1986bb1">  183</a></span>&#160;<a class="code" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">DiskIoMgr::ScanRange</a>* <a class="code" href="classimpala_1_1HdfsScanNode.html#a5314b840efa7625e54ce930ee1986bb1">HdfsScanNode::AllocateScanRange</a>(</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    hdfsFS fs, <span class="keyword">const</span> <span class="keywordtype">char</span>* file, int64_t len, int64_t <a class="code" href="partitioning-throughput-test_8cc.html#ad172ecfd5c31c5df6282c2b4bc322bf7">offset</a>, int64_t partition_id,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordtype">int</span> disk_id, <span class="keywordtype">bool</span> try_cache, <span class="keywordtype">bool</span> expected_local, int64_t mtime) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  DCHECK_GE(disk_id, -1);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">// Require that the scan range is within [0, file_length). While this cannot be used</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="comment">// to guarantee safety (file_length metadata may be stale), it avoids different</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="comment">// behavior between Hadoop FileSystems (e.g. s3n hdfsSeek() returns error when seeking</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">// beyond the end of the file).</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  DCHECK_GE(offset, 0);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  DCHECK_GE(len, 0);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  DCHECK_LE(offset + len, <a class="code" href="classimpala_1_1HdfsScanNode.html#a0521140f7c60d795fb7bd2f44c42c9bf">GetFileDesc</a>(file)-&gt;file_length)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Scan range beyond end of file (offset=&quot;</span> &lt;&lt; offset &lt;&lt; <span class="stringliteral">&quot;, len=&quot;</span> &lt;&lt; len &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  disk_id = <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#ab92e887bc1867272f1d0ce80f09bfe11">AssignQueue</a>(file, disk_id, expected_local);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <a class="code" href="structimpala_1_1ScanRangeMetadata.html">ScanRangeMetadata</a>* metadata =</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a4c01f227dc12d859d5824e7c91d6d1aa">obj_pool</a>()-&gt;<a class="code" href="classimpala_1_1ObjectPool.html#ab191078c99825682a0a9915ca1e0c05c">Add</a>(<span class="keyword">new</span> <a class="code" href="structimpala_1_1ScanRangeMetadata.html">ScanRangeMetadata</a>(partition_id));</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <a class="code" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">DiskIoMgr::ScanRange</a>* range =</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a4c01f227dc12d859d5824e7c91d6d1aa">obj_pool</a>()-&gt;<a class="code" href="classimpala_1_1ObjectPool.html#ab191078c99825682a0a9915ca1e0c05c">Add</a>(<span class="keyword">new</span> <a class="code" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">DiskIoMgr::ScanRange</a>());</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  range-&gt;<a class="code" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html#a2cf57a30a890667743a870faa5f630a1">Reset</a>(fs, file, len, offset, disk_id, try_cache, expected_local,</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      mtime, metadata);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">return</span> range;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a0521140f7c60d795fb7bd2f44c42c9bf">  206</a></span>&#160;<a class="code" href="structimpala_1_1HdfsFileDesc.html">HdfsFileDesc</a>* <a class="code" href="classimpala_1_1HdfsScanNode.html#a0521140f7c60d795fb7bd2f44c42c9bf">HdfsScanNode::GetFileDesc</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; filename) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  DCHECK(<a class="code" href="classimpala_1_1HdfsScanNode.html#a74b13953ea9d3088ce4759e8b2eae19a">file_descs_</a>.find(filename) != <a class="code" href="classimpala_1_1HdfsScanNode.html#a74b13953ea9d3088ce4759e8b2eae19a">file_descs_</a>.end());</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a74b13953ea9d3088ce4759e8b2eae19a">file_descs_</a>[filename];</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a3405cd6d94586c152efae17e6cfbd787">  211</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a3405cd6d94586c152efae17e6cfbd787">HdfsScanNode::SetFileMetadata</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; filename, <span class="keywordtype">void</span>* metadata) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  unique_lock&lt;mutex&gt; l(<a class="code" href="classimpala_1_1HdfsScanNode.html#a8e5bc2dfac6a939e33916170d3bd0ce9">metadata_lock_</a>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  DCHECK(<a class="code" href="classimpala_1_1HdfsScanNode.html#aaf3405bb4186382f75ad04571c68f8aa">per_file_metadata_</a>.find(filename) == <a class="code" href="classimpala_1_1HdfsScanNode.html#aaf3405bb4186382f75ad04571c68f8aa">per_file_metadata_</a>.end());</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#aaf3405bb4186382f75ad04571c68f8aa">per_file_metadata_</a>[filename] = metadata;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#adab35319d4dbff9af621387591a32c2c">  217</a></span>&#160;<span class="keywordtype">void</span>* <a class="code" href="classimpala_1_1HdfsScanNode.html#adab35319d4dbff9af621387591a32c2c">HdfsScanNode::GetFileMetadata</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; filename) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  unique_lock&lt;mutex&gt; l(<a class="code" href="classimpala_1_1HdfsScanNode.html#a8e5bc2dfac6a939e33916170d3bd0ce9">metadata_lock_</a>);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  map&lt;string, void*&gt;::iterator it = <a class="code" href="classimpala_1_1HdfsScanNode.html#aaf3405bb4186382f75ad04571c68f8aa">per_file_metadata_</a>.find(filename);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordflow">if</span> (it == <a class="code" href="classimpala_1_1HdfsScanNode.html#aaf3405bb4186382f75ad04571c68f8aa">per_file_metadata_</a>.end()) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">return</span> it-&gt;second;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a859aa77fccafc5a265047d5700196065">  224</a></span>&#160;<span class="keywordtype">void</span>* <a class="code" href="classimpala_1_1HdfsScanNode.html#a859aa77fccafc5a265047d5700196065">HdfsScanNode::GetCodegenFn</a>(THdfsFileFormat::type type) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  CodegendFnMap::iterator it = <a class="code" href="classimpala_1_1HdfsScanNode.html#ae7f252f793570d19d71ef0c59ddb6eef">codegend_fn_map_</a>.find(type);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">if</span> (it == <a class="code" href="classimpala_1_1HdfsScanNode.html#ae7f252f793570d19d71ef0c59ddb6eef">codegend_fn_map_</a>.end()) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordflow">return</span> it-&gt;second;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;}</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a4207adb002ee06e3c3df340bfe5176a3">  230</a></span>&#160;<a class="code" href="classimpala_1_1HdfsScanner.html">HdfsScanner</a>* <a class="code" href="classimpala_1_1HdfsScanNode.html#a4207adb002ee06e3c3df340bfe5176a3">HdfsScanNode::CreateAndPrepareScanner</a>(<a class="code" href="classimpala_1_1HdfsPartitionDescriptor.html">HdfsPartitionDescriptor</a>* partition,</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="classimpala_1_1ScannerContext.html">ScannerContext</a>* context, <a class="code" href="classimpala_1_1Status.html">Status</a>* status) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  DCHECK(context != NULL);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanner.html">HdfsScanner</a>* scanner = NULL;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  THdfsCompression::type compression =</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      context-&gt;<a class="code" href="classimpala_1_1ScannerContext.html#ae48c238dd876d84b8dc268d684995872">GetStream</a>()-&gt;<a class="code" href="classimpala_1_1ScannerContext_1_1Stream.html#a9dcb5b4ec2655da763877b00ff91c9e5">file_desc</a>()-&gt;<a class="code" href="structimpala_1_1HdfsFileDesc.html#a735ba080821bf0befbaeac9ce007a18f">file_compression</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="comment">// Create a new scanner for this file format and compression.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordflow">switch</span> (partition-&gt;<a class="code" href="classimpala_1_1HdfsPartitionDescriptor.html#ab4a79c2d0c772e6ecafdae14569bfde4">file_format</a>()) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">case</span> THdfsFileFormat::TEXT:</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="comment">// Lzo-compressed text files are scanned by a scanner that it is implemented as a</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="comment">// dynamic library, so that Impala does not include GPL code.</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">if</span> (compression == THdfsCompression::LZO) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        scanner = <a class="code" href="classimpala_1_1HdfsLzoTextScanner.html#a36d59f2e650b640c3f3e999ce52db514">HdfsLzoTextScanner::GetHdfsLzoTextScanner</a>(<span class="keyword">this</span>, <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        scanner = <span class="keyword">new</span> <a class="code" href="classimpala_1_1HdfsTextScanner.html">HdfsTextScanner</a>(<span class="keyword">this</span>, <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">case</span> THdfsFileFormat::SEQUENCE_FILE:</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      scanner = <span class="keyword">new</span> <a class="code" href="classimpala_1_1HdfsSequenceScanner.html">HdfsSequenceScanner</a>(<span class="keyword">this</span>, <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">case</span> THdfsFileFormat::RC_FILE:</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      scanner = <span class="keyword">new</span> <a class="code" href="classimpala_1_1HdfsRCFileScanner.html">HdfsRCFileScanner</a>(<span class="keyword">this</span>, <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">case</span> THdfsFileFormat::AVRO:</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      scanner = <span class="keyword">new</span> <a class="code" href="classimpala_1_1HdfsAvroScanner.html">HdfsAvroScanner</a>(<span class="keyword">this</span>, <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">case</span> THdfsFileFormat::PARQUET:</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      scanner = <span class="keyword">new</span> <a class="code" href="classimpala_1_1HdfsParquetScanner.html">HdfsParquetScanner</a>(<span class="keyword">this</span>, <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      DCHECK(<span class="keyword">false</span>) &lt;&lt; <span class="stringliteral">&quot;Unknown Hdfs file format type:&quot;</span> &lt;&lt; partition-&gt;<a class="code" href="classimpala_1_1HdfsPartitionDescriptor.html#ab4a79c2d0c772e6ecafdae14569bfde4">file_format</a>();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  DCHECK(scanner != NULL);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a4c01f227dc12d859d5824e7c91d6d1aa">obj_pool</a>()-&gt;<a class="code" href="classimpala_1_1ObjectPool.html#ab191078c99825682a0a9915ca1e0c05c">Add</a>(scanner);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  *status = scanner-&gt;<a class="code" href="classimpala_1_1HdfsScanner.html#a99165297c6e6546edbee741a54dfd194">Prepare</a>(context);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">return</span> scanner;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a396518f57c6ff5e8aada2bb100dfda3c">  270</a></span>&#160;<a class="code" href="classimpala_1_1Tuple.html">Tuple</a>* <a class="code" href="classimpala_1_1HdfsScanNode.html#a396518f57c6ff5e8aada2bb100dfda3c">HdfsScanNode::InitTemplateTuple</a>(<a class="code" href="classimpala_1_1RuntimeState.html">RuntimeState</a>* state,</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                                       <span class="keyword">const</span> vector&lt;ExprContext*&gt;&amp; value_ctxs) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#ad42b3a29c6f2c9a993e5b23ba29ac8ac">partition_key_slots_</a>.empty()) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="comment">// Look to protect access to partition_key_pool_ and value_ctxs</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">// TODO: we can push the lock to the mempool and exprs_values should not</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// use internal memory.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <a class="code" href="classimpala_1_1Tuple.html">Tuple</a>* template_tuple = <a class="code" href="classimpala_1_1HdfsScanNode.html#ae0944e487f92ed479da7db76f23ee071">InitEmptyTemplateTuple</a>();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  unique_lock&lt;mutex&gt; l(<a class="code" href="classimpala_1_1HdfsScanNode.html#abd87b83ac93c6f0c6527834cd6ca20ff">lock_</a>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classimpala_1_1HdfsScanNode.html#ad42b3a29c6f2c9a993e5b23ba29ac8ac">partition_key_slots_</a>.size(); ++i) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keyword">const</span> <a class="code" href="classimpala_1_1SlotDescriptor.html">SlotDescriptor</a>* slot_desc = <a class="code" href="classimpala_1_1HdfsScanNode.html#ad42b3a29c6f2c9a993e5b23ba29ac8ac">partition_key_slots_</a>[i];</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// Exprs guaranteed to be literals, so can safely be evaluated without a row context</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordtype">void</span>* value = value_ctxs[slot_desc-&gt;<a class="code" href="classimpala_1_1SlotDescriptor.html#a699e800ccb26e4e2e49a02a630bd687b">col_pos</a>()]-&gt;GetValue(NULL);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="classimpala_1_1RawValue.html#a00e7f52854e70f33ed712fa00126f527">RawValue::Write</a>(value, template_tuple, slot_desc, NULL);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">return</span> template_tuple;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#ae0944e487f92ed479da7db76f23ee071">  289</a></span>&#160;<a class="code" href="classimpala_1_1Tuple.html">Tuple</a>* <a class="code" href="classimpala_1_1HdfsScanNode.html#ae0944e487f92ed479da7db76f23ee071">HdfsScanNode::InitEmptyTemplateTuple</a>() {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <a class="code" href="classimpala_1_1Tuple.html">Tuple</a>* template_tuple = NULL;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    unique_lock&lt;mutex&gt; l(<a class="code" href="classimpala_1_1HdfsScanNode.html#abd87b83ac93c6f0c6527834cd6ca20ff">lock_</a>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    template_tuple = <a class="code" href="classimpala_1_1Tuple.html#a88ae319676583858a991e011de6c48ec">Tuple::Create</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#af19f532386cf41d53a8ae23a846f8a7b">tuple_desc_</a>-&gt;<a class="code" href="classimpala_1_1TupleDescriptor.html#a153205d9bf39422c853b5bd5f54a9485">byte_size</a>(), <a class="code" href="classimpala_1_1HdfsScanNode.html#a8f972231e2cb705cfbaa14c7290923c6">scan_node_pool_</a>.get());</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  memset(template_tuple, 0, <a class="code" href="classimpala_1_1HdfsScanNode.html#af19f532386cf41d53a8ae23a846f8a7b">tuple_desc_</a>-&gt;<a class="code" href="classimpala_1_1TupleDescriptor.html#a153205d9bf39422c853b5bd5f54a9485">byte_size</a>());</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">return</span> template_tuple;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a7d8305f32b9409b04ca086475a4571d4">  299</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a7d8305f32b9409b04ca086475a4571d4">HdfsScanNode::TransferToScanNodePool</a>(<a class="code" href="classimpala_1_1MemPool.html">MemPool</a>* <a class="code" href="expr-benchmark_8cc.html#a3a5de7bd423fbc0afc4cf935c166ca6b">pool</a>) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  unique_lock&lt;mutex&gt; l(<a class="code" href="classimpala_1_1HdfsScanNode.html#abd87b83ac93c6f0c6527834cd6ca20ff">lock_</a>);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a8f972231e2cb705cfbaa14c7290923c6">scan_node_pool_</a>-&gt;AcquireData(pool, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a265b144314da1ba14edde43893493c0d">  304</a></span>&#160;<a class="code" href="classimpala_1_1Status.html">Status</a> <a class="code" href="classimpala_1_1HdfsScanNode.html#a265b144314da1ba14edde43893493c0d">HdfsScanNode::Prepare</a>(<a class="code" href="classimpala_1_1RuntimeState.html">RuntimeState</a>* state) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <a class="code" href="runtime-profile_8h.html#aaa9a2971c6368e3ddd3f5140a0295eb7">SCOPED_TIMER</a>(<a class="code" href="classimpala_1_1ExecNode.html#a9cab4e45a94527ff97333c0f280036f8">runtime_profile_</a>-&gt;total_time_counter());</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a> = state;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(<a class="code" href="classimpala_1_1ScanNode.html#a9e3d036ef5311e9411379a05f20631b7">ScanNode::Prepare</a>(state));</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#af19f532386cf41d53a8ae23a846f8a7b">tuple_desc_</a> = state-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#abab3a5213f629bebdc266a858dc1d45d">desc_tbl</a>().<a class="code" href="classimpala_1_1DescriptorTbl.html#a8536f7901b687e8138014cb1b3ef48f6">GetTupleDescriptor</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#a32e89b2799d3cd38fc4dad00224b5163">tuple_id_</a>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  DCHECK(<a class="code" href="classimpala_1_1HdfsScanNode.html#af19f532386cf41d53a8ae23a846f8a7b">tuple_desc_</a> != NULL);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keywordflow">if</span> (!state-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5b94ff6151b01c5e84a3af8aa2433c66">cgroup</a>().empty()) {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a09ef012e32f510ba3d304f4aa6272e45">scanner_threads_</a>.<a class="code" href="classimpala_1_1ThreadGroup.html#ad0145811920efe164c7caa768cacb05f">SetCgroupsMgr</a>(state-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a17c3c93cbf9dc6481db9a1494e0312b4">exec_env</a>()-&gt;<a class="code" href="classimpala_1_1ExecEnv.html#adab640721575c6afe9074faf5ef11925">cgroups_mgr</a>());</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a09ef012e32f510ba3d304f4aa6272e45">scanner_threads_</a>.<a class="code" href="classimpala_1_1ThreadGroup.html#a7987df54f6ec94269cb9e8de7ff1d42e">SetCgroup</a>(state-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5b94ff6151b01c5e84a3af8aa2433c66">cgroup</a>());</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// One-time initialisation of state that is constant across scan ranges</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  DCHECK(<a class="code" href="classimpala_1_1HdfsScanNode.html#af19f532386cf41d53a8ae23a846f8a7b">tuple_desc_</a>-&gt;<a class="code" href="classimpala_1_1TupleDescriptor.html#a84bd9aabb34808ace9191b9fcfb2dea4">table_desc</a>() != NULL);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#ad901cf20831c82d3e4de0b57be69b2bf">hdfs_table_</a> = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classimpala_1_1HdfsTableDescriptor.html">HdfsTableDescriptor</a>*<span class="keyword">&gt;</span>(<a class="code" href="classimpala_1_1HdfsScanNode.html#af19f532386cf41d53a8ae23a846f8a7b">tuple_desc_</a>-&gt;<a class="code" href="classimpala_1_1TupleDescriptor.html#a84bd9aabb34808ace9191b9fcfb2dea4">table_desc</a>());</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a8f972231e2cb705cfbaa14c7290923c6">scan_node_pool_</a>.reset(<span class="keyword">new</span> <a class="code" href="classimpala_1_1MemPool.html">MemPool</a>(<a class="code" href="classimpala_1_1ExecNode.html#abd7922a579e4adc353756849a0f45b48">mem_tracker</a>()));</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// Gather materialized partition-key slots and non-partition slots.</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keyword">const</span> vector&lt;SlotDescriptor*&gt;&amp; slots = <a class="code" href="classimpala_1_1HdfsScanNode.html#af19f532386cf41d53a8ae23a846f8a7b">tuple_desc_</a>-&gt;<a class="code" href="classimpala_1_1TupleDescriptor.html#ab604fb8cc40f88e7f35e5f6f069a76c3">slots</a>();</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; slots.size(); ++i) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">if</span> (!slots[i]-&gt;is_materialized()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">if</span> (hdfs_table_-&gt;IsClusteringCol(slots[i])) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <a class="code" href="classimpala_1_1HdfsScanNode.html#ad42b3a29c6f2c9a993e5b23ba29ac8ac">partition_key_slots_</a>.push_back(slots[i]);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <a class="code" href="classimpala_1_1HdfsScanNode.html#a3f8c2ca9b6847e98d8e244045d11e6cf">materialized_slots_</a>.push_back(slots[i]);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="comment">// Order the materialized slots such that for schemaless file formats (e.g. text) the</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="comment">// order corresponds to the physical order in files. For formats where the file schema</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="comment">// is independent of the table schema (e.g. Avro, Parquet), this step is not necessary.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  sort(<a class="code" href="classimpala_1_1HdfsScanNode.html#a3f8c2ca9b6847e98d8e244045d11e6cf">materialized_slots_</a>.begin(), <a class="code" href="classimpala_1_1HdfsScanNode.html#a3f8c2ca9b6847e98d8e244045d11e6cf">materialized_slots_</a>.end(),</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <a class="code" href="classimpala_1_1SlotDescriptor.html#a86b91f0ed75bdf196f6727d330f440fc">SlotDescriptor::ColPathLessThan</a>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="comment">// Populate mapping from slot path to index into materialized_slots_.</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classimpala_1_1HdfsScanNode.html#a3f8c2ca9b6847e98d8e244045d11e6cf">materialized_slots_</a>.size(); ++i) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a127b325a03028a354511580f11bba31d">path_to_materialized_slot_idx_</a>[<a class="code" href="classimpala_1_1HdfsScanNode.html#a3f8c2ca9b6847e98d8e244045d11e6cf">materialized_slots_</a>[i]-&gt;col_path()] = i;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="comment">// Initialize is_materialized_col_</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a92415c71b4eb2375813f14dc5e863958">is_materialized_col_</a>.resize(hdfs_table_-&gt;num_cols());</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; hdfs_table_-&gt;num_cols(); ++i) {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a92415c71b4eb2375813f14dc5e863958">is_materialized_col_</a>[i] = <a class="code" href="classimpala_1_1HdfsScanNode.html#a87b2fb17053d1d8d94762c024e7ffc70">GetMaterializedSlotIdx</a>(vector&lt;int&gt;(1, i)) != <a class="code" href="classimpala_1_1HdfsScanNode.html#ac6d4b9ccf63d7b36ff869d8e1230cc13">SKIP_COLUMN</a>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <a class="code" href="classimpala_1_1HdfsFsCache.html#ab8cd39a3e94d24aab4599df223a5c313">HdfsFsCache::HdfsFsMap</a> fs_cache;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="comment">// Convert the TScanRangeParams into per-file DiskIO::ScanRange objects and populate</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// partition_ids_, file_descs_, and per_type_files_.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  DCHECK(<a class="code" href="classimpala_1_1ScanNode.html#aa642d2e5f805e720e724bfa3dce1bc81">scan_range_params_</a> != NULL)</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Must call SetScanRanges() before calling Prepare()&quot;</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordtype">int</span> num_ranges_missing_volume_id = 0;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classimpala_1_1ScanNode.html#aa642d2e5f805e720e724bfa3dce1bc81">scan_range_params_</a>-&gt;size(); ++i) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    DCHECK((*<a class="code" href="classimpala_1_1ScanNode.html#aa642d2e5f805e720e724bfa3dce1bc81">scan_range_params_</a>)[i].scan_range.__isset.hdfs_file_split);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keyword">const</span> THdfsFileSplit&amp; split = (*scan_range_params_)[i].scan_range.hdfs_file_split;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#af444c3702443d0b5aa625b2f8df66383">partition_ids_</a>.insert(split.partition_id);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="classimpala_1_1HdfsPartitionDescriptor.html">HdfsPartitionDescriptor</a>* partition_desc =</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        hdfs_table_-&gt;GetPartition(split.partition_id);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <a class="code" href="sasl-test_8cc.html#a2db66f7b463c0e190f8933e51f43d91e">filesystem::path</a> file_path(partition_desc-&gt;<a class="code" href="classimpala_1_1HdfsPartitionDescriptor.html#ae1e66f0a122f72d42cda498511e63c0c">location</a>());</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    file_path.append(split.file_name, filesystem::path::codecvt());</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; native_file_path = file_path.native();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="structimpala_1_1HdfsFileDesc.html">HdfsFileDesc</a>* file_desc = NULL;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    FileDescMap::iterator file_desc_it = <a class="code" href="classimpala_1_1HdfsScanNode.html#a74b13953ea9d3088ce4759e8b2eae19a">file_descs_</a>.find(native_file_path);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">if</span> (file_desc_it == <a class="code" href="classimpala_1_1HdfsScanNode.html#a74b13953ea9d3088ce4759e8b2eae19a">file_descs_</a>.end()) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="comment">// Add new file_desc to file_descs_ and per_type_files_</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      file_desc = runtime_state_-&gt;obj_pool()-&gt;Add(<span class="keyword">new</span> <a class="code" href="structimpala_1_1HdfsFileDesc.html">HdfsFileDesc</a>(native_file_path));</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <a class="code" href="classimpala_1_1HdfsScanNode.html#a74b13953ea9d3088ce4759e8b2eae19a">file_descs_</a>[native_file_path] = file_desc;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      file_desc-&gt;<a class="code" href="structimpala_1_1HdfsFileDesc.html#ac61d7b9d90558ae7289dc2ae2f5082b9">file_length</a> = split.file_length;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      file_desc-&gt;<a class="code" href="structimpala_1_1HdfsFileDesc.html#a6c90f16db47944a449aa282bbedd2eee">mtime</a> = split.mtime;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      file_desc-&gt;<a class="code" href="structimpala_1_1HdfsFileDesc.html#a735ba080821bf0befbaeac9ce007a18f">file_compression</a> = split.file_compression;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(<a class="code" href="classimpala_1_1HdfsFsCache.html#af7b18daf8c4da6bfce2c7612a515bf64">HdfsFsCache::instance</a>()-&gt;GetConnection(</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;          native_file_path, &amp;file_desc-&gt;<a class="code" href="structimpala_1_1HdfsFileDesc.html#a736558d23bb330a4ee535b26bdc5041c">fs</a>, &amp;fs_cache));</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keywordflow">if</span> (partition_desc == NULL) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        stringstream ss;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        ss &lt;&lt; <span class="stringliteral">&quot;Could not find partition with id: &quot;</span> &lt;&lt; split.partition_id;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classimpala_1_1Status.html">Status</a>(ss.str());</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      ++<a class="code" href="classimpala_1_1HdfsScanNode.html#ad1db57d94bc4018fcb09cbe70468bb47">num_unqueued_files_</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <a class="code" href="classimpala_1_1HdfsScanNode.html#ab93bb6f89c7be5d1734683de7fb4f187">per_type_files_</a>[partition_desc-&gt;<a class="code" href="classimpala_1_1HdfsPartitionDescriptor.html#ab4a79c2d0c772e6ecafdae14569bfde4">file_format</a>()].push_back(file_desc);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="comment">// File already processed</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      file_desc = file_desc_it-&gt;second;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">bool</span> expected_local = (*scan_range_params_)[i].__isset.is_remote &amp;&amp;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        !(*scan_range_params_)[i].is_remote;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (expected_local &amp;&amp; (*<a class="code" href="classimpala_1_1ScanNode.html#aa642d2e5f805e720e724bfa3dce1bc81">scan_range_params_</a>)[i].volume_id == -1) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classimpala_1_1HdfsScanNode.html#a3bdd3961f80bd4eaa94b5967b3214b5f">unknown_disk_id_warned_</a>) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <a class="code" href="classimpala_1_1ExecNode.html#a05e056b5d11b187a1d31723c7d1592eb">AddRuntimeExecOption</a>(<span class="stringliteral">&quot;Missing Volume Id&quot;</span>);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#a5a47b289756eb429bbeb5bf134959f9e">runtime_state</a>()-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#aaf076b1879d9e712b08ba3a6e24607b9">LogError</a>(<a class="code" href="classimpala_1_1ErrorMsg.html">ErrorMsg</a>(TErrorCode::HDFS_SCAN_NODE_UNKNOWN_DISK));</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#a3bdd3961f80bd4eaa94b5967b3214b5f">unknown_disk_id_warned_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      ++num_ranges_missing_volume_id;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordtype">bool</span> try_cache = (*scan_range_params_)[i].is_cached;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">if</span> (runtime_state_-&gt;query_options().disable_cached_reads) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      DCHECK(!try_cache) &lt;&lt; <span class="stringliteral">&quot;Params should not have had this set.&quot;</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    file_desc-&gt;<a class="code" href="structimpala_1_1HdfsFileDesc.html#a513879a3999adaee5fbde411757e3703">splits</a>.push_back(</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#a5314b840efa7625e54ce930ee1986bb1">AllocateScanRange</a>(file_desc-&gt;<a class="code" href="structimpala_1_1HdfsFileDesc.html#a736558d23bb330a4ee535b26bdc5041c">fs</a>, file_desc-&gt;<a class="code" href="structimpala_1_1HdfsFileDesc.html#a0721c023687172fe34212482fedac297">filename</a>.c_str(), split.length,</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            split.offset, split.partition_id, (*scan_range_params_)[i].volume_id,</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            try_cache, expected_local, file_desc-&gt;<a class="code" href="structimpala_1_1HdfsFileDesc.html#a6c90f16db47944a449aa282bbedd2eee">mtime</a>));</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">// Compute the minimum bytes required to start a new thread. This is based on the</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="comment">// file format.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="comment">// The higher the estimate, the less likely it is the query will fail but more likely</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="comment">// the query will be throttled when it does not need to be.</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="comment">// TODO: how many buffers should we estimate per range. The IoMgr will throttle down to</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">// one but if there are already buffers queued before memory pressure was hit, we can&#39;t</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// reclaim that memory.</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#ab93bb6f89c7be5d1734683de7fb4f187">per_type_files_</a>[THdfsFileFormat::PARQUET].size() &gt; 0) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="comment">// Parquet files require buffers per column</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a9f43b5a5a502530c82e0fe164dc80ad7">scanner_thread_bytes_required_</a> =</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#a3f8c2ca9b6847e98d8e244045d11e6cf">materialized_slots_</a>.size() * 3 * runtime_state_-&gt;io_mgr()-&gt;max_read_buffer_size();</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a9f43b5a5a502530c82e0fe164dc80ad7">scanner_thread_bytes_required_</a> =</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        3 * runtime_state_-&gt;io_mgr()-&gt;max_read_buffer_size();</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="comment">// scanner_thread_bytes_required_ now contains the IoBuffer requirement.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="comment">// Next we add in the other memory the scanner thread will use.</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="comment">// e.g. decompression buffers, tuple buffers, etc.</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">// For compressed text, we estimate this based on the file size (since the whole file</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">// will need to be decompressed at once). For all other formats, we use a constant.</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// TODO: can we do something better?</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  int64_t scanner_thread_mem_usage = <a class="code" href="hdfs-scan-node_8cc.html#a35626c2b2a98e3c681d17336ebec72e5">SCANNER_THREAD_MEM_USAGE</a>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  BOOST_FOREACH(<a class="code" href="structimpala_1_1HdfsFileDesc.html">HdfsFileDesc</a>* file, <a class="code" href="classimpala_1_1HdfsScanNode.html#ab93bb6f89c7be5d1734683de7fb4f187">per_type_files_</a>[THdfsFileFormat::TEXT]) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (file-&gt;<a class="code" href="structimpala_1_1HdfsFileDesc.html#a735ba080821bf0befbaeac9ce007a18f">file_compression</a> != THdfsCompression::NONE) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      int64_t bytes_required = file-&gt;<a class="code" href="structimpala_1_1HdfsFileDesc.html#ac61d7b9d90558ae7289dc2ae2f5082b9">file_length</a> * <a class="code" href="hdfs-scan-node_8cc.html#afc0d04de3b6bd6176cbab88eed30d519">COMPRESSED_TEXT_COMPRESSION_RATIO</a>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      scanner_thread_mem_usage = ::max(bytes_required, scanner_thread_mem_usage);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a9f43b5a5a502530c82e0fe164dc80ad7">scanner_thread_bytes_required_</a> += scanner_thread_mem_usage;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="comment">// Prepare all the partitions scanned by the scan node</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  BOOST_FOREACH(<span class="keyword">const</span> int64_t&amp; partition_id, <a class="code" href="classimpala_1_1HdfsScanNode.html#af444c3702443d0b5aa625b2f8df66383">partition_ids_</a>) {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="classimpala_1_1HdfsPartitionDescriptor.html">HdfsPartitionDescriptor</a>* partition_desc = hdfs_table_-&gt;GetPartition(partition_id);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    DCHECK(partition_desc != NULL);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(partition_desc-&gt;<a class="code" href="classimpala_1_1HdfsPartitionDescriptor.html#abe51d04af9ad683ef8bc891a89da0300">PrepareExprs</a>(state));</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="comment">// Update server wide metrics for number of scan ranges and ranges that have</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">// incomplete metadata.</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <a class="code" href="classimpala_1_1ImpaladMetrics.html#adcbee0c79600142bbbe9629708fbce64">ImpaladMetrics::NUM_RANGES_PROCESSED</a>-&gt;Increment(<a class="code" href="classimpala_1_1ScanNode.html#aa642d2e5f805e720e724bfa3dce1bc81">scan_range_params_</a>-&gt;size());</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <a class="code" href="classimpala_1_1ImpaladMetrics.html#a9788cc608fa2d1835c4cadbe95b3d4f5">ImpaladMetrics::NUM_RANGES_MISSING_VOLUME_ID</a>-&gt;Increment(num_ranges_missing_volume_id);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="comment">// Add per volume stats to the runtime profile</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#adc5104041e8113d244f775b8fd7a7280">PerVolumnStats</a> per_volume_stats;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  stringstream str;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a8ccdbe3afe3d3360261bd6babfea7bff">UpdateHdfsSplitStats</a>(*<a class="code" href="classimpala_1_1ScanNode.html#aa642d2e5f805e720e724bfa3dce1bc81">scan_range_params_</a>, &amp;per_volume_stats);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a896efeab03af639a6e42b425323f83c1">PrintHdfsSplitStats</a>(per_volume_stats, &amp;str);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <a class="code" href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">runtime_profile</a>()-&gt;<a class="code" href="classimpala_1_1RuntimeProfile.html#aff0f9fcb17559d45c0d09c413372dbb4">AddInfoString</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ac76e401eb1573dbcaf0acf7607fa308e">HDFS_SPLIT_STATS_DESC</a>, str.str());</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="comment">// Initialize conjunct exprs</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(<a class="code" href="classimpala_1_1Expr.html#a6b9c01a432ae49b57482c9fc42a73681">Expr::CreateExprTrees</a>(</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      runtime_state_-&gt;obj_pool(), <a class="code" href="classimpala_1_1HdfsScanNode.html#ac373fee18a1d5212b15430c3894eec0c">thrift_plan_node_</a>-&gt;conjuncts, &amp;<a class="code" href="classimpala_1_1HdfsScanNode.html#a3e42cc1145e87bd01fcbb08b3963fbf8">conjunct_ctxs_</a>));</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <a class="code" href="classimpala_1_1Expr.html#a3ae02e50debba50ac5c7b6dd9f8016e7">Expr::Prepare</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#a3e42cc1145e87bd01fcbb08b3963fbf8">conjunct_ctxs_</a>, runtime_state_, <a class="code" href="classimpala_1_1ExecNode.html#a467297b1704ae33db61ae61d3400c35f">row_desc</a>(), <a class="code" href="classimpala_1_1ExecNode.html#abe940aa2d7da783c4e8c65f0af22ad8f">expr_mem_tracker</a>()));</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <a class="code" href="classimpala_1_1ExecNode.html#a19340582202dd61e0b028c28efa5490a">AddExprCtxsToFree</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#a3e42cc1145e87bd01fcbb08b3963fbf8">conjunct_ctxs_</a>);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> format = THdfsFileFormat::TEXT;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;       format &lt;= THdfsFileFormat::PARQUET; ++format) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    vector&lt;HdfsFileDesc*&gt;&amp; file_descs =</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#ab93bb6f89c7be5d1734683de7fb4f187">per_type_files_</a>[<span class="keyword">static_cast&lt;</span>THdfsFileFormat::type<span class="keyword">&gt;</span>(format)];</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> (file_descs.empty()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">// Randomize the order this node processes the files. We want to do this to avoid</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="comment">// issuing remote reads to the same DN from different impalads. In file formats such</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="comment">// as avro/seq/rc (i.e. splittable with a header), every node first reads the header.</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="comment">// If every node goes through the files in the same order, all the remote reads are</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="comment">// for the same file meaning a few DN serves a lot of remote reads at the same time.</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    random_shuffle(file_descs.begin(), file_descs.end());</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">// Create reusable codegen&#39;d functions for each file type type needed</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    Function* fn;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">switch</span> (format) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keywordflow">case</span> THdfsFileFormat::TEXT:</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        fn = <a class="code" href="classimpala_1_1HdfsTextScanner.html#abd5837c883c0e0490a228e7809ee5478">HdfsTextScanner::Codegen</a>(<span class="keyword">this</span>, <a class="code" href="classimpala_1_1HdfsScanNode.html#a3e42cc1145e87bd01fcbb08b3963fbf8">conjunct_ctxs_</a>);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="keywordflow">case</span> THdfsFileFormat::SEQUENCE_FILE:</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        fn = <a class="code" href="classimpala_1_1HdfsSequenceScanner.html#a564d7db2b7e0d8e9409d930efc6f4335">HdfsSequenceScanner::Codegen</a>(<span class="keyword">this</span>, <a class="code" href="classimpala_1_1HdfsScanNode.html#a3e42cc1145e87bd01fcbb08b3963fbf8">conjunct_ctxs_</a>);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keywordflow">case</span> THdfsFileFormat::AVRO:</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        fn = <a class="code" href="classimpala_1_1HdfsAvroScanner.html#a7432843919e4a757141788dda34e4ffb">HdfsAvroScanner::Codegen</a>(<span class="keyword">this</span>, <a class="code" href="classimpala_1_1HdfsScanNode.html#a3e42cc1145e87bd01fcbb08b3963fbf8">conjunct_ctxs_</a>);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="comment">// No codegen for this format</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        fn = NULL;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">if</span> (fn != NULL) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <a class="code" href="classimpala_1_1LlvmCodeGen.html">LlvmCodeGen</a>* codegen;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(runtime_state_-&gt;GetCodegen(&amp;codegen));</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      codegen-&gt;<a class="code" href="classimpala_1_1LlvmCodeGen.html#a03470568663cfd5771af8fc387aabfd5">AddFunctionToJit</a>(</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;          fn, &amp;<a class="code" href="classimpala_1_1HdfsScanNode.html#ae7f252f793570d19d71ef0c59ddb6eef">codegend_fn_map_</a>[static_cast&lt;THdfsFileFormat::type&gt;(format)]);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classimpala_1_1Status.html#a580565665ea944eb64f3f495b1bee1e0">Status::OK</a>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;}</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">// This function initiates the connection to hdfs and starts up the initial scanner</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">// threads. The scanner subclasses are passed the initial splits.  Scanners are expected</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">// to queue up a non-zero number of those splits to the io mgr (via the ScanNode).</span></div>
<div class="line"><a name="l00511"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a39c0718de7bdd2bff19c97dc1eb5bdaa">  511</a></span>&#160;<a class="code" href="classimpala_1_1Status.html">Status</a> <a class="code" href="classimpala_1_1HdfsScanNode.html#a39c0718de7bdd2bff19c97dc1eb5bdaa">HdfsScanNode::Open</a>(<a class="code" href="classimpala_1_1RuntimeState.html">RuntimeState</a>* state) {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(<a class="code" href="classimpala_1_1ExecNode.html#a0e9b5636a80c8fe8c2ab31990c84ff51">ExecNode::Open</a>(state));</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment">// We need at least one scanner thread to make progress. We need to make this</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="comment">// reservation before any ranges are issued.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#af7ae71c3035ca00d0fd290b580a4ad04">resource_pool</a>()-&gt;<a class="code" href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html#a503ab1ef6e9ba35295f50d3d4ac034c9">ReserveOptionalTokens</a>(1);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#adc231e17933fbc4385f968d7eecc5ee2">query_options</a>().num_scanner_threads &gt; 0) {</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#af7ae71c3035ca00d0fd290b580a4ad04">resource_pool</a>()-&gt;<a class="code" href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html#a231a2da34552814c89c8d9b5bc5ee379">set_max_quota</a>(</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#adc231e17933fbc4385f968d7eecc5ee2">query_options</a>().num_scanner_threads);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#af7ae71c3035ca00d0fd290b580a4ad04">resource_pool</a>()-&gt;<a class="code" href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html#a0fb6fb62bd40deb0f79b94dbf8179d81">SetThreadAvailableCb</a>(</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      bind&lt;void&gt;(mem_fn(&amp;<a class="code" href="classimpala_1_1HdfsScanNode.html#aff162f338e73e753a8d04cdee31246e5">HdfsScanNode::ThreadTokenAvailableCb</a>), <span class="keyword">this</span>, _1));</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#aafb733d608a90c92275e7ec9d4bbfcf9">query_resource_mgr</a>() != NULL) {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a10a9ceb6d7fcd9bbfe6c4217ba5b7081">rm_callback_id_</a> = <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#aafb733d608a90c92275e7ec9d4bbfcf9">query_resource_mgr</a>()-&gt;<a class="code" href="classimpala_1_1QueryResourceMgr.html#a88c3279b6bbe8d782bf272ec4756df07">AddVcoreAvailableCb</a>(</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        bind&lt;void&gt;(mem_fn(&amp;<a class="code" href="classimpala_1_1HdfsScanNode.html#aff162f338e73e753a8d04cdee31246e5">HdfsScanNode::ThreadTokenAvailableCb</a>), <span class="keyword">this</span>,</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#af7ae71c3035ca00d0fd290b580a4ad04">resource_pool</a>()));</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#a74b13953ea9d3088ce4759e8b2eae19a">file_descs_</a>.empty()) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a9be5690e584ef1940004da01f85d7b31">SetDone</a>();</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classimpala_1_1Status.html#a580565665ea944eb64f3f495b1bee1e0">Status::OK</a>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="comment">// Open all the partition exprs used by the scan node</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  BOOST_FOREACH(<span class="keyword">const</span> int64_t&amp; partition_id, <a class="code" href="classimpala_1_1HdfsScanNode.html#af444c3702443d0b5aa625b2f8df66383">partition_ids_</a>) {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <a class="code" href="classimpala_1_1HdfsPartitionDescriptor.html">HdfsPartitionDescriptor</a>* partition_desc = <a class="code" href="classimpala_1_1HdfsScanNode.html#ad901cf20831c82d3e4de0b57be69b2bf">hdfs_table_</a>-&gt;<a class="code" href="classimpala_1_1HdfsTableDescriptor.html#a1fc0bcb239a6f2a6489cf0bc67f00647">GetPartition</a>(partition_id);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    DCHECK(partition_desc != NULL);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(partition_desc-&gt;<a class="code" href="classimpala_1_1HdfsPartitionDescriptor.html#a3f6d43477d551e065f039c7b074bf4b1">OpenExprs</a>(state));</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="comment">// Open all conjuncts</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <a class="code" href="classimpala_1_1Expr.html#aad1111f87951868de4d8f8b2dfe87c5f">Expr::Open</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#a3e42cc1145e87bd01fcbb08b3963fbf8">conjunct_ctxs_</a>, state);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#a47f9eb99e3e705017d17dffddbea38b2">RegisterContext</a>(</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      &amp;<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>, <a class="code" href="classimpala_1_1ExecNode.html#abd7922a579e4adc353756849a0f45b48">mem_tracker</a>()));</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// Initialize HdfsScanNode specific counters</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <a class="code" href="classimpala_1_1ScanNode.html#a230df199438eeac9776358b9ebea0d63">read_timer_</a> = <a class="code" href="runtime-profile_8h.html#a8841ca205b2a05d608e82d443bad3a77">ADD_TIMER</a>(<a class="code" href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">runtime_profile</a>(), <a class="code" href="classimpala_1_1ScanNode.html#ab1628dc30ae6fb5ee939dab75a9a3188">TOTAL_HDFS_READ_TIMER</a>);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <a class="code" href="classimpala_1_1ScanNode.html#a40135ae832675ff6feca8bb198fc2ee1">per_read_thread_throughput_counter_</a> = <a class="code" href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">runtime_profile</a>()-&gt;<a class="code" href="classimpala_1_1RuntimeProfile.html#a4ba4028a644bd8f71cdd624081f86ba7">AddDerivedCounter</a>(</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <a class="code" href="classimpala_1_1ScanNode.html#a4f56b81443bb1b8099b589ba1855d343">PER_READ_THREAD_THROUGHPUT_COUNTER</a>, TUnit::BYTES_PER_SECOND,</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      bind&lt;int64_t&gt;(&amp;<a class="code" href="classimpala_1_1RuntimeProfile.html#ab1e095fac59cde33085156670c1e5130">RuntimeProfile::UnitsPerSecond</a>, <a class="code" href="classimpala_1_1ScanNode.html#a852e26d5e63c13b30b1f2c7d986838f4">bytes_read_counter_</a>, read_timer_));</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <a class="code" href="classimpala_1_1ScanNode.html#a52caf60333f4f60a19c7a31df81babcc">scan_ranges_complete_counter_</a> =</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <a class="code" href="runtime-profile_8h.html#aac035c52016117af399543521f069c51">ADD_COUNTER</a>(<a class="code" href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">runtime_profile</a>(), <a class="code" href="classimpala_1_1ScanNode.html#a86d533cdcfa34c18ae02db91536e0d4c">SCAN_RANGES_COMPLETE_COUNTER</a>, TUnit::UNIT);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1DiskInfo.html#a88b7ae9978345b6c0baedb1726a35d72">DiskInfo::num_disks</a>() &lt; 64) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="classimpala_1_1ScanNode.html#aee32dbcc86bd092c4bf68ee783a4bab5">num_disks_accessed_counter_</a> =</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <a class="code" href="runtime-profile_8h.html#aac035c52016117af399543521f069c51">ADD_COUNTER</a>(<a class="code" href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">runtime_profile</a>(), <a class="code" href="classimpala_1_1ScanNode.html#a116d2bfc4460bc72e46ac1a8877d0063">NUM_DISKS_ACCESSED_COUNTER</a>, TUnit::UNIT);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <a class="code" href="classimpala_1_1ScanNode.html#aee32dbcc86bd092c4bf68ee783a4bab5">num_disks_accessed_counter_</a> = NULL;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <a class="code" href="classimpala_1_1ScanNode.html#a30641df011a5d74c6c94788732d45c9c">num_scanner_threads_started_counter_</a> =</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <a class="code" href="runtime-profile_8h.html#aac035c52016117af399543521f069c51">ADD_COUNTER</a>(<a class="code" href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">runtime_profile</a>(), <a class="code" href="classimpala_1_1ScanNode.html#ab665916f0d8fc80d37fd92496746fe8b">NUM_SCANNER_THREADS_STARTED</a>, TUnit::UNIT);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#abcf20ad952f31d948888d9834b64dd94">set_bytes_read_counter</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>, <a class="code" href="classimpala_1_1ScanNode.html#a1e427c8caf4c9f75f08f0269f07d8c91">bytes_read_counter</a>());</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#a9f81e48ed3492b090a38a8ac9d90cc97">set_read_timer</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>, <a class="code" href="classimpala_1_1ScanNode.html#a50f56df165715453106a2a60c5c96a2b">read_timer</a>());</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#a8b9c885f997c1151fcb889f727d41fdb">set_active_read_thread_counter</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>,</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      &amp;<a class="code" href="classimpala_1_1ScanNode.html#a854c00138aabd7ca7774d4d67a594d3a">active_hdfs_read_thread_counter_</a>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#a7b7a12de61dd80ed3b3163192c3cac19">set_disks_access_bitmap</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>,</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      &amp;<a class="code" href="classimpala_1_1HdfsScanNode.html#a304fafe6def2c0514985b7a04f96d963">disks_accessed_bitmap_</a>);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <a class="code" href="classimpala_1_1ScanNode.html#ae95ad9baabf5949f80050506af7478b2">average_scanner_thread_concurrency_</a> = <a class="code" href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">runtime_profile</a>()-&gt;<a class="code" href="classimpala_1_1RuntimeProfile.html#acb49893c3fdbdbb7a709b6d2d6276d91">AddSamplingCounter</a>(</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <a class="code" href="classimpala_1_1ScanNode.html#a62db63afa7d58a8566bd7fd95dee50ff">AVERAGE_SCANNER_THREAD_CONCURRENCY</a>, &amp;<a class="code" href="classimpala_1_1ScanNode.html#aa12010650a5eafd6ebeccb5fdd9e442a">active_scanner_thread_counter_</a>);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <a class="code" href="classimpala_1_1ScanNode.html#a17db6484c22ecd4c0511e5e1c53f185c">average_hdfs_read_thread_concurrency_</a> = <a class="code" href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">runtime_profile</a>()-&gt;<a class="code" href="classimpala_1_1RuntimeProfile.html#acb49893c3fdbdbb7a709b6d2d6276d91">AddSamplingCounter</a>(</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <a class="code" href="classimpala_1_1ScanNode.html#a107068e0d20d1810ebb9390e89d41dda">AVERAGE_HDFS_READ_THREAD_CONCURRENCY</a>, &amp;<a class="code" href="classimpala_1_1ScanNode.html#a854c00138aabd7ca7774d4d67a594d3a">active_hdfs_read_thread_counter_</a>);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#afb45aa3eeb7c9213fb1e809bccc51c38">bytes_read_local_</a> = <a class="code" href="runtime-profile_8h.html#aac035c52016117af399543521f069c51">ADD_COUNTER</a>(<a class="code" href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">runtime_profile</a>(), <span class="stringliteral">&quot;BytesReadLocal&quot;</span>,</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      TUnit::BYTES);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a9c972b92951c67686c0783ca2c554d2d">bytes_read_short_circuit_</a> = <a class="code" href="runtime-profile_8h.html#aac035c52016117af399543521f069c51">ADD_COUNTER</a>(<a class="code" href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">runtime_profile</a>(), <span class="stringliteral">&quot;BytesReadShortCircuit&quot;</span>,</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      TUnit::BYTES);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a9fab7b12afe81d6912442bef2d8131d4">bytes_read_dn_cache_</a> = <a class="code" href="runtime-profile_8h.html#aac035c52016117af399543521f069c51">ADD_COUNTER</a>(<a class="code" href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">runtime_profile</a>(), <span class="stringliteral">&quot;BytesReadDataNodeCache&quot;</span>,</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      TUnit::BYTES);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a7ccd8c0369afce6502d98f04dc8e08ea">num_remote_ranges_</a> = <a class="code" href="runtime-profile_8h.html#aac035c52016117af399543521f069c51">ADD_COUNTER</a>(<a class="code" href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">runtime_profile</a>(), <span class="stringliteral">&quot;RemoteScanRanges&quot;</span>,</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      TUnit::UNIT);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#ac80894a195ac409e4bd10f004cc9dfb4">unexpected_remote_bytes_</a> = <a class="code" href="runtime-profile_8h.html#aac035c52016117af399543521f069c51">ADD_COUNTER</a>(<a class="code" href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">runtime_profile</a>(), <span class="stringliteral">&quot;BytesReadRemoteUnexpected&quot;</span>,</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      TUnit::BYTES);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#ad47ca48f0333ef0fb46b8b121dc05ee6">max_compressed_text_file_length_</a> = <a class="code" href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">runtime_profile</a>()-&gt;<a class="code" href="classimpala_1_1RuntimeProfile.html#a91cce4e3e109922a077cb84a9f6925f2">AddHighWaterMarkCounter</a>(</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="stringliteral">&quot;MaxCompressedTextFileLength&quot;</span>, TUnit::BYTES);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; state-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#a3c99177a95caa67739c8815c55eb3491">num_total_disks</a>() + 1; ++i) {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <a class="code" href="classimpala_1_1ScanNode.html#a00ea471438154ad56391ee19a39f12f0">hdfs_read_thread_concurrency_bucket_</a>.push_back(</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <a class="code" href="classimpala_1_1ExecNode.html#ac55aaa21c7750fd5f8774aee1ac5211a">pool_</a>-&gt;<a class="code" href="classimpala_1_1ObjectPool.html#ab191078c99825682a0a9915ca1e0c05c">Add</a>(<span class="keyword">new</span> <a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html">RuntimeProfile::Counter</a>(TUnit::DOUBLE_VALUE, 0)));</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <a class="code" href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">runtime_profile</a>()-&gt;<a class="code" href="classimpala_1_1RuntimeProfile.html#a9540f9287515f7cb666e5dac64be57a9">RegisterBucketingCounters</a>(&amp;<a class="code" href="classimpala_1_1ScanNode.html#a854c00138aabd7ca7774d4d67a594d3a">active_hdfs_read_thread_counter_</a>,</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      &amp;<a class="code" href="classimpala_1_1ScanNode.html#a00ea471438154ad56391ee19a39f12f0">hdfs_read_thread_concurrency_bucket_</a>);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#abe7c2af2d420e7bffa13986bb2886892">counters_running_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordtype">int</span> total_splits = 0;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">for</span> (FileDescMap::iterator it = <a class="code" href="classimpala_1_1HdfsScanNode.html#a74b13953ea9d3088ce4759e8b2eae19a">file_descs_</a>.begin(); it != <a class="code" href="classimpala_1_1HdfsScanNode.html#a74b13953ea9d3088ce4759e8b2eae19a">file_descs_</a>.end(); ++it) {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    total_splits += it-&gt;second-&gt;splits.size();</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">if</span> (total_splits == 0) {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a9be5690e584ef1940004da01f85d7b31">SetDone</a>();</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classimpala_1_1Status.html#a580565665ea944eb64f3f495b1bee1e0">Status::OK</a>;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  stringstream ss;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  ss &lt;&lt; <span class="stringliteral">&quot;Splits complete (node=&quot;</span> &lt;&lt; <a class="code" href="classimpala_1_1ExecNode.html#a2088a36bc4bb4e0c3c7c1444198b76dd">id</a>() &lt;&lt; <span class="stringliteral">&quot;):&quot;</span>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a0251d57ef9bff48b95436210074207d3">progress_</a> = <a class="code" href="classimpala_1_1ProgressUpdater.html">ProgressUpdater</a>(ss.str(), total_splits);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classimpala_1_1Status.html#a580565665ea944eb64f3f495b1bee1e0">Status::OK</a>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;}</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div>
<div class="line"><a name="l00617"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a5f8e4ee279a1f64787666e72308bf66d">  617</a></span>&#160;<a class="code" href="classimpala_1_1Status.html">Status</a> <a class="code" href="classimpala_1_1HdfsScanNode.html#a5f8e4ee279a1f64787666e72308bf66d">HdfsScanNode::Reset</a>(<a class="code" href="classimpala_1_1RuntimeState.html">RuntimeState</a>* state) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  DCHECK(<span class="keyword">false</span>) &lt;&lt; <span class="stringliteral">&quot;NYI&quot;</span>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classimpala_1_1Status.html">Status</a>(<span class="stringliteral">&quot;NYI&quot;</span>);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;}</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div>
<div class="line"><a name="l00622"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#ace07ac96df8e9b8ac2991c142cbc24c0">  622</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#ace07ac96df8e9b8ac2991c142cbc24c0">HdfsScanNode::Close</a>(<a class="code" href="classimpala_1_1RuntimeState.html">RuntimeState</a>* state) {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1ExecNode.html#a467751b7182365c83e867dc3d50b43e2">is_closed</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a9be5690e584ef1940004da01f85d7b31">SetDone</a>();</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  state-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#af7ae71c3035ca00d0fd290b580a4ad04">resource_pool</a>()-&gt;<a class="code" href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html#a0fb6fb62bd40deb0f79b94dbf8179d81">SetThreadAvailableCb</a>(NULL);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="keywordflow">if</span> (state-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#aafb733d608a90c92275e7ec9d4bbfcf9">query_resource_mgr</a>() != NULL &amp;&amp; <a class="code" href="classimpala_1_1HdfsScanNode.html#a10a9ceb6d7fcd9bbfe6c4217ba5b7081">rm_callback_id_</a> != -1) {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    state-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#aafb733d608a90c92275e7ec9d4bbfcf9">query_resource_mgr</a>()-&gt;<a class="code" href="classimpala_1_1QueryResourceMgr.html#a03784ec11fcb18de5edfb28a481949ef">RemoveVcoreAvailableCb</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#a10a9ceb6d7fcd9bbfe6c4217ba5b7081">rm_callback_id_</a>);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a09ef012e32f510ba3d304f4aa6272e45">scanner_threads_</a>.<a class="code" href="classimpala_1_1ThreadGroup.html#a3a126bacbbb2ae42bcb86494287a6a2f">JoinAll</a>();</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a8fc97ba80ecdfc4bf37198de772d3f5c">num_owned_io_buffers_</a> -= <a class="code" href="classimpala_1_1HdfsScanNode.html#a60f0a321960a9a4e7eea0ee391c9c609">materialized_row_batches_</a>-&gt;Cleanup();</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  DCHECK_EQ(<a class="code" href="classimpala_1_1HdfsScanNode.html#a8fc97ba80ecdfc4bf37198de772d3f5c">num_owned_io_buffers_</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ScanNode has leaked io buffers&quot;</span>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a> != NULL) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">// There may still be io buffers used by parent nodes so we can&#39;t unregister the</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="comment">// reader context yet. The runtime state keeps a list of all the reader contexts and</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="comment">// they are unregistered when the fragment is closed.</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    state-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a84919e79b92f9fd3afe579ee65e01f65">reader_contexts</a>()-&gt;push_back(<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="comment">// Need to wait for all the active scanner threads to finish to ensure there is no</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="comment">// more memory tracked by this scan node&#39;s mem tracker.</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    state-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#a0101ab194607143c4e79baaf7a914a64">CancelContext</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a702a5dc48e4ccd0e9ea3199ee5c56e0b">StopAndFinalizeCounters</a>();</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="comment">// There should be no active scanner threads and hdfs read threads.</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  DCHECK_EQ(<a class="code" href="classimpala_1_1ScanNode.html#aa12010650a5eafd6ebeccb5fdd9e442a">active_scanner_thread_counter_</a>.<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a6db04a7861baf700e025bea45de5a2e1">value</a>(), 0);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  DCHECK_EQ(<a class="code" href="classimpala_1_1ScanNode.html#a854c00138aabd7ca7774d4d67a594d3a">active_hdfs_read_thread_counter_</a>.<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a6db04a7861baf700e025bea45de5a2e1">value</a>(), 0);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#a8f972231e2cb705cfbaa14c7290923c6">scan_node_pool_</a>.get() != NULL) <a class="code" href="classimpala_1_1HdfsScanNode.html#a8f972231e2cb705cfbaa14c7290923c6">scan_node_pool_</a>-&gt;FreeAll();</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="comment">// Close all conjuncts</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <a class="code" href="classimpala_1_1Expr.html#a70300b0ba7c91fddb9adfaeb0dfc09a5">Expr::Close</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#a3e42cc1145e87bd01fcbb08b3963fbf8">conjunct_ctxs_</a>, state);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="comment">// Close all the partitions scanned by the scan node</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  BOOST_FOREACH(<span class="keyword">const</span> int64_t&amp; partition_id, <a class="code" href="classimpala_1_1HdfsScanNode.html#af444c3702443d0b5aa625b2f8df66383">partition_ids_</a>) {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="classimpala_1_1HdfsPartitionDescriptor.html">HdfsPartitionDescriptor</a>* partition_desc = <a class="code" href="classimpala_1_1HdfsScanNode.html#ad901cf20831c82d3e4de0b57be69b2bf">hdfs_table_</a>-&gt;<a class="code" href="classimpala_1_1HdfsTableDescriptor.html#a1fc0bcb239a6f2a6489cf0bc67f00647">GetPartition</a>(partition_id);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    DCHECK(partition_desc != NULL);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    partition_desc-&gt;<a class="code" href="classimpala_1_1HdfsPartitionDescriptor.html#ac07d03794cffd542bda8c2f49a0658e5">CloseExprs</a>(state);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <a class="code" href="classimpala_1_1ExecNode.html#a726e2aca524ace8e4c043377e621285a">ScanNode::Close</a>(state);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;}</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<a class="code" href="classimpala_1_1Status.html">Status</a> <a class="code" href="classimpala_1_1HdfsScanNode.html#afe9bc42ad3846bde9f7113e5f1c133dc">HdfsScanNode::AddDiskIoRanges</a>(<span class="keyword">const</span> vector&lt;DiskIoMgr::ScanRange*&gt;&amp; ranges) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#aa6a1a246f28ee5f8214cfdfd2dd8aa42">AddScanRanges</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>, ranges));</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#aff162f338e73e753a8d04cdee31246e5">ThreadTokenAvailableCb</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#af7ae71c3035ca00d0fd290b580a4ad04">resource_pool</a>());</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classimpala_1_1Status.html#a580565665ea944eb64f3f495b1bee1e0">Status::OK</a>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;}</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a0db01a0c4d71cd43de871e55a961155d">  674</a></span>&#160;<a class="code" href="classimpala_1_1Status.html">Status</a> <a class="code" href="classimpala_1_1HdfsScanNode.html#afe9bc42ad3846bde9f7113e5f1c133dc">HdfsScanNode::AddDiskIoRanges</a>(<span class="keyword">const</span> <a class="code" href="structimpala_1_1HdfsFileDesc.html">HdfsFileDesc</a>* desc) {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keyword">const</span> vector&lt;DiskIoMgr::ScanRange*&gt;&amp; ranges = desc-&gt;<a class="code" href="structimpala_1_1HdfsFileDesc.html#a513879a3999adaee5fbde411757e3703">splits</a>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <a class="code" href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#aa6a1a246f28ee5f8214cfdfd2dd8aa42">AddScanRanges</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>, ranges));</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a47c24bd36cf74eeafc574dce1b64c831">MarkFileDescIssued</a>(desc);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#aff162f338e73e753a8d04cdee31246e5">ThreadTokenAvailableCb</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#af7ae71c3035ca00d0fd290b580a4ad04">resource_pool</a>());</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classimpala_1_1Status.html#a580565665ea944eb64f3f495b1bee1e0">Status::OK</a>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;}</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a47c24bd36cf74eeafc574dce1b64c831">  683</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a47c24bd36cf74eeafc574dce1b64c831">HdfsScanNode::MarkFileDescIssued</a>(<span class="keyword">const</span> <a class="code" href="structimpala_1_1HdfsFileDesc.html">HdfsFileDesc</a>* desc) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  DCHECK_GT(<a class="code" href="classimpala_1_1HdfsScanNode.html#ad1db57d94bc4018fcb09cbe70468bb47">num_unqueued_files_</a>, 0);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  --<a class="code" href="classimpala_1_1HdfsScanNode.html#ad1db57d94bc4018fcb09cbe70468bb47">num_unqueued_files_</a>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;}</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a55e38d04080295725416c3ab2fcb8338">  688</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a55e38d04080295725416c3ab2fcb8338">HdfsScanNode::AddMaterializedRowBatch</a>(<a class="code" href="classimpala_1_1RowBatch.html">RowBatch</a>* row_batch) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a60f0a321960a9a4e7eea0ee391c9c609">materialized_row_batches_</a>-&gt;AddBatch(row_batch);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;}</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div>
<div class="line"><a name="l00692"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a8b07275398efab777795acbc34b3fd17">  692</a></span>&#160;<a class="code" href="classimpala_1_1Status.html">Status</a> <a class="code" href="classimpala_1_1HdfsScanNode.html#a8b07275398efab777795acbc34b3fd17">HdfsScanNode::GetConjunctCtxs</a>(vector&lt;ExprContext*&gt;* ctxs) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classimpala_1_1Expr.html#a0704c1c17503f48ab89f0d05dc658a2d">Expr::Clone</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#a3e42cc1145e87bd01fcbb08b3963fbf8">conjunct_ctxs_</a>, <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>, ctxs);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;}</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">// For controlling the amount of memory used for scanners, we approximate the</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">// scanner mem usage based on scanner_thread_bytes_required_, rather than the</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">// consumption in the scan node&#39;s mem tracker. The problem with the scan node</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">// trackers is that it does not account for the memory the scanner will use.</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">// For example, if there is 110 MB of memory left (based on the mem tracker)</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">// and we estimate that a scanner will use 100MB, we want to make sure to only</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">// start up one additional thread. However, after starting the first thread, the</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">// mem tracker value will not change immediately (it takes some time before the</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">// scanner is running and starts using memory). Therefore we just use the estimate</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">// based on the number of running scanner threads.</span></div>
<div class="line"><a name="l00706"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a4d28cb5a8e63d1e7ef4f8fc11138e65c">  706</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a4d28cb5a8e63d1e7ef4f8fc11138e65c">HdfsScanNode::EnoughMemoryForScannerThread</a>(<span class="keywordtype">bool</span> new_thread) {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  int64_t committed_scanner_mem =</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <a class="code" href="classimpala_1_1ScanNode.html#aa12010650a5eafd6ebeccb5fdd9e442a">active_scanner_thread_counter_</a>.<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a6db04a7861baf700e025bea45de5a2e1">value</a>() * <a class="code" href="classimpala_1_1HdfsScanNode.html#a9f43b5a5a502530c82e0fe164dc80ad7">scanner_thread_bytes_required_</a>;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  int64_t tracker_consumption = <a class="code" href="classimpala_1_1ExecNode.html#abd7922a579e4adc353756849a0f45b48">mem_tracker</a>()-&gt;<a class="code" href="classimpala_1_1MemTracker.html#a35f7a4c2c6a5d33f808dda73482fc147">consumption</a>();</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  int64_t est_additional_scanner_mem = committed_scanner_mem - tracker_consumption;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keywordflow">if</span> (est_additional_scanner_mem &lt; 0) {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="comment">// This is the case where our estimate was too low. Expand the estimate based</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="comment">// on the usage.</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    int64_t avg_consumption =</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        tracker_consumption / <a class="code" href="classimpala_1_1ScanNode.html#aa12010650a5eafd6ebeccb5fdd9e442a">active_scanner_thread_counter_</a>.<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a6db04a7861baf700e025bea45de5a2e1">value</a>();</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="comment">// Take the average and expand it by 50%. Some scanners will not have hit their</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="comment">// steady state mem usage yet.</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="comment">// TODO: how can we scale down if we&#39;ve overestimated.</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="comment">// TODO: better heuristic?</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a9f43b5a5a502530c82e0fe164dc80ad7">scanner_thread_bytes_required_</a> = <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(avg_consumption * 1.5);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    est_additional_scanner_mem = 0;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// If we are starting a new thread, take that into account now.</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="keywordflow">if</span> (new_thread) est_additional_scanner_mem += <a class="code" href="classimpala_1_1HdfsScanNode.html#a9f43b5a5a502530c82e0fe164dc80ad7">scanner_thread_bytes_required_</a>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="keywordflow">return</span> est_additional_scanner_mem &lt; <a class="code" href="classimpala_1_1ExecNode.html#abd7922a579e4adc353756849a0f45b48">mem_tracker</a>()-&gt;<a class="code" href="classimpala_1_1MemTracker.html#a88d461cd1b369ee3f1fe6471954c5dd8">SpareCapacity</a>();</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;}</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div>
<div class="line"><a name="l00729"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#aff162f338e73e753a8d04cdee31246e5">  729</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#aff162f338e73e753a8d04cdee31246e5">HdfsScanNode::ThreadTokenAvailableCb</a>(<a class="code" href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html">ThreadResourceMgr::ResourcePool</a>* <a class="code" href="expr-benchmark_8cc.html#a3a5de7bd423fbc0afc4cf935c166ca6b">pool</a>) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="comment">// This is called to start up new scanner threads. It&#39;s not a big deal if we</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="comment">// spin up more than strictly necessary since they will go through and terminate</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="comment">// promptly. However, we want to minimize that by checking a conditions.</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="comment">//  1. Don&#39;t start up if the ScanNode is done</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="comment">//  2. Don&#39;t start up if all the ranges have been taken by another thread.</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="comment">//  3. Don&#39;t start up if the number of ranges left is less than the number of</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">//     active scanner threads.</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="comment">//  4. Don&#39;t start up if no initial ranges have been issued (see IMPALA-1722).</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="comment">//  5. Don&#39;t start up a ScannerThread if materialized_row_batches_ is full since</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="comment">//     we are not scanner bound.</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="comment">//  6. Don&#39;t start up a thread if there isn&#39;t enough memory left to run it.</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="comment">//  7. Don&#39;t start up if there are no thread tokens.</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="comment">//  8. Don&#39;t start up if we are running too many threads for our vcore allocation</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="comment">//  (unless the thread is reserved, in which case it has to run).</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="comment">// Case 4. We have not issued the initial ranges so don&#39;t start a scanner thread.</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="comment">// Issuing ranges will call this function and we&#39;ll start the scanner threads then.</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="comment">// TODO: It would be good to have a test case for that.</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classimpala_1_1HdfsScanNode.html#afc4101dbe061d2baf01e663bf0827666">initial_ranges_issued_</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="keywordtype">bool</span> started_scanner = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="comment">// The lock must be given up between loops in order to give writers to done_,</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="comment">// all_ranges_started_ etc. a chance to grab the lock.</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="comment">// TODO: This still leans heavily on starvation-free locks, come up with a more</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="comment">// correct way to communicate between this method and ScannerThreadHelper</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    unique_lock&lt;mutex&gt; lock(<a class="code" href="classimpala_1_1HdfsScanNode.html#abd87b83ac93c6f0c6527834cd6ca20ff">lock_</a>);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="comment">// Cases 1, 2, 3.</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#a580fe2c16160fddc4cb49db528fedd79">done_</a> || <a class="code" href="classimpala_1_1HdfsScanNode.html#aabe5624b63a44f5262f4bf2cbbfed3c0">all_ranges_started_</a> ||</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <a class="code" href="classimpala_1_1ScanNode.html#aa12010650a5eafd6ebeccb5fdd9e442a">active_scanner_thread_counter_</a>.<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a6db04a7861baf700e025bea45de5a2e1">value</a>() &gt;= <a class="code" href="classimpala_1_1HdfsScanNode.html#a0251d57ef9bff48b95436210074207d3">progress_</a>.<a class="code" href="classimpala_1_1ProgressUpdater.html#acb29adb59cd61fae67e36c70948742ae">remaining</a>()) {</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="comment">// Cases 5 and 6.</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1ScanNode.html#aa12010650a5eafd6ebeccb5fdd9e442a">active_scanner_thread_counter_</a>.<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a6db04a7861baf700e025bea45de5a2e1">value</a>() &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        (<a class="code" href="classimpala_1_1HdfsScanNode.html#a60f0a321960a9a4e7eea0ee391c9c609">materialized_row_batches_</a>-&gt;GetSize() &gt;= <a class="code" href="classimpala_1_1HdfsScanNode.html#aab71d9b6396bcb23c19121c55b4d614a">max_materialized_row_batches_</a> ||</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;         !<a class="code" href="classimpala_1_1HdfsScanNode.html#a4d28cb5a8e63d1e7ef4f8fc11138e65c">EnoughMemoryForScannerThread</a>(<span class="keyword">true</span>))) {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    }</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="comment">// Case 7.</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordtype">bool</span> is_reserved = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">if</span> (!pool-&gt;<a class="code" href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html#a6d2e8fe97989a28eefd8ae614f8cb3a1">TryAcquireThreadToken</a>(&amp;is_reserved)) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="comment">// Case 8.</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">if</span> (!is_reserved) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#aafb733d608a90c92275e7ec9d4bbfcf9">query_resource_mgr</a>() != NULL &amp;&amp;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;          <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#aafb733d608a90c92275e7ec9d4bbfcf9">query_resource_mgr</a>()-&gt;<a class="code" href="classimpala_1_1QueryResourceMgr.html#a47ef4439f5e58096de5403ffe66f7ae7">IsVcoreOverSubscribed</a>()) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    }</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <a class="code" href="runtime-profile_8h.html#a0842f330c18b3e4e53e13655add0310a">COUNTER_ADD</a>(&amp;<a class="code" href="classimpala_1_1ScanNode.html#aa12010650a5eafd6ebeccb5fdd9e442a">active_scanner_thread_counter_</a>, 1);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <a class="code" href="runtime-profile_8h.html#a0842f330c18b3e4e53e13655add0310a">COUNTER_ADD</a>(<a class="code" href="classimpala_1_1ScanNode.html#a30641df011a5d74c6c94788732d45c9c">num_scanner_threads_started_counter_</a>, 1);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    stringstream ss;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    ss &lt;&lt; <span class="stringliteral">&quot;scanner-thread(&quot;</span> &lt;&lt; <a class="code" href="classimpala_1_1ScanNode.html#a30641df011a5d74c6c94788732d45c9c">num_scanner_threads_started_counter_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a6db04a7861baf700e025bea45de5a2e1">value</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a09ef012e32f510ba3d304f4aa6272e45">scanner_threads_</a>.<a class="code" href="classimpala_1_1ThreadGroup.html#a904906f6e646b111636c937a0d58b4f3">AddThread</a>(</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keyword">new</span> <a class="code" href="classimpala_1_1Thread.html">Thread</a>(<span class="stringliteral">&quot;hdfs-scan-node&quot;</span>, ss.str(), &amp;<a class="code" href="classimpala_1_1HdfsScanNode.html#a070067d8d77f5d61fcdd3e2f66774a62">HdfsScanNode::ScannerThread</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    started_scanner = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#aafb733d608a90c92275e7ec9d4bbfcf9">query_resource_mgr</a>() != NULL) {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#aafb733d608a90c92275e7ec9d4bbfcf9">query_resource_mgr</a>()-&gt;<a class="code" href="classimpala_1_1QueryResourceMgr.html#a6fbd0b722ff0c7ac21a965fabcadebf0">NotifyThreadUsageChange</a>(1);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="keywordflow">if</span> (!started_scanner) ++<a class="code" href="classimpala_1_1HdfsScanNode.html#acbd16700f4e92fdb1962a403bd85da27">num_skipped_tokens_</a>;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;}</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div>
<div class="line"><a name="l00797"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a070067d8d77f5d61fcdd3e2f66774a62">  797</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a070067d8d77f5d61fcdd3e2f66774a62">HdfsScanNode::ScannerThread</a>() {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <a class="code" href="runtime-profile_8h.html#ac317f1ef5aa8fbee526b72d4863a9b2c">SCOPED_THREAD_COUNTER_MEASUREMENT</a>(<a class="code" href="classimpala_1_1ScanNode.html#a980b55d52d4cff867f3096b705250357">scanner_thread_counters</a>());</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <a class="code" href="runtime-profile_8h.html#aaa9a2971c6368e3ddd3f5140a0295eb7">SCOPED_TIMER</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#ab48a114e1a7954c40af4828b6d4b472b">total_cpu_timer</a>());</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="keywordflow">while</span> (!<a class="code" href="classimpala_1_1HdfsScanNode.html#a580fe2c16160fddc4cb49db528fedd79">done_</a>) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="comment">// Check if we have enough resources (thread token and memory) to keep using</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="comment">// this thread.</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      unique_lock&lt;mutex&gt; l(<a class="code" href="classimpala_1_1HdfsScanNode.html#abd87b83ac93c6f0c6527834cd6ca20ff">lock_</a>);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1ScanNode.html#aa12010650a5eafd6ebeccb5fdd9e442a">active_scanner_thread_counter_</a>.<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a6db04a7861baf700e025bea45de5a2e1">value</a>() &gt; 1) {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#af7ae71c3035ca00d0fd290b580a4ad04">resource_pool</a>()-&gt;<a class="code" href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html#a206a09379a1e4d99b6067e2008c73811">optional_exceeded</a>() ||</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            !<a class="code" href="classimpala_1_1HdfsScanNode.html#a4d28cb5a8e63d1e7ef4f8fc11138e65c">EnoughMemoryForScannerThread</a>(<span class="keyword">false</span>)) {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;          <span class="comment">// We can&#39;t break here. We need to update the counter with the lock held or else</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;          <span class="comment">// all threads might see active_scanner_thread_counter_.value &gt; 1</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;          <a class="code" href="runtime-profile_8h.html#a0842f330c18b3e4e53e13655add0310a">COUNTER_ADD</a>(&amp;<a class="code" href="classimpala_1_1ScanNode.html#aa12010650a5eafd6ebeccb5fdd9e442a">active_scanner_thread_counter_</a>, -1);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;          <span class="comment">// Unlock before releasing the thread token to avoid deadlock in</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;          <span class="comment">// ThreadTokenAvailableCb().</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;          l.unlock();</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#aafb733d608a90c92275e7ec9d4bbfcf9">query_resource_mgr</a>() != NULL) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#aafb733d608a90c92275e7ec9d4bbfcf9">query_resource_mgr</a>()-&gt;<a class="code" href="classimpala_1_1QueryResourceMgr.html#a6fbd0b722ff0c7ac21a965fabcadebf0">NotifyThreadUsageChange</a>(-1);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;          }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;          <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#af7ae71c3035ca00d0fd290b580a4ad04">resource_pool</a>()-&gt;<a class="code" href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html#abd2059593964256011a6639b48e7e9f1">ReleaseThreadToken</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="comment">// If this is the only scanner thread, it should keep running regardless</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="comment">// of resource constraints.</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">DiskIoMgr::ScanRange</a>* scan_range;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="comment">// Take a snapshot of num_unqueued_files_ before calling GetNextRange().</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="comment">// We don&#39;t want num_unqueued_files_ to go to zero between the return from</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="comment">// GetNextRange() and the check for when all ranges are complete.</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordtype">int</span> num_unqueued_files = <a class="code" href="classimpala_1_1HdfsScanNode.html#ad1db57d94bc4018fcb09cbe70468bb47">num_unqueued_files_</a>;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="classimpala_1_1AtomicUtil.html#a579a99ed6cd7f9f4ac882f1145b4a523">AtomicUtil::MemoryBarrier</a>();</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <a class="code" href="classimpala_1_1Status.html">Status</a> status = <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#a3cc61c88ae6cbb96791d71aee1664137">GetNextRange</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>, &amp;scan_range);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">if</span> (status.<a class="code" href="classimpala_1_1Status.html#a95ba859e42fe93445b340533220836ac">ok</a>() &amp;&amp; scan_range != NULL) {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="comment">// Got a scan range. Create a new scanner object and process the range</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="comment">// end to end (in this thread).</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <a class="code" href="structimpala_1_1ScanRangeMetadata.html">ScanRangeMetadata</a>* metadata =</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;          <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structimpala_1_1ScanRangeMetadata.html">ScanRangeMetadata</a>*<span class="keyword">&gt;</span>(scan_range-&gt;<a class="code" href="classimpala_1_1DiskIoMgr_1_1ScanRange.html#a5866ae8c5fa197ec221cbd29c02536a5">meta_data</a>());</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      int64_t partition_id = metadata-&gt;<a class="code" href="structimpala_1_1ScanRangeMetadata.html#a7a7171d1dc269bea3f3dd5636e4bb774">partition_id</a>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <a class="code" href="classimpala_1_1HdfsPartitionDescriptor.html">HdfsPartitionDescriptor</a>* partition = <a class="code" href="classimpala_1_1HdfsScanNode.html#ad901cf20831c82d3e4de0b57be69b2bf">hdfs_table_</a>-&gt;<a class="code" href="classimpala_1_1HdfsTableDescriptor.html#a1fc0bcb239a6f2a6489cf0bc67f00647">GetPartition</a>(partition_id);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      DCHECK_NOTNULL(partition);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <a class="code" href="classimpala_1_1ScannerContext.html">ScannerContext</a>* context = <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a4c01f227dc12d859d5824e7c91d6d1aa">obj_pool</a>()-&gt;<a class="code" href="classimpala_1_1ObjectPool.html#ab191078c99825682a0a9915ca1e0c05c">Add</a>(</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;          <span class="keyword">new</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a18a23532ddeb0ae53093207992bb5611">ScannerContext</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>, <span class="keyword">this</span>, partition, scan_range));</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <a class="code" href="classimpala_1_1Status.html">Status</a> scanner_status;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <a class="code" href="classimpala_1_1HdfsScanner.html">HdfsScanner</a>* scanner = <a class="code" href="classimpala_1_1HdfsScanNode.html#a4207adb002ee06e3c3df340bfe5176a3">CreateAndPrepareScanner</a>(partition, context, &amp;scanner_status);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="logging_8h.html#ac976d11f99eb284f949261fcee44dffd">VLOG_QUERY_IS_ON</a> &amp;&amp; (!scanner_status.<a class="code" href="classimpala_1_1Status.html#a95ba859e42fe93445b340533220836ac">ok</a>() || scanner == NULL)) {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        stringstream ss;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        ss &lt;&lt; <span class="stringliteral">&quot;Error preparing text scanner for scan range &quot;</span> &lt;&lt; scan_range-&gt;<a class="code" href="classimpala_1_1DiskIoMgr_1_1RequestRange.html#a015237297a1c06eca646fe3370f0e8b9">file</a>() &lt;&lt;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <span class="stringliteral">&quot;(&quot;</span> &lt;&lt; scan_range-&gt;<a class="code" href="classimpala_1_1DiskIoMgr_1_1RequestRange.html#aae6c216cb57b76594b0a107555a11ceb">offset</a>() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; scan_range-&gt;<a class="code" href="classimpala_1_1DiskIoMgr_1_1RequestRange.html#a54e2b168c3a64a9250cac5069f85435d">len</a>() &lt;&lt; <span class="stringliteral">&quot;).&quot;</span>;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        ss &lt;&lt; endl &lt;&lt; <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a50bda0f1fd81fb2a00b9728875cab6b3">ErrorLog</a>();</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <a class="code" href="logging_8h.html#a916e38366cee7c32fd5fae7e2ee5e4a9">VLOG_QUERY</a> &lt;&lt; ss.str();</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      }</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      status = scanner-&gt;<a class="code" href="classimpala_1_1HdfsScanner.html#a2f5d1478537643952a179471165bf1b5">ProcessSplit</a>();</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="logging_8h.html#ac976d11f99eb284f949261fcee44dffd">VLOG_QUERY_IS_ON</a> &amp;&amp; !status.<a class="code" href="classimpala_1_1Status.html#a95ba859e42fe93445b340533220836ac">ok</a>() &amp;&amp; !<a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a3d8cafc712fea069d9f65ede891544ee">error_log</a>().empty()) {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="comment">// This thread hit an error, record it and bail</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="comment">// TODO: better way to report errors?  Maybe via the thrift interface?</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        stringstream ss;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        ss &lt;&lt; <span class="stringliteral">&quot;Scan node (id=&quot;</span> &lt;&lt; <a class="code" href="classimpala_1_1ExecNode.html#a2088a36bc4bb4e0c3c7c1444198b76dd">id</a>() &lt;&lt; <span class="stringliteral">&quot;) ran into a parse error for scan range &quot;</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;           &lt;&lt; scan_range-&gt;<a class="code" href="classimpala_1_1DiskIoMgr_1_1RequestRange.html#a015237297a1c06eca646fe3370f0e8b9">file</a>() &lt;&lt; <span class="stringliteral">&quot;(&quot;</span> &lt;&lt; scan_range-&gt;<a class="code" href="classimpala_1_1DiskIoMgr_1_1RequestRange.html#aae6c216cb57b76594b0a107555a11ceb">offset</a>() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;           &lt;&lt; scan_range-&gt;<a class="code" href="classimpala_1_1DiskIoMgr_1_1RequestRange.html#a54e2b168c3a64a9250cac5069f85435d">len</a>() &lt;&lt; <span class="stringliteral">&quot;).&quot;</span>;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="keywordflow">if</span> (partition-&gt;<a class="code" href="classimpala_1_1HdfsPartitionDescriptor.html#ab4a79c2d0c772e6ecafdae14569bfde4">file_format</a>() != THdfsFileFormat::PARQUET) {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;          <span class="comment">// Parquet doesn&#39;t read the range end to end so the current offset isn&#39;t useful.</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;          <span class="comment">// TODO: make sure the parquet reader is outputting as much diagnostic</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;          <span class="comment">// information as possible.</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;          <a class="code" href="classimpala_1_1ScannerContext_1_1Stream.html">ScannerContext::Stream</a>* stream = context-&gt;<a class="code" href="classimpala_1_1ScannerContext.html#ae48c238dd876d84b8dc268d684995872">GetStream</a>();</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;          ss &lt;&lt; <span class="stringliteral">&quot; Processed &quot;</span> &lt;&lt; stream-&gt;<a class="code" href="classimpala_1_1ScannerContext_1_1Stream.html#a8342003f29642968db4d42e9b7e5f29a">total_bytes_returned</a>() &lt;&lt; <span class="stringliteral">&quot; bytes.&quot;</span>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        ss &lt;&lt; endl &lt;&lt; <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a50bda0f1fd81fb2a00b9728875cab6b3">ErrorLog</a>();</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <a class="code" href="logging_8h.html#a916e38366cee7c32fd5fae7e2ee5e4a9">VLOG_QUERY</a> &lt;&lt; ss.str();</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      scanner-&gt;<a class="code" href="classimpala_1_1HdfsScanner.html#a61d4a073305f6befe9f12bad12f9de48">Close</a>();</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    }</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordflow">if</span> (!status.<a class="code" href="classimpala_1_1Status.html#a95ba859e42fe93445b340533220836ac">ok</a>()) {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        unique_lock&lt;mutex&gt; l(<a class="code" href="classimpala_1_1HdfsScanNode.html#abd87b83ac93c6f0c6527834cd6ca20ff">lock_</a>);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="comment">// If there was already an error, the main thread will do the cleanup</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classimpala_1_1HdfsScanNode.html#a79a5cce2cd5ab6e165bed160988ea6e5">status_</a>.<a class="code" href="classimpala_1_1Status.html#a95ba859e42fe93445b340533220836ac">ok</a>()) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">if</span> (status.<a class="code" href="classimpala_1_1Status.html#a327e57a4c61d1387f8b52fce20e89a34">IsCancelled</a>()) {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;          <span class="comment">// Scan node should be the only thing that initiated scanner threads to see</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;          <span class="comment">// cancelled (i.e. limit reached).  No need to do anything here.</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;          DCHECK(<a class="code" href="classimpala_1_1HdfsScanNode.html#a580fe2c16160fddc4cb49db528fedd79">done_</a>);</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        }</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="comment">// Set status_ before calling SetDone() (which shuts down the RowBatchQueue),</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="comment">// to ensure that GetNextInternal() notices the error status.</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#a79a5cce2cd5ab6e165bed160988ea6e5">status_</a> = status;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      }</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <span class="keywordflow">if</span> (status.<a class="code" href="classimpala_1_1Status.html#a39b7bde73a8803e2ceaf3b97d0fe94eb">IsMemLimitExceeded</a>()) <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#af4a734aea58f4258866ca8414fd3b00b">SetMemLimitExceeded</a>();</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      <a class="code" href="classimpala_1_1HdfsScanNode.html#a9be5690e584ef1940004da01f85d7b31">SetDone</a>();</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="comment">// Done with range and it completed successfully</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#a0251d57ef9bff48b95436210074207d3">progress_</a>.<a class="code" href="classimpala_1_1ProgressUpdater.html#a36253a94c0cf74bbebf2474048fc4363">done</a>()) {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <span class="comment">// All ranges are finished.  Indicate we are done.</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <a class="code" href="classimpala_1_1HdfsScanNode.html#a9be5690e584ef1940004da01f85d7b31">SetDone</a>();</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">if</span> (scan_range == NULL &amp;&amp; num_unqueued_files == 0) {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="comment">// TODO: Based on the usage pattern of all_ranges_started_, it looks like it is not</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="comment">// needed to acquire the lock in x86.</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      unique_lock&lt;mutex&gt; l(<a class="code" href="classimpala_1_1HdfsScanNode.html#abd87b83ac93c6f0c6527834cd6ca20ff">lock_</a>);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      <span class="comment">// All ranges have been queued and GetNextRange() returned NULL. This means that</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <span class="comment">// every range is either done or being processed by another thread.</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      <a class="code" href="classimpala_1_1HdfsScanNode.html#aabe5624b63a44f5262f4bf2cbbfed3c0">all_ranges_started_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    }</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  }</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <a class="code" href="runtime-profile_8h.html#a0842f330c18b3e4e53e13655add0310a">COUNTER_ADD</a>(&amp;<a class="code" href="classimpala_1_1ScanNode.html#aa12010650a5eafd6ebeccb5fdd9e442a">active_scanner_thread_counter_</a>, -1);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#aafb733d608a90c92275e7ec9d4bbfcf9">query_resource_mgr</a>() != NULL) {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#aafb733d608a90c92275e7ec9d4bbfcf9">query_resource_mgr</a>()-&gt;<a class="code" href="classimpala_1_1QueryResourceMgr.html#a6fbd0b722ff0c7ac21a965fabcadebf0">NotifyThreadUsageChange</a>(-1);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#af7ae71c3035ca00d0fd290b580a4ad04">resource_pool</a>()-&gt;<a class="code" href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html#abd2059593964256011a6639b48e7e9f1">ReleaseThreadToken</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;}</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div>
<div class="line"><a name="l00924"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a6193af89a13de0a3b8d45bc0e5cd288c">  924</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a6193af89a13de0a3b8d45bc0e5cd288c">HdfsScanNode::RangeComplete</a>(<span class="keyword">const</span> THdfsFileFormat::type&amp; file_type,</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keyword">const</span> THdfsCompression::type&amp; compression_type) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  vector&lt;THdfsCompression::type&gt; types;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  types.push_back(compression_type);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a6193af89a13de0a3b8d45bc0e5cd288c">RangeComplete</a>(file_type, types);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;}</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="keywordtype">void</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a6193af89a13de0a3b8d45bc0e5cd288c">HdfsScanNode::RangeComplete</a>(<span class="keyword">const</span> THdfsFileFormat::type&amp; file_type,</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keyword">const</span> vector&lt;THdfsCompression::type&gt;&amp; compression_types) {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <a class="code" href="classimpala_1_1ScanNode.html#afe152e2be9b5c94a2d071b4fc1c59ede">scan_ranges_complete_counter</a>()-&gt;<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#accee494361b71d610dea9b639e19a285">Add</a>(1);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a0251d57ef9bff48b95436210074207d3">progress_</a>.<a class="code" href="classimpala_1_1ProgressUpdater.html#a3e05b2a32fd1bdf32d2a275c10fc431f">Update</a>(1);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    lock_guard&lt;SpinLock&gt; l(<a class="code" href="classimpala_1_1HdfsScanNode.html#a718797e4e5fe972c8b398e011f2077a0">file_type_counts_lock_</a>);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; compression_types.size(); ++i) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      ++<a class="code" href="classimpala_1_1HdfsScanNode.html#a542d120245f434d86664d7bf6aad74d6">file_type_counts_</a>[make_pair(file_type, compression_types[i])];</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    }</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;}</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div>
<div class="line"><a name="l00944"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a9be5690e584ef1940004da01f85d7b31">  944</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a9be5690e584ef1940004da01f85d7b31">HdfsScanNode::SetDone</a>() {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    unique_lock&lt;mutex&gt; l(<a class="code" href="classimpala_1_1HdfsScanNode.html#abd87b83ac93c6f0c6527834cd6ca20ff">lock_</a>);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#a580fe2c16160fddc4cb49db528fedd79">done_</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a580fe2c16160fddc4cb49db528fedd79">done_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a> != NULL) {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#a0101ab194607143c4e79baaf7a914a64">CancelContext</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  }</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#a60f0a321960a9a4e7eea0ee391c9c609">materialized_row_batches_</a>-&gt;Shutdown();</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;}</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div>
<div class="line"><a name="l00956"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a7a061c78c1b6f80ef9b7f5ca9b7cfeb2">  956</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a7a061c78c1b6f80ef9b7f5ca9b7cfeb2">HdfsScanNode::ComputeSlotMaterializationOrder</a>(vector&lt;int&gt;* order)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="keyword">const</span> vector&lt;ExprContext*&gt;&amp; conjuncts = <a class="code" href="classimpala_1_1ExecNode.html#ad21c25a63f7a11127082710941d23654">ExecNode::conjunct_ctxs</a>();</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="comment">// Initialize all order to be conjuncts.size() (after the last conjunct)</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  order-&gt;insert(order-&gt;begin(), <a class="code" href="classimpala_1_1HdfsScanNode.html#a3c7c7603998614d3f5f8d0d679846f5e">materialized_slots</a>().size(), conjuncts.size());</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="keyword">const</span> <a class="code" href="classimpala_1_1DescriptorTbl.html">DescriptorTbl</a>&amp; desc_tbl = <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#abab3a5213f629bebdc266a858dc1d45d">desc_tbl</a>();</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  vector&lt;SlotId&gt; slot_ids;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> conjunct_idx = 0; conjunct_idx &lt; conjuncts.size(); ++conjunct_idx) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    slot_ids.clear();</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="keywordtype">int</span> num_slots = conjuncts[conjunct_idx]-&gt;root()-&gt;GetSlotIds(&amp;slot_ids);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; num_slots; ++j) {</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <a class="code" href="classimpala_1_1SlotDescriptor.html">SlotDescriptor</a>* slot_desc = desc_tbl.<a class="code" href="classimpala_1_1DescriptorTbl.html#a3fe0c1eb403f8ad5197b3bd872d6cd90">GetSlotDescriptor</a>(slot_ids[j]);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      <span class="keywordtype">int</span> slot_idx = <a class="code" href="classimpala_1_1HdfsScanNode.html#a87b2fb17053d1d8d94762c024e7ffc70">GetMaterializedSlotIdx</a>(slot_desc-&gt;<a class="code" href="classimpala_1_1SlotDescriptor.html#a7c96c01776f460b13f914c60f14fd237">col_path</a>());</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      <span class="comment">// slot_idx == -1 means this was a partition key slot which is always</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      <span class="comment">// materialized before any slots.</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      <span class="keywordflow">if</span> (slot_idx == -1) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <span class="comment">// If this slot hasn&#39;t been assigned an order, assign it be materialized</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      <span class="comment">// before evaluating conjuncts[i]</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <span class="keywordflow">if</span> ((*order)[slot_idx] == conjuncts.size()) {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        (*order)[slot_idx] = conjunct_idx;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      }</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    }</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;}</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div>
<div class="line"><a name="l00982"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a702a5dc48e4ccd0e9ea3199ee5c56e0b">  982</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a702a5dc48e4ccd0e9ea3199ee5c56e0b">HdfsScanNode::StopAndFinalizeCounters</a>() {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  unique_lock&lt;mutex&gt; l(<a class="code" href="classimpala_1_1HdfsScanNode.html#abd87b83ac93c6f0c6527834cd6ca20ff">lock_</a>);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classimpala_1_1HdfsScanNode.html#abe7c2af2d420e7bffa13986bb2886892">counters_running_</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <a class="code" href="classimpala_1_1HdfsScanNode.html#abe7c2af2d420e7bffa13986bb2886892">counters_running_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <a class="code" href="classimpala_1_1PeriodicCounterUpdater.html#a88241faa992a1e97b670e9a67ab99032">PeriodicCounterUpdater::StopTimeSeriesCounter</a>(<a class="code" href="classimpala_1_1ScanNode.html#a2ad7c54dcd92214281f21a2c7b524f9a">bytes_read_timeseries_counter_</a>);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <a class="code" href="classimpala_1_1PeriodicCounterUpdater.html#a05da0be47b84b2bc519f91869b03fcef">PeriodicCounterUpdater::StopRateCounter</a>(<a class="code" href="classimpala_1_1ScanNode.html#afb5d90596e4547f8773cd65fb6badccf">total_throughput_counter</a>());</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <a class="code" href="classimpala_1_1PeriodicCounterUpdater.html#a8755f55defce4fd6c5f9d7b46b6dd2b4">PeriodicCounterUpdater::StopSamplingCounter</a>(<a class="code" href="classimpala_1_1ScanNode.html#ae95ad9baabf5949f80050506af7478b2">average_scanner_thread_concurrency_</a>);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <a class="code" href="classimpala_1_1PeriodicCounterUpdater.html#a8755f55defce4fd6c5f9d7b46b6dd2b4">PeriodicCounterUpdater::StopSamplingCounter</a>(<a class="code" href="classimpala_1_1ScanNode.html#a17db6484c22ecd4c0511e5e1c53f185c">average_hdfs_read_thread_concurrency_</a>);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <a class="code" href="classimpala_1_1PeriodicCounterUpdater.html#a59298c90aa019fd18a8d48f441d6a4a7">PeriodicCounterUpdater::StopBucketingCounters</a>(&amp;<a class="code" href="classimpala_1_1ScanNode.html#a00ea471438154ad56391ee19a39f12f0">hdfs_read_thread_concurrency_bucket_</a>,</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <span class="keyword">true</span>);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="comment">// Output hdfs read thread concurrency into info string</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  stringstream ss;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classimpala_1_1ScanNode.html#a00ea471438154ad56391ee19a39f12f0">hdfs_read_thread_concurrency_bucket_</a>.size(); ++i) {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    ss &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; setprecision(4)</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;       &lt;&lt; <a class="code" href="classimpala_1_1ScanNode.html#a00ea471438154ad56391ee19a39f12f0">hdfs_read_thread_concurrency_bucket_</a>[i]-&gt;double_value() &lt;&lt; <span class="stringliteral">&quot;% &quot;</span>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <a class="code" href="classimpala_1_1ExecNode.html#a9cab4e45a94527ff97333c0f280036f8">runtime_profile_</a>-&gt;AddInfoString(<span class="stringliteral">&quot;Hdfs Read Thread Concurrency Bucket&quot;</span>, ss.str());</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="comment">// Convert disk access bitmap to num of disk accessed</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <a class="code" href="classuint64__t.html">uint64_t</a> num_disk_bitmap = <a class="code" href="classimpala_1_1HdfsScanNode.html#a304fafe6def2c0514985b7a04f96d963">disks_accessed_bitmap_</a>.<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a6db04a7861baf700e025bea45de5a2e1">value</a>();</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  int64_t num_disk_accessed = <a class="code" href="classimpala_1_1BitUtil.html#abc00200dd38a82d4735930ab9ed322d8">BitUtil::Popcount</a>(num_disk_bitmap);</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1ScanNode.html#aee32dbcc86bd092c4bf68ee783a4bab5">num_disks_accessed_counter_</a> != NULL) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <a class="code" href="classimpala_1_1ScanNode.html#aee32dbcc86bd092c4bf68ee783a4bab5">num_disks_accessed_counter_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a1cfaae6ff8ad29bcaf5c876ef83dca9d">Set</a>(num_disk_accessed);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  }</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="comment">// output completed file types and counts to info string</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classimpala_1_1HdfsScanNode.html#a542d120245f434d86664d7bf6aad74d6">file_type_counts_</a>.empty()) {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    stringstream ss;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      lock_guard&lt;SpinLock&gt; l2(<a class="code" href="classimpala_1_1HdfsScanNode.html#a718797e4e5fe972c8b398e011f2077a0">file_type_counts_lock_</a>);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      <span class="keywordflow">for</span> (FileTypeCountsMap::const_iterator it = <a class="code" href="classimpala_1_1HdfsScanNode.html#a542d120245f434d86664d7bf6aad74d6">file_type_counts_</a>.begin();</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;          it != <a class="code" href="classimpala_1_1HdfsScanNode.html#a542d120245f434d86664d7bf6aad74d6">file_type_counts_</a>.end(); ++it) {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        ss &lt;&lt; it-&gt;first.first &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; it-&gt;first.second &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; it-&gt;second &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      }</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    }</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <a class="code" href="classimpala_1_1ExecNode.html#a9cab4e45a94527ff97333c0f280036f8">runtime_profile_</a>-&gt;AddInfoString(<span class="stringliteral">&quot;File Formats&quot;</span>, ss.str());</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  }</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="comment">// Output fraction of scanners with codegen enabled</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  ss.str(std::string());</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  ss &lt;&lt; <span class="stringliteral">&quot;Codegen enabled: &quot;</span> &lt;&lt; <a class="code" href="classimpala_1_1HdfsScanNode.html#a658528dff2574432a3475e0d2f78a055">num_scanners_codegen_enabled_</a> &lt;&lt; <span class="stringliteral">&quot; out of &quot;</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;     &lt;&lt; (<a class="code" href="classimpala_1_1HdfsScanNode.html#a658528dff2574432a3475e0d2f78a055">num_scanners_codegen_enabled_</a> + <a class="code" href="classimpala_1_1HdfsScanNode.html#a5cb39ea4d1c5d642772bf2fc094c81d8">num_scanners_codegen_disabled_</a>);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <a class="code" href="classimpala_1_1ExecNode.html#a05e056b5d11b187a1d31723c7d1592eb">AddRuntimeExecOption</a>(ss.str());</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a> != NULL) {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#afb45aa3eeb7c9213fb1e809bccc51c38">bytes_read_local_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a1cfaae6ff8ad29bcaf5c876ef83dca9d">Set</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#a22f6b26648d0b3878e417cf087b2ee89">bytes_read_local</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>));</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a9c972b92951c67686c0783ca2c554d2d">bytes_read_short_circuit_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a1cfaae6ff8ad29bcaf5c876ef83dca9d">Set</a>(</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#ab00029212e1b92f2ecb6014c63c204a2">bytes_read_short_circuit</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>));</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a9fab7b12afe81d6912442bef2d8131d4">bytes_read_dn_cache_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a1cfaae6ff8ad29bcaf5c876ef83dca9d">Set</a>(</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#a62c6a7658886cefdb5e84e867da6352f">bytes_read_dn_cache</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>));</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#a7ccd8c0369afce6502d98f04dc8e08ea">num_remote_ranges_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a1cfaae6ff8ad29bcaf5c876ef83dca9d">Set</a>(static_cast&lt;int64_t&gt;(</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#a79bb53859930e7386542d11490c69cff">num_remote_ranges</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>)));</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#ac80894a195ac409e4bd10f004cc9dfb4">unexpected_remote_bytes_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a1cfaae6ff8ad29bcaf5c876ef83dca9d">Set</a>(</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">io_mgr</a>()-&gt;<a class="code" href="classimpala_1_1DiskIoMgr.html#a1d1b000a66d4456365e4f9fbf6cb896f">unexpected_remote_bytes</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">reader_context_</a>));</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classimpala_1_1HdfsScanNode.html#ac80894a195ac409e4bd10f004cc9dfb4">unexpected_remote_bytes_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a6db04a7861baf700e025bea45de5a2e1">value</a>() &gt;= <a class="code" href="hdfs-scan-node_8cc.html#a5d9655bbf01ec819fcad0abc0ff7843d">UNEXPECTED_REMOTE_BYTES_WARN_THRESHOLD</a>) {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <a class="code" href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">runtime_state_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeState.html#aaf076b1879d9e712b08ba3a6e24607b9">LogError</a>(<a class="code" href="classimpala_1_1ErrorMsg.html">ErrorMsg</a>(TErrorCode::GENERAL, Substitute(</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;          <span class="stringliteral">&quot;Read $0 of data across network that was expected to be local. &quot;</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;          <span class="stringliteral">&quot;Block locality metadata for table &#39;$1.$2&#39; may be stale. Consider running &quot;</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;          <span class="stringliteral">&quot;\&quot;INVALIDATE METADATA `$1`.`$2`\&quot;.&quot;</span>,</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;          <a class="code" href="classimpala_1_1PrettyPrinter.html#a6e5f06a1ce274f747cc4f9928b797c5a">PrettyPrinter::Print</a>(<a class="code" href="classimpala_1_1HdfsScanNode.html#ac80894a195ac409e4bd10f004cc9dfb4">unexpected_remote_bytes_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a6db04a7861baf700e025bea45de5a2e1">value</a>(), TUnit::BYTES),</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;          <a class="code" href="classimpala_1_1HdfsScanNode.html#ad901cf20831c82d3e4de0b57be69b2bf">hdfs_table_</a>-&gt;<a class="code" href="classimpala_1_1TableDescriptor.html#a2cceaff45133a3b0381fcfde53fa6da7">database</a>(), <a class="code" href="classimpala_1_1HdfsScanNode.html#ad901cf20831c82d3e4de0b57be69b2bf">hdfs_table_</a>-&gt;<a class="code" href="classimpala_1_1TableDescriptor.html#a19048794c0423d3f06e991f411fd073f">name</a>())));</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    }</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <a class="code" href="classimpala_1_1ImpaladMetrics.html#a7475bcb69ae310ef238b84049bd22fda">ImpaladMetrics::IO_MGR_BYTES_READ</a>-&gt;Increment(<a class="code" href="classimpala_1_1ScanNode.html#a1e427c8caf4c9f75f08f0269f07d8c91">bytes_read_counter</a>()-&gt;value());</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="classimpala_1_1ImpaladMetrics.html#ac15afb178b5e5d2a07c39614c5f58b1c">ImpaladMetrics::IO_MGR_LOCAL_BYTES_READ</a>-&gt;Increment(</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#afb45aa3eeb7c9213fb1e809bccc51c38">bytes_read_local_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a6db04a7861baf700e025bea45de5a2e1">value</a>());</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <a class="code" href="classimpala_1_1ImpaladMetrics.html#ac31cc3b37c500c1a513287d279059419">ImpaladMetrics::IO_MGR_SHORT_CIRCUIT_BYTES_READ</a>-&gt;Increment(</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#a9c972b92951c67686c0783ca2c554d2d">bytes_read_short_circuit_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a6db04a7861baf700e025bea45de5a2e1">value</a>());</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <a class="code" href="classimpala_1_1ImpaladMetrics.html#ae6f6869c916a26b2fced976a0a71c05c">ImpaladMetrics::IO_MGR_CACHED_BYTES_READ</a>-&gt;Increment(</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <a class="code" href="classimpala_1_1HdfsScanNode.html#a9fab7b12afe81d6912442bef2d8131d4">bytes_read_dn_cache_</a>-&gt;<a class="code" href="classimpala_1_1RuntimeProfile_1_1Counter.html#a6db04a7861baf700e025bea45de5a2e1">value</a>());</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;}</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div>
<div class="line"><a name="l01058"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a8ccdbe3afe3d3360261bd6babfea7bff"> 1058</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a8ccdbe3afe3d3360261bd6babfea7bff">HdfsScanNode::UpdateHdfsSplitStats</a>(</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keyword">const</span> vector&lt;TScanRangeParams&gt;&amp; scan_range_params_list,</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <a class="code" href="classimpala_1_1HdfsScanNode.html#adc5104041e8113d244f775b8fd7a7280">PerVolumnStats</a>* per_volume_stats) {</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  pair&lt;int, int64_t&gt; init_value(0, 0);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  BOOST_FOREACH(<span class="keyword">const</span> TScanRangeParams&amp; scan_range_params, scan_range_params_list) {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keyword">const</span> TScanRange&amp; scan_range = scan_range_params.scan_range;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">if</span> (!scan_range.__isset.hdfs_file_split) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keyword">const</span> THdfsFileSplit&amp; split = scan_range.hdfs_file_split;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    pair&lt;int, int64_t&gt;* stats =</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <a class="code" href="namespaceimpala.html#ac79f8d29c9aaf2dddb617ae5e36ca23f">FindOrInsert</a>(per_volume_stats, scan_range_params.volume_id, init_value);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    ++(stats-&gt;first);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    stats-&gt;second += split.length;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  }</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;}</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div>
<div class="line"><a name="l01073"></a><span class="lineno"><a class="line" href="classimpala_1_1HdfsScanNode.html#a896efeab03af639a6e42b425323f83c1"> 1073</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#a896efeab03af639a6e42b425323f83c1">HdfsScanNode::PrintHdfsSplitStats</a>(<span class="keyword">const</span> <a class="code" href="classimpala_1_1HdfsScanNode.html#adc5104041e8113d244f775b8fd7a7280">PerVolumnStats</a>&amp; per_volume_stats,</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    stringstream* ss) {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="keywordflow">for</span> (PerVolumnStats::const_iterator i = per_volume_stats.begin();</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;       i != per_volume_stats.end(); ++i) {</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;     (*ss) &lt;&lt; i-&gt;first &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; i-&gt;second.first &lt;&lt; <span class="stringliteral">&quot;/&quot;</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;         &lt;&lt; <a class="code" href="classimpala_1_1PrettyPrinter.html#a6e5f06a1ce274f747cc4f9928b797c5a">PrettyPrinter::Print</a>(i-&gt;second.second, TUnit::BYTES) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  }</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;}</div>
<div class="ttc" id="classimpala_1_1BaseSequenceScanner_html_a6b84385660f88ed592fd61ac62c15793"><div class="ttname"><a href="classimpala_1_1BaseSequenceScanner.html#a6b84385660f88ed592fd61ac62c15793">impala::BaseSequenceScanner::IssueInitialRanges</a></div><div class="ttdeci">static Status IssueInitialRanges(HdfsScanNode *scan_node, const std::vector&lt; HdfsFileDesc * &gt; &amp;files)</div><div class="ttdoc">Issue the initial ranges for all sequence container files. </div><div class="ttdef"><b>Definition:</b> <a href="base-sequence-scanner_8cc_source.html#l00040">base-sequence-scanner.cc:40</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a3c7c7603998614d3f5f8d0d679846f5e"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a3c7c7603998614d3f5f8d0d679846f5e">impala::HdfsScanNode::materialized_slots</a></div><div class="ttdeci">const std::vector&lt; SlotDescriptor * &gt; &amp; materialized_slots() const </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00119">hdfs-scan-node.h:119</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a980b55d52d4cff867f3096b705250357"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a980b55d52d4cff867f3096b705250357">impala::ScanNode::scanner_thread_counters</a></div><div class="ttdeci">RuntimeProfile::ThreadCounters * scanner_thread_counters() const </div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00110">scan-node.h:110</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeProfile_1_1Counter_html_a6db04a7861baf700e025bea45de5a2e1"><div class="ttname"><a href="classimpala_1_1RuntimeProfile_1_1Counter.html#a6db04a7861baf700e025bea45de5a2e1">impala::RuntimeProfile::Counter::value</a></div><div class="ttdeci">virtual int64_t value() const </div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00108">runtime-profile.h:108</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_ab665916f0d8fc80d37fd92496746fe8b"><div class="ttname"><a href="classimpala_1_1ScanNode.html#ab665916f0d8fc80d37fd92496746fe8b">impala::ScanNode::NUM_SCANNER_THREADS_STARTED</a></div><div class="ttdeci">static const std::string NUM_SCANNER_THREADS_STARTED</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00134">scan-node.h:134</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a09ef012e32f510ba3d304f4aa6272e45"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a09ef012e32f510ba3d304f4aa6272e45">impala::HdfsScanNode::scanner_threads_</a></div><div class="ttdeci">ThreadGroup scanner_threads_</div><div class="ttdoc">Thread group for all scanner worker threads. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00359">hdfs-scan-node.h:359</a></div></div>
<div class="ttc" id="row-batch_8h_html"><div class="ttname"><a href="row-batch_8h.html">row-batch.h</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeProfile_html_a4ba4028a644bd8f71cdd624081f86ba7"><div class="ttname"><a href="classimpala_1_1RuntimeProfile.html#a4ba4028a644bd8f71cdd624081f86ba7">impala::RuntimeProfile::AddDerivedCounter</a></div><div class="ttdeci">DerivedCounter * AddDerivedCounter(const std::string &amp;name, TUnit::type unit, const DerivedCounterFunction &amp;counter_fn, const std::string &amp;parent_counter_name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8cc_source.html#l00447">runtime-profile.cc:447</a></div></div>
<div class="ttc" id="classimpala_1_1TupleDescriptor_html_a84bd9aabb34808ace9191b9fcfb2dea4"><div class="ttname"><a href="classimpala_1_1TupleDescriptor.html#a84bd9aabb34808ace9191b9fcfb2dea4">impala::TupleDescriptor::table_desc</a></div><div class="ttdeci">const TableDescriptor * table_desc() const </div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8h_source.html#l00304">descriptors.h:304</a></div></div>
<div class="ttc" id="classimpala_1_1DescriptorTbl_html"><div class="ttname"><a href="classimpala_1_1DescriptorTbl.html">impala::DescriptorTbl</a></div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8h_source.html#l00338">descriptors.h:338</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_a2088a36bc4bb4e0c3c7c1444198b76dd"><div class="ttname"><a href="classimpala_1_1ExecNode.html#a2088a36bc4bb4e0c3c7c1444198b76dd">impala::ExecNode::id</a></div><div class="ttdeci">int id() const </div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8h_source.html#l00154">exec-node.h:154</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_aab71d9b6396bcb23c19121c55b4d614a"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#aab71d9b6396bcb23c19121c55b4d614a">impala::HdfsScanNode::max_materialized_row_batches_</a></div><div class="ttdeci">int max_materialized_row_batches_</div><div class="ttdoc">Maximum size of materialized_row_batches_. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00366">hdfs-scan-node.h:366</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_a05e056b5d11b187a1d31723c7d1592eb"><div class="ttname"><a href="classimpala_1_1ExecNode.html#a05e056b5d11b187a1d31723c7d1592eb">impala::ExecNode::AddRuntimeExecOption</a></div><div class="ttdeci">void AddRuntimeExecOption(const std::string &amp;option)</div><div class="ttdoc">Appends option to &#39;runtime_exec_options_&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8cc_source.html#l00188">exec-node.cc:188</a></div></div>
<div class="ttc" id="hdfs-scan-node_8cc_html_af1412e276f9c5a7f13e41220b6764243"><div class="ttname"><a href="hdfs-scan-node_8cc.html#af1412e276f9c5a7f13e41220b6764243">DECLARE_bool</a></div><div class="ttdeci">DECLARE_bool(enable_rm)</div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_a0101ab194607143c4e79baaf7a914a64"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#a0101ab194607143c4e79baaf7a914a64">impala::DiskIoMgr::CancelContext</a></div><div class="ttdeci">void CancelContext(RequestContext *context, bool wait_for_disks_completion=false)</div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8cc_source.html#l00377">disk-io-mgr.cc:377</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a40135ae832675ff6feca8bb198fc2ee1"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a40135ae832675ff6feca8bb198fc2ee1">impala::ScanNode::per_read_thread_throughput_counter_</a></div><div class="ttdeci">RuntimeProfile::Counter * per_read_thread_throughput_counter_</div><div class="ttdoc">Per thread read throughput [bytes/sec]. </div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00149">scan-node.h:149</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a4207adb002ee06e3c3df340bfe5176a3"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a4207adb002ee06e3c3df340bfe5176a3">impala::HdfsScanNode::CreateAndPrepareScanner</a></div><div class="ttdeci">HdfsScanner * CreateAndPrepareScanner(HdfsPartitionDescriptor *partition_desc, ScannerContext *context, Status *status)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00230">hdfs-scan-node.cc:230</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_a79bb53859930e7386542d11490c69cff"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#a79bb53859930e7386542d11490c69cff">impala::DiskIoMgr::num_remote_ranges</a></div><div class="ttdeci">int num_remote_ranges(RequestContext *reader) const </div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8cc_source.html#l00432">disk-io-mgr.cc:432</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a8fc97ba80ecdfc4bf37198de772d3f5c"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a8fc97ba80ecdfc4bf37198de772d3f5c">impala::HdfsScanNode::num_owned_io_buffers_</a></div><div class="ttdeci">AtomicInt&lt; int &gt; num_owned_io_buffers_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00371">hdfs-scan-node.h:371</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_ad1db57d94bc4018fcb09cbe70468bb47"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#ad1db57d94bc4018fcb09cbe70468bb47">impala::HdfsScanNode::num_unqueued_files_</a></div><div class="ttdeci">AtomicInt&lt; int &gt; num_unqueued_files_</div><div class="ttdoc">Number of files that have not been issued from the scanners. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00315">hdfs-scan-node.h:315</a></div></div>
<div class="ttc" id="classimpala_1_1ScannerContext_1_1Stream_html"><div class="ttname"><a href="classimpala_1_1ScannerContext_1_1Stream.html">impala::ScannerContext::Stream</a></div><div class="ttdef"><b>Definition:</b> <a href="scanner-context_8h_source.html#l00066">scanner-context.h:66</a></div></div>
<div class="ttc" id="classimpala_1_1MemTracker_html_a35f7a4c2c6a5d33f808dda73482fc147"><div class="ttname"><a href="classimpala_1_1MemTracker.html#a35f7a4c2c6a5d33f808dda73482fc147">impala::MemTracker::consumption</a></div><div class="ttdeci">int64_t consumption() const </div><div class="ttdoc">Returns the memory consumed in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="mem-tracker_8h_source.html#l00298">mem-tracker.h:298</a></div></div>
<div class="ttc" id="classimpala_1_1ThreadGroup_html_a7987df54f6ec94269cb9e8de7ff1d42e"><div class="ttname"><a href="classimpala_1_1ThreadGroup.html#a7987df54f6ec94269cb9e8de7ff1d42e">impala::ThreadGroup::SetCgroup</a></div><div class="ttdeci">Status SetCgroup(const std::string &amp;cgroup)</div><div class="ttdef"><b>Definition:</b> <a href="thread_8cc_source.html#l00333">thread.cc:333</a></div></div>
<div class="ttc" id="hdfs-sequence-scanner_8h_html"><div class="ttname"><a href="hdfs-sequence-scanner_8h.html">hdfs-sequence-scanner.h</a></div></div>
<div class="ttc" id="classimpala_1_1RowBatch_html_ac695df3b85ee416b3d99844813ae813d"><div class="ttname"><a href="classimpala_1_1RowBatch.html#ac695df3b85ee416b3d99844813ae813d">impala::RowBatch::num_rows</a></div><div class="ttdeci">int num_rows() const </div><div class="ttdef"><b>Definition:</b> <a href="row-batch_8h_source.html#l00215">row-batch.h:215</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a9e3d036ef5311e9411379a05f20631b7"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a9e3d036ef5311e9411379a05f20631b7">impala::ScanNode::Prepare</a></div><div class="ttdeci">virtual Status Prepare(RuntimeState *state)</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8cc_source.html#l00044">scan-node.cc:44</a></div></div>
<div class="ttc" id="classimpala_1_1QueryResourceMgr_html_a88c3279b6bbe8d782bf272ec4756df07"><div class="ttname"><a href="classimpala_1_1QueryResourceMgr.html#a88c3279b6bbe8d782bf272ec4756df07">impala::QueryResourceMgr::AddVcoreAvailableCb</a></div><div class="ttdeci">int32_t AddVcoreAvailableCb(const VcoreAvailableCb &amp;callback)</div><div class="ttdef"><b>Definition:</b> <a href="query-resource-mgr_8cc_source.html#l00147">query-resource-mgr.cc:147</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsPartitionDescriptor_html_ab4a79c2d0c772e6ecafdae14569bfde4"><div class="ttname"><a href="classimpala_1_1HdfsPartitionDescriptor.html#ab4a79c2d0c772e6ecafdae14569bfde4">impala::HdfsPartitionDescriptor::file_format</a></div><div class="ttdeci">THdfsFileFormat::type file_format() const </div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8h_source.html#l00184">descriptors.h:184</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_aabe5624b63a44f5262f4bf2cbbfed3c0"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#aabe5624b63a44f5262f4bf2cbbfed3c0">impala::HdfsScanNode::all_ranges_started_</a></div><div class="ttdeci">bool all_ranges_started_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00417">hdfs-scan-node.h:417</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeProfile_html_acb49893c3fdbdbb7a709b6d2d6276d91"><div class="ttname"><a href="classimpala_1_1RuntimeProfile.html#acb49893c3fdbdbb7a709b6d2d6276d91">impala::RuntimeProfile::AddSamplingCounter</a></div><div class="ttdeci">Counter * AddSamplingCounter(const std::string &amp;name, Counter *src_counter)</div></div>
<div class="ttc" id="sasl-test_8cc_html_a2db66f7b463c0e190f8933e51f43d91e"><div class="ttname"><a href="sasl-test_8cc.html#a2db66f7b463c0e190f8933e51f43d91e">path</a></div><div class="ttdeci">string path(&quot;/usr/lib/sasl2:/usr/lib64/sasl2:/usr/local/lib/sasl2:/usr/lib/x86_64-linux-gnu/sasl2&quot;)</div></div>
<div class="ttc" id="hdfs-scan-node_8h_html"><div class="ttname"><a href="hdfs-scan-node_8h.html">hdfs-scan-node.h</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsPartitionDescriptor_html_a3f6d43477d551e065f039c7b074bf4b1"><div class="ttname"><a href="classimpala_1_1HdfsPartitionDescriptor.html#a3f6d43477d551e065f039c7b074bf4b1">impala::HdfsPartitionDescriptor::OpenExprs</a></div><div class="ttdeci">Status OpenExprs(RuntimeState *state)</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8cc_source.html#l00145">descriptors.cc:145</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a74b13953ea9d3088ce4759e8b2eae19a"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a74b13953ea9d3088ce4759e8b2eae19a">impala::HdfsScanNode::file_descs_</a></div><div class="ttdeci">FileDescMap file_descs_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00298">hdfs-scan-node.h:298</a></div></div>
<div class="ttc" id="classimpala_1_1ScannerContext_1_1Stream_html_a8342003f29642968db4d42e9b7e5f29a"><div class="ttname"><a href="classimpala_1_1ScannerContext_1_1Stream.html#a8342003f29642968db4d42e9b7e5f29a">impala::ScannerContext::Stream::total_bytes_returned</a></div><div class="ttdeci">int64_t total_bytes_returned()</div><div class="ttdoc">Returns the total number of bytes returned. </div><div class="ttdef"><b>Definition:</b> <a href="scanner-context_8h_source.html#l00126">scanner-context.h:126</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeProfile_html_aff0f9fcb17559d45c0d09c413372dbb4"><div class="ttname"><a href="classimpala_1_1RuntimeProfile.html#aff0f9fcb17559d45c0d09c413372dbb4">impala::RuntimeProfile::AddInfoString</a></div><div class="ttdeci">void AddInfoString(const std::string &amp;key, const std::string &amp;value)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8cc_source.html#l00406">runtime-profile.cc:406</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a52caf60333f4f60a19c7a31df81babcc"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a52caf60333f4f60a19c7a31df81babcc">impala::ScanNode::scan_ranges_complete_counter_</a></div><div class="ttdeci">RuntimeProfile::Counter * scan_ranges_complete_counter_</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00152">scan-node.h:152</a></div></div>
<div class="ttc" id="runtime-profile_8h_html"><div class="ttname"><a href="runtime-profile_8h.html">runtime-profile.h</a></div></div>
<div class="ttc" id="classimpala_1_1SlotDescriptor_html_a86b91f0ed75bdf196f6727d330f440fc"><div class="ttname"><a href="classimpala_1_1SlotDescriptor.html#a86b91f0ed75bdf196f6727d330f440fc">impala::SlotDescriptor::ColPathLessThan</a></div><div class="ttdeci">static bool ColPathLessThan(const SlotDescriptor *a, const SlotDescriptor *b)</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8cc_source.html#l00066">descriptors.cc:66</a></div></div>
<div class="ttc" id="structimpala_1_1HdfsFileDesc_html_a0721c023687172fe34212482fedac297"><div class="ttname"><a href="structimpala_1_1HdfsFileDesc.html#a0721c023687172fe34212482fedac297">impala::HdfsFileDesc::filename</a></div><div class="ttdeci">std::string filename</div><div class="ttdoc">File name including the path. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00058">hdfs-scan-node.h:58</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_a9789aeca3e98cda63998a8f47d355fd9"><div class="ttname"><a href="classimpala_1_1ExecNode.html#a9789aeca3e98cda63998a8f47d355fd9">impala::ExecNode::num_rows_returned_</a></div><div class="ttdeci">int64_t num_rows_returned_</div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8h_source.html#l00223">exec-node.h:223</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_aff162f338e73e753a8d04cdee31246e5"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#aff162f338e73e753a8d04cdee31246e5">impala::HdfsScanNode::ThreadTokenAvailableCb</a></div><div class="ttdeci">void ThreadTokenAvailableCb(ThreadResourceMgr::ResourcePool *pool)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00729">hdfs-scan-node.cc:729</a></div></div>
<div class="ttc" id="classimpala_1_1TableDescriptor_html_a2cceaff45133a3b0381fcfde53fa6da7"><div class="ttname"><a href="classimpala_1_1TableDescriptor.html#a2cceaff45133a3b0381fcfde53fa6da7">impala::TableDescriptor::database</a></div><div class="ttdeci">const std::string &amp; database() const </div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8h_source.html#l00164">descriptors.h:164</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsPartitionDescriptor_html_abe51d04af9ad683ef8bc891a89da0300"><div class="ttname"><a href="classimpala_1_1HdfsPartitionDescriptor.html#abe51d04af9ad683ef8bc891a89da0300">impala::HdfsPartitionDescriptor::PrepareExprs</a></div><div class="ttdeci">Status PrepareExprs(RuntimeState *state)</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8cc_source.html#l00134">descriptors.cc:134</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsFsCache_html_ab8cd39a3e94d24aab4599df223a5c313"><div class="ttname"><a href="classimpala_1_1HdfsFsCache.html#ab8cd39a3e94d24aab4599df223a5c313">impala::HdfsFsCache::HdfsFsMap</a></div><div class="ttdeci">boost::unordered_map&lt; std::string, hdfsFS &gt; HdfsFsMap</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-fs-cache_8h_source.html#l00041">hdfs-fs-cache.h:41</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_abd7922a579e4adc353756849a0f45b48"><div class="ttname"><a href="classimpala_1_1ExecNode.html#abd7922a579e4adc353756849a0f45b48">impala::ExecNode::mem_tracker</a></div><div class="ttdeci">MemTracker * mem_tracker()</div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8h_source.html#l00162">exec-node.h:162</a></div></div>
<div class="ttc" id="classimpala_1_1Thread_html"><div class="ttname"><a href="classimpala_1_1Thread.html">impala::Thread</a></div><div class="ttdoc">TODO: Consider allowing fragment IDs as category parameters. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8h_source.html#l00045">thread.h:45</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a9be5690e584ef1940004da01f85d7b31"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a9be5690e584ef1940004da01f85d7b31">impala::HdfsScanNode::SetDone</a></div><div class="ttdeci">void SetDone()</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00944">hdfs-scan-node.cc:944</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_ab92e887bc1867272f1d0ce80f09bfe11"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#ab92e887bc1867272f1d0ce80f09bfe11">impala::DiskIoMgr::AssignQueue</a></div><div class="ttdeci">int AssignQueue(const char *file, int disk_id, bool expected_local)</div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8cc_source.html#l01116">disk-io-mgr.cc:1116</a></div></div>
<div class="ttc" id="classimpala_1_1ThreadResourceMgr_1_1ResourcePool_html_a6d2e8fe97989a28eefd8ae614f8cb3a1"><div class="ttname"><a href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html#a6d2e8fe97989a28eefd8ae614f8cb3a1">impala::ThreadResourceMgr::ResourcePool::TryAcquireThreadToken</a></div><div class="ttdeci">bool TryAcquireThreadToken(bool *is_reserved=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="thread-resource-mgr_8h_source.html#l00235">thread-resource-mgr.h:235</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_a8b9c885f997c1151fcb889f727d41fdb"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#a8b9c885f997c1151fcb889f727d41fdb">impala::DiskIoMgr::set_active_read_thread_counter</a></div><div class="ttdeci">void set_active_read_thread_counter(RequestContext *, RuntimeProfile::Counter *)</div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8cc_source.html#l00397">disk-io-mgr.cc:397</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html_a50bda0f1fd81fb2a00b9728875cab6b3"><div class="ttname"><a href="classimpala_1_1RuntimeState.html#a50bda0f1fd81fb2a00b9728875cab6b3">impala::RuntimeState::ErrorLog</a></div><div class="ttdeci">std::string ErrorLog()</div><div class="ttdoc">Returns the error log lines as a string joined with &#39; &#39;. </div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8cc_source.html#l00203">runtime-state.cc:203</a></div></div>
<div class="ttc" id="impalad-metrics_8h_html"><div class="ttname"><a href="impalad-metrics_8h.html">impalad-metrics.h</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a62db63afa7d58a8566bd7fd95dee50ff"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a62db63afa7d58a8566bd7fd95dee50ff">impala::ScanNode::AVERAGE_SCANNER_THREAD_CONCURRENCY</a></div><div class="ttdeci">static const std::string AVERAGE_SCANNER_THREAD_CONCURRENCY</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00132">scan-node.h:132</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a87b2fb17053d1d8d94762c024e7ffc70"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a87b2fb17053d1d8d94762c024e7ffc70">impala::HdfsScanNode::GetMaterializedSlotIdx</a></div><div class="ttdeci">int GetMaterializedSlotIdx(const std::vector&lt; int &gt; &amp;path) const </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00152">hdfs-scan-node.h:152</a></div></div>
<div class="ttc" id="classimpala_1_1Expr_html_a0704c1c17503f48ab89f0d05dc658a2d"><div class="ttname"><a href="classimpala_1_1Expr.html#a0704c1c17503f48ab89f0d05dc658a2d">impala::Expr::Clone</a></div><div class="ttdeci">static Status Clone(const std::vector&lt; ExprContext * &gt; &amp;ctxs, RuntimeState *state, std::vector&lt; ExprContext * &gt; *new_ctxs)</div><div class="ttdef"><b>Definition:</b> <a href="expr_8cc_source.html#l00374">expr.cc:374</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a5cb39ea4d1c5d642772bf2fc094c81d8"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a5cb39ea4d1c5d642772bf2fc094c81d8">impala::HdfsScanNode::num_scanners_codegen_disabled_</a></div><div class="ttdeci">AtomicInt&lt; int &gt; num_scanners_codegen_disabled_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00380">hdfs-scan-node.h:380</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a9fab7b12afe81d6912442bef2d8131d4"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a9fab7b12afe81d6912442bef2d8131d4">impala::HdfsScanNode::bytes_read_dn_cache_</a></div><div class="ttdeci">RuntimeProfile::Counter * bytes_read_dn_cache_</div><div class="ttdoc">Total number of bytes read from data node cache. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00396">hdfs-scan-node.h:396</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsRCFileScanner_html"><div class="ttname"><a href="classimpala_1_1HdfsRCFileScanner.html">impala::HdfsRCFileScanner</a></div><div class="ttdoc">A scanner for reading RCFiles into tuples. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-rcfile-scanner_8h_source.html#l00231">hdfs-rcfile-scanner.h:231</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_a9cab4e45a94527ff97333c0f280036f8"><div class="ttname"><a href="classimpala_1_1ExecNode.html#a9cab4e45a94527ff97333c0f280036f8">impala::ExecNode::runtime_profile_</a></div><div class="ttdeci">boost::scoped_ptr&lt; RuntimeProfile &gt; runtime_profile_</div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8h_source.html#l00225">exec-node.h:225</a></div></div>
<div class="ttc" id="classimpala_1_1ProgressUpdater_html"><div class="ttname"><a href="classimpala_1_1ProgressUpdater.html">impala::ProgressUpdater</a></div><div class="ttdef"><b>Definition:</b> <a href="progress-updater_8h_source.html#l00034">progress-updater.h:34</a></div></div>
<div class="ttc" id="classimpala_1_1Expr_html_aad1111f87951868de4d8f8b2dfe87c5f"><div class="ttname"><a href="classimpala_1_1Expr.html#aad1111f87951868de4d8f8b2dfe87c5f">impala::Expr::Open</a></div><div class="ttdeci">static Status Open(const std::vector&lt; ExprContext * &gt; &amp;ctxs, RuntimeState *state)</div><div class="ttdoc">Convenience function for opening multiple expr trees. </div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_afe152e2be9b5c94a2d071b4fc1c59ede"><div class="ttname"><a href="classimpala_1_1ScanNode.html#afe152e2be9b5c94a2d071b4fc1c59ede">impala::ScanNode::scan_ranges_complete_counter</a></div><div class="ttdeci">RuntimeProfile::Counter * scan_ranges_complete_counter() const </div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00107">scan-node.h:107</a></div></div>
<div class="ttc" id="classimpala_1_1RowBatch_html_ab2806ba7b3c888423d1f527ef7ff7421"><div class="ttname"><a href="classimpala_1_1RowBatch.html#ab2806ba7b3c888423d1f527ef7ff7421">impala::RowBatch::num_io_buffers</a></div><div class="ttdeci">int num_io_buffers() const </div><div class="ttdef"><b>Definition:</b> <a href="row-batch_8h_source.html#l00149">row-batch.h:149</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_a62c6a7658886cefdb5e84e867da6352f"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#a62c6a7658886cefdb5e84e867da6352f">impala::DiskIoMgr::bytes_read_dn_cache</a></div><div class="ttdeci">int64_t bytes_read_dn_cache(RequestContext *reader) const </div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8cc_source.html#l00428">disk-io-mgr.cc:428</a></div></div>
<div class="ttc" id="classimpala_1_1ThreadResourceMgr_1_1ResourcePool_html_a0fb6fb62bd40deb0f79b94dbf8179d81"><div class="ttname"><a href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html#a0fb6fb62bd40deb0f79b94dbf8179d81">impala::ThreadResourceMgr::ResourcePool::SetThreadAvailableCb</a></div><div class="ttdeci">void SetThreadAvailableCb(ThreadAvailableCb fn)</div><div class="ttdef"><b>Definition:</b> <a href="thread-resource-mgr_8cc_source.html#l00090">thread-resource-mgr.cc:90</a></div></div>
<div class="ttc" id="classimpala_1_1Tuple_html"><div class="ttname"><a href="classimpala_1_1Tuple.html">impala::Tuple</a></div><div class="ttdoc">A tuple with 0 materialised slots is represented as NULL. </div><div class="ttdef"><b>Definition:</b> <a href="tuple_8h_source.html#l00048">tuple.h:48</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_ac76e401eb1573dbcaf0acf7607fa308e"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#ac76e401eb1573dbcaf0acf7607fa308e">impala::HdfsScanNode::HDFS_SPLIT_STATS_DESC</a></div><div class="ttdeci">static const std::string HDFS_SPLIT_STATS_DESC</div><div class="ttdoc">Description string for the per volume stats output. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00265">hdfs-scan-node.h:265</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsParquetScanner_html"><div class="ttname"><a href="classimpala_1_1HdfsParquetScanner.html">impala::HdfsParquetScanner</a></div><div class="ttdef"><b>Definition:</b> <a href="hdfs-parquet-scanner_8h_source.html#l00043">hdfs-parquet-scanner.h:43</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a30641df011a5d74c6c94788732d45c9c"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a30641df011a5d74c6c94788732d45c9c">impala::ScanNode::num_scanner_threads_started_counter_</a></div><div class="ttdeci">RuntimeProfile::Counter * num_scanner_threads_started_counter_</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00170">scan-node.h:170</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsTableDescriptor_html"><div class="ttname"><a href="classimpala_1_1HdfsTableDescriptor.html">impala::HdfsTableDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8h_source.html#l00226">descriptors.h:226</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeProfile_html_a9540f9287515f7cb666e5dac64be57a9"><div class="ttname"><a href="classimpala_1_1RuntimeProfile.html#a9540f9287515f7cb666e5dac64be57a9">impala::RuntimeProfile::RegisterBucketingCounters</a></div><div class="ttdeci">void RegisterBucketingCounters(Counter *src_counter, std::vector&lt; Counter * &gt; *buckets)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8cc_source.html#l00798">runtime-profile.cc:798</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a0251d57ef9bff48b95436210074207d3"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a0251d57ef9bff48b95436210074207d3">impala::HdfsScanNode::progress_</a></div><div class="ttdeci">ProgressUpdater progress_</div><div class="ttdoc">Keeps track of total splits and the number finished. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00351">hdfs-scan-node.h:351</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a39c0718de7bdd2bff19c97dc1eb5bdaa"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a39c0718de7bdd2bff19c97dc1eb5bdaa">impala::HdfsScanNode::Open</a></div><div class="ttdeci">virtual Status Open(RuntimeState *state)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00511">hdfs-scan-node.cc:511</a></div></div>
<div class="ttc" id="periodic-counter-updater_8h_html"><div class="ttname"><a href="periodic-counter-updater_8h.html">periodic-counter-updater.h</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a60f0a321960a9a4e7eea0ee391c9c609"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a60f0a321960a9a4e7eea0ee391c9c609">impala::HdfsScanNode::materialized_row_batches_</a></div><div class="ttdeci">boost::scoped_ptr&lt; RowBatchQueue &gt; materialized_row_batches_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00363">hdfs-scan-node.h:363</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a10a9ceb6d7fcd9bbfe6c4217ba5b7081"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a10a9ceb6d7fcd9bbfe6c4217ba5b7081">impala::HdfsScanNode::rm_callback_id_</a></div><div class="ttdeci">int32_t rm_callback_id_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00442">hdfs-scan-node.h:442</a></div></div>
<div class="ttc" id="status_8h_html_a85f7d0e774e15eb35b74f53264305e16"><div class="ttname"><a href="status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a></div><div class="ttdeci">#define RETURN_IF_ERROR(stmt)</div><div class="ttdoc">some generally useful macros </div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00242">status.h:242</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsAvroScanner_html"><div class="ttname"><a href="classimpala_1_1HdfsAvroScanner.html">impala::HdfsAvroScanner</a></div><div class="ttdef"><b>Definition:</b> <a href="hdfs-avro-scanner_8h_source.html#l00080">hdfs-avro-scanner.h:80</a></div></div>
<div class="ttc" id="hdfs-util_8h_html"><div class="ttname"><a href="hdfs-util_8h.html">hdfs-util.h</a></div></div>
<div class="ttc" id="raw-value_8h_html"><div class="ttname"><a href="raw-value_8h.html">raw-value.h</a></div></div>
<div class="ttc" id="structimpala_1_1ScanRangeMetadata_html"><div class="ttname"><a href="structimpala_1_1ScanRangeMetadata.html">impala::ScanRangeMetadata</a></div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00078">hdfs-scan-node.h:78</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a230df199438eeac9776358b9ebea0d63"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a230df199438eeac9776358b9ebea0d63">impala::ScanNode::read_timer_</a></div><div class="ttdeci">RuntimeProfile::Counter * read_timer_</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00145">scan-node.h:145</a></div></div>
<div class="ttc" id="error-util_8h_html"><div class="ttname"><a href="error-util_8h.html">error-util.h</a></div></div>
<div class="ttc" id="classimpala_1_1DiskInfo_html_a88b7ae9978345b6c0baedb1726a35d72"><div class="ttname"><a href="classimpala_1_1DiskInfo.html#a88b7ae9978345b6c0baedb1726a35d72">impala::DiskInfo::num_disks</a></div><div class="ttdeci">static int num_disks()</div><div class="ttdoc">Returns the number of (logical) disks on the system. </div><div class="ttdef"><b>Definition:</b> <a href="disk-info_8h_source.html#l00038">disk-info.h:38</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a3bdd3961f80bd4eaa94b5967b3214b5f"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a3bdd3961f80bd4eaa94b5967b3214b5f">impala::HdfsScanNode::unknown_disk_id_warned_</a></div><div class="ttdeci">bool unknown_disk_id_warned_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00291">hdfs-scan-node.h:291</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_af444c3702443d0b5aa625b2f8df66383"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#af444c3702443d0b5aa625b2f8df66383">impala::HdfsScanNode::partition_ids_</a></div><div class="ttdeci">boost::unordered_set&lt; int64_t &gt; partition_ids_</div><div class="ttdoc">Partitions scanned by this scan node. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00294">hdfs-scan-node.h:294</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a116d2bfc4460bc72e46ac1a8877d0063"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a116d2bfc4460bc72e46ac1a8877d0063">impala::ScanNode::NUM_DISKS_ACCESSED_COUNTER</a></div><div class="ttdeci">static const std::string NUM_DISKS_ACCESSED_COUNTER</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00127">scan-node.h:127</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_abd87b83ac93c6f0c6527834cd6ca20ff"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#abd87b83ac93c6f0c6527834cd6ca20ff">impala::HdfsScanNode::lock_</a></div><div class="ttdeci">boost::mutex lock_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00407">hdfs-scan-node.h:407</a></div></div>
<div class="ttc" id="classimpala_1_1MemTracker_html_a88d461cd1b369ee3f1fe6471954c5dd8"><div class="ttname"><a href="classimpala_1_1MemTracker.html#a88d461cd1b369ee3f1fe6471954c5dd8">impala::MemTracker::SpareCapacity</a></div><div class="ttdeci">int64_t SpareCapacity() const </div><div class="ttdef"><b>Definition:</b> <a href="mem-tracker_8h_source.html#l00270">mem-tracker.h:270</a></div></div>
<div class="ttc" id="runtime-profile_8h_html_a8841ca205b2a05d608e82d443bad3a77"><div class="ttname"><a href="runtime-profile_8h.html#a8841ca205b2a05d608e82d443bad3a77">ADD_TIMER</a></div><div class="ttdeci">#define ADD_TIMER(profile, name)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00050">runtime-profile.h:50</a></div></div>
<div class="ttc" id="classimpala_1_1RowBatch_html_a2f777637e6f27003960633011c7d1605"><div class="ttname"><a href="classimpala_1_1RowBatch.html#a2f777637e6f27003960633011c7d1605">impala::RowBatch::AcquireState</a></div><div class="ttdeci">void AcquireState(RowBatch *src)</div><div class="ttdef"><b>Definition:</b> <a href="row-batch_8cc_source.html#l00271">row-batch.cc:271</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_aabb61890cd37be80703ae735e2a075adaf2d4abf2fb7cedd9b81575e18d2a361a"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#aabb61890cd37be80703ae735e2a075adaf2d4abf2fb7cedd9b81575e18d2a361a">impala::DiskIoMgr::REMOTE_NUM_DISKS</a></div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8h_source.html#l00625">disk-io-mgr.h:625</a></div></div>
<div class="ttc" id="expr-context_8h_html"><div class="ttname"><a href="expr-context_8h.html">expr-context.h</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_ad42b3a29c6f2c9a993e5b23ba29ac8ac"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#ad42b3a29c6f2c9a993e5b23ba29ac8ac">impala::HdfsScanNode::partition_key_slots_</a></div><div class="ttdeci">std::vector&lt; SlotDescriptor * &gt; partition_key_slots_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00348">hdfs-scan-node.h:348</a></div></div>
<div class="ttc" id="classimpala_1_1SlotDescriptor_html_a7c96c01776f460b13f914c60f14fd237"><div class="ttname"><a href="classimpala_1_1SlotDescriptor.html#a7c96c01776f460b13f914c60f14fd237">impala::SlotDescriptor::col_path</a></div><div class="ttdeci">const std::vector&lt; int &gt; &amp; col_path() const </div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8h_source.html#l00085">descriptors.h:85</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a7ccd8c0369afce6502d98f04dc8e08ea"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a7ccd8c0369afce6502d98f04dc8e08ea">impala::HdfsScanNode::num_remote_ranges_</a></div><div class="ttdeci">RuntimeProfile::Counter * num_remote_ranges_</div><div class="ttdoc">Total number of remote scan ranges. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00399">hdfs-scan-node.h:399</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_ac373fee18a1d5212b15430c3894eec0c"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#ac373fee18a1d5212b15430c3894eec0c">impala::HdfsScanNode::thrift_plan_node_</a></div><div class="ttdeci">boost::scoped_ptr&lt; TPlanNode &gt; thrift_plan_node_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00272">hdfs-scan-node.h:272</a></div></div>
<div class="ttc" id="classimpala_1_1TupleDescriptor_html_ab604fb8cc40f88e7f35e5f6f069a76c3"><div class="ttname"><a href="classimpala_1_1TupleDescriptor.html#ab604fb8cc40f88e7f35e5f6f069a76c3">impala::TupleDescriptor::slots</a></div><div class="ttdeci">const std::vector&lt; SlotDescriptor * &gt; &amp; slots() const </div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8h_source.html#l00302">descriptors.h:302</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_1_1RequestRange_html_a015237297a1c06eca646fe3370f0e8b9"><div class="ttname"><a href="classimpala_1_1DiskIoMgr_1_1RequestRange.html#a015237297a1c06eca646fe3370f0e8b9">impala::DiskIoMgr::RequestRange::file</a></div><div class="ttdeci">const char * file() const </div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8h_source.html#l00266">disk-io-mgr.h:266</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a47c24bd36cf74eeafc574dce1b64c831"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a47c24bd36cf74eeafc574dce1b64c831">impala::HdfsScanNode::MarkFileDescIssued</a></div><div class="ttdeci">void MarkFileDescIssued(const HdfsFileDesc *file_desc)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00683">hdfs-scan-node.cc:683</a></div></div>
<div class="ttc" id="classimpala_1_1TupleDescriptor_html_a153205d9bf39422c853b5bd5f54a9485"><div class="ttname"><a href="classimpala_1_1TupleDescriptor.html#a153205d9bf39422c853b5bd5f54a9485">impala::TupleDescriptor::byte_size</a></div><div class="ttdeci">int byte_size() const </div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8h_source.html#l00300">descriptors.h:300</a></div></div>
<div class="ttc" id="classimpala_1_1ObjectPool_html"><div class="ttname"><a href="classimpala_1_1ObjectPool.html">impala::ObjectPool</a></div><div class="ttdef"><b>Definition:</b> <a href="object-pool_8h_source.html#l00030">object-pool.h:30</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a18a23532ddeb0ae53093207992bb5611"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a18a23532ddeb0ae53093207992bb5611">impala::HdfsScanNode::ScannerContext</a></div><div class="ttdeci">friend class ScannerContext</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00268">hdfs-scan-node.h:268</a></div></div>
<div class="ttc" id="classimpala_1_1ImpaladMetrics_html_a7475bcb69ae310ef238b84049bd22fda"><div class="ttname"><a href="classimpala_1_1ImpaladMetrics.html#a7475bcb69ae310ef238b84049bd22fda">impala::ImpaladMetrics::IO_MGR_BYTES_READ</a></div><div class="ttdeci">static IntGauge * IO_MGR_BYTES_READ</div><div class="ttdef"><b>Definition:</b> <a href="impalad-metrics_8h_source.html#l00143">impalad-metrics.h:143</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a3405cd6d94586c152efae17e6cfbd787"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a3405cd6d94586c152efae17e6cfbd787">impala::HdfsScanNode::SetFileMetadata</a></div><div class="ttdeci">void SetFileMetadata(const std::string &amp;filename, void *metadata)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00211">hdfs-scan-node.cc:211</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html_a17c3c93cbf9dc6481db9a1494e0312b4"><div class="ttname"><a href="classimpala_1_1RuntimeState.html#a17c3c93cbf9dc6481db9a1494e0312b4">impala::RuntimeState::exec_env</a></div><div class="ttdeci">ExecEnv * exec_env()</div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8h_source.html#l00130">runtime-state.h:130</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_adab35319d4dbff9af621387591a32c2c"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#adab35319d4dbff9af621387591a32c2c">impala::HdfsScanNode::GetFileMetadata</a></div><div class="ttdeci">void * GetFileMetadata(const std::string &amp;filename)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00217">hdfs-scan-node.cc:217</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_aa6a1a246f28ee5f8214cfdfd2dd8aa42"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#aa6a1a246f28ee5f8214cfdfd2dd8aa42">impala::DiskIoMgr::AddScanRanges</a></div><div class="ttdeci">Status AddScanRanges(RequestContext *reader, const std::vector&lt; ScanRange * &gt; &amp;ranges, bool schedule_immediately=false)</div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8cc_source.html#l00455">disk-io-mgr.cc:455</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeProfile_html_ab1e095fac59cde33085156670c1e5130"><div class="ttname"><a href="classimpala_1_1RuntimeProfile.html#ab1e095fac59cde33085156670c1e5130">impala::RuntimeProfile::UnitsPerSecond</a></div><div class="ttdeci">static int64_t UnitsPerSecond(const Counter *total_counter, const Counter *timer)</div><div class="ttdoc">Derived counter function: return measured throughput as input_value/second. </div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8cc_source.html#l00733">runtime-profile.cc:733</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_1_1RequestRange_html_aae6c216cb57b76594b0a107555a11ceb"><div class="ttname"><a href="classimpala_1_1DiskIoMgr_1_1RequestRange.html#aae6c216cb57b76594b0a107555a11ceb">impala::DiskIoMgr::RequestRange::offset</a></div><div class="ttdeci">int64_t offset() const </div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8h_source.html#l00267">disk-io-mgr.h:267</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_ab93bb6f89c7be5d1734683de7fb4f187"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#ab93bb6f89c7be5d1734683de7fb4f187">impala::HdfsScanNode::per_type_files_</a></div><div class="ttdeci">FileFormatsMap per_type_files_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00302">hdfs-scan-node.h:302</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a852e26d5e63c13b30b1f2c7d986838f4"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a852e26d5e63c13b30b1f2c7d986838f4">impala::ScanNode::bytes_read_counter_</a></div><div class="ttdeci">RuntimeProfile::Counter * bytes_read_counter_</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00140">scan-node.h:140</a></div></div>
<div class="ttc" id="classimpala_1_1ThreadResourceMgr_1_1ResourcePool_html_a503ab1ef6e9ba35295f50d3d4ac034c9"><div class="ttname"><a href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html#a503ab1ef6e9ba35295f50d3d4ac034c9">impala::ThreadResourceMgr::ResourcePool::ReserveOptionalTokens</a></div><div class="ttdeci">void ReserveOptionalTokens(int num)</div><div class="ttdef"><b>Definition:</b> <a href="thread-resource-mgr_8cc_source.html#l00056">thread-resource-mgr.cc:56</a></div></div>
<div class="ttc" id="classimpala_1_1SlotDescriptor_html"><div class="ttname"><a href="classimpala_1_1SlotDescriptor.html">impala::SlotDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8h_source.html#l00075">descriptors.h:75</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html_a5b94ff6151b01c5e84a3af8aa2433c66"><div class="ttname"><a href="classimpala_1_1RuntimeState.html#a5b94ff6151b01c5e84a3af8aa2433c66">impala::RuntimeState::cgroup</a></div><div class="ttdeci">const std::string &amp; cgroup() const </div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8h_source.html#l00129">runtime-state.h:129</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_ae0944e487f92ed479da7db76f23ee071"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#ae0944e487f92ed479da7db76f23ee071">impala::HdfsScanNode::InitEmptyTemplateTuple</a></div><div class="ttdeci">Tuple * InitEmptyTemplateTuple()</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00289">hdfs-scan-node.cc:289</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a5f8e4ee279a1f64787666e72308bf66d"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a5f8e4ee279a1f64787666e72308bf66d">impala::HdfsScanNode::Reset</a></div><div class="ttdeci">virtual Status Reset(RuntimeState *state)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00617">hdfs-scan-node.cc:617</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_a467297b1704ae33db61ae61d3400c35f"><div class="ttname"><a href="classimpala_1_1ExecNode.html#a467297b1704ae33db61ae61d3400c35f">impala::ExecNode::row_desc</a></div><div class="ttdeci">const RowDescriptor &amp; row_desc() const </div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8h_source.html#l00156">exec-node.h:156</a></div></div>
<div class="ttc" id="classimpala_1_1Tuple_html_a88ae319676583858a991e011de6c48ec"><div class="ttname"><a href="classimpala_1_1Tuple.html#a88ae319676583858a991e011de6c48ec">impala::Tuple::Create</a></div><div class="ttdeci">static Tuple * Create(int size, MemPool *pool)</div><div class="ttdoc">initialize individual tuple with data residing in mem pool </div><div class="ttdef"><b>Definition:</b> <a href="tuple_8h_source.html#l00051">tuple.h:51</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_a3cc61c88ae6cbb96791d71aee1664137"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#a3cc61c88ae6cbb96791d71aee1664137">impala::DiskIoMgr::GetNextRange</a></div><div class="ttdeci">Status GetNextRange(RequestContext *reader, ScanRange **range)</div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8cc_source.html#l00501">disk-io-mgr.cc:501</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a8f972231e2cb705cfbaa14c7290923c6"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a8f972231e2cb705cfbaa14c7290923c6">impala::HdfsScanNode::scan_node_pool_</a></div><div class="ttdeci">boost::scoped_ptr&lt; MemPool &gt; scan_node_pool_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00421">hdfs-scan-node.h:421</a></div></div>
<div class="ttc" id="classimpala_1_1ScannerContext_html"><div class="ttname"><a href="classimpala_1_1ScannerContext.html">impala::ScannerContext</a></div><div class="ttdef"><b>Definition:</b> <a href="scanner-context_8h_source.html#l00055">scanner-context.h:55</a></div></div>
<div class="ttc" id="llvm-codegen_8h_html"><div class="ttname"><a href="llvm-codegen_8h.html">llvm-codegen.h</a></div></div>
<div class="ttc" id="classimpala_1_1ThreadResourceMgr_1_1ResourcePool_html_abd2059593964256011a6639b48e7e9f1"><div class="ttname"><a href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html#abd2059593964256011a6639b48e7e9f1">impala::ThreadResourceMgr::ResourcePool::ReleaseThreadToken</a></div><div class="ttdeci">void ReleaseThreadToken(bool required)</div><div class="ttdef"><b>Definition:</b> <a href="thread-resource-mgr_8h_source.html#l00255">thread-resource-mgr.h:255</a></div></div>
<div class="ttc" id="logging_8h_html"><div class="ttname"><a href="logging_8h.html">logging.h</a></div></div>
<div class="ttc" id="runtime-profile_8h_html_a0842f330c18b3e4e53e13655add0310a"><div class="ttname"><a href="runtime-profile_8h.html#a0842f330c18b3e4e53e13655add0310a">COUNTER_ADD</a></div><div class="ttdeci">#define COUNTER_ADD(c, v)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00055">runtime-profile.h:55</a></div></div>
<div class="ttc" id="structimpala_1_1ScanRangeMetadata_html_a7a7171d1dc269bea3f3dd5636e4bb774"><div class="ttname"><a href="structimpala_1_1ScanRangeMetadata.html#a7a7171d1dc269bea3f3dd5636e4bb774">impala::ScanRangeMetadata::partition_id</a></div><div class="ttdeci">int64_t partition_id</div><div class="ttdoc">The partition id that this range is part of. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00080">hdfs-scan-node.h:80</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_a310d3a6b28f5bb1046a90ef8995ffb12"><div class="ttname"><a href="classimpala_1_1ExecNode.html#a310d3a6b28f5bb1046a90ef8995ffb12">impala::ExecNode::ExecDebugAction</a></div><div class="ttdeci">Status ExecDebugAction(TExecNodePhase::type phase, RuntimeState *state)</div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8cc_source.html#l00378">exec-node.cc:378</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_a3ff26374466bc587eaa4c7d00b3e126a"><div class="ttname"><a href="classimpala_1_1ExecNode.html#a3ff26374466bc587eaa4c7d00b3e126a">impala::ExecNode::ReachedLimit</a></div><div class="ttdeci">bool ReachedLimit()</div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8h_source.html#l00159">exec-node.h:159</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a6193af89a13de0a3b8d45bc0e5cd288c"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a6193af89a13de0a3b8d45bc0e5cd288c">impala::HdfsScanNode::RangeComplete</a></div><div class="ttdeci">void RangeComplete(const THdfsFileFormat::type &amp;file_type, const THdfsCompression::type &amp;compression_type)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00924">hdfs-scan-node.cc:924</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeProfile_1_1Counter_html_a1cfaae6ff8ad29bcaf5c876ef83dca9d"><div class="ttname"><a href="classimpala_1_1RuntimeProfile_1_1Counter.html#a1cfaae6ff8ad29bcaf5c876ef83dca9d">impala::RuntimeProfile::Counter::Set</a></div><div class="ttdeci">virtual void Set(int64_t value)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00102">runtime-profile.h:102</a></div></div>
<div class="ttc" id="classimpala_1_1DescriptorTbl_html_a8536f7901b687e8138014cb1b3ef48f6"><div class="ttname"><a href="classimpala_1_1DescriptorTbl.html#a8536f7901b687e8138014cb1b3ef48f6">impala::DescriptorTbl::GetTupleDescriptor</a></div><div class="ttdeci">TupleDescriptor * GetTupleDescriptor(TupleId id) const </div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8cc_source.html#l00437">descriptors.cc:437</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a580fe2c16160fddc4cb49db528fedd79"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a580fe2c16160fddc4cb49db528fedd79">impala::HdfsScanNode::done_</a></div><div class="ttdeci">bool done_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00413">hdfs-scan-node.h:413</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeProfile_1_1Counter_html"><div class="ttname"><a href="classimpala_1_1RuntimeProfile_1_1Counter.html">impala::RuntimeProfile::Counter</a></div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00085">runtime-profile.h:85</a></div></div>
<div class="ttc" id="runtime-profile_8h_html_aaa9a2971c6368e3ddd3f5140a0295eb7"><div class="ttname"><a href="runtime-profile_8h.html#aaa9a2971c6368e3ddd3f5140a0295eb7">SCOPED_TIMER</a></div><div class="ttdeci">#define SCOPED_TIMER(c)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00053">runtime-profile.h:53</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_ad21c25a63f7a11127082710941d23654"><div class="ttname"><a href="classimpala_1_1ExecNode.html#ad21c25a63f7a11127082710941d23654">impala::ExecNode::conjunct_ctxs</a></div><div class="ttdeci">const std::vector&lt; ExprContext * &gt; &amp; conjunct_ctxs() const </div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8h_source.html#l00152">exec-node.h:152</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_ac80894a195ac409e4bd10f004cc9dfb4"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#ac80894a195ac409e4bd10f004cc9dfb4">impala::HdfsScanNode::unexpected_remote_bytes_</a></div><div class="ttdeci">RuntimeProfile::Counter * unexpected_remote_bytes_</div><div class="ttdoc">Total number of bytes read remotely that were expected to be local. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00402">hdfs-scan-node.h:402</a></div></div>
<div class="ttc" id="classimpala_1_1PrettyPrinter_html_a6e5f06a1ce274f747cc4f9928b797c5a"><div class="ttname"><a href="classimpala_1_1PrettyPrinter.html#a6e5f06a1ce274f747cc4f9928b797c5a">impala::PrettyPrinter::Print</a></div><div class="ttdeci">static std::string Print(bool value, TUnit::type ignored, bool verbose=false)</div><div class="ttdef"><b>Definition:</b> <a href="pretty-printer_8h_source.html#l00033">pretty-printer.h:33</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsLzoTextScanner_html_a36d59f2e650b640c3f3e999ce52db514"><div class="ttname"><a href="classimpala_1_1HdfsLzoTextScanner.html#a36d59f2e650b640c3f3e999ce52db514">impala::HdfsLzoTextScanner::GetHdfsLzoTextScanner</a></div><div class="ttdeci">static HdfsScanner * GetHdfsLzoTextScanner(HdfsScanNode *scan_node, RuntimeState *state)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-lzo-text-scanner_8cc_source.html#l00050">hdfs-lzo-text-scanner.cc:50</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_aaf3405bb4186382f75ad04571c68f8aa"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#aaf3405bb4186382f75ad04571c68f8aa">impala::HdfsScanNode::per_file_metadata_</a></div><div class="ttdeci">std::map&lt; std::string, void * &gt; per_file_metadata_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00356">hdfs-scan-node.h:356</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_ae41f912c39b004f60987b4d480e442b8"><div class="ttname"><a href="classimpala_1_1ExecNode.html#ae41f912c39b004f60987b4d480e442b8">impala::ExecNode::limit_</a></div><div class="ttdeci">int64_t limit_</div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8h_source.html#l00222">exec-node.h:222</a></div></div>
<div class="ttc" id="hdfs-fs-cache_8h_html"><div class="ttname"><a href="hdfs-fs-cache_8h.html">hdfs-fs-cache.h</a></div></div>
<div class="ttc" id="classimpala_1_1Expr_html_a70300b0ba7c91fddb9adfaeb0dfc09a5"><div class="ttname"><a href="classimpala_1_1Expr.html#a70300b0ba7c91fddb9adfaeb0dfc09a5">impala::Expr::Close</a></div><div class="ttdeci">static void Close(const std::vector&lt; ExprContext * &gt; &amp;ctxs, RuntimeState *state)</div><div class="ttdoc">Convenience function for closing multiple expr trees. </div></div>
<div class="ttc" id="hdfs-parquet-scanner_8h_html"><div class="ttname"><a href="hdfs-parquet-scanner_8h.html">hdfs-parquet-scanner.h</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a867dc70e19ceceff248b6848d426e643"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a867dc70e19ceceff248b6848d426e643">impala::HdfsScanNode::HdfsScanNode</a></div><div class="ttdeci">HdfsScanNode(ObjectPool *pool, const TPlanNode &amp;tnode, const DescriptorTbl &amp;descs)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00081">hdfs-scan-node.cc:81</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html_a3d8cafc712fea069d9f65ede891544ee"><div class="ttname"><a href="classimpala_1_1RuntimeState.html#a3d8cafc712fea069d9f65ede891544ee">impala::RuntimeState::error_log</a></div><div class="ttdeci">const ErrorLogMap &amp; error_log() const </div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8h_source.html#l00121">runtime-state.h:121</a></div></div>
<div class="ttc" id="object-pool_8h_html"><div class="ttname"><a href="object-pool_8h.html">object-pool.h</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a92415c71b4eb2375813f14dc5e863958"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a92415c71b4eb2375813f14dc5e863958">impala::HdfsScanNode::is_materialized_col_</a></div><div class="ttdeci">std::vector&lt; char &gt; is_materialized_col_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00339">hdfs-scan-node.h:339</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsTextScanner_html_af79bef6374f38e24303a824b0952dfc8"><div class="ttname"><a href="classimpala_1_1HdfsTextScanner.html#af79bef6374f38e24303a824b0952dfc8">impala::HdfsTextScanner::IssueInitialRanges</a></div><div class="ttdeci">static Status IssueInitialRanges(HdfsScanNode *scan_node, const std::vector&lt; HdfsFileDesc * &gt; &amp;files)</div><div class="ttdoc">Issue io manager byte ranges for &#39;files&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-text-scanner_8cc_source.html#l00067">hdfs-text-scanner.cc:67</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a4f56b81443bb1b8099b589ba1855d343"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a4f56b81443bb1b8099b589ba1855d343">impala::ScanNode::PER_READ_THREAD_THROUGHPUT_COUNTER</a></div><div class="ttdeci">static const std::string PER_READ_THREAD_THROUGHPUT_COUNTER</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00126">scan-node.h:126</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanner_html_a61d4a073305f6befe9f12bad12f9de48"><div class="ttname"><a href="classimpala_1_1HdfsScanner.html#a61d4a073305f6befe9f12bad12f9de48">impala::HdfsScanner::Close</a></div><div class="ttdeci">virtual void Close()</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scanner_8cc_source.html#l00082">hdfs-scanner.cc:82</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsFsCache_html_af7b18daf8c4da6bfce2c7612a515bf64"><div class="ttname"><a href="classimpala_1_1HdfsFsCache.html#af7b18daf8c4da6bfce2c7612a515bf64">impala::HdfsFsCache::instance</a></div><div class="ttdeci">static HdfsFsCache * instance()</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-fs-cache_8h_source.html#l00043">hdfs-fs-cache.h:43</a></div></div>
<div class="ttc" id="namespaceimpala_html_ac79f8d29c9aaf2dddb617ae5e36ca23f"><div class="ttname"><a href="namespaceimpala.html#ac79f8d29c9aaf2dddb617ae5e36ca23f">impala::FindOrInsert</a></div><div class="ttdeci">V * FindOrInsert(std::map&lt; K, V &gt; *m, const K &amp;key, const V &amp;default_val)</div><div class="ttdef"><b>Definition:</b> <a href="container-util_8h_source.html#l00051">container-util.h:51</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a702a5dc48e4ccd0e9ea3199ee5c56e0b"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a702a5dc48e4ccd0e9ea3199ee5c56e0b">impala::HdfsScanNode::StopAndFinalizeCounters</a></div><div class="ttdeci">void StopAndFinalizeCounters()</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00982">hdfs-scan-node.cc:982</a></div></div>
<div class="ttc" id="classimpala_1_1LlvmCodeGen_html"><div class="ttname"><a href="classimpala_1_1LlvmCodeGen.html">impala::LlvmCodeGen</a></div><div class="ttdoc">LLVM code generator. This is the top level object to generate jitted code. </div><div class="ttdef"><b>Definition:</b> <a href="llvm-codegen_8h_source.html#l00107">llvm-codegen.h:107</a></div></div>
<div class="ttc" id="classimpala_1_1Status_html"><div class="ttname"><a href="classimpala_1_1Status.html">impala::Status</a></div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00081">status.h:81</a></div></div>
<div class="ttc" id="classimpala_1_1ExecEnv_html_adab640721575c6afe9074faf5ef11925"><div class="ttname"><a href="classimpala_1_1ExecEnv.html#adab640721575c6afe9074faf5ef11925">impala::ExecEnv::cgroups_mgr</a></div><div class="ttdeci">CgroupsMgr * cgroups_mgr()</div><div class="ttdef"><b>Definition:</b> <a href="exec-env_8h_source.html#l00088">exec-env.h:88</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_abe940aa2d7da783c4e8c65f0af22ad8f"><div class="ttname"><a href="classimpala_1_1ExecNode.html#abe940aa2d7da783c4e8c65f0af22ad8f">impala::ExecNode::expr_mem_tracker</a></div><div class="ttdeci">MemTracker * expr_mem_tracker()</div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8h_source.html#l00163">exec-node.h:163</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a86d533cdcfa34c18ae02db91536e0d4c"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a86d533cdcfa34c18ae02db91536e0d4c">impala::ScanNode::SCAN_RANGES_COMPLETE_COUNTER</a></div><div class="ttdeci">static const std::string SCAN_RANGES_COMPLETE_COUNTER</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00129">scan-node.h:129</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanner_html_a2f5d1478537643952a179471165bf1b5"><div class="ttname"><a href="classimpala_1_1HdfsScanner.html#a2f5d1478537643952a179471165bf1b5">impala::HdfsScanner::ProcessSplit</a></div><div class="ttdeci">virtual Status ProcessSplit()=0</div></div>
<div class="ttc" id="logging_8h_html_a916e38366cee7c32fd5fae7e2ee5e4a9"><div class="ttname"><a href="logging_8h.html#a916e38366cee7c32fd5fae7e2ee5e4a9">VLOG_QUERY</a></div><div class="ttdeci">#define VLOG_QUERY</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00057">logging.h:57</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html_aafb733d608a90c92275e7ec9d4bbfcf9"><div class="ttname"><a href="classimpala_1_1RuntimeState.html#aafb733d608a90c92275e7ec9d4bbfcf9">impala::RuntimeState::query_resource_mgr</a></div><div class="ttdeci">QueryResourceMgr * query_resource_mgr() const </div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8h_source.html#l00269">runtime-state.h:269</a></div></div>
<div class="ttc" id="classimpala_1_1ImpaladMetrics_html_a9788cc608fa2d1835c4cadbe95b3d4f5"><div class="ttname"><a href="classimpala_1_1ImpaladMetrics.html#a9788cc608fa2d1835c4cadbe95b3d4f5">impala::ImpaladMetrics::NUM_RANGES_MISSING_VOLUME_ID</a></div><div class="ttdeci">static IntCounter * NUM_RANGES_MISSING_VOLUME_ID</div><div class="ttdef"><b>Definition:</b> <a href="impalad-metrics_8h_source.html#l00131">impalad-metrics.h:131</a></div></div>
<div class="ttc" id="hdfs-lzo-text-scanner_8h_html"><div class="ttname"><a href="hdfs-lzo-text-scanner_8h.html">hdfs-lzo-text-scanner.h</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a17db6484c22ecd4c0511e5e1c53f185c"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a17db6484c22ecd4c0511e5e1c53f185c">impala::ScanNode::average_hdfs_read_thread_concurrency_</a></div><div class="ttdeci">RuntimeProfile::Counter * average_hdfs_read_thread_concurrency_</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00168">scan-node.h:168</a></div></div>
<div class="ttc" id="classimpala_1_1ThreadResourceMgr_1_1ResourcePool_html_a206a09379a1e4d99b6067e2008c73811"><div class="ttname"><a href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html#a206a09379a1e4d99b6067e2008c73811">impala::ThreadResourceMgr::ResourcePool::optional_exceeded</a></div><div class="ttdeci">bool optional_exceeded()</div><div class="ttdoc">Returns true if the number of optional threads has now exceeded the quota. </div><div class="ttdef"><b>Definition:</b> <a href="thread-resource-mgr_8h_source.html#l00141">thread-resource-mgr.h:141</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a00ea471438154ad56391ee19a39f12f0"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a00ea471438154ad56391ee19a39f12f0">impala::ScanNode::hdfs_read_thread_concurrency_bucket_</a></div><div class="ttdeci">std::vector&lt; RuntimeProfile::Counter * &gt; hdfs_read_thread_concurrency_bucket_</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00174">scan-node.h:174</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a718797e4e5fe972c8b398e011f2077a0"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a718797e4e5fe972c8b398e011f2077a0">impala::HdfsScanNode::file_type_counts_lock_</a></div><div class="ttdeci">SpinLock file_type_counts_lock_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00431">hdfs-scan-node.h:431</a></div></div>
<div class="ttc" id="classimpala_1_1ThreadResourceMgr_1_1ResourcePool_html_a231a2da34552814c89c8d9b5bc5ee379"><div class="ttname"><a href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html#a231a2da34552814c89c8d9b5bc5ee379">impala::ThreadResourceMgr::ResourcePool::set_max_quota</a></div><div class="ttdeci">void set_max_quota(int quota)</div><div class="ttdef"><b>Definition:</b> <a href="thread-resource-mgr_8h_source.html#l00163">thread-resource-mgr.h:163</a></div></div>
<div class="ttc" id="structimpala_1_1HdfsFileDesc_html_a735ba080821bf0befbaeac9ce007a18f"><div class="ttname"><a href="structimpala_1_1HdfsFileDesc.html#a735ba080821bf0befbaeac9ce007a18f">impala::HdfsFileDesc::file_compression</a></div><div class="ttdeci">THdfsCompression::type file_compression</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00067">hdfs-scan-node.h:67</a></div></div>
<div class="ttc" id="classimpala_1_1ScannerContext_1_1Stream_html_a9dcb5b4ec2655da763877b00ff91c9e5"><div class="ttname"><a href="classimpala_1_1ScannerContext_1_1Stream.html#a9dcb5b4ec2655da763877b00ff91c9e5">impala::ScannerContext::Stream::file_desc</a></div><div class="ttdeci">const HdfsFileDesc * file_desc()</div><div class="ttdef"><b>Definition:</b> <a href="scanner-context_8h_source.html#l00120">scanner-context.h:120</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_ab00029212e1b92f2ecb6014c63c204a2"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#ab00029212e1b92f2ecb6014c63c204a2">impala::DiskIoMgr::bytes_read_short_circuit</a></div><div class="ttdeci">int64_t bytes_read_short_circuit(RequestContext *reader) const </div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8cc_source.html#l00424">disk-io-mgr.cc:424</a></div></div>
<div class="ttc" id="structimpala_1_1HdfsFileDesc_html_a6c90f16db47944a449aa282bbedd2eee"><div class="ttname"><a href="structimpala_1_1HdfsFileDesc.html#a6c90f16db47944a449aa282bbedd2eee">impala::HdfsFileDesc::mtime</a></div><div class="ttdeci">int64_t mtime</div><div class="ttdoc">Last modified time. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00065">hdfs-scan-node.h:65</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a0521140f7c60d795fb7bd2f44c42c9bf"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a0521140f7c60d795fb7bd2f44c42c9bf">impala::HdfsScanNode::GetFileDesc</a></div><div class="ttdeci">HdfsFileDesc * GetFileDesc(const std::string &amp;filename)</div><div class="ttdoc">Returns the file desc for &#39;filename&#39;. Returns NULL if filename is invalid. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00206">hdfs-scan-node.cc:206</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_aee32dbcc86bd092c4bf68ee783a4bab5"><div class="ttname"><a href="classimpala_1_1ScanNode.html#aee32dbcc86bd092c4bf68ee783a4bab5">impala::ScanNode::num_disks_accessed_counter_</a></div><div class="ttdeci">RuntimeProfile::Counter * num_disks_accessed_counter_</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00150">scan-node.h:150</a></div></div>
<div class="ttc" id="classimpala_1_1MemPool_html"><div class="ttname"><a href="classimpala_1_1MemPool.html">impala::MemPool</a></div><div class="ttdef"><b>Definition:</b> <a href="mem-pool_8h_source.html#l00077">mem-pool.h:77</a></div></div>
<div class="ttc" id="classimpala_1_1PeriodicCounterUpdater_html_a59298c90aa019fd18a8d48f441d6a4a7"><div class="ttname"><a href="classimpala_1_1PeriodicCounterUpdater.html#a59298c90aa019fd18a8d48f441d6a4a7">impala::PeriodicCounterUpdater::StopBucketingCounters</a></div><div class="ttdeci">static void StopBucketingCounters(std::vector&lt; RuntimeProfile::Counter * &gt; *buckets, bool convert)</div><div class="ttdef"><b>Definition:</b> <a href="periodic-counter-updater_8cc_source.html#l00094">periodic-counter-updater.cc:94</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html_aaf076b1879d9e712b08ba3a6e24607b9"><div class="ttname"><a href="classimpala_1_1RuntimeState.html#aaf076b1879d9e712b08ba3a6e24607b9">impala::RuntimeState::LogError</a></div><div class="ttdeci">bool LogError(const ErrorMsg &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8cc_source.html#l00224">runtime-state.cc:224</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html_adc231e17933fbc4385f968d7eecc5ee2"><div class="ttname"><a href="classimpala_1_1RuntimeState.html#adc231e17933fbc4385f968d7eecc5ee2">impala::RuntimeState::query_options</a></div><div class="ttdeci">const TQueryOptions &amp; query_options() const </div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8h_source.html#l00095">runtime-state.h:95</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a542d120245f434d86664d7bf6aad74d6"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a542d120245f434d86664d7bf6aad74d6">impala::HdfsScanNode::file_type_counts_</a></div><div class="ttdeci">FileTypeCountsMap file_type_counts_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00434">hdfs-scan-node.h:434</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsPartitionDescriptor_html_ac07d03794cffd542bda8c2f49a0658e5"><div class="ttname"><a href="classimpala_1_1HdfsPartitionDescriptor.html#ac07d03794cffd542bda8c2f49a0658e5">impala::HdfsPartitionDescriptor::CloseExprs</a></div><div class="ttdeci">void CloseExprs(RuntimeState *state)</div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8cc_source.html#l00151">descriptors.cc:151</a></div></div>
<div class="ttc" id="classimpala_1_1ImpaladMetrics_html_adcbee0c79600142bbbe9629708fbce64"><div class="ttname"><a href="classimpala_1_1ImpaladMetrics.html#adcbee0c79600142bbbe9629708fbce64">impala::ImpaladMetrics::NUM_RANGES_PROCESSED</a></div><div class="ttdeci">static IntCounter * NUM_RANGES_PROCESSED</div><div class="ttdef"><b>Definition:</b> <a href="impalad-metrics_8h_source.html#l00132">impalad-metrics.h:132</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_afe9bc42ad3846bde9f7113e5f1c133dc"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#afe9bc42ad3846bde9f7113e5f1c133dc">impala::HdfsScanNode::AddDiskIoRanges</a></div><div class="ttdeci">Status AddDiskIoRanges(const std::vector&lt; DiskIoMgr::ScanRange * &gt; &amp;ranges)</div><div class="ttdoc">Adds ranges to the io mgr queue and starts up new scanner threads if possible. </div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a107068e0d20d1810ebb9390e89d41dda"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a107068e0d20d1810ebb9390e89d41dda">impala::ScanNode::AVERAGE_HDFS_READ_THREAD_CONCURRENCY</a></div><div class="ttdeci">static const std::string AVERAGE_HDFS_READ_THREAD_CONCURRENCY</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00133">scan-node.h:133</a></div></div>
<div class="ttc" id="hdfs-scan-node_8cc_html_afc0d04de3b6bd6176cbab88eed30d519"><div class="ttname"><a href="hdfs-scan-node_8cc.html#afc0d04de3b6bd6176cbab88eed30d519">COMPRESSED_TEXT_COMPRESSION_RATIO</a></div><div class="ttdeci">const int COMPRESSED_TEXT_COMPRESSION_RATIO</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00076">hdfs-scan-node.cc:76</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html"><div class="ttname"><a href="classimpala_1_1RuntimeState.html">impala::RuntimeState</a></div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8h_source.html#l00069">runtime-state.h:69</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_a3c99177a95caa67739c8815c55eb3491"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#a3c99177a95caa67739c8815c55eb3491">impala::DiskIoMgr::num_total_disks</a></div><div class="ttdeci">int num_total_disks() const </div><div class="ttdoc">Returns the total number of disk queues (both local and remote). </div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8h_source.html#l00593">disk-io-mgr.h:593</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a32e89b2799d3cd38fc4dad00224b5163"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a32e89b2799d3cd38fc4dad00224b5163">impala::HdfsScanNode::tuple_id_</a></div><div class="ttdeci">const int tuple_id_</div><div class="ttdoc">Tuple id resolved in Prepare() to set tuple_desc_;. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00277">hdfs-scan-node.h:277</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a7a061c78c1b6f80ef9b7f5ca9b7cfeb2"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a7a061c78c1b6f80ef9b7f5ca9b7cfeb2">impala::HdfsScanNode::ComputeSlotMaterializationOrder</a></div><div class="ttdeci">void ComputeSlotMaterializationOrder(std::vector&lt; int &gt; *order) const </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00956">hdfs-scan-node.cc:956</a></div></div>
<div class="ttc" id="structimpala_1_1HdfsFileDesc_html_ac61d7b9d90558ae7289dc2ae2f5082b9"><div class="ttname"><a href="structimpala_1_1HdfsFileDesc.html#ac61d7b9d90558ae7289dc2ae2f5082b9">impala::HdfsFileDesc::file_length</a></div><div class="ttdeci">int64_t file_length</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00062">hdfs-scan-node.h:62</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsPartitionDescriptor_html_ae1e66f0a122f72d42cda498511e63c0c"><div class="ttname"><a href="classimpala_1_1HdfsPartitionDescriptor.html#ae1e66f0a122f72d42cda498511e63c0c">impala::HdfsPartitionDescriptor::location</a></div><div class="ttdeci">const std::string &amp; location() const </div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8h_source.html#l00189">descriptors.h:189</a></div></div>
<div class="ttc" id="classimpala_1_1Status_html_a327e57a4c61d1387f8b52fce20e89a34"><div class="ttname"><a href="classimpala_1_1Status.html#a327e57a4c61d1387f8b52fce20e89a34">impala::Status::IsCancelled</a></div><div class="ttdeci">bool IsCancelled() const </div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00174">status.h:174</a></div></div>
<div class="ttc" id="bit-util_8h_html"><div class="ttname"><a href="bit-util_8h.html">bit-util.h</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_afb45aa3eeb7c9213fb1e809bccc51c38"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#afb45aa3eeb7c9213fb1e809bccc51c38">impala::HdfsScanNode::bytes_read_local_</a></div><div class="ttdeci">RuntimeProfile::Counter * bytes_read_local_</div><div class="ttdoc">Total number of bytes read locally. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00390">hdfs-scan-node.h:390</a></div></div>
<div class="ttc" id="classimpala_1_1RowBatch_html_a56893f5c0ac2f5831c85e8c87e838089"><div class="ttname"><a href="classimpala_1_1RowBatch.html#a56893f5c0ac2f5831c85e8c87e838089">impala::RowBatch::set_num_rows</a></div><div class="ttdeci">void set_num_rows(int num_rows)</div><div class="ttdef"><b>Definition:</b> <a href="row-batch_8h_source.html#l00113">row-batch.h:113</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_ae7f252f793570d19d71ef0c59ddb6eef"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#ae7f252f793570d19d71ef0c59ddb6eef">impala::HdfsScanNode::codegend_fn_map_</a></div><div class="ttdeci">CodegendFnMap codegend_fn_map_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00324">hdfs-scan-node.h:324</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html_a4c01f227dc12d859d5824e7c91d6d1aa"><div class="ttname"><a href="classimpala_1_1RuntimeState.html#a4c01f227dc12d859d5824e7c91d6d1aa">impala::RuntimeState::obj_pool</a></div><div class="ttdeci">ObjectPool * obj_pool() const </div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8h_source.html#l00092">runtime-state.h:92</a></div></div>
<div class="ttc" id="debug-util_8h_html"><div class="ttname"><a href="debug-util_8h.html">debug-util.h</a></div></div>
<div class="ttc" id="runtime-state_8h_html_a803877a2ce5ce5c0b4f311c9c7137ba1"><div class="ttname"><a href="runtime-state_8h.html#a803877a2ce5ce5c0b4f311c9c7137ba1">RETURN_IF_CANCELLED</a></div><div class="ttdeci">#define RETURN_IF_CANCELLED(state)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8h_source.html#l00384">runtime-state.h:384</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_aa12010650a5eafd6ebeccb5fdd9e442a"><div class="ttname"><a href="classimpala_1_1ScanNode.html#aa12010650a5eafd6ebeccb5fdd9e442a">impala::ScanNode::active_scanner_thread_counter_</a></div><div class="ttdeci">RuntimeProfile::Counter active_scanner_thread_counter_</div><div class="ttdoc">The number of active scanner threads that are not blocked by IO. </div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00157">scan-node.h:157</a></div></div>
<div class="ttc" id="hdfs-text-scanner_8h_html"><div class="ttname"><a href="hdfs-text-scanner_8h.html">hdfs-text-scanner.h</a></div></div>
<div class="ttc" id="expr-benchmark_8cc_html_a3a5de7bd423fbc0afc4cf935c166ca6b"><div class="ttname"><a href="expr-benchmark_8cc.html#a3a5de7bd423fbc0afc4cf935c166ca6b">pool</a></div><div class="ttdeci">ObjectPool pool</div><div class="ttdef"><b>Definition:</b> <a href="expr-benchmark_8cc_source.html#l00089">expr-benchmark.cc:89</a></div></div>
<div class="ttc" id="classimpala_1_1ImpaladMetrics_html_ac31cc3b37c500c1a513287d279059419"><div class="ttname"><a href="classimpala_1_1ImpaladMetrics.html#ac31cc3b37c500c1a513287d279059419">impala::ImpaladMetrics::IO_MGR_SHORT_CIRCUIT_BYTES_READ</a></div><div class="ttdeci">static IntGauge * IO_MGR_SHORT_CIRCUIT_BYTES_READ</div><div class="ttdef"><b>Definition:</b> <a href="impalad-metrics_8h_source.html#l00146">impalad-metrics.h:146</a></div></div>
<div class="ttc" id="hdfs-scan-node_8cc_html_a7082043df41c165c65afa3b8b1cba0d7"><div class="ttname"><a href="hdfs-scan-node_8cc.html#a7082043df41c165c65afa3b8b1cba0d7">DECLARE_string</a></div><div class="ttdeci">DECLARE_string(cgroup_hierarchy_path)</div></div>
<div class="ttc" id="classimpala_1_1HdfsTextScanner_html_abd5837c883c0e0490a228e7809ee5478"><div class="ttname"><a href="classimpala_1_1HdfsTextScanner.html#abd5837c883c0e0490a228e7809ee5478">impala::HdfsTextScanner::Codegen</a></div><div class="ttdeci">static llvm::Function * Codegen(HdfsScanNode *, const std::vector&lt; ExprContext * &gt; &amp;conjunct_ctxs)</div><div class="ttdoc">Codegen writing tuples and evaluating predicates. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-text-scanner_8cc_source.html#l00609">hdfs-text-scanner.cc:609</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a304fafe6def2c0514985b7a04f96d963"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a304fafe6def2c0514985b7a04f96d963">impala::HdfsScanNode::disks_accessed_bitmap_</a></div><div class="ttdeci">RuntimeProfile::Counter disks_accessed_bitmap_</div><div class="ttdoc">Disk accessed bitmap. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00387">hdfs-scan-node.h:387</a></div></div>
<div class="ttc" id="classimpala_1_1ProgressUpdater_html_a36253a94c0cf74bbebf2474048fc4363"><div class="ttname"><a href="classimpala_1_1ProgressUpdater.html#a36253a94c0cf74bbebf2474048fc4363">impala::ProgressUpdater::done</a></div><div class="ttdeci">bool done() const </div><div class="ttdoc">Returns if all tasks are done. </div><div class="ttdef"><b>Definition:</b> <a href="progress-updater_8h_source.html#l00052">progress-updater.h:52</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsTextScanner_html"><div class="ttname"><a href="classimpala_1_1HdfsTextScanner.html">impala::HdfsTextScanner</a></div><div class="ttdef"><b>Definition:</b> <a href="hdfs-text-scanner_8h_source.html#l00030">hdfs-text-scanner.h:30</a></div></div>
<div class="ttc" id="classimpala_1_1PeriodicCounterUpdater_html_a05da0be47b84b2bc519f91869b03fcef"><div class="ttname"><a href="classimpala_1_1PeriodicCounterUpdater.html#a05da0be47b84b2bc519f91869b03fcef">impala::PeriodicCounterUpdater::StopRateCounter</a></div><div class="ttdeci">static void StopRateCounter(RuntimeProfile::Counter *counter)</div><div class="ttdoc">Stops updating the value of &#39;counter&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="periodic-counter-updater_8cc_source.html#l00075">periodic-counter-updater.cc:75</a></div></div>
<div class="ttc" id="runtime-profile_8h_html_aac035c52016117af399543521f069c51"><div class="ttname"><a href="runtime-profile_8h.html#aac035c52016117af399543521f069c51">ADD_COUNTER</a></div><div class="ttdeci">#define ADD_COUNTER(profile, name, unit)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00047">runtime-profile.h:47</a></div></div>
<div class="ttc" id="classuint64__t_html"><div class="ttname"><a href="classuint64__t.html">uint64_t</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_ac6d4b9ccf63d7b36ff869d8e1230cc13"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#ac6d4b9ccf63d7b36ff869d8e1230cc13">impala::HdfsScanNode::SKIP_COLUMN</a></div><div class="ttdeci">static const int SKIP_COLUMN</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00144">hdfs-scan-node.h:144</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_a7b7a12de61dd80ed3b3163192c3cac19"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#a7b7a12de61dd80ed3b3163192c3cac19">impala::DiskIoMgr::set_disks_access_bitmap</a></div><div class="ttdeci">void set_disks_access_bitmap(RequestContext *, RuntimeProfile::Counter *)</div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8cc_source.html#l00402">disk-io-mgr.cc:402</a></div></div>
<div class="ttc" id="classimpala_1_1SlotDescriptor_html_a699e800ccb26e4e2e49a02a630bd687b"><div class="ttname"><a href="classimpala_1_1SlotDescriptor.html#a699e800ccb26e4e2e49a02a630bd687b">impala::SlotDescriptor::col_pos</a></div><div class="ttdeci">int col_pos() const </div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8h_source.html#l00084">descriptors.h:84</a></div></div>
<div class="ttc" id="classimpala_1_1LlvmCodeGen_html_a03470568663cfd5771af8fc387aabfd5"><div class="ttname"><a href="classimpala_1_1LlvmCodeGen.html#a03470568663cfd5771af8fc387aabfd5">impala::LlvmCodeGen::AddFunctionToJit</a></div><div class="ttdeci">void AddFunctionToJit(llvm::Function *fn, void **fn_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="llvm-codegen_8cc_source.html#l00714">llvm-codegen.cc:714</a></div></div>
<div class="ttc" id="classimpala_1_1RawValue_html_a00e7f52854e70f33ed712fa00126f527"><div class="ttname"><a href="classimpala_1_1RawValue.html#a00e7f52854e70f33ed712fa00126f527">impala::RawValue::Write</a></div><div class="ttdeci">static void Write(const void *value, Tuple *tuple, const SlotDescriptor *slot_desc, MemPool *pool)</div><div class="ttdef"><b>Definition:</b> <a href="raw-value_8cc_source.html#l00303">raw-value.cc:303</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_a19340582202dd61e0b028c28efa5490a"><div class="ttname"><a href="classimpala_1_1ExecNode.html#a19340582202dd61e0b028c28efa5490a">impala::ExecNode::AddExprCtxsToFree</a></div><div class="ttdeci">void AddExprCtxsToFree(const std::vector&lt; ExprContext * &gt; &amp;ctxs)</div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_abcf20ad952f31d948888d9834b64dd94"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#abcf20ad952f31d948888d9834b64dd94">impala::DiskIoMgr::set_bytes_read_counter</a></div><div class="ttdeci">void set_bytes_read_counter(RequestContext *, RuntimeProfile::Counter *)</div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8cc_source.html#l00393">disk-io-mgr.cc:393</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a5a47b289756eb429bbeb5bf134959f9e"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a5a47b289756eb429bbeb5bf134959f9e">impala::HdfsScanNode::runtime_state</a></div><div class="ttdeci">RuntimeState * runtime_state()</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00136">hdfs-scan-node.h:136</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a55e38d04080295725416c3ab2fcb8338"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a55e38d04080295725416c3ab2fcb8338">impala::HdfsScanNode::AddMaterializedRowBatch</a></div><div class="ttdeci">void AddMaterializedRowBatch(RowBatch *row_batch)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00688">hdfs-scan-node.cc:688</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a989c93325fcd5478f9c78ac23fc36cee"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a989c93325fcd5478f9c78ac23fc36cee">impala::HdfsScanNode::GetNextInternal</a></div><div class="ttdeci">Status GetNextInternal(RuntimeState *state, RowBatch *row_batch, bool *eos)</div><div class="ttdoc">Checks for eos conditions and returns batches from materialized_row_batches_. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00139">hdfs-scan-node.cc:139</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_ab8f2832c6a5487aa8168b2a7d65773ee"><div class="ttname"><a href="classimpala_1_1ExecNode.html#ab8f2832c6a5487aa8168b2a7d65773ee">impala::ExecNode::QueryMaintenance</a></div><div class="ttdeci">virtual Status QueryMaintenance(RuntimeState *state)</div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8cc_source.html#l00401">exec-node.cc:401</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_1_1RequestRange_html_a54e2b168c3a64a9250cac5069f85435d"><div class="ttname"><a href="classimpala_1_1DiskIoMgr_1_1RequestRange.html#a54e2b168c3a64a9250cac5069f85435d">impala::DiskIoMgr::RequestRange::len</a></div><div class="ttdeci">int64_t len() const </div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8h_source.html#l00268">disk-io-mgr.h:268</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a1e427c8caf4c9f75f08f0269f07d8c91"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a1e427c8caf4c9f75f08f0269f07d8c91">impala::ScanNode::bytes_read_counter</a></div><div class="ttdeci">RuntimeProfile::Counter * bytes_read_counter() const </div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00095">scan-node.h:95</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_1_1ScanRange_html_a2cf57a30a890667743a870faa5f630a1"><div class="ttname"><a href="classimpala_1_1DiskIoMgr_1_1ScanRange.html#a2cf57a30a890667743a870faa5f630a1">impala::DiskIoMgr::ScanRange::Reset</a></div><div class="ttdeci">void Reset(hdfsFS fs, const char *file, int64_t len, int64_t offset, int disk_id, bool try_cache, bool expected_local, int64_t mtime, void *metadata=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr-scan-range_8cc_source.html#l00215">disk-io-mgr-scan-range.cc:215</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsSequenceScanner_html"><div class="ttname"><a href="classimpala_1_1HdfsSequenceScanner.html">impala::HdfsSequenceScanner</a></div><div class="ttdef"><b>Definition:</b> <a href="hdfs-sequence-scanner_8h_source.html#l00156">hdfs-sequence-scanner.h:156</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a3f8c2ca9b6847e98d8e244045d11e6cf"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a3f8c2ca9b6847e98d8e244045d11e6cf">impala::HdfsScanNode::materialized_slots_</a></div><div class="ttdeci">std::vector&lt; SlotDescriptor * &gt; materialized_slots_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00344">hdfs-scan-node.h:344</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html_abab3a5213f629bebdc266a858dc1d45d"><div class="ttname"><a href="classimpala_1_1RuntimeState.html#abab3a5213f629bebdc266a858dc1d45d">impala::RuntimeState::desc_tbl</a></div><div class="ttdeci">const DescriptorTbl &amp; desc_tbl() const </div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8h_source.html#l00093">runtime-state.h:93</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a265b144314da1ba14edde43893493c0d"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a265b144314da1ba14edde43893493c0d">impala::HdfsScanNode::Prepare</a></div><div class="ttdeci">virtual Status Prepare(RuntimeState *state)</div><div class="ttdoc">ExecNode methods. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00304">hdfs-scan-node.cc:304</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_a467751b7182365c83e867dc3d50b43e2"><div class="ttname"><a href="classimpala_1_1ExecNode.html#a467751b7182365c83e867dc3d50b43e2">impala::ExecNode::is_closed</a></div><div class="ttdeci">bool is_closed()</div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8h_source.html#l00242">exec-node.h:242</a></div></div>
<div class="ttc" id="hdfs-scan-node_8cc_html_a5d9655bbf01ec819fcad0abc0ff7843d"><div class="ttname"><a href="hdfs-scan-node_8cc.html#a5d9655bbf01ec819fcad0abc0ff7843d">UNEXPECTED_REMOTE_BYTES_WARN_THRESHOLD</a></div><div class="ttdeci">const int UNEXPECTED_REMOTE_BYTES_WARN_THRESHOLD</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00079">hdfs-scan-node.cc:79</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html"><div class="ttname"><a href="classimpala_1_1ScanNode.html">impala::ScanNode</a></div><div class="ttdoc">Abstract base class of all scan nodes; introduces SetScanRange(). </div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00077">scan-node.h:77</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a859aa77fccafc5a265047d5700196065"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a859aa77fccafc5a265047d5700196065">impala::HdfsScanNode::GetCodegenFn</a></div><div class="ttdeci">void * GetCodegenFn(THdfsFileFormat::type)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00224">hdfs-scan-node.cc:224</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a3e42cc1145e87bd01fcbb08b3963fbf8"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a3e42cc1145e87bd01fcbb08b3963fbf8">impala::HdfsScanNode::conjunct_ctxs_</a></div><div class="ttdeci">std::vector&lt; ExprContext * &gt; conjunct_ctxs_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00328">hdfs-scan-node.h:328</a></div></div>
<div class="ttc" id="runtime-state_8h_html"><div class="ttname"><a href="runtime-state_8h.html">runtime-state.h</a></div></div>
<div class="ttc" id="structimpala_1_1HdfsFileDesc_html_a736558d23bb330a4ee535b26bdc5041c"><div class="ttname"><a href="structimpala_1_1HdfsFileDesc.html#a736558d23bb330a4ee535b26bdc5041c">impala::HdfsFileDesc::fs</a></div><div class="ttdeci">hdfsFS fs</div><div class="ttdoc">Connection to the filesystem containing the file. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00055">hdfs-scan-node.h:55</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a896efeab03af639a6e42b425323f83c1"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a896efeab03af639a6e42b425323f83c1">impala::HdfsScanNode::PrintHdfsSplitStats</a></div><div class="ttdeci">static void PrintHdfsSplitStats(const PerVolumnStats &amp;per_volume_stats, std::stringstream *ss)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l01073">hdfs-scan-node.cc:1073</a></div></div>
<div class="ttc" id="classimpala_1_1RowBatch_html"><div class="ttname"><a href="classimpala_1_1RowBatch.html">impala::RowBatch</a></div><div class="ttdef"><b>Definition:</b> <a href="row-batch_8h_source.html#l00066">row-batch.h:66</a></div></div>
<div class="ttc" id="classimpala_1_1QueryResourceMgr_html_a03784ec11fcb18de5edfb28a481949ef"><div class="ttname"><a href="classimpala_1_1QueryResourceMgr.html#a03784ec11fcb18de5edfb28a481949ef">impala::QueryResourceMgr::RemoveVcoreAvailableCb</a></div><div class="ttdeci">void RemoveVcoreAvailableCb(int32_t callback_id)</div><div class="ttdoc">Removes the callback with the given ID. </div><div class="ttdef"><b>Definition:</b> <a href="query-resource-mgr_8cc_source.html#l00154">query-resource-mgr.cc:154</a></div></div>
<div class="ttc" id="runtime-profile_8h_html_a9e3d8174f6545ee9c4fd37c624ea58f7"><div class="ttname"><a href="runtime-profile_8h.html#a9e3d8174f6545ee9c4fd37c624ea58f7">COUNTER_SET</a></div><div class="ttdeci">#define COUNTER_SET(c, v)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00056">runtime-profile.h:56</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_ad9d54aba37c0dd0f969321bdb416bb6e"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#ad9d54aba37c0dd0f969321bdb416bb6e">impala::HdfsScanNode::runtime_state_</a></div><div class="ttdeci">RuntimeState * runtime_state_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00274">hdfs-scan-node.h:274</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_abe7c2af2d420e7bffa13986bb2886892"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#abe7c2af2d420e7bffa13986bb2886892">impala::HdfsScanNode::counters_running_</a></div><div class="ttdeci">bool counters_running_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00438">hdfs-scan-node.h:438</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a9f43b5a5a502530c82e0fe164dc80ad7"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a9f43b5a5a502530c82e0fe164dc80ad7">impala::HdfsScanNode::scanner_thread_bytes_required_</a></div><div class="ttdeci">int64_t scanner_thread_bytes_required_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00312">hdfs-scan-node.h:312</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a4d28cb5a8e63d1e7ef4f8fc11138e65c"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a4d28cb5a8e63d1e7ef4f8fc11138e65c">impala::HdfsScanNode::EnoughMemoryForScannerThread</a></div><div class="ttdeci">bool EnoughMemoryForScannerThread(bool new_thread)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00706">hdfs-scan-node.cc:706</a></div></div>
<div class="ttc" id="classimpala_1_1ImpaladMetrics_html_ae6f6869c916a26b2fced976a0a71c05c"><div class="ttname"><a href="classimpala_1_1ImpaladMetrics.html#ae6f6869c916a26b2fced976a0a71c05c">impala::ImpaladMetrics::IO_MGR_CACHED_BYTES_READ</a></div><div class="ttdeci">static IntGauge * IO_MGR_CACHED_BYTES_READ</div><div class="ttdef"><b>Definition:</b> <a href="impalad-metrics_8h_source.html#l00145">impalad-metrics.h:145</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a070067d8d77f5d61fcdd3e2f66774a62"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a070067d8d77f5d61fcdd3e2f66774a62">impala::HdfsScanNode::ScannerThread</a></div><div class="ttdeci">void ScannerThread()</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00797">hdfs-scan-node.cc:797</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_a632a4cdd4c654f362f630936c5ecb29a"><div class="ttname"><a href="classimpala_1_1ExecNode.html#a632a4cdd4c654f362f630936c5ecb29a">impala::ExecNode::rows_returned_counter_</a></div><div class="ttdeci">RuntimeProfile::Counter * rows_returned_counter_</div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8h_source.html#l00226">exec-node.h:226</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_a22f6b26648d0b3878e417cf087b2ee89"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#a22f6b26648d0b3878e417cf087b2ee89">impala::DiskIoMgr::bytes_read_local</a></div><div class="ttdeci">int64_t bytes_read_local(RequestContext *reader) const </div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8cc_source.html#l00420">disk-io-mgr.cc:420</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_ad47ca48f0333ef0fb46b8b121dc05ee6"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#ad47ca48f0333ef0fb46b8b121dc05ee6">impala::HdfsScanNode::max_compressed_text_file_length_</a></div><div class="ttdeci">RuntimeProfile::HighWaterMarkCounter * max_compressed_text_file_length_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00384">hdfs-scan-node.h:384</a></div></div>
<div class="ttc" id="hdfs_8h_html"><div class="ttname"><a href="hdfs_8h.html">hdfs.h</a></div></div>
<div class="ttc" id="classimpala_1_1TableDescriptor_html_a19048794c0423d3f06e991f411fd073f"><div class="ttname"><a href="classimpala_1_1TableDescriptor.html#a19048794c0423d3f06e991f411fd073f">impala::TableDescriptor::name</a></div><div class="ttdeci">const std::string &amp; name() const </div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8h_source.html#l00163">descriptors.h:163</a></div></div>
<div class="ttc" id="classimpala_1_1PeriodicCounterUpdater_html_a8755f55defce4fd6c5f9d7b46b6dd2b4"><div class="ttname"><a href="classimpala_1_1PeriodicCounterUpdater.html#a8755f55defce4fd6c5f9d7b46b6dd2b4">impala::PeriodicCounterUpdater::StopSamplingCounter</a></div><div class="ttdeci">static void StopSamplingCounter(RuntimeProfile::Counter *counter)</div><div class="ttdoc">Stops updating the value of &#39;counter&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="periodic-counter-updater_8cc_source.html#l00080">periodic-counter-updater.cc:80</a></div></div>
<div class="ttc" id="classimpala_1_1AtomicUtil_html_a579a99ed6cd7f9f4ac882f1145b4a523"><div class="ttname"><a href="classimpala_1_1AtomicUtil.html#a579a99ed6cd7f9f4ac882f1145b4a523">impala::AtomicUtil::MemoryBarrier</a></div><div class="ttdeci">static void MemoryBarrier()</div><div class="ttdef"><b>Definition:</b> <a href="atomic_8h_source.html#l00036">atomic.h:36</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html_af4a734aea58f4258866ca8414fd3b00b"><div class="ttname"><a href="classimpala_1_1RuntimeState.html#af4a734aea58f4258866ca8414fd3b00b">impala::RuntimeState::SetMemLimitExceeded</a></div><div class="ttdeci">Status SetMemLimitExceeded(MemTracker *tracker=NULL, int64_t failed_allocation_size=0)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8cc_source.html#l00247">runtime-state.cc:247</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a79a5cce2cd5ab6e165bed160988ea6e5"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a79a5cce2cd5ab6e165bed160988ea6e5">impala::HdfsScanNode::status_</a></div><div class="ttdeci">Status status_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00426">hdfs-scan-node.h:426</a></div></div>
<div class="ttc" id="hdfs-rcfile-scanner_8h_html"><div class="ttname"><a href="hdfs-rcfile-scanner_8h.html">hdfs-rcfile-scanner.h</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_a47f9eb99e3e705017d17dffddbea38b2"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#a47f9eb99e3e705017d17dffddbea38b2">impala::DiskIoMgr::RegisterContext</a></div><div class="ttdeci">Status RegisterContext(RequestContext **request_context, MemTracker *reader_mem_tracker=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8cc_source.html#l00336">disk-io-mgr.cc:336</a></div></div>
<div class="ttc" id="classimpala_1_1ErrorMsg_html"><div class="ttname"><a href="classimpala_1_1ErrorMsg.html">impala::ErrorMsg</a></div><div class="ttdef"><b>Definition:</b> <a href="error-util_8h_source.html#l00047">error-util.h:47</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_1_1RowBatchQueue_html"><div class="ttname"><a href="classimpala_1_1ExecNode_1_1RowBatchQueue.html">impala::ExecNode::RowBatchQueue</a></div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8h_source.html#l00181">exec-node.h:181</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a8ccdbe3afe3d3360261bd6babfea7bff"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a8ccdbe3afe3d3360261bd6babfea7bff">impala::HdfsScanNode::UpdateHdfsSplitStats</a></div><div class="ttdeci">static void UpdateHdfsSplitStats(const std::vector&lt; TScanRangeParams &gt; &amp;scan_range_params_list, PerVolumnStats *per_volume_stats)</div><div class="ttdoc">Update the per volume stats with the given scan range params list. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l01058">hdfs-scan-node.cc:1058</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_af19f532386cf41d53a8ae23a846f8a7b"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#af19f532386cf41d53a8ae23a846f8a7b">impala::HdfsScanNode::tuple_desc_</a></div><div class="ttdeci">const TupleDescriptor * tuple_desc_</div><div class="ttdoc">Descriptor for tuples this scan node constructs. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00283">hdfs-scan-node.h:283</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_aa866fb84b4cee4e924854e1eb03bbb63"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#aa866fb84b4cee4e924854e1eb03bbb63">impala::HdfsScanNode::~HdfsScanNode</a></div><div class="ttdeci">~HdfsScanNode()</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00108">hdfs-scan-node.cc:108</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a658528dff2574432a3475e0d2f78a055"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a658528dff2574432a3475e0d2f78a055">impala::HdfsScanNode::num_scanners_codegen_enabled_</a></div><div class="ttdeci">AtomicInt&lt; int &gt; num_scanners_codegen_enabled_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00379">hdfs-scan-node.h:379</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_afc4101dbe061d2baf01e663bf0827666"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#afc4101dbe061d2baf01e663bf0827666">impala::HdfsScanNode::initial_ranges_issued_</a></div><div class="ttdeci">bool initial_ranges_issued_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00307">hdfs-scan-node.h:307</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a7d8305f32b9409b04ca086475a4571d4"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a7d8305f32b9409b04ca086475a4571d4">impala::HdfsScanNode::TransferToScanNodePool</a></div><div class="ttdeci">void TransferToScanNodePool(MemPool *pool)</div><div class="ttdoc">Acquires all allocations from pool into scan_node_pool_. Thread-safe. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00299">hdfs-scan-node.cc:299</a></div></div>
<div class="ttc" id="container-util_8h_html"><div class="ttname"><a href="container-util_8h.html">container-util.h</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a8e5bc2dfac6a939e33916170d3bd0ce9"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a8e5bc2dfac6a939e33916170d3bd0ce9">impala::HdfsScanNode::metadata_lock_</a></div><div class="ttdeci">boost::mutex metadata_lock_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00355">hdfs-scan-node.h:355</a></div></div>
<div class="ttc" id="hdfs-scan-node_8cc_html_a517de9796fa99112cd8158a3a494661c"><div class="ttname"><a href="hdfs-scan-node_8cc.html#a517de9796fa99112cd8158a3a494661c">DEFINE_int32</a></div><div class="ttdeci">DEFINE_int32(max_row_batches, 0,&quot;the maximum size of materialized_row_batches_&quot;)</div></div>
<div class="ttc" id="classimpala_1_1RuntimeProfile_html_a91cce4e3e109922a077cb84a9f6925f2"><div class="ttname"><a href="classimpala_1_1RuntimeProfile.html#a91cce4e3e109922a077cb84a9f6925f2">impala::RuntimeProfile::AddHighWaterMarkCounter</a></div><div class="ttdeci">HighWaterMarkCounter * AddHighWaterMarkCounter(const std::string &amp;name, TUnit::type unit, const std::string &amp;parent_counter_name=&quot;&quot;)</div></div>
<div class="ttc" id="classimpala_1_1DescriptorTbl_html_a3fe0c1eb403f8ad5197b3bd872d6cd90"><div class="ttname"><a href="classimpala_1_1DescriptorTbl.html#a3fe0c1eb403f8ad5197b3bd872d6cd90">impala::DescriptorTbl::GetSlotDescriptor</a></div><div class="ttdeci">SlotDescriptor * GetSlotDescriptor(SlotId id) const </div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8cc_source.html#l00447">descriptors.cc:447</a></div></div>
<div class="ttc" id="hdfs-scan-node_8cc_html_a35626c2b2a98e3c681d17336ebec72e5"><div class="ttname"><a href="hdfs-scan-node_8cc.html#a35626c2b2a98e3c681d17336ebec72e5">SCANNER_THREAD_MEM_USAGE</a></div><div class="ttdeci">const int SCANNER_THREAD_MEM_USAGE</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00072">hdfs-scan-node.cc:72</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_afb5d90596e4547f8773cd65fb6badccf"><div class="ttname"><a href="classimpala_1_1ScanNode.html#afb5d90596e4547f8773cd65fb6badccf">impala::ScanNode::total_throughput_counter</a></div><div class="ttdeci">RuntimeProfile::Counter * total_throughput_counter() const </div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00098">scan-node.h:98</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsSequenceScanner_html_a564d7db2b7e0d8e9409d930efc6f4335"><div class="ttname"><a href="classimpala_1_1HdfsSequenceScanner.html#a564d7db2b7e0d8e9409d930efc6f4335">impala::HdfsSequenceScanner::Codegen</a></div><div class="ttdeci">static llvm::Function * Codegen(HdfsScanNode *, const std::vector&lt; ExprContext * &gt; &amp;conjunct_ctxs)</div><div class="ttdoc">Codegen writing tuples and evaluating predicates. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-sequence-scanner_8cc_source.html#l00050">hdfs-sequence-scanner.cc:50</a></div></div>
<div class="ttc" id="structimpala_1_1HdfsFileDesc_html_a513879a3999adaee5fbde411757e3703"><div class="ttname"><a href="structimpala_1_1HdfsFileDesc.html#a513879a3999adaee5fbde411757e3703">impala::HdfsFileDesc::splits</a></div><div class="ttdeci">std::vector&lt; DiskIoMgr::ScanRange * &gt; splits</div><div class="ttdoc">Splits (i.e. raw byte ranges) for this file, assigned to this scan node. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00070">hdfs-scan-node.h:70</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_a1d1b000a66d4456365e4f9fbf6cb896f"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#a1d1b000a66d4456365e4f9fbf6cb896f">impala::DiskIoMgr::unexpected_remote_bytes</a></div><div class="ttdeci">int64_t unexpected_remote_bytes(RequestContext *reader) const </div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8cc_source.html#l00436">disk-io-mgr.cc:436</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a5314b840efa7625e54ce930ee1986bb1"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a5314b840efa7625e54ce930ee1986bb1">impala::HdfsScanNode::AllocateScanRange</a></div><div class="ttdeci">DiskIoMgr::ScanRange * AllocateScanRange(hdfsFS fs, const char *file, int64_t len, int64_t offset, int64_t partition_id, int disk_id, bool try_cache, bool expected_local, int64_t mtime)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00183">hdfs-scan-node.cc:183</a></div></div>
<div class="ttc" id="classimpala_1_1Status_html_a580565665ea944eb64f3f495b1bee1e0"><div class="ttname"><a href="classimpala_1_1Status.html#a580565665ea944eb64f3f495b1bee1e0">impala::Status::OK</a></div><div class="ttdeci">static const Status OK</div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00087">status.h:87</a></div></div>
<div class="ttc" id="classimpala_1_1QueryResourceMgr_html_a6fbd0b722ff0c7ac21a965fabcadebf0"><div class="ttname"><a href="classimpala_1_1QueryResourceMgr.html#a6fbd0b722ff0c7ac21a965fabcadebf0">impala::QueryResourceMgr::NotifyThreadUsageChange</a></div><div class="ttdeci">void NotifyThreadUsageChange(int delta)</div><div class="ttdef"><b>Definition:</b> <a href="query-resource-mgr_8cc_source.html#l00140">query-resource-mgr.cc:140</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html_a84919e79b92f9fd3afe579ee65e01f65"><div class="ttname"><a href="classimpala_1_1RuntimeState.html#a84919e79b92f9fd3afe579ee65e01f65">impala::RuntimeState::reader_contexts</a></div><div class="ttdeci">std::vector&lt; DiskIoMgr::RequestContext * &gt; * reader_contexts()</div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8h_source.html#l00145">runtime-state.h:145</a></div></div>
<div class="ttc" id="classimpala_1_1ThreadGroup_html_ad0145811920efe164c7caa768cacb05f"><div class="ttname"><a href="classimpala_1_1ThreadGroup.html#ad0145811920efe164c7caa768cacb05f">impala::ThreadGroup::SetCgroupsMgr</a></div><div class="ttdeci">void SetCgroupsMgr(CgroupsMgr *cgroups_mgr)</div><div class="ttdef"><b>Definition:</b> <a href="thread_8h_source.html#l00186">thread.h:186</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_ac55aaa21c7750fd5f8774aee1ac5211a"><div class="ttname"><a href="classimpala_1_1ExecNode.html#ac55aaa21c7750fd5f8774aee1ac5211a">impala::ExecNode::pool_</a></div><div class="ttdeci">ObjectPool * pool_</div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8h_source.html#l00211">exec-node.h:211</a></div></div>
<div class="ttc" id="classimpala_1_1ThreadGroup_html_a904906f6e646b111636c937a0d58b4f3"><div class="ttname"><a href="classimpala_1_1ThreadGroup.html#a904906f6e646b111636c937a0d58b4f3">impala::ThreadGroup::AddThread</a></div><div class="ttdeci">Status AddThread(Thread *thread)</div><div class="ttdef"><b>Definition:</b> <a href="thread_8cc_source.html#l00318">thread.cc:318</a></div></div>
<div class="ttc" id="classimpala_1_1QueryResourceMgr_html_a47ef4439f5e58096de5403ffe66f7ae7"><div class="ttname"><a href="classimpala_1_1QueryResourceMgr.html#a47ef4439f5e58096de5403ffe66f7ae7">impala::QueryResourceMgr::IsVcoreOverSubscribed</a></div><div class="ttdeci">bool IsVcoreOverSubscribed()</div><div class="ttdef"><b>Definition:</b> <a href="query-resource-mgr_8h_source.html#l00110">query-resource-mgr.h:110</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_ab1628dc30ae6fb5ee939dab75a9a3188"><div class="ttname"><a href="classimpala_1_1ScanNode.html#ab1628dc30ae6fb5ee939dab75a9a3188">impala::ScanNode::TOTAL_HDFS_READ_TIMER</a></div><div class="ttdeci">static const std::string TOTAL_HDFS_READ_TIMER</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00123">scan-node.h:123</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanner_html"><div class="ttname"><a href="classimpala_1_1HdfsScanner.html">impala::HdfsScanner</a></div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scanner_8h_source.html#l00091">hdfs-scanner.h:91</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_html_a9f81e48ed3492b090a38a8ac9d90cc97"><div class="ttname"><a href="classimpala_1_1DiskIoMgr.html#a9f81e48ed3492b090a38a8ac9d90cc97">impala::DiskIoMgr::set_read_timer</a></div><div class="ttdeci">void set_read_timer(RequestContext *, RuntimeProfile::Counter *)</div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8cc_source.html#l00389">disk-io-mgr.cc:389</a></div></div>
<div class="ttc" id="partitioning-throughput-test_8cc_html_ad172ecfd5c31c5df6282c2b4bc322bf7"><div class="ttname"><a href="partitioning-throughput-test_8cc.html#ad172ecfd5c31c5df6282c2b4bc322bf7">offset</a></div><div class="ttdeci">uint8_t offset[7 *64-sizeof(uint64_t)]</div><div class="ttdef"><b>Definition:</b> <a href="partitioning-throughput-test_8cc_source.html#l00037">partitioning-throughput-test.cc:37</a></div></div>
<div class="ttc" id="mem-pool_8h_html"><div class="ttname"><a href="mem-pool_8h.html">mem-pool.h</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsPartitionDescriptor_html"><div class="ttname"><a href="classimpala_1_1HdfsPartitionDescriptor.html">impala::HdfsPartitionDescriptor</a></div><div class="ttdoc">Metadata for a single partition inside an Hdfs table. </div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8h_source.html#l00177">descriptors.h:177</a></div></div>
<div class="ttc" id="classimpala_1_1ThreadGroup_html_a3a126bacbbb2ae42bcb86494287a6a2f"><div class="ttname"><a href="classimpala_1_1ThreadGroup.html#a3a126bacbbb2ae42bcb86494287a6a2f">impala::ThreadGroup::JoinAll</a></div><div class="ttdeci">void JoinAll()</div><div class="ttdef"><b>Definition:</b> <a href="thread_8cc_source.html#l00327">thread.cc:327</a></div></div>
<div class="ttc" id="names_8h_html"><div class="ttname"><a href="names_8h.html">names.h</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsAvroScanner_html_a7432843919e4a757141788dda34e4ffb"><div class="ttname"><a href="classimpala_1_1HdfsAvroScanner.html#a7432843919e4a757141788dda34e4ffb">impala::HdfsAvroScanner::Codegen</a></div><div class="ttdeci">static llvm::Function * Codegen(HdfsScanNode *, const std::vector&lt; ExprContext * &gt; &amp;conjunct_ctxs)</div><div class="ttdoc">Codegen parsing records, writing tuples and evaluating predicates. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-avro-scanner_8cc_source.html#l00083">hdfs-avro-scanner.cc:83</a></div></div>
<div class="ttc" id="classimpala_1_1ObjectPool_html_ab191078c99825682a0a9915ca1e0c05c"><div class="ttname"><a href="classimpala_1_1ObjectPool.html#ab191078c99825682a0a9915ca1e0c05c">impala::ObjectPool::Add</a></div><div class="ttdeci">T * Add(T *t)</div><div class="ttdef"><b>Definition:</b> <a href="object-pool_8h_source.html#l00042">object-pool.h:42</a></div></div>
<div class="ttc" id="classimpala_1_1Expr_html_a6b9c01a432ae49b57482c9fc42a73681"><div class="ttname"><a href="classimpala_1_1Expr.html#a6b9c01a432ae49b57482c9fc42a73681">impala::Expr::CreateExprTrees</a></div><div class="ttdeci">static Status CreateExprTrees(ObjectPool *pool, const std::vector&lt; TExpr &gt; &amp;texprs, std::vector&lt; ExprContext * &gt; *ctxs)</div><div class="ttdef"><b>Definition:</b> <a href="expr_8cc_source.html#l00149">expr.cc:149</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a9c972b92951c67686c0783ca2c554d2d"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a9c972b92951c67686c0783ca2c554d2d">impala::HdfsScanNode::bytes_read_short_circuit_</a></div><div class="ttdeci">RuntimeProfile::Counter * bytes_read_short_circuit_</div><div class="ttdoc">Total number of bytes read via short circuit read. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00393">hdfs-scan-node.h:393</a></div></div>
<div class="ttc" id="runtime-profile_8h_html_ac317f1ef5aa8fbee526b72d4863a9b2c"><div class="ttname"><a href="runtime-profile_8h.html#ac317f1ef5aa8fbee526b72d4863a9b2c">SCOPED_THREAD_COUNTER_MEASUREMENT</a></div><div class="ttdeci">#define SCOPED_THREAD_COUNTER_MEASUREMENT(c)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00058">runtime-profile.h:58</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsTableDescriptor_html_a1fc0bcb239a6f2a6489cf0bc67f00647"><div class="ttname"><a href="classimpala_1_1HdfsTableDescriptor.html#a1fc0bcb239a6f2a6489cf0bc67f00647">impala::HdfsTableDescriptor::GetPartition</a></div><div class="ttdeci">HdfsPartitionDescriptor * GetPartition(int64_t partition_id) const </div><div class="ttdef"><b>Definition:</b> <a href="descriptors_8h_source.html#l00238">descriptors.h:238</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_ab1601b1dfcbb9cd167064ed90c258b1f"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#ab1601b1dfcbb9cd167064ed90c258b1f">impala::HdfsScanNode::reader_context_</a></div><div class="ttdeci">DiskIoMgr::RequestContext * reader_context_</div><div class="ttdoc">RequestContext object to use with the disk-io-mgr for reads. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00280">hdfs-scan-node.h:280</a></div></div>
<div class="ttc" id="classimpala_1_1Expr_html_a3ae02e50debba50ac5c7b6dd9f8016e7"><div class="ttname"><a href="classimpala_1_1Expr.html#a3ae02e50debba50ac5c7b6dd9f8016e7">impala::Expr::Prepare</a></div><div class="ttdeci">static Status Prepare(const std::vector&lt; ExprContext * &gt; &amp;ctxs, RuntimeState *state, const RowDescriptor &amp;row_desc, MemTracker *tracker)</div></div>
<div class="ttc" id="classimpala_1_1RuntimeProfile_1_1Counter_html_accee494361b71d610dea9b639e19a285"><div class="ttname"><a href="classimpala_1_1RuntimeProfile_1_1Counter.html#accee494361b71d610dea9b639e19a285">impala::RuntimeProfile::Counter::Add</a></div><div class="ttdeci">virtual void Add(int64_t delta)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-profile_8h_source.html#l00093">runtime-profile.h:93</a></div></div>
<div class="ttc" id="classimpala_1_1ScannerContext_html_ae48c238dd876d84b8dc268d684995872"><div class="ttname"><a href="classimpala_1_1ScannerContext.html#ae48c238dd876d84b8dc268d684995872">impala::ScannerContext::GetStream</a></div><div class="ttdeci">Stream * GetStream(int idx=0)</div><div class="ttdef"><b>Definition:</b> <a href="scanner-context_8h_source.html#l00246">scanner-context.h:246</a></div></div>
<div class="ttc" id="disk-info_8h_html"><div class="ttname"><a href="disk-info_8h.html">disk-info.h</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_ae95ad9baabf5949f80050506af7478b2"><div class="ttname"><a href="classimpala_1_1ScanNode.html#ae95ad9baabf5949f80050506af7478b2">impala::ScanNode::average_scanner_thread_concurrency_</a></div><div class="ttdeci">RuntimeProfile::Counter * average_scanner_thread_concurrency_</div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00161">scan-node.h:161</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a2ad7c54dcd92214281f21a2c7b524f9a"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a2ad7c54dcd92214281f21a2c7b524f9a">impala::ScanNode::bytes_read_timeseries_counter_</a></div><div class="ttdeci">RuntimeProfile::TimeSeriesCounter * bytes_read_timeseries_counter_</div><div class="ttdoc">Time series of the bytes_read_counter_. </div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00142">scan-node.h:142</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_a0e9b5636a80c8fe8c2ab31990c84ff51"><div class="ttname"><a href="classimpala_1_1ExecNode.html#a0e9b5636a80c8fe8c2ab31990c84ff51">impala::ExecNode::Open</a></div><div class="ttdeci">virtual Status Open(RuntimeState *state)</div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8cc_source.html#l00154">exec-node.cc:154</a></div></div>
<div class="ttc" id="hdfs-avro-scanner_8h_html"><div class="ttname"><a href="hdfs-avro-scanner_8h.html">hdfs-avro-scanner.h</a></div></div>
<div class="ttc" id="classimpala_1_1Status_html_a95ba859e42fe93445b340533220836ac"><div class="ttname"><a href="classimpala_1_1Status.html#a95ba859e42fe93445b340533220836ac">impala::Status::ok</a></div><div class="ttdeci">bool ok() const </div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00172">status.h:172</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_aa642d2e5f805e720e724bfa3dce1bc81"><div class="ttname"><a href="classimpala_1_1ScanNode.html#aa642d2e5f805e720e724bfa3dce1bc81">impala::ScanNode::scan_range_params_</a></div><div class="ttdeci">const std::vector&lt; TScanRangeParams &gt; * scan_range_params_</div><div class="ttdoc">The scan ranges this scan node is responsible for. Not owned. </div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00138">scan-node.h:138</a></div></div>
<div class="ttc" id="classimpala_1_1ImpaladMetrics_html_ac15afb178b5e5d2a07c39614c5f58b1c"><div class="ttname"><a href="classimpala_1_1ImpaladMetrics.html#ac15afb178b5e5d2a07c39614c5f58b1c">impala::ImpaladMetrics::IO_MGR_LOCAL_BYTES_READ</a></div><div class="ttdeci">static IntGauge * IO_MGR_LOCAL_BYTES_READ</div><div class="ttdef"><b>Definition:</b> <a href="impalad-metrics_8h_source.html#l00144">impalad-metrics.h:144</a></div></div>
<div class="ttc" id="base-sequence-scanner_8h_html"><div class="ttname"><a href="base-sequence-scanner_8h.html">base-sequence-scanner.h</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html_af7ae71c3035ca00d0fd290b580a4ad04"><div class="ttname"><a href="classimpala_1_1RuntimeState.html#af7ae71c3035ca00d0fd290b580a4ad04">impala::RuntimeState::resource_pool</a></div><div class="ttdeci">ThreadResourceMgr::ResourcePool * resource_pool()</div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8h_source.html#l00142">runtime-state.h:142</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html_a5e664a4e409bd8e13916e138a9b6e4a9"><div class="ttname"><a href="classimpala_1_1RuntimeState.html#a5e664a4e409bd8e13916e138a9b6e4a9">impala::RuntimeState::io_mgr</a></div><div class="ttdeci">DiskIoMgr * io_mgr()</div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8h_source.html#l00139">runtime-state.h:139</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsParquetScanner_html_a991508a8484c9c5a744194c6e6795f41"><div class="ttname"><a href="classimpala_1_1HdfsParquetScanner.html#a991508a8484c9c5a744194c6e6795f41">impala::HdfsParquetScanner::IssueInitialRanges</a></div><div class="ttdeci">static Status IssueInitialRanges(HdfsScanNode *scan_node, const std::vector&lt; HdfsFileDesc * &gt; &amp;files)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-parquet-scanner_8cc_source.html#l00083">hdfs-parquet-scanner.cc:83</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_a726e2aca524ace8e4c043377e621285a"><div class="ttname"><a href="classimpala_1_1ExecNode.html#a726e2aca524ace8e4c043377e621285a">impala::ExecNode::Close</a></div><div class="ttdeci">virtual void Close(RuntimeState *state)</div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8cc_source.html#l00166">exec-node.cc:166</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a127b325a03028a354511580f11bba31d"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a127b325a03028a354511580f11bba31d">impala::HdfsScanNode::path_to_materialized_slot_idx_</a></div><div class="ttdeci">PathToSlotIdxMap path_to_materialized_slot_idx_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00332">hdfs-scan-node.h:332</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_ad901cf20831c82d3e4de0b57be69b2bf"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#ad901cf20831c82d3e4de0b57be69b2bf">impala::HdfsScanNode::hdfs_table_</a></div><div class="ttdeci">const HdfsTableDescriptor * hdfs_table_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00287">hdfs-scan-node.h:287</a></div></div>
<div class="ttc" id="classimpala_1_1RuntimeState_html_ab48a114e1a7954c40af4828b6d4b472b"><div class="ttname"><a href="classimpala_1_1RuntimeState.html#ab48a114e1a7954c40af4828b6d4b472b">impala::RuntimeState::total_cpu_timer</a></div><div class="ttdeci">RuntimeProfile::Counter * total_cpu_timer()</div><div class="ttdef"><b>Definition:</b> <a href="runtime-state_8h_source.html#l00238">runtime-state.h:238</a></div></div>
<div class="ttc" id="descriptors_8h_html"><div class="ttname"><a href="descriptors_8h.html">descriptors.h</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a854c00138aabd7ca7774d4d67a594d3a"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a854c00138aabd7ca7774d4d67a594d3a">impala::ScanNode::active_hdfs_read_thread_counter_</a></div><div class="ttdeci">RuntimeProfile::Counter active_hdfs_read_thread_counter_</div><div class="ttdoc">The number of active hdfs reading threads reading for this node. </div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00164">scan-node.h:164</a></div></div>
<div class="ttc" id="classimpala_1_1ProgressUpdater_html_acb29adb59cd61fae67e36c70948742ae"><div class="ttname"><a href="classimpala_1_1ProgressUpdater.html#acb29adb59cd61fae67e36c70948742ae">impala::ProgressUpdater::remaining</a></div><div class="ttdeci">int64_t remaining() const </div><div class="ttdef"><b>Definition:</b> <a href="progress-updater_8h_source.html#l00056">progress-updater.h:56</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_adc5104041e8113d244f775b8fd7a7280"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#adc5104041e8113d244f775b8fd7a7280">impala::HdfsScanNode::PerVolumnStats</a></div><div class="ttdeci">boost::unordered_map&lt; int32_t, std::pair&lt; int, int64_t &gt; &gt; PerVolumnStats</div><div class="ttdoc">map from volume id to &lt;number of split, per volume split lengths&gt; </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00252">hdfs-scan-node.h:252</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_1_1ScanRange_html_a5866ae8c5fa197ec221cbd29c02536a5"><div class="ttname"><a href="classimpala_1_1DiskIoMgr_1_1ScanRange.html#a5866ae8c5fa197ec221cbd29c02536a5">impala::DiskIoMgr::ScanRange::meta_data</a></div><div class="ttdeci">void * meta_data() const </div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8h_source.html#l00312">disk-io-mgr.h:312</a></div></div>
<div class="ttc" id="classimpala_1_1ScanNode_html_a50f56df165715453106a2a60c5c96a2b"><div class="ttname"><a href="classimpala_1_1ScanNode.html#a50f56df165715453106a2a60c5c96a2b">impala::ScanNode::read_timer</a></div><div class="ttdeci">RuntimeProfile::Counter * read_timer() const </div><div class="ttdef"><b>Definition:</b> <a href="scan-node_8h_source.html#l00097">scan-node.h:97</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_acbd16700f4e92fdb1962a403bd85da27"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#acbd16700f4e92fdb1962a403bd85da27">impala::HdfsScanNode::num_skipped_tokens_</a></div><div class="ttdeci">AtomicInt&lt; int &gt; num_skipped_tokens_</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00375">hdfs-scan-node.h:375</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_ace07ac96df8e9b8ac2991c142cbc24c0"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#ace07ac96df8e9b8ac2991c142cbc24c0">impala::HdfsScanNode::Close</a></div><div class="ttdeci">virtual void Close(RuntimeState *state)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00622">hdfs-scan-node.cc:622</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a7d9631e3dbf9ec410699953759694890"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a7d9631e3dbf9ec410699953759694890">impala::HdfsScanNode::GetNext</a></div><div class="ttdeci">virtual Status GetNext(RuntimeState *state, RowBatch *row_batch, bool *eos)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00111">hdfs-scan-node.cc:111</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a396518f57c6ff5e8aada2bb100dfda3c"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a396518f57c6ff5e8aada2bb100dfda3c">impala::HdfsScanNode::InitTemplateTuple</a></div><div class="ttdeci">Tuple * InitTemplateTuple(RuntimeState *state, const std::vector&lt; ExprContext * &gt; &amp;value_ctxs)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00270">hdfs-scan-node.cc:270</a></div></div>
<div class="ttc" id="classimpala_1_1ThreadResourceMgr_1_1ResourcePool_html"><div class="ttname"><a href="classimpala_1_1ThreadResourceMgr_1_1ResourcePool.html">impala::ThreadResourceMgr::ResourcePool</a></div><div class="ttdef"><b>Definition:</b> <a href="thread-resource-mgr_8h_source.html#l00085">thread-resource-mgr.h:85</a></div></div>
<div class="ttc" id="classimpala_1_1DiskIoMgr_1_1ScanRange_html"><div class="ttname"><a href="classimpala_1_1DiskIoMgr_1_1ScanRange.html">impala::DiskIoMgr::ScanRange</a></div><div class="ttdef"><b>Definition:</b> <a href="disk-io-mgr_8h_source.html#l00295">disk-io-mgr.h:295</a></div></div>
<div class="ttc" id="logging_8h_html_ac976d11f99eb284f949261fcee44dffd"><div class="ttname"><a href="logging_8h.html#ac976d11f99eb284f949261fcee44dffd">VLOG_QUERY_IS_ON</a></div><div class="ttdeci">#define VLOG_QUERY_IS_ON</div><div class="ttdef"><b>Definition:</b> <a href="logging_8h_source.html#l00064">logging.h:64</a></div></div>
<div class="ttc" id="classimpala_1_1Status_html_a39b7bde73a8803e2ceaf3b97d0fe94eb"><div class="ttname"><a href="classimpala_1_1Status.html#a39b7bde73a8803e2ceaf3b97d0fe94eb">impala::Status::IsMemLimitExceeded</a></div><div class="ttdeci">bool IsMemLimitExceeded() const </div><div class="ttdef"><b>Definition:</b> <a href="status_8h_source.html#l00178">status.h:178</a></div></div>
<div class="ttc" id="classimpala_1_1BitUtil_html_abc00200dd38a82d4735930ab9ed322d8"><div class="ttname"><a href="classimpala_1_1BitUtil.html#abc00200dd38a82d4735930ab9ed322d8">impala::BitUtil::Popcount</a></div><div class="ttdeci">static int Popcount(uint64_t x)</div><div class="ttdoc">Returns the number of set bits in x. </div><div class="ttdef"><b>Definition:</b> <a href="bit-util_8h_source.html#l00116">bit-util.h:116</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanner_html_a99165297c6e6546edbee741a54dfd194"><div class="ttname"><a href="classimpala_1_1HdfsScanner.html#a99165297c6e6546edbee741a54dfd194">impala::HdfsScanner::Prepare</a></div><div class="ttdeci">virtual Status Prepare(ScannerContext *context)</div><div class="ttdoc">One-time initialisation of state that is constant across scan ranges. </div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scanner_8cc_source.html#l00071">hdfs-scanner.cc:71</a></div></div>
<div class="ttc" id="structimpala_1_1HdfsFileDesc_html"><div class="ttname"><a href="structimpala_1_1HdfsFileDesc.html">impala::HdfsFileDesc</a></div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8h_source.html#l00053">hdfs-scan-node.h:53</a></div></div>
<div class="ttc" id="classimpala_1_1PeriodicCounterUpdater_html_a88241faa992a1e97b670e9a67ab99032"><div class="ttname"><a href="classimpala_1_1PeriodicCounterUpdater.html#a88241faa992a1e97b670e9a67ab99032">impala::PeriodicCounterUpdater::StopTimeSeriesCounter</a></div><div class="ttdeci">static void StopTimeSeriesCounter(RuntimeProfile::TimeSeriesCounter *counter)</div><div class="ttdoc">Stops &#39;counter&#39; from receiving any more samples. </div><div class="ttdef"><b>Definition:</b> <a href="periodic-counter-updater_8cc_source.html#l00122">periodic-counter-updater.cc:122</a></div></div>
<div class="ttc" id="classimpala_1_1ExecNode_html_ad062f28c78add1a869fffdab9419b09d"><div class="ttname"><a href="classimpala_1_1ExecNode.html#ad062f28c78add1a869fffdab9419b09d">impala::ExecNode::runtime_profile</a></div><div class="ttdeci">RuntimeProfile * runtime_profile()</div><div class="ttdef"><b>Definition:</b> <a href="exec-node_8h_source.html#l00161">exec-node.h:161</a></div></div>
<div class="ttc" id="classimpala_1_1ProgressUpdater_html_a3e05b2a32fd1bdf32d2a275c10fc431f"><div class="ttname"><a href="classimpala_1_1ProgressUpdater.html#a3e05b2a32fd1bdf32d2a275c10fc431f">impala::ProgressUpdater::Update</a></div><div class="ttdeci">void Update(int64_t delta)</div><div class="ttdef"><b>Definition:</b> <a href="progress-updater_8cc_source.html#l00034">progress-updater.cc:34</a></div></div>
<div class="ttc" id="classimpala_1_1HdfsScanNode_html_a8b07275398efab777795acbc34b3fd17"><div class="ttname"><a href="classimpala_1_1HdfsScanNode.html#a8b07275398efab777795acbc34b3fd17">impala::HdfsScanNode::GetConjunctCtxs</a></div><div class="ttdeci">Status GetConjunctCtxs(std::vector&lt; ExprContext * &gt; *ctxs)</div><div class="ttdef"><b>Definition:</b> <a href="hdfs-scan-node_8cc_source.html#l00692">hdfs-scan-node.cc:692</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e5d120be6b5e8a44336cbfd013b25604.html">be</a></li><li class="navelem"><a class="el" href="dir_68cf7cafb51a962d5bc4848b83cab0de.html">src</a></li><li class="navelem"><a class="el" href="dir_479336c0a15f2c0737bcafcf969f884c.html">exec</a></li><li class="navelem"><a class="el" href="hdfs-scan-node_8cc.html">hdfs-scan-node.cc</a></li>
    <li class="footer">Generated on Thu May 7 2015 16:10:35 for Impala by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
